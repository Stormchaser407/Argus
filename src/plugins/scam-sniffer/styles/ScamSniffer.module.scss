/**
 * Project Argus — Scam Sniffer Styles
 * Follows telegram-tt's design language with investigative-grade visual cues.
 */

/* ─── Color Variables ─────────────────────────────────────────────────────── */

:root {
  --argus-safe: #16a34a;
  --argus-low: #2563eb;
  --argus-medium: #d97706;
  --argus-high: #ea580c;
  --argus-critical: #dc2626;
  --argus-bg-warning: rgba(217, 119, 6, 0.08);
  --argus-bg-danger: rgba(220, 38, 38, 0.08);
  --argus-bg-safe: rgba(22, 163, 74, 0.08);
  --argus-border-warning: rgba(217, 119, 6, 0.3);
  --argus-border-danger: rgba(220, 38, 38, 0.3);
  --argus-panel-bg: var(--color-background);
  --argus-card-bg: var(--color-background-secondary, #f8f9fa);
}

/* ─── Inline Wallet Warning ───────────────────────────────────────────────── */

.walletWarning {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  margin: 2px 0;
  border-radius: 6px;
  font-size: 0.8125rem;
  line-height: 1.4;
  cursor: pointer;
  transition: background-color 0.15s ease;

  &.safe {
    background: var(--argus-bg-safe);
    border: 1px solid rgba(22, 163, 74, 0.2);
    color: var(--argus-safe);
  }

  &.flagged {
    background: var(--argus-bg-danger);
    border: 1px solid var(--argus-border-danger);
    color: var(--argus-critical);
  }

  &.unchecked {
    background: rgba(107, 114, 128, 0.08);
    border: 1px solid rgba(107, 114, 128, 0.2);
    color: #6b7280;
  }

  &:hover {
    filter: brightness(0.95);
  }
}

.walletIcon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.walletAddress {
  font-family: 'Roboto Mono', monospace;
  font-size: 0.75rem;
  opacity: 0.9;
}

.walletChain {
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  opacity: 0.7;
}

.walletReports {
  font-size: 0.6875rem;
  font-weight: 600;
}

/* ─── Wallet Detail Tooltip ───────────────────────────────────────────────── */

.walletTooltip {
  position: absolute;
  z-index: 1000;
  background: var(--color-background);
  border: 1px solid var(--color-borders);
  border-radius: 12px;
  padding: 12px;
  min-width: 260px;
  max-width: 340px;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12);
  font-size: 0.8125rem;
  line-height: 1.5;
}

.tooltipHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--color-borders);
}

.tooltipRiskScore {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  font-size: 0.875rem;
  font-weight: 700;
  color: white;

  &.low { background: var(--argus-safe); }
  &.medium { background: var(--argus-medium); }
  &.high { background: var(--argus-high); }
  &.critical { background: var(--argus-critical); }
}

.tooltipRow {
  display: flex;
  justify-content: space-between;
  padding: 3px 0;

  .label {
    color: var(--color-text-secondary);
    font-size: 0.75rem;
  }

  .value {
    font-weight: 500;
    font-size: 0.75rem;
  }
}

/* ─── Inline Link Warning Overlay ─────────────────────────────────────────── */

.linkWarningOverlay {
  position: relative;
  display: inline;
}

.linkWarningBadge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 1px 6px;
  margin-left: 4px;
  border-radius: 4px;
  font-size: 0.6875rem;
  font-weight: 600;
  vertical-align: middle;
  cursor: pointer;

  &.warning {
    background: var(--argus-bg-warning);
    color: var(--argus-medium);
    border: 1px solid var(--argus-border-warning);
  }

  &.danger {
    background: var(--argus-bg-danger);
    color: var(--argus-critical);
    border: 1px solid var(--argus-border-danger);
  }
}

.linkWarningPanel {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 0;
  z-index: 1000;
  background: var(--color-background);
  border: 1px solid var(--argus-border-danger);
  border-radius: 12px;
  padding: 12px;
  min-width: 280px;
  max-width: 360px;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);

  .panelTitle {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--argus-critical);
    margin-bottom: 8px;
  }

  .panelChecks {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 8px;
  }

  .checkItem {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: 6px;
    background: rgba(0, 0, 0, 0.03);

    .checkIcon {
      width: 14px;
      height: 14px;
      flex-shrink: 0;
    }

    &.flagged {
      color: var(--argus-critical);
      background: var(--argus-bg-danger);
    }

    &.clean {
      color: var(--argus-safe);
    }

    &.unavailable {
      color: #9ca3af;
    }
  }

  .panelActions {
    display: flex;
    gap: 8px;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--color-borders);
  }

  .panelButton {
    flex: 1;
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    font-size: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.15s;

    &:hover {
      opacity: 0.85;
    }

    &.proceed {
      background: rgba(107, 114, 128, 0.1);
      color: var(--color-text-secondary);
    }

    &.block {
      background: var(--argus-critical);
      color: white;
    }
  }
}

/* ─── Trust Score Badge ───────────────────────────────────────────────────── */

.trustBadge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 0.6875rem;
  font-weight: 600;
  line-height: 1.4;
  white-space: nowrap;

  &.trusted {
    background: var(--argus-bg-safe);
    color: var(--argus-safe);
  }

  &.normal {
    background: rgba(37, 99, 235, 0.08);
    color: var(--argus-low);
  }

  &.suspicious {
    background: var(--argus-bg-warning);
    color: var(--argus-medium);
  }

  &.highRisk {
    background: rgba(234, 88, 12, 0.08);
    color: var(--argus-high);
  }

  &.criticalRisk {
    background: var(--argus-bg-danger);
    color: var(--argus-critical);
  }
}

.trustBadgeIcon {
  font-size: 0.75rem;
}

/* ─── Scam Sniffer Dashboard ─────────────────────────────────────────────── */

.dashboard {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--argus-panel-bg);
  overflow: hidden;
}

.dashboardHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-borders);

  h2 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .headerActions {
    display: flex;
    gap: 8px;
  }
}

.dashboardTabs {
  display: flex;
  border-bottom: 1px solid var(--color-borders);
  padding: 0 20px;
}

.dashboardTab {
  padding: 10px 16px;
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.15s ease;

  &:hover {
    color: var(--color-text);
  }

  &.active {
    color: var(--color-primary);
    border-bottom-color: var(--color-primary);
  }
}

.dashboardContent {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
}

/* ─── Stats Cards ─────────────────────────────────────────────────────────── */

.statsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin-bottom: 20px;
}

.statCard {
  background: var(--argus-card-bg);
  border-radius: 12px;
  padding: 14px;
  text-align: center;

  .statValue {
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1.2;
  }

  .statLabel {
    font-size: 0.6875rem;
    color: var(--color-text-secondary);
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
  }

  &.threats .statValue { color: var(--argus-critical); }
  &.wallets .statValue { color: var(--argus-high); }
  &.links .statValue { color: var(--argus-medium); }
  &.patterns .statValue { color: var(--argus-low); }
}

/* ─── Threat Log ──────────────────────────────────────────────────────────── */

.threatList {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.threatEntry {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 12px;
  background: var(--argus-card-bg);
  border-radius: 10px;
  border-left: 3px solid transparent;
  transition: background-color 0.15s;

  &:hover {
    background: rgba(0, 0, 0, 0.04);
  }

  &.low { border-left-color: var(--argus-low); }
  &.medium { border-left-color: var(--argus-medium); }
  &.high { border-left-color: var(--argus-high); }
  &.critical { border-left-color: var(--argus-critical); }
  &.falsePositive { opacity: 0.5; border-left-color: #9ca3af; }
}

.threatIcon {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.875rem;
  flex-shrink: 0;

  &.wallet { background: rgba(234, 88, 12, 0.1); }
  &.link { background: rgba(220, 38, 38, 0.1); }
  &.pattern { background: rgba(217, 119, 6, 0.1); }
  &.behavior { background: rgba(37, 99, 235, 0.1); }
}

.threatContent {
  flex: 1;
  min-width: 0;
}

.threatSummary {
  font-size: 0.8125rem;
  font-weight: 500;
  line-height: 1.4;
  word-break: break-word;
}

.threatMeta {
  display: flex;
  gap: 12px;
  margin-top: 4px;
  font-size: 0.6875rem;
  color: var(--color-text-secondary);
}

.threatActions {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.threatActionBtn {
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid var(--color-borders);
  background: transparent;
  font-size: 0.6875rem;
  cursor: pointer;
  color: var(--color-text-secondary);
  transition: all 0.15s;

  &:hover {
    background: rgba(0, 0, 0, 0.05);
    color: var(--color-text);
  }
}

/* ─── Settings Panel ──────────────────────────────────────────────────────── */

.settingsSection {
  margin-bottom: 24px;

  h3 {
    font-size: 0.875rem;
    font-weight: 600;
    margin: 0 0 12px;
    color: var(--color-text);
  }
}

.settingRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 0;

  .settingLabel {
    font-size: 0.8125rem;
    color: var(--color-text);
  }

  .settingDescription {
    font-size: 0.6875rem;
    color: var(--color-text-secondary);
    margin-top: 2px;
  }
}

/* ─── Toggle Switch ───────────────────────────────────────────────────────── */

.toggle {
  position: relative;
  width: 40px;
  height: 22px;
  flex-shrink: 0;

  input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    border-radius: 22px;
    transition: 0.2s;

    &::before {
      position: absolute;
      content: '';
      height: 16px;
      width: 16px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      border-radius: 50%;
      transition: 0.2s;
    }
  }

  input:checked + .slider {
    background-color: var(--color-primary);
  }

  input:checked + .slider::before {
    transform: translateX(18px);
  }
}

/* ─── API Status Indicators ───────────────────────────────────────────────── */

.apiStatus {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 0.75rem;
  font-weight: 500;

  &.configured {
    background: var(--argus-bg-safe);
    color: var(--argus-safe);
  }

  &.notConfigured {
    background: rgba(107, 114, 128, 0.08);
    color: #6b7280;
  }
}

.apiStatusDot {
  width: 6px;
  height: 6px;
  border-radius: 50%;

  &.active { background: var(--argus-safe); }
  &.inactive { background: #9ca3af; }
}

/* ─── Empty State ─────────────────────────────────────────────────────────── */

.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
  color: var(--color-text-secondary);

  .emptyIcon {
    font-size: 2.5rem;
    margin-bottom: 12px;
    opacity: 0.4;
  }

  .emptyTitle {
    font-size: 0.9375rem;
    font-weight: 600;
    margin-bottom: 4px;
    color: var(--color-text);
  }

  .emptyDescription {
    font-size: 0.8125rem;
    max-width: 280px;
  }
}

/* ─── Sensitivity Selector ────────────────────────────────────────────────── */

.sensitivitySelector {
  display: flex;
  gap: 4px;
  background: var(--argus-card-bg);
  border-radius: 8px;
  padding: 2px;
}

.sensitivityOption {
  padding: 4px 12px;
  border-radius: 6px;
  border: none;
  background: transparent;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  color: var(--color-text-secondary);
  transition: all 0.15s;

  &.active {
    background: var(--color-primary);
    color: white;
  }

  &:hover:not(.active) {
    background: rgba(0, 0, 0, 0.05);
  }
}

/* ─── Message Scan Indicator ──────────────────────────────────────────────── */

.messageScanIndicator {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  margin-top: 4px;
  border-radius: 6px;
  font-size: 0.6875rem;
  font-weight: 500;

  &.safe {
    background: var(--argus-bg-safe);
    color: var(--argus-safe);
  }

  &.warning {
    background: var(--argus-bg-warning);
    color: var(--argus-medium);
  }

  &.danger {
    background: var(--argus-bg-danger);
    color: var(--argus-critical);
  }
}
