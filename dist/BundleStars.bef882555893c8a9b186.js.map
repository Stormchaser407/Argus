{"version":3,"file":"BundleStars.bef882555893c8a9b186.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAE2F;AACa;AACZ;AACD;AACyB;AACD;AAChB;AACxB;AAC8B;AACjB;AACW;AACL;AAC0B;AACvB;AACA;AACM;AACE;AACQ;AACc;AACV;AACxB;AACS;AACF;AACA;AACc;AACG;AACd;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;AC7B1C;AACZ;AAM6B;AACpB;AACQ;AACI;AACT;AAEZ;AACgB;AACV;AAEV;AAAA;AAUzC,MAAMiD,aAAa,GAAGA,CAAC;EACrBC,MAAM;EACNC,SAAS;EACTC,IAAI,EAAEC,QAAQ;EACdC,sBAAsB;EACtBC;AACQ,CAAC,KAAK;EACd,MAAM;IACJC,gBAAgB;IAChBC,iBAAiB;IACjBC,qBAAqB;IACrBC,gCAAgC;IAChCC,uBAAuB;IACvBC,cAAc;IACdC,qBAAqB;IACrBC,oBAAoB;IACpBC,mBAAmB;IACnBC;EACF,CAAC,GAAGjC,mDAAU,CAAC,CAAC;EAEhB,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EACtB,MAAM4B,OAAO,GAAG1B,6DAAU,CAAC,CAAC;EAE5B,MAAM2B,WAAW,GAAGf,QAAQ,IAAI,MAAM,IAAIA,QAAQ;EAClD,MAAMgB,SAAS,GAAGD,WAAW,GAAGf,QAAQ,GAAGiB,SAAS;EACpD,MAAMlB,IAAI,GAAGgB,WAAW,GAAGf,QAAQ,CAACD,IAAI,GAAGC,QAAQ;EAEnD,MAAMkB,kBAAkB,GAAGnB,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,GAAGpB,IAAI,CAACqB,IAAI,GAAGH,SAAS;EAClF,MAAMI,kBAAkB,GAAG3C,yDAAO,CAAC,MAAM;IACvC,IAAI,CAACwC,kBAAkB,EAAE,OAAOD,SAAS;IACzC,OAAO,GAAGpC,oDAAe,OAAOqC,kBAAkB,EAAE;EACtD,CAAC,EAAE,CAACA,kBAAkB,CAAC,CAAC;EACxB,MAAMI,qBAAqB,GAAG5C,yDAAO,CAAC,MAAM;IAC1C,IAAI,CAACwC,kBAAkB,EAAE,OAAOD,SAAS;IACzC,OAAOf,wBAAwB,EAAEqB,IAAI,CACnCC,MAAM,IACHA,MAAM,CAACL,IAAI,KAAK,aAAa,IAAIK,MAAM,CAACJ,IAAI,KAAKF,kBAAkB,CAAC;EAC3E,CAAC,EAAE,CAACA,kBAAkB,EAAEhB,wBAAwB,CAAC,CAAC;EAElD,MAAMuB,2BAA2B,GAAGxB,sBAAsB,EAAEkB,IAAI,KAAK,aAAa,GAC9ElB,sBAAsB,CAACmB,IAAI,GAAGH,SAAS;EAE3C,MAAMS,YAAY,GAAG3B,IAAI,IAAIA,IAAI,CAACoB,IAAI,KAAK,gBAAgB;EAC3D,MAAMQ,UAAU,GAAGD,YAAY,IAAID,2BAA2B,KAAK1B,IAAI,CAACqB,IAAI;EAC5E,MAAMQ,OAAO,GAAGN,qBAAqB,IAAI,CAACK,UAAU;EACpD,MAAME,eAAe,GAAGH,YAAY,GAAG3B,IAAI,CAAC+B,WAAW,GAAGb,SAAS;EAEnE,MAAMc,aAAa,GAAGjC,SAAS,IAAIkB,SAAS,IAAI,CAACA,SAAS,CAACgB,SAAS,IAAIN,YAAY;EAEpF,MAAMO,uBAAuB,GAAG9C,kEAAe,CAAC,MAAM;IACpD,MAAM;MAAE+C,SAAS;MAAEF;IAAU,CAAC,GAAGhB,SAAU;IAC3CN,oBAAoB,CAAC;MAAEX,IAAI,EAAEmC,SAAU;MAAEC,YAAY,EAAE,CAACH;IAAU,CAAC,CAAC;EACtE,CAAC,CAAC;EAEF,MAAMI,cAAc,GAAGjD,kEAAe,CAAC,MAAM;IAC3C,IAAI,CAACkC,kBAAkB,EAAE;IACzBtC,oEAAmB,CAACsC,kBAAkB,CAAC;IACvClB,gBAAgB,CAAC;MACfkC,OAAO,EAAExB,IAAI,CAAC,YAAY;IAC5B,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMyB,eAAe,GAAGnD,kEAAe,CAAC,MAAM;IAC5C,IAAI,CAACkC,kBAAkB,EAAE;IACzBjB,iBAAiB,CAAC;MAAEmC,IAAI,EAAE;QAAEA,IAAI,EAAElB;MAAmB;IAAE,CAAC,CAAC;EAC3D,CAAC,CAAC;EAEF,MAAMmB,cAAc,GAAGrD,kEAAe,CAAC,MAAM;IAC3C,IAAI,CAAC6B,SAAS,IAAIA,SAAS,EAAEjB,IAAI,CAACoB,IAAI,KAAK,gBAAgB,EAAE;IAE7D,IAAIH,SAAS,CAACyB,aAAa,IAAIzB,SAAS,CAACyB,aAAa,GAAGxD,+DAAa,CAAC,CAAC,EAAE;MACxEkB,gBAAgB,CAAC;QACfkC,OAAO,EAAE;UACPK,GAAG,EAAE,+BAA+B;UACpCC,SAAS,EAAE;YAAEC,IAAI,EAAE5D,wEAAgB,CAAC8B,OAAO,EAAEE,SAAS,CAACyB,aAAa,GAAG,IAAI;UAAE;QAC/E;MACF,CAAC,CAAC;MACF;IACF;IAEApC,qBAAqB,CAAC;MAAEN,IAAI,EAAEiB;IAAU,CAAC,CAAC;EAC5C,CAAC,CAAC;EAEF,MAAM6B,UAAU,GAAG1D,kEAAe,CAAC,MAAM;IACvC,IAAI,CAAC6B,SAAS,EAAE;IAChB,IAAIA,SAAS,CAAC8B,WAAW,IAAI9B,SAAS,CAAC8B,WAAW,GAAG7D,+DAAa,CAAC,CAAC,EAAE;MACpEkB,gBAAgB,CAAC;QACfkC,OAAO,EAAE;UACPK,GAAG,EAAE,6BAA6B;UAClCC,SAAS,EAAE;YAAEC,IAAI,EAAE5D,wEAAgB,CAAC8B,OAAO,EAAEE,SAAS,CAAC8B,WAAW,GAAG,IAAI;UAAE;QAC7E;MACF,CAAC,CAAC;MACF;IACF;IACAxC,gCAAgC,CAAC;MAAET,MAAM;MAAEE,IAAI,EAAEiB;IAAU,CAAC,CAAC;EAC/D,CAAC,CAAC;EAEF,MAAM+B,YAAY,GAAG5D,kEAAe,CAAC,MAAM;IACzC,IAAI,CAAC6B,SAAS,IAAIA,SAAS,CAACjB,IAAI,CAACoB,IAAI,KAAK,gBAAgB,IAAI,CAACH,SAAS,CAACkB,SAAS,EAAE;IACpFtB,kBAAkB,CAAC,CAAC;IACpBD,mBAAmB,CAAC;MAAEZ,IAAI,EAAEiB,SAAS,CAACkB,SAAS;MAAEc,KAAK,EAAE;QACtDC,QAAQ,EAAEnE,wDAAmB;QAAEoE,MAAM,EAAE,CAAC;QAAEC,KAAK,EAAE;MACnD;IAAE,CAAC,CAAC;IACJhD,gBAAgB,CAAC;MACfiD,IAAI,EAAE,gBAAgB;MACtBf,OAAO,EAAE;QACPK,GAAG,EAAE,0BAA0B;QAC/BC,SAAS,EAAE;UAAE5C,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;YAAEwC,KAAK,EAAErC,SAAS,CAACjB,IAAI,CAACsD,KAAK;YAAEC,MAAM,EAAEtC,SAAS,CAACjB,IAAI,CAACuD;UAAO,CAAC;QAAE;MACxG;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMC,UAAU,GAAGpE,kEAAe,CAAC,MAAM;IACvC,IAAIY,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,IAAI,CAACG,qBAAqB,EAAE;IAC/Df,uBAAuB,CAAC;MAAEiD,WAAW,EAAElC;IAAsB,CAAC,CAAC;EACjE,CAAC,CAAC;EAEF,MAAMmC,aAAa,GAAGtE,kEAAe,CAAC,MAAM;IAC1C,IAAIwC,UAAU,EAAE;MACdnB,cAAc,CAAC;QACbgD,WAAW,EAAE;UAAErC,IAAI,EAAE,SAAS;UAAEuC,UAAU,EAAE9E,2DAAsBA;QAAC;MACrE,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF,MAAM+E,eAAe,GAAGxE,kEAAe,CAAC,MAAM;IAC5CsB,qBAAqB,CAAC;MAAEZ,MAAM;MAAEE,IAAI,EAAEiB;IAAW,CAAC,CAAC;EACrD,CAAC,CAAC;EAEF,OACErB,yDAAA,CAAAF,yDAAA;IAAAmE,QAAA,GACG7B,aAAa,IACZxC,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAEpC,SAAS,CAAC6C,QAAQ,GAAG,OAAO,GAAG,KAAM;MAACC,OAAO,EAAEH,eAAgB;MAAAC,QAAA,EAC5E/C,IAAI,CAACG,SAAS,CAAC6C,QAAQ,GAAG,sBAAsB,GAAG,kBAAkB;IAAC,CAC/D,CACX,EACDtE,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,YAAY;MAACU,OAAO,EAAE1B,cAAe;MAAAwB,QAAA,EACjD/C,IAAI,CAAC,UAAU;IAAC,CACT,CAAC,EACXtB,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,SAAS;MAACU,OAAO,EAAExB,eAAgB;MAAAsB,QAAA,EAC/C/C,IAAI,CAAC,OAAO;IAAC,CACN,CAAC,EACVf,SAAS,IAAI4B,YAAY,IACxBnC,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,SAAS;MAACU,OAAO,EAAEtB,cAAe;MAAAoB,QAAA,EAC9C/C,IAAI,CAAC,kBAAkB;IAAC,CACjB,CACX,EACAf,SAAS,IAAI4B,YAAY,IAAI,CAACG,eAAe,IAC5CtC,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,cAAc;MAACU,OAAO,EAAEjB,UAAW;MAAAe,QAAA,EAC/C/C,IAAI,CAAC,MAAM;IAAC,CACL,CACX,EACAf,SAAS,IAAI4B,YAAY,IAAIqC,OAAO,CAAClC,eAAe,CAAC,IACpDtC,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,gBAAgB;MAACU,OAAO,EAAEf,YAAa;MAAAa,QAAA,EACnD/C,IAAI,CAAC,gBAAgB;IAAC,CACf,CACX,EACAf,SAAS,IAAIkB,SAAS,IACrBzB,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAEpC,SAAS,CAACgB,SAAS,GAAG,aAAa,GAAG,qBAAsB;MAAC8B,OAAO,EAAE7B,uBAAwB;MAAA2B,QAAA,EAC3G/C,IAAI,CAACG,SAAS,CAACgB,SAAS,GAAG,gBAAgB,GAAG,gBAAgB;IAAC,CACxD,CACX,EACAJ,OAAO,IACNrC,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,oBAAoB;MAACU,OAAO,EAAEP,UAAW;MAAAK,QAAA,EACrD/C,IAAI,CAAC,cAAc;IAAC,CACb,CACX,EACAc,UAAU,IACTpC,wDAAA,CAACF,oDAAQ;MAAC+D,IAAI,EAAC,wBAAwB;MAACU,OAAO,EAAEL,aAAc;MAAAG,QAAA,EAC5D/C,IAAI,CAAC,iBAAiB;IAAC,CAChB,CACX;EAAA,CACD,CAAC;AAEP,CAAC;AAED,iEAAepC,sDAAI,CAACmB,aAAa,CAAC,E;;;;;;;;;;;;;;AC3MlC;AACA,iEAAe,CAAC,gMAAgM,E;;;;;;;;;;;;;;;;;;;;;;;ACDvJ;AAMJ;AACJ;AAEgB;AAClC;AACE;AACwC;AAElB;AAAA;AAOvD,MAAM2E,WAAW,GAAG,CAAC,GAAGN,yDAAG;AAC3B,MAAMO,iBAAiB,GAAG,CAAC,GAAGP,yDAAG;AAEjC,MAAMQ,mBAAmB,GAAGA,CAAC;EAC3BC,IAAI;EACJ3E;AACQ,CAAC,KAAK;EACd,MAAM4E,cAAc,GAAGjG,yDAAO,CAAC,MAAM;IACnC,OAAOsF,iEAAiB,CAACjE,IAAI,CAAC;EAChC,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,IAAI,CAAC4E,cAAc,EAAE,OAAO1D,SAAS;EAErC,OACEtB,wDAAA;IAAKiF,SAAS,EAAEN,wEAAM,CAACO,IAAK;IAAAjB,QAAA,GAC1BjE,wDAAA;MAAKiF,SAAS,EAAEN,wEAAM,CAACQ,WAAY;MAAAlB,QAAA,GACjCrE,uDAAA,CAAC8E,wEAAuB;QACtBO,SAAS,EAAEN,wEAAM,CAACS,QAAS;QAC3BC,gBAAgB,EAAE,CAACL,cAAc,CAACI,QAAQ,CAAEE,WAAW,EAAEN,cAAc,CAACI,QAAQ,CAAEG,SAAS,CAAE;QAC7FC,WAAW,EAAER,cAAc,CAACS,OAAO,EAAEC,OAAQ;QAC7CC,UAAU,EAAE,CAAE;QACdC,UAAU,EAAE,CAAE;QACdC,WAAW,EAAE;MAAG,CACjB,CAAC,EACFjG,uDAAA,CAAC2E,gEAAuB;QACtBU,SAAS,EAAEN,wEAAM,CAACe,OAAQ;QAC1BI,IAAI,EAAEjB,iBAAkB;QACxBa,OAAO,EAAEV,cAAc,CAACe,KAAK,EAAEL;MAAQ,CACxC,CAAC;IAAA,CACC,CAAC,EACN9F,uDAAA,CAAC6E,mDAAI;MAACuB,IAAI,EAAC,MAAM;MAACf,SAAS,EAAEN,wEAAM,CAACsB;IAAM,CAAE,CAAC,EAC7CrG,uDAAA,CAAC4E,+CAAM;MACLO,IAAI,EAAEA,IAAK;MACXe,IAAI,EAAElB,WAAY;MAClBK,SAAS,EAAEN,wEAAM,CAACuB;IAAO,CAC1B,CAAC;EAAA,CACC,CAAC;AAEV,CAAC;AAED,iEAAepH,sDAAI,CAACgG,mBAAmB,CAAC,E;;;;;;;;;;;;;;;;;;;ACzDqB;AACW;AAEN;AAEjC;AAAA;AAU1B,SAASyB,sBAAsBA,CAAC;EACrCC,eAAe;EACfC,SAAS;EACTC,MAAM;EACNC,UAAU;EACVzF;AACuB,CAAC,EAAyB;EACjD,MAAM;IAAE0F,WAAW;IAAEC,QAAQ;IAAE5D,IAAI;IAAEP;EAAQ,CAAC,GAAG8D,eAAe;EAEhE,MAAMM,aAAa,GAAGV,8EAAsB,CAACnD,IAAI,GAAG,IAAI,EAAE/B,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC;EAC1E,MAAMC,aAAa,GACjBpH,uDAAA,CAAC0G,gDAAI;IAACnC,OAAO,EAAEA,CAAA,KAAMwC,UAAU,CAACC,WAAW,CAAE;IAACK,SAAS;IAAAhD,QAAA,EACpDkC,mEAAY,CAACjF,IAAI,EAAEuF,SAAS;EAAC,CAC1B,CACP;EAED,IAAI,CAACC,MAAM,IAAIG,QAAQ,KAAKD,WAAW,EAAE;IACvC,OAAOlE,OAAO,GACVxB,IAAI,CAAC,8BAA8B,EAAE;MACrC6D,IAAI,EAAEiC,aAAa;MACnBpE,IAAI,EAAEyD,+EAAsB,CAAC3D,OAAO,CAAC;MACrCO,IAAI,EAAE6D;IACR,CAAC,EAAE;MACDI,SAAS,EAAE;IACb,CAAC,CAAC,GACAhG,IAAI,CAAC,0BAA0B,EAAE;MACjC6D,IAAI,EAAEiC,aAAa;MACnB/D,IAAI,EAAE6D;IACR,CAAC,EAAE;MACDI,SAAS,EAAE;IACb,CAAC,CAAC;EACN;EAEA,MAAMC,UAAU,GACdvH,uDAAA,CAAC0G,gDAAI;IAACnC,OAAO,EAAEA,CAAA,KAAMwC,UAAU,CAACD,MAAM,CAACU,EAAE,CAAE;IAACH,SAAS;IAAAhD,QAAA,EAClDkC,mEAAY,CAACjF,IAAI,EAAEwF,MAAM;EAAC,CACvB,CACP;EAED,OAAOhE,OAAO,GACVxB,IAAI,CAAC,oCAAoC,EAAE;IAC3C6D,IAAI,EAAEiC,aAAa;IACnBN,MAAM,EAAES,UAAU;IAClBvE,IAAI,EAAEyD,+EAAsB,CAAC3D,OAAO,CAAC;IACrCO,IAAI,EAAE6D;EACR,CAAC,EAAE;IACDI,SAAS,EAAE;EACb,CAAC,CAAC,GACAhG,IAAI,CAAC,gCAAgC,EAAE;IACvC6D,IAAI,EAAEiC,aAAa;IACnB/D,IAAI,EAAE6D,aAAa;IACnBJ,MAAM,EAAES;EACV,CAAC,EAAE;IACDD,SAAS,EAAE;EACb,CAAC,CAAC;AACN,C;;;;;;;;;;;;;;AC1EA;AACA,iEAAe,CAAC,0qBAA0qB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGxpB;AACkC;AAEJ;AAG/B;AACkC;AAClB;AACU;AAEE;AACV;AAEM;AACE;AAEA;AAAA;AAa3D,MAAMhK,uBAAkD,GAAGA,CAAC;EAC1D8K,MAAM;EACNC,aAAa;EACbC,aAAa;EACbC,eAAe;EACfC;AACF,CAAC,KAAK;EACJ,MAAM;IAAEC,4BAA4B;IAAEC;EAAmB,CAAC,GAAGtJ,mDAAU,CAAC,CAAC;EAEzE,MAAMmC,OAAO,GAAG1B,6DAAU,CAAC,CAAC;EAE5B,MAAM,CAAC8I,WAAW,EAAEC,cAAc,CAAC,GAAGnB,0DAAQ,CAAS,EAAE,CAAC;EAE1D,MAAMoB,gBAAgB,GAAG1J,yDAAO,CAAC,MAAM;IACrC,MAAM2J,SAAS,GAAGpB,kDAAS,CAAC,CAAC,CAACqB,KAAK,CAACC,IAAI;IACxC,MAAMC,WAAW,GAAGjB,uDAAM,CAAC,CACzB,IAAIQ,OAAO,IAAI,EAAE,CAAC,EAClB,IAAIF,aAAa,IAAI,EAAE,CAAC,EACxB,IAAIC,eAAe,IAAI,EAAE,CAAC,CAC3B,CAAC;IAEF,MAAMW,eAAe,GAAGnB,yEAAkB,CAAC;MACzCoB,GAAG,EAAEF,WAAW;MAAEG,KAAK,EAAET,WAAW;MAAE/G,IAAI,EAAE;IAC9C,CAAC,CAAC;IAEF,OAAOqG,uEAAW,CAACiB,eAAe,CAACG,MAAM,CAAE7B,EAAE,IAAK;MAChD,MAAM8B,IAAI,GAAGR,SAAS,CAACtB,EAAE,CAAC;MAE1B,IAAI,CAAC8B,IAAI,EAAE;QACT,OAAO,KAAK;MACd;MAEA,OAAO,CAACA,IAAI,CAACC,SAAS,IACjB,CAACzB,0DAAS,CAACwB,IAAI,CAAC,IAAI,CAACzB,8DAAa,CAACyB,IAAI,CAAC,IACxC9B,EAAE,KAAKa,aAAa,IAAIb,EAAE,KAAKI,kEAA6B;IACnE,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,CAACS,aAAa,EAAEM,WAAW,EAAEH,OAAO,EAAEF,aAAa,EAAEC,eAAe,CAAC,CAAC;EAEzE,MAAMiB,2BAA2B,GAAG5J,kEAAe,CAAE6J,aAAsB,IAAK;IAC9E,IAAIA,aAAa,EAAEC,MAAM,EAAE;MACzBhB,kBAAkB,CAAC;QAAEiB,SAAS,EAAEF;MAAc,CAAC,CAAC;MAChDhB,4BAA4B,CAAC,CAAC;IAChC;EACF,CAAC,CAAC;EAEF,OACEzI,wDAAA,CAACmI,oEAAW;IACV9C,SAAS,EAAEN,6EAAM,CAACO,IAAK;IACvB8C,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAEnB,4BAA6B;IACtC3E,KAAK,EAAEvC,OAAO,CAAC,gBAAgB,CAAE;IACjCsI,cAAc;IACdC,mBAAmB;IACnBC,eAAe;IACfC,iBAAiB,EAAEzI,OAAO,CAAC,UAAU,CAAE;IACvC0I,OAAO,EAAExB,4BAA6B;IAAApE,QAAA,EAEtCrE,wDAAA,CAACkI,kEAAU;MACT7C,SAAS,EAAEN,6EAAM,CAACmF,MAAO;MACzBC,OAAO,EAAEtB,gBAAiB;MAC1BuB,WAAW,EAAEzB,WAAY;MACzB0B,iBAAiB,EAAE9I,OAAO,CAAC,QAAQ,CAAE;MACrC+I,cAAc,EAAE1B,cAAe;MAC/B2B,YAAY;MACZC,kBAAkB;MAClBC,UAAU;MACVC,kBAAkB,EAAElB;IAA4B,CACjD;EAAC,CACS,CAAC;AAElB,CAAC;AAED,iEAAetK,sDAAI,CAACyI,mDAAU,CAAYgD,MAAM,IAA2B;EACzE,MAAM;IACJC,KAAK,EAAE;MACLC;IACF,CAAC;IACDxC;EACF,CAAC,GAAGsC,MAAM;EAEV,OAAO;IACLnC,OAAO,EAAEmC,MAAM,CAACG,WAAW,EAAEtC,OAAO;IACpCF,aAAa,EAAEuC,OAAO,CAACE,MAAM;IAC7BxC,eAAe,EAAEsC,OAAO,CAACG,QAAQ;IACjC3C;EACF,CAAC;AACH,CAAC,CAAC,CAAC/K,uBAAuB,CAAC,CAAC,E;;;;;;;;;;;;;;ACxH5B;AACA,iEAAe,CAAC,0ZAA0Z,E;;;;;;;;;;;;;;;;;;;;;;;;;ACDjX;AACZ;AAIkB;AAClB;AACgB;AAEhB;AACmD;AAC3D;AAC4C;AAE3B;AAAA;AAMtD,MAAMmB,kBAAkB,GAAGA,CAAC;EAC1B6M;AACQ,CAAC,KAAK;EACd,MAAM;IAAEC;EAAwB,CAAC,GAAGnM,mDAAU,CAAC,CAAC;EAChD,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAMG,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxC2L,uBAAuB,CAAC,CAAC;EAC3B,CAAC,CAAC;EAEF,MAAMG,MAAM,GAAGvM,yDAAO,CAAC,MAAM;IAC3B,OACEiB,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BjE,yDAAA;QAAKiF,SAAS,EAAEN,uEAAM,CAAC4G,mBAAoB;QAAAtH,QAAA,GACzCrE,wDAAA,CAACkL,wDAAQ;UAACU,MAAM,EAAC,UAAU;UAACvG,SAAS,EAAEN,uEAAM,CAAC8G;QAAS,CAAE,CAAC,EAC1D7L,wDAAA,CAACmL,yFAA0B;UACzBW,OAAO,EAAEN,cAAc,EAAEM,OAAQ;UACjCC,cAAc,EAAEP,cAAc,EAAEO,cAAe;UAC/CC,QAAQ,EAAE5D,MAAO;UACjB6D,MAAM;QAAA,CACP,CAAC;MAAA,CACC,CAAC,EACNjM,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAACjB,KAAM;QAAAO,QAAA,EAC1B/C,IAAI,CAAC,mBAAmB;MAAC,CACvB,CAAC,EACNtB,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAACmH,QAAS;QAAA7H,QAAA,EAC7B/C,IAAI,CAAC,sBAAsB;MAAC,CAC1B,CAAC;IAAA,CACH,CAAC;EAEV,CAAC,EAAE,CAACA,IAAI,EAAEkK,cAAc,EAAEpD,MAAM,CAAC,CAAC;EAElC,MAAM+D,MAAM,GAAGhN,yDAAO,CAAC,MAAM;IAC3B,IAAI,CAACiJ,MAAM,EAAE,OAAO1G,SAAS;IAC7B,OACE1B,wDAAA;MAAKqF,SAAS,EAAEN,uEAAM,CAACoH,MAAO;MAAA9H,QAAA,EAC5BrE,wDAAA,CAACoL,kDAAM;QACLgB,QAAQ,EAAC,YAAY;QACrBC,aAAa,EAAEtH,uEAAM,CAACuH,cAAe;QACrC/H,OAAO,EAAEkH,WAAY;QAAApH,QAAA,EAEpB/C,IAAI,CAAC,kBAAkB;MAAC,CACnB;IAAC,CACN,CAAC;EAEV,CAAC,EAAE,CAACA,IAAI,EAAE8G,MAAM,EAAEqD,WAAW,CAAC,CAAC;EAE/B,MAAMc,YAAY,GAAGpN,yDAAO,CAAC,MAAM;IACjC,OAAO,CACL,CAAC,SAAS,EAAEmC,IAAI,CAAC,yBAAyB,CAAC,EAAEA,IAAI,CAAC,4BAA4B,CAAC,CAAC,EAChF,CAAC,SAAS,EAAEA,IAAI,CAAC,2BAA2B,CAAC,EAAEA,IAAI,CAAC,8BAA8B,CAAC,CAAC,EACpF,CAAC,oBAAoB,EAAEA,IAAI,CAAC,2BAA2B,CAAC,EAAEA,IAAI,CAAC,8BAA8B,CAAC,CAAC,CAChG;EACH,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,OACEtB,wDAAA,CAACqL,+DAAe;IACdjD,MAAM,EAAEA,MAAO;IACfoE,gBAAgB,EAAEzH,uEAAM,CAAC0H,OAAQ;IACjCf,MAAM,EAAEA,MAAO;IACfa,YAAY,EAAEA,YAAa;IAC3BJ,MAAM,EAAEA,MAAO;IACfO,WAAW,EAAElI,OAAO,CAACgH,cAAc,EAAEM,OAAO,CAAE;IAC9Ca,wBAAwB,EAAC,mBAAmB;IAC5C/C,OAAO,EAAE6B;EAAY,CACtB,CAAC;AAEN,CAAC;AAED,iEAAevM,sDAAI,CAACT,kBAAkB,CAAC,E;;;;;;;;;;;;;;AC5FvC;AACA,iEAAe,CAAC,2/CAA2/C,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEz+C;AACuB;AAM7B;AAEgD;AAGzC;AACuB;AACR;AACe;AAChB;AACa;AACQ;AACb;AAEY;AACxB;AACgB;AAEF;AACI;AAC1B;AACJ;AACQ;AACA;AACA;AACE;AAEK;AAAA;AAyBhD,MAAMyP,uBAAuB,GAAG,EAAE;AAClC,MAAMC,oBAAoB,GAAG,EAAE,GAAGX,mDAAI;AAEtC,SAASY,YAAYA,CAAC;EACpB5N,IAAI;EACJ6N,WAAW;EACX/N,MAAM;EACN6E,IAAI;EACJmJ,YAAY;EACZC,KAAK;EACLC,mBAAmB;EACnBC,YAAY;EACZC,eAAe;EACfC,gBAAgB;EAChBtG,aAAa;EACbuG,oBAAoB;EACpBC,WAAW;EACXC,iBAAiB;EACjBC,4BAA4B;EAC5BC,8BAA8B;EAC9BC;AACqB,CAAC,EAAE;EACxB,MAAM;IACJC,YAAY;IAAEC,sBAAsB;IAAEC,WAAW;IAAEC,oBAAoB;IAAEC,qBAAqB;IAC9FC,uBAAuB;IAAEC,wBAAwB;IAAEC;EACrD,CAAC,GAAGrQ,mDAAU,CAAC,CAAC;EAEhB,MAAMkC,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EAEtB,MAAM,CAAC+P,WAAW,EAAEC,cAAc,CAAC,GAAGlI,0DAAQ,CAAS,EAAE,CAAC;EAC1D,MAAM,CAACmI,cAAc,EAAEC,iBAAiB,CAAC,GAAGpI,0DAAQ,CAAU,KAAK,CAAC;EACpE,MAAM,CAACqI,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGtI,0DAAQ,CAAU,KAAK,CAAC;EAC9E,MAAM,CAACuI,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGxI,0DAAQ,CAAU,KAAK,CAAC;EAExE,MAAMyI,qBAAqB,GAAGvC,uEAAmB,CAACY,KAAK,EAAEI,gBAAgB,CAAC;EAE1E/B,2DAAS,CAAC,MAAM;IACd,IAAIoC,8BAA8B,EAAE;MAClCe,sBAAsB,CAAC,IAAI,CAAC;IAC9B;EACF,CAAC,EAAE,CAACf,8BAA8B,EAAEc,mBAAmB,CAAC,CAAC;EAEzD,MAAMK,UAAU,GAAG,IAAI,IAAI3P,IAAI,IAAIA,IAAI,CAACoB,IAAI,KAAK,UAAU;EAC3D,MAAMwO,aAAa,GAAG,QAAQ,IAAI5P,IAAI;EACtC,MAAM6P,iBAAiB,GAAGhC,WAAW,IAAI,QAAQ,IAAIA,WAAW;EAChE,MAAMiC,UAAU,GAAGnL,IAAI,IAAI2H,oEAAa,CAAC3H,IAAI,CAAC;EAC9C,MAAMoL,MAAM,GAAGjQ,MAAM,KAAK+H,aAAa;EAEvC,MAAMmI,YAAY,GAAGrR,yDAAO,CAAC,MAAM;IACjC,IAAIiR,aAAa,EAAE;MACjB,MAAMK,WAAW,GAAGT,gBAAgB,IAAIK,iBAAiB,GAAGhC,WAAW,GAAG7N,IAAI;MAC9E,OAAO;QACLgH,EAAE,EAAE,CAAC,CAAC;QACNkJ,MAAM,EAAE,GAAG;QACXC,UAAU,EAAE,KAAK;QACjB1J,QAAQ,EAAEoB,aAAa;QACvBhF,IAAI,EAAEuN,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;QACnCtE,OAAO,EAAE;UACPuE,MAAM,EAAE;YACNC,SAAS,EAAE,QAAQ;YACnBrP,IAAI,EAAE,aAAa;YACnB+B,MAAM,EAAE8M,WAAW,CAAC9M,MAAM;YAC1BD,QAAQ,EAAE+M,WAAW,CAAC/M,QAAQ;YAC9BwN,IAAI,EAAE1Q,IAAI,CAAC2Q,MAAM,GAAG,EAAE;YACtBrO,OAAO,EAAE4M,WAAW,GAAG;cAAE1M,IAAI,EAAE0M;YAAY,CAAC,GAAGhO;UACjD;QACF;MACF,CAAC;IACH;IAEA,IAAIyO,UAAU,EAAE;MACd,OAAO;QACL3I,EAAE,EAAE,CAAC,CAAC;QACNkJ,MAAM,EAAE,GAAG;QACXC,UAAU,EAAE,KAAK;QACjB1J,QAAQ,EAAEoB,aAAa;QACvBhF,IAAI,EAAEuN,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;QACnCtE,OAAO,EAAE;UACPuE,MAAM,EAAE;YACNC,SAAS,EAAE,QAAQ;YACnBrP,IAAI,EAAE,UAAU;YAChBkB,OAAO,EAAE4M,WAAW,EAAEhG,MAAM,GAAG;cAC7B1G,IAAI,EAAE0M;YACR,CAAC,GAAGhO,SAAS;YACb0P,YAAY,EAAExB,cAAc,IAAIlO,SAAS;YACzC2P,cAAc,EAAE7Q,IAAI,CAAC6Q,cAAc;YACnCC,UAAU,EAAExB,mBAAmB,IAAIpO,SAAS;YAC5C6P,uBAAuB,EAAEzB,mBAAmB,GAAGtP,IAAI,CAACgR,YAAY,GAAG9P,SAAS;YAC5ElB,IAAI;YACJF,MAAM;YACNmR,MAAM,EAAEpJ;UACV;QACF;MACF,CAAC;IACH;IACA,OAAO3G,SAAS;EAClB,CAAC,EAAE,CAAC2G,aAAa,EAAE7H,IAAI,EAAEkP,WAAW,EAAES,UAAU,EAC9CP,cAAc,EAAEE,mBAAmB,EAAExP,MAAM,EAC3C0P,gBAAgB,EAAEK,iBAAiB,EAAEhC,WAAW,EAAE+B,aAAa,CAAC,CAAC;EAEnE,MAAMsB,uBAAuB,GAAG9R,mEAAe,CAAE+R,CAAmC,IAAK;IACvFhC,cAAc,CAACgC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAChC,CAAC,CAAC;EAEF,MAAMC,0BAA0B,GAAGlS,mEAAe,CAAC,MAAM;IACvDiQ,iBAAiB,CAAC,CAACD,cAAc,CAAC;EACpC,CAAC,CAAC;EAEF,MAAMmC,+BAA+B,GAAGnS,mEAAe,CAAC,MAAM;IAC5DmQ,sBAAsB,CAAC,CAACD,mBAAmB,CAAC;EAC9C,CAAC,CAAC;EAEF,MAAMkC,sBAAsB,GAAGpS,mEAAe,CAAC,MAAM;IACnD,IAAIyQ,iBAAiB,EAAEJ,mBAAmB,CAAC,CAACD,gBAAgB,CAAC;EAC/D,CAAC,CAAC;EAEF,MAAMiC,wBAAwB,GAAGrS,mEAAe,CAAC,MAAM;IACrD,IAAI,CAACuQ,UAAU,EAAE;IACjBd,oBAAoB,CAAC;MACnB6C,MAAM,EAAE1R,IAAI,CAACgH,EAAE;MACflH;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAM6R,kBAAkB,GAAGvS,mEAAe,CAAC,MAAM;IAC/C0P,qBAAqB,CAAC,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC;EAEF,MAAM8C,oBAAoB,GAAGxS,mEAAe,CAAC,MAAM;IACjD,IAAI,CAACqP,WAAW,EAAE;IAClBO,wBAAwB,CAAC;MAAE6C,aAAa,EAAEpD,WAAW,CAACzO,IAAI,CAACgH;IAAG,CAAC,CAAC;EAClE,CAAC,CAAC;EAEF,MAAM8K,qBAAqB,GAAG1S,mEAAe,CAAC,MAAM;IAClD,IAAIqP,WAAW,EAAE;MACf,MAAMsD,iBAAiB,GAAGtD,WAAW,CAACuD,SAAS,CAACC,SAAS;MACzD,IAAIF,iBAAiB,IAAIA,iBAAiB,KAAKjS,MAAM,EAAE;QACrDmP,mCAAmC,CAAC;UAClC4C,aAAa,EAAEpD,WAAW,CAACzO,IAAI,CAACgH,EAAE;UAClCkL,SAAS,EAAEH,iBAAiB;UAC5BI,SAAS,EAAErS,MAAM;UACjBwC,OAAO,EAAE4M,WAAW,IAAIhO,SAAS;UACjCkO,cAAc,EAAEA,cAAc,IAAIlO;QACpC,CAAC,CAAC;QACF;MACF;MAEA6N,uBAAuB,CAAC;QACtB8C,aAAa,EAAEpD,WAAW,CAACzO,IAAI,CAACgH,EAAE;QAClClH,MAAM;QACNwC,OAAO,EAAE4M,WAAW,IAAIhO,SAAS;QACjCkO,cAAc,EAAEA,cAAc,IAAIlO;MACpC,CAAC,CAAC;MACF;IACF;IAEA,IAAIyO,UAAU,EAAE;MACdjB,YAAY,CAAC;QACX5O,MAAM;QACNsP,cAAc;QACdpP,IAAI;QACJsC,OAAO,EAAE4M,WAAW,GAAG;UAAE1M,IAAI,EAAE0M;QAAY,CAAC,GAAGhO,SAAS;QACxDkR,aAAa,EAAE9C;MACjB,CAAC,CAAC;MACF;IACF;IAEA,IAAIE,gBAAgB,IAAIK,iBAAiB,EAAE;MACzClB,sBAAsB,CAAC;QACrB0D,MAAM,EAAEvS,MAAM;QACd6Q,MAAM,EAAE9C,WAAW,CAAC8C,MAAM;QAC1BxN,MAAM,EAAE0K,WAAW,CAAC1K,MAAM;QAC1Bb,OAAO,EAAE4M,WAAW,GAAG;UAAE1M,IAAI,EAAE0M;QAAY,CAAC,GAAGhO;MACjD,CAAC,CAAC;MACF;IACF;IAEA,IAAI0O,aAAa,EAAE;MACjBhB,WAAW,CAAC;QACVxN,IAAI,EAAE,UAAU;QAChB4G,OAAO,EAAE,CAAClI,MAAM,CAAC;QACjBoD,QAAQ,EAAElD,IAAI,CAACkD,QAAQ;QACvBC,MAAM,EAAEnD,IAAI,CAACmD,MAAM;QACnBmP,MAAM,EAAEtS,IAAI;QACZsC,OAAO,EAAE4M,WAAW,GAAG;UAAE1M,IAAI,EAAE0M;QAAY,CAAC,GAAGhO;MACjD,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF,MAAMqR,kBAAkB,GAAG1C,iBAAiB,IAAIxB,WAAW,IAAKA,WAAW,CAAClL,MAAM,GAAG0K,WAAW,CAAC1K,MAAO;EACxG,SAASqP,oBAAoBA,CAAA,EAAG;IAC9B,MAAMC,WAAW,GAAG3E,YAAY,GAAGA,YAAY,GAAGoB,WAAW,CAAChG,MAAM,GAAGhI,SAAS;IAEhF,MAAMoC,KAAK,GAAGyC,mEAAY,CAACjF,IAAI,EAAE6D,IAAK,CAAE;IACxC,OACE/E,yDAAA;MAAKiF,SAAS,EAAEN,kEAAM,CAACmO,cAAe;MAAA7O,QAAA,GAEnC,CAACyK,iBAAiB,IACjB9O,wDAAA,CAACgO,qDAAQ;QACP3I,SAAS,EAAEN,kEAAM,CAACoO,YAAa;QAC/BC,QAAQ,EAAE1B,uBAAwB;QAClCG,KAAK,EAAEnC,WAAY;QACnB2D,KAAK,EAAE/R,IAAI,CAAC,wBAAwB,CAAE;QACtCgS,SAAS,EAAEhF,YAAa;QACxBiF,kBAAkB,EAChBN,WAAW,IAAIA,WAAW,GAAG/E,uBAAuB,GAAG+E,WAAW,CAACO,QAAQ,CAAC,CAAC,GAAG9R;MACjF,CACF,CACF,EAEAqR,kBAAkB,IACjB3S,yDAAA,CAAC0N,qDAAQ;QAACzI,SAAS,EAAEN,kEAAM,CAAC0O,QAAS;QAACC,MAAM;QAACC,MAAM;QAACpP,OAAO,EAAEyN,sBAAuB;QAAA3N,QAAA,GAClFrE,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,yBAAyB,EAAE;YAC/BsS,KAAK,EAAElG,6EAAiB,CAACpM,IAAI,EAAE+M,WAAW,CAAC1K,MAAM,EAAE;cAAE0B,SAAS,EAAEN,kEAAM,CAAC8O;YAAiB,CAAC;UAC3F,CAAC,EAAE;YAAEvM,SAAS,EAAE;UAAK,CAAC;QAAC,CACnB,CAAC,EACPtH,wDAAA,CAAC+N,qDAAQ;UACP+F,OAAO,EAAE9D,gBAAiB;UAC1BoD,QAAQ,EAAEpB,sBAAuB;UACjCqB,KAAK,EAAE/R,IAAI,CAAC,4BAA4B;QAAE,CAC3C,CAAC;MAAA,CACM,CACX,EAEA+O,iBAAiB,IAAIxB,WAAW,IAC/B7O,wDAAA;QAAKqF,SAAS,EAAEN,kEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAChC/C,IAAI,CAAC,mCAAmC,EAAE;UACzCsS,KAAK,EAAElG,6EAAiB,CAACpM,IAAI,EAAEuN,WAAW,CAAClL,MAAM,EAAE;YAAE0B,SAAS,EAAEN,kEAAM,CAAC8O;UAAiB,CAAC,CAAC;UAC1FG,IAAI,EAAEhU,wDAAA,CAAC0G,iDAAI;YAACW,SAAS;YAAC9C,OAAO,EAAE4N,kBAAmB;YAAA9N,QAAA,EAAE/C,IAAI,CAAC,sBAAsB;UAAC,CAAO;QACzF,CAAC,EAAE;UACDgG,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CAAC;MAAC,CACC,CACN,EAEA9D,UAAU,IAAI3L,OAAO,CAAChE,IAAI,CAACgR,YAAY,CAAC,IAAI,CAACzC,4BAA4B,IACxE3O,yDAAA,CAAC0N,qDAAQ;QACPzI,SAAS,EAAEN,kEAAM,CAAC0O,QAAS;QAC3BC,MAAM;QACNC,MAAM;QACNpP,OAAO,EAAEwN,+BAAgC;QACzCmC,QAAQ,EAAElF,8BAA+B;QAAA3K,QAAA,GAEzCrE,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,gBAAgB,EAAE;YACtBsS,KAAK,EAAElG,6EAAiB,CAACpM,IAAI,EAAEd,IAAI,CAACgR,YAAY,EAAE;cAAEnM,SAAS,EAAEN,kEAAM,CAAC8O;YAAiB,CAAC;UAC1F,CAAC,EAAE;YAAEvM,SAAS,EAAE;UAAK,CAAC;QAAC,CACnB,CAAC,EACPtH,wDAAA,CAAC+N,qDAAQ;UACP+F,OAAO,EAAEhE,mBAAoB;UAC7BsD,QAAQ,EAAErB,+BAAgC;UAC1CsB,KAAK,EAAE/R,IAAI,CAAC,mBAAmB;QAAE,CAClC,CAAC;MAAA,CACM,CACX,EACA6O,UAAU,IAAI3L,OAAO,CAAChE,IAAI,CAACgR,YAAY,CAAC,IAAI,CAACzC,4BAA4B,IACxE/O,wDAAA;QAAKqF,SAAS,EAAEN,kEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAChCiM,UAAU,GACPhP,IAAI,CAAC,2BAA2B,EAAE;UAClCgI,IAAI,EAAExF,KAAK;UACXkQ,IAAI,EAAEhU,wDAAA,CAAC0G,iDAAI;YAACW,SAAS;YAAC9C,OAAO,EAAE0N,wBAAyB;YAAA5N,QAAA,EAAE/C,IAAI,CAAC,oBAAoB;UAAC,CAAO;QAC7F,CAAC,EAAE;UACDgG,SAAS,EAAE;QACb,CAAC,CAAC,GACAhG,IAAI,CAAC,kCAAkC,EAAE;UACzC6D,IAAI,EAAErB,KAAK;UACXkQ,IAAI,EAAEhU,wDAAA,CAAC0G,iDAAI;YAACW,SAAS;YAAC9C,OAAO,EAAE0N,wBAAyB;YAAA5N,QAAA,EAAE/C,IAAI,CAAC,oBAAoB;UAAC,CAAO;QAC7F,CAAC,EAAE;UACDgG,SAAS,EAAE;QACb,CAAC;MAAC,CACD,CACN,EAEA6I,UAAU,IACT/P,yDAAA,CAAC0N,qDAAQ;QAACzI,SAAS,EAAEN,kEAAM,CAAC0O,QAAS;QAACC,MAAM;QAACC,MAAM;QAACpP,OAAO,EAAEuN,0BAA2B;QAAAzN,QAAA,GACtFrE,wDAAA;UAAAqE,QAAA,EAAO/C,IAAI,CAAC,gBAAgB;QAAC,CAAO,CAAC,EACrCtB,wDAAA,CAAC+N,qDAAQ;UACP+F,OAAO,EAAElE,cAAe;UACxBwD,QAAQ,EAAEtB,0BAA2B;UACrCuB,KAAK,EAAE/R,IAAI,CAAC,gBAAgB;QAAE,CAC/B,CAAC;MAAA,CACM,CACX,EACA6O,UAAU,IACTnQ,wDAAA;QAAKqF,SAAS,EAAEN,kEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAChCkM,MAAM,GAAGjP,IAAI,CAAC,6BAA6B,CAAC,GACzCgP,UAAU,GAAGhP,IAAI,CAAC,yBAAyB,EAAE;UAAE6S,QAAQ,EAAErQ;QAAM,CAAC,CAAC,GAC/DxC,IAAI,CAAC,gCAAgC;MAAC,CACzC,CACN;IAAA,CACE,CAAC;EAEV;EAEA,SAAS8S,YAAYA,CAAA,EAAG;IACtB,MAAMzQ,MAAM,GAAGqM,gBAAgB,IAAIK,iBAAiB,GAChD3C,6EAAiB,CAACpM,IAAI,EAAE+M,WAAW,CAAC1K,MAAM,EAAE;MAAE0Q,MAAM,EAAE;IAAK,CAAC,CAAC,GAC7DlE,UAAU,GACRzC,6EAAiB,CAACpM,IAAI,EAAEd,IAAI,CAACoT,KAAK,IAAI9D,mBAAmB,GAAGtP,IAAI,CAACgR,YAAY,GAAI,CAAC,CAAC,EAAE;MAAE6C,MAAM,EAAE;IAAK,CAAC,CAAC,GACtGjE,aAAa,GAAG3C,oEAAc,CAACnM,IAAI,EAAEd,IAAI,CAACmD,MAAM,EAAEnD,IAAI,CAACkD,QAAQ,CAAC,GAAGhC,SAAS;IAElF,MAAM4S,aAAa,GAAGrF,WAAW,EAAEzO,IAAI,CAAC8T,aAAa;IACrD,MAAMC,cAAc,GAAGtF,WAAW,EAAEuF,KAAK,CAACC,OAAO;IACjD,MAAMC,eAAe,GAAGH,cAAc,GAAGA,cAAc,GAAG7U,gEAAa,CAAC,CAAC,GAAGgC,SAAS;IACrF,MAAMiT,kBAAkB,GAAGD,eAAe,KAAKhT,SAAS,IAAIgT,eAAe,GAAG,CAAC,IAC1EA,eAAe,GAAGvG,oBAAoB;IAE3C,OACE/N,yDAAA;MAAKiF,SAAS,EAAEN,kEAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC3B8L,UAAU,IAAI3L,OAAO,CAAChE,IAAI,CAACoU,mBAAmB,CAAC,IAC9C5U,wDAAA,CAAC4N,gEAAe;QACdvG,SAAS;QACTwN,QAAQ,EAAErU,IAAI,CAACoU,mBAAmB,GAAGpU,IAAI,CAACsU,iBAAmB;QAC7DC,SAAS,EAAEzT,IAAI,CAAC,eAAe,EAAE;UAC/B0T,KAAK,EAAExU,IAAI,CAACsU,iBAAiB,GAAItU,IAAI,CAACoU;QACxC,CAAC,CAAE;QACHK,QAAQ,EAAE3T,IAAI,CAAC,eAAe,EAAE;UAAE0T,KAAK,EAAExU,IAAI,CAACoU;QAAoB,CAAC,CAAE;QACrEvP,SAAS,EAAEN,kEAAM,CAACmQ;MAAQ,CAC3B,CACF,EACAjG,WAAW,IAAIzK,OAAO,CAAC8P,aAAa,CAAC,IACpCtU,wDAAA;QAAKqF,SAAS,EAAEN,kEAAM,CAACoQ,iBAAkB;QAAA9Q,QAAA,EACtC/C,IAAI,CAAC,wBAAwB,EAAE;UAC9B0T,KAAK,EAAEV,aAAa;UACpBN,IAAI,EAAEhU,wDAAA,CAAC0G,iDAAI;YAACW,SAAS;YAAC9C,OAAO,EAAE6N,oBAAqB;YAAA/N,QAAA,EAAE/C,IAAI,CAAC,sBAAsB;UAAC,CAAO;QAC3F,CAAC,EAAE;UAAE8T,WAAW,EAAEd,aAAa;UAAEhN,SAAS,EAAE;QAAK,CAAC;MAAC,CAChD,CACN,EACDtH,wDAAA,CAACoL,mDAAM;QACL/F,SAAS,EAAEN,kEAAM,CAACsQ,UAAW;QAC7BnP,IAAI,EAAEwO,eAAe,GAAGhT,SAAS,GAAG,SAAU;QAC9C6C,OAAO,EAAE+N,qBAAsB;QAC/BgD,SAAS,EAAE1G,oBAAqB;QAChC2G,iBAAiB;QAAAlR,QAAA,EAEhB4K,WAAW,GACV7O,yDAAA;UAAAiE,QAAA,GACErE,wDAAA;YAAAqE,QAAA,EACG/C,IAAI,CAAC,qBAAqB;UAAC,CACzB,CAAC,EACLoT,eAAe,KAAKhT,SAAS,IAAIgT,eAAe,GAAG,CAAC,IACnD1U,wDAAA;YAAKqF,SAAS,EAAEN,kEAAM,CAACyQ,cAAe;YAAAnR,QAAA,EACnC/C,IAAI,CAAC,qBAAqB,EAAE;cAC3BmU,IAAI,EAAEd,kBAAkB,GACpB3U,wDAAA,CAACiO,sDAAS;gBAACyH,MAAM,EAAEnB;cAAgB,CAAE,CAAC,GACtChH,uEAAe,CAACjM,IAAI,EAAEoT,eAAe;YAC3C,CAAC,EAAE;cAAEpN,SAAS,EAAE;YAAK,CAAC;UAAC,CACpB,CACN;QAAA,CACE,CAAC,GACJhG,IAAI,CAAC,UAAU,EAAE;UACnBqC;QACF,CAAC,EAAE;UACD2D,SAAS,EAAE;QACb,CAAC;MAAC,CACI,CAAC;IAAA,CACN,CAAC;EAEV;EAEA,MAAMqO,WAAW,GAAGtI,gEAAc,CAChCtI,kEAAM,CAAC6Q,UAAU,EACjB7Q,kEAAM,CAAC8Q,cAAc,EACrBlH,gBAAgB,IAAI5J,kEAAM,CAAC+Q,aAAa,EACxCpH,eAAe,IAAI3J,kEAAM,CAACgR,aAAa,EACvCpH,gBAAgB,IAAIH,mBAAmB,IAAIzJ,kEAAM,CAACiR,OACpD,CAAC;EAED,IAAK,CAAC7F,UAAU,IAAI,CAACC,aAAa,IAAK,CAACI,YAAY,EAAE;EAEtD,OACEpQ,yDAAA;IAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,kEAAM,CAACO,IAAI,EAAE,eAAe,CAAE;IAAAjB,QAAA,GAC3DjE,yDAAA;MACEiF,SAAS,EAAEgI,gEAAc,CAACtI,kEAAM,CAACkR,iBAAiB,EAAE,aAAa;MACjE;MAAA;MACAC,KAAK;MACLC,KAAK,EAAE7I,4DAAU,CACf,oBAAoBmB,YAAY,EAAE,EAClCC,eAAe,IAAI,6BAA6BA,eAAe,EACjE,CAAE;MAAArK,QAAA,GAEFrE,wDAAA;QACEqF,SAAS,EAAEsQ,WAAY;QACvBQ,KAAK,EAAEjG,qBAAqB,GAAG,wBAAwBA,qBAAqB,EAAE,GAAGxO;MAAU,CAC5F,CAAC,EACF1B,wDAAA,CAAC6N,sEAAa;QAEZ/K,OAAO,EAAE0N,YAAa;QACtB4F,QAAQ,EAAEvJ,sDAAe;QACzBwJ,eAAe,EAAE;MAAE,GAHdlG,UAAU,GAAG3P,IAAI,CAACgH,EAAE,GAAG4I,aAAa,GAAG5P,IAAI,CAAC2Q,MAAM,GAAGzP,SAI3D,CAAC;IAAA,CACC,CAAC,EACLsR,oBAAoB,CAAC,CAAC,EACvBhT,wDAAA;MAAKqF,SAAS,EAAEN,kEAAM,CAACuR;IAAO,CAAE,CAAC,EAChClC,YAAY,CAAC,CAAC;EAAA,CACZ,CAAC;AAEV;AAEA,iEAAelV,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAErK,MAAM;EAAEE;AAAK,CAAC,KAA2B;EAClD,MAAM+N,KAAK,GAAGrB,8DAAW,CAACvC,MAAM,CAAC;EACjC,MAAM;IACJiJ;EACF,CAAC,GAAGjJ,MAAM;EACV,MAAM;IACJ4L,SAAS,EAAE/H,mBAAmB;IAC9BC,YAAY;IACZmH,UAAU,EAAEjH,gBAAgB;IAC5BD;EACF,CAAC,GAAGvB,oEAAiB,CAACxC,MAAM,EAAE4D,KAAK,CAAC,IAAI,CAAC,CAAC;EAC1C,MAAMpJ,IAAI,GAAG4H,6DAAU,CAACpC,MAAM,EAAErK,MAAM,CAAC;EACvC,MAAMwO,iBAAiB,GAAG9B,8EAA2B,CAACrC,MAAM,EAAErK,MAAM,CAAC;EACrE,MAAMkW,YAAY,GAAGpJ,qEAAkB,CAACzC,MAAM,EAAErK,MAAM,CAAC;EACvD,MAAM+H,aAAa,GAAGsC,MAAM,CAACtC,aAAa;EAC1C,MAAMoO,aAAa,GAAGpO,aAAa,KAAK/H,MAAM;EAC9C,MAAMyO,4BAA4B,GAAG,CAAC0H,aAAa,IAC9CD,YAAY,EAAEE,eAAe,EAAEC,6BAA6B;EACjE,MAAM3H,8BAA8B,GAAG,CAACyH,aAAa,IAChDD,YAAY,EAAEE,eAAe,EAAE1H,8BAA8B;EAElE,MAAM4H,QAAQ,GAAG3J,iEAAc,CAACtC,MAAM,CAAC;EACvC,MAAM0H,aAAa,GAAG,IAAI,IAAI7R,IAAI,IAAIA,IAAI,CAACoB,IAAI,KAAK,UAAU,IAAIpB,IAAI,CAACqW,SAAS,GAAGrW,IAAI,CAACgH,EAAE,GAAG9F,SAAS;EACtG,MAAMuN,WAAW,GAAGoD,aAAa,GAC7B1H,MAAM,CAACmM,mBAAmB,GAAGzE,aAAa,CAAC,GAAG3Q,SAAS;EAE3D,OAAO;IACLmN,WAAW,EAAE+E,KAAK,EAAEmD,OAAO;IAC3B5R,IAAI;IACJoJ,KAAK;IACLC,mBAAmB;IACnBC,YAAY;IACZE,gBAAgB;IAChBD,eAAe;IACfJ,YAAY,EAAE3D,MAAM,CAACqM,SAAS,CAACC,wBAAwB;IACvD5O,aAAa,EAAEsC,MAAM,CAACtC,aAAa;IACnCuG,oBAAoB,EAAEgI,QAAQ,CAAChI,oBAAoB;IACnDE,iBAAiB;IACjBC,4BAA4B;IAC5BC,8BAA8B;IAC9BC;EACF,CAAC;AACH,CACF,CAAC,CAACb,YAAY,CAAC,CAAC,E;;;;;;;;;;;;;;AC3fhB;AACA,iEAAe,CAAC,gsBAAgsB,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACDhqB;AACH;AAUV;AACmC;AACA;AAEzB;AACgB;AAEc;AACrB;AACjB;AAEO;AAAA;AAc5C,MAAMnJ,iBAAiB,GAAG,EAAE;AAE5B,SAASqS,eAAeA,CAAC;EACvBxR,OAAO;EAAEyR,qBAAqB;EAAEC,eAAe;EAAE1E,MAAM;EAAE2E,aAAa;EAAElT;AACnD,CAAC,EAAE;EACxB,MAAM;IACJ4M,MAAM;IAAExN,MAAM;IAAED;EAClB,CAAC,GAAGoP,MAAM;EACV,MAAMxR,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM+X,eAAe,GAAG9X,kEAAe,CAAC,MAAM;IAC5C2E,OAAO,CAACuO,MAAM,CAAC;EACjB,CAAC,CAAC;EAEF,MAAM6E,QAAQ,GAAG/G,IAAI,CAACC,KAAK,CAAClN,MAAM,GAAGwN,MAAM,CAAC;EAC5C,MAAMyG,QAAQ,GAAGJ,eAAe,IAAIA,eAAe,GAAGG,QAAQ,GAC1D/G,IAAI,CAACiH,IAAI,CAAC,GAAG,GAAGF,QAAQ,IAAIH,eAAe,GAAG,GAAG,CAAC,CAAC,GACnD9V,SAAS;EAEb,SAASoW,YAAYA,CAAA,EAAG;IACtB,MAAMC,OAAO,GAAG5G,MAAM,KAAK,EAAE,GACzB7P,IAAI,CAAC,OAAO,EAAE;MAAE0T,KAAK,EAAE;IAAE,CAAC,EAAE;MAAEI,WAAW,EAAE;IAAE,CAAC,CAAC,GAC/C9T,IAAI,CAAC,QAAQ,EAAE;MAAE0T,KAAK,EAAE7D;IAAO,CAAC,EAAE;MAAEiE,WAAW,EAAEjE;IAAO,CAAC,CAAC;IAC9D,OACEnR,wDAAA;MAAKqF,SAAS,EAAEN,8DAAM,CAACiT,iBAAkB;MAAA3T,QAAA,EACtC0T;IAAO,CACL,CAAC;EAEV;EAEA,OACE3X,yDAAA;IACEiF,SAAS,EAAEN,8DAAM,CAACkT,SAAU;IAC5BC,QAAQ,EAAE,CAAE;IACZC,IAAI,EAAC,QAAQ;IACb5T,OAAO,EAAEmT,eAAgB;IAAArT,QAAA,GAEzBrE,wDAAA,CAAC2E,uEAAuB;MACtBmB,OAAO,EAAEA,OAAQ;MACjBsS,IAAI,EAAEb,qBAAsB;MAC5Bc,MAAM;MACNC,cAAc;MACdpS,IAAI,EAAEjB;IAAkB,CACzB,CAAC,EAED6S,YAAY,CAAC,CAAC,EACf9X,wDAAA;MAAKqF,SAAS,EAAEN,8DAAM,CAACgP,WAAY;MAAA1P,QAAA,EAChC/C,IAAI,CAAC,wBAAwB;IAAC,CAC5B,CAAC,EACNtB,wDAAA,CAACoL,kDAAM;MAAC/F,SAAS,EAAEN,8DAAM,CAACwT,GAAI;MAACC,KAAK,EAAC,UAAU;MAACF,cAAc;MAACpS,IAAI,EAAC,MAAM;MAACuS,IAAI;MAACC,KAAK;MAAArU,QAAA,EAClF+S,4EAAsB,CAACzT,MAAM,EAAED,QAAQ;IAAC,CACnC,CAAC,EACR+T,aAAa,IACZzX,wDAAA;MAAKqF,SAAS,EAAEN,8DAAM,CAAC4T,eAAgB;MAAAtU,QAAA,EACpC/C,IAAI,CAAC,uBAAuB,EAAE;QAC7BsS,KAAK,EAAGlG,4EAAiB,CAACpM,IAAI,EAAEmW,aAAa,CAAC9T,MAAM,EAAE;UAAE0B,SAAS,EAAEN,8DAAM,CAAC6T;QAAe,CAAC;MAC5F,CAAC,EAAE;QAAEtR,SAAS,EAAE,IAAI;QAAE2M,YAAY,EAAE;MAAK,CAAC;IAAC,CACxC,CACN,EACAzP,OAAO,CAACoT,QAAQ,CAAC,IAChB5X,wDAAA,CAACqX,+DAAU;MAACmB,KAAK,EAAC,QAAQ;MAACxV,IAAI,EAAE1B,IAAI,CAAC,cAAc,EAAE;QAAEuX,OAAO,EAAEjB;MAAS,CAAC;IAAE,CAAE,CAChF;EAAA,CACE,CAAC;AAEV;AAEA,iEAAe1Y,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEmI;AAAO,CAAC,KAA2B;EAC5C,MAAMhN,OAAO,GAAGqR,+EAA4B,CAACxM,MAAM,EAAEmI,MAAM,CAAC3B,MAAM,CAAC;EACnE,MAAMoG,qBAAqB,GAAGL,8EAA2B,CAACvM,MAAM,CAAC;EAEjE,OAAO;IACL7E,OAAO;IACPyR;EACF,CAAC;AACH,CACF,CAAC,CAACD,eAAe,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHsC;AACA;AAIgB;AACF;AACG;AAChB;AAC6B;AAE5C;AAAC;AACuC;AAEnC;AACwC;AAC3C;AACgB;AAEP;AAC6B;AAChC;AACd;AAEO;AAAA;AAgB5C,MAAMrS,iBAAiB,GAAG,EAAE;AAE5B,SAASsU,YAAYA,CAAC;EACpB/Y,IAAI;EAAEgZ,QAAQ;EAAEC,oBAAoB;EAAEC,iBAAiB;EAAEC,SAAS;EAAEC,WAAW;EAAEC,mBAAmB;EAAEtV;AACjF,CAAC,EAAE;EACxB,MAAM;IACJuV,iBAAiB;IAAEC,gBAAgB;IAAEnZ,gBAAgB;IAAEoZ,gBAAgB;IAAEC;EAC3E,CAAC,GAAG7a,mDAAU,CAAC,CAAC;EAEhB,MAAM8a,GAAG,GAAGpB,8CAAM,CAAiB,CAAC;EACpC,MAAMqB,UAAU,GAAGrB,8CAAM,CAAiB,CAAC;EAE3C,SAASsB,cAAcA,CAACC,OAAiC,EAAE;IACzD,IAAI,CAACA,OAAO,EAAE,OAAO;MAAE1W,MAAM,EAAE,CAAC;MAAED,QAAQ,EAAEnE,wDAAmBA;IAAC,CAAC;IAEjE,IAAIiB,IAAI,CAACoB,IAAI,KAAK,gBAAgB,IAAIpB,IAAI,CAAC8Z,aAAa,EAAE;MACxD,MAAMC,SAAS,GAAGF,OAAO,CAACrY,IAAI,CAAE2B,MAAM,IAAKA,MAAM,CAACD,QAAQ,KAAKqV,sDAAiB,CAAC;MACjF,IAAIwB,SAAS,EAAE,OAAOA,SAAS;IACjC;IAEA,MAAMC,WAAW,GAAGH,OAAO,CAACrY,IAAI,CAAE2B,MAAM,IAAKA,MAAM,CAACD,QAAQ,KAAKnE,wDAAmB,CAAC;IACrF,OAAOib,WAAW;EACpB;EAEA,MAAMlZ,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EAEtB,MAAM,CAAC8a,SAAS,EAAEC,YAAY,CAAC,GAAGjT,gDAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACkT,OAAO,EAAEC,SAAS,EAAEC,WAAW,CAAC,GAAGzB,6DAAO,CAAC,CAAC;EAEnD,MAAMtT,OAAO,GAAGqT,yEAAkB,CAAC3Y,IAAI,CAAC;EACxC,MAAM2B,YAAY,GAAG3B,IAAI,CAACoB,IAAI,KAAK,gBAAgB;EACnD,MAAMkZ,UAAU,GAAG3Y,YAAY,GAAG3B,IAAI,GAAGkB,SAAS;EAClD,MAAMqZ,WAAW,GAAG,CAAC5Y,YAAY,GAAG3B,IAAI,GAAGkB,SAAS;EAEpD,MAAMsZ,SAAS,GAAG,CAAC7Y,YAAY,GAC3B;IAAEwB,MAAM,EAAEoX,WAAW,EAAEnH,KAAK,IAAI,CAAC;IAAElQ,QAAQ,EAAEnE,wDAAmBA;EAAC,CAAC,GAClE6a,cAAc,CAACU,UAAU,EAAEvY,WAAW,CAAC;EAC3C,MAAM0Y,aAAa,GAAGD,SAAS,EAAEtX,QAAQ,IAAInE,wDAAmB;EAChE,MAAM2b,cAAc,GAAGH,WAAW,EAAEG,cAAc;EAClD,MAAMC,cAAc,GAAG,CAAChZ,YAAY,IAAIqX,QAAQ,IAAI0B,cAAc,GAC9D5Z,IAAI,CAACyC,MAAM,CAACmX,cAAc,CAAC,GAAG,GAAG,GAAGF,SAAS,EAAErX,MAAM,IAAI,CAAC;EAC9D,MAAMyX,SAAS,GAAG,CAACjZ,YAAY,IAAIqC,OAAO,CAACuW,WAAW,EAAEK,SAAS,CAAC;EAClE,MAAMC,SAAS,GAAG,CAAClZ,YAAY,IAAIqC,OAAO,CAACuW,WAAW,EAAEM,SAAS,CAAC;EAClE,MAAMxE,SAAS,GAAG,CAAC1U,YAAY,IAAI,CAACqX,QAAQ,IAAIhV,OAAO,CAACuW,WAAW,EAAElE,SAAS,CAAC;EAC/E,MAAMyE,iBAAiB,GAAG9W,OAAO,CAAChE,IAAI,EAAE+a,cAAc,CAAC;EACvD,MAAMC,kBAAkB,GAAGhX,OAAO,CAACuW,WAAW,EAAEU,cAAc,IAAI,CAACV,WAAW,EAAEW,cAAc,CAAC;EAC/F,MAAMC,YAAY,GAAGZ,WAAW,EAAEY,YAAY;EAE9C,MAAMjE,eAAe,GAAG9X,mEAAe,CAAC,MAAM;IAC5C,IAAIiX,SAAS,EAAE;MACboD,oBAAoB,CAAC;QAAEzZ;MAAK,CAAC,CAAC;MAC9B;IACF;IAEA,IAAI6a,SAAS,IAAI,CAAC7B,QAAQ,EAAE;MAC1BM,iBAAiB,CAAC;QAAEtZ;MAAK,CAAC,CAAC;MAC3B;IACF;IAEA,IAAIgb,kBAAkB,EAAE;MACtB5a,gBAAgB,CAAC;QACfkC,OAAO,EAAE;UACPK,GAAG,EAAE,yBAAyB;UAC9BC,SAAS,EAAE;YACT4R,KAAK,EAAE2G;UACT,CAAC;UACDC,OAAO,EAAE;YACPxG,WAAW,EAAEuG,YAAa;YAC1B1H,YAAY,EAAE,IAAI;YAClB3M,SAAS,EAAE;UACb;QACF;MACF,CAAC,CAAC;MACF;IACF;IAEA,IAAIgU,iBAAiB,IAAI,CAAC7B,oBAAoB,EAAE;MAC9CM,gBAAgB,CAAC;QACfvZ;MACF,CAAC,CAAC;MACF;IACF;IAEA,IAAIqb,QAAQ,EAAE;MACZ7B,gBAAgB,CAAC;QACfxZ,IAAI;QACJsb,SAAS,EAAEA,CAAA,KAAMvX,OAAO,GAAG/D,IAAI,EAAEgZ,QAAQ,GAAG,QAAQ,GAAG,UAAU;MACnE,CAAC,CAAC;MACF;IACF;IAEAjV,OAAO,GAAG/D,IAAI,EAAEgZ,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAC;EACnD,CAAC,CAAC;EAEF,MAAMuC,qBAAqB,GAAG5c,+CAAO,CAAC,MAAM;IAC1C,MAAM;MAAEqG,QAAQ;MAAEK;IAAQ,CAAC,GAAGpB,wEAAiB,CAACjE,IAAI,CAAC,IAAI,CAAC,CAAC;IAE3D,IAAI,CAACgF,QAAQ,IAAI,CAACK,OAAO,EAAE;MACzB,OAAOnE,SAAS;IAClB;IAEA,MAAMsa,cAAc,GAAG,CAACxW,QAAQ,CAACE,WAAW,EAAEF,QAAQ,CAACG,SAAS,CAAC;IAEjE,OACE3F,wDAAA,CAAC8E,gFAAuB;MACtBO,SAAS,EAAEN,8DAAM,CAACkX,aAAc;MAChCxW,gBAAgB,EAAEuW,cAAe;MACjCpW,WAAW,EAAEC,OAAO,CAACC,OAAQ;MAC7BC,UAAU,EAAE,CAAE;MACdC,UAAU,EAAE;IAAE,CACf,CAAC;EAEN,CAAC,EAAE,CAACxF,IAAI,CAAC,CAAC;EAEV,MAAM0b,UAAU,GAAG/Z,YAAY,GAAG3B,IAAI,CAACuD,MAAM,GAAG,CAAC;EACjD,MAAM8X,QAAQ,GAAGrX,OAAO,CAAChE,IAAI,CAACoB,IAAI,KAAK,UAAU,IAAIpB,IAAI,CAAC2b,eAAe,CAAC;EAE1E,MAAMC,UAAU,GAAGjd,+CAAO,CAAC,MAAM;IAC/B,IAAIgD,YAAY,EAAE;MAChB,MAAM;QAAEqD;MAAS,CAAC,GAAGf,wEAAiB,CAACjE,IAAI,CAAC,IAAI,CAAC,CAAC;MAClD,IAAI,CAACgF,QAAQ,EAAE;QACb,OAAO9D,SAAS;MAClB;MACA,OACE1B,wDAAA,CAACqX,gEAAU;QACTmB,KAAK,EAAE,CAAChT,QAAQ,CAACE,WAAW,EAAEF,QAAQ,CAACG,SAAS,CAAE;QAClD3C,IAAI,EACF1B,IAAI,CAAC,iBAAiB,EAAE;UAAEyC,MAAM,EAAEmY;QAAW,CAAC;MAC/C,CACF,CAAC;IAEN;IACA,IAAI1C,QAAQ,EAAE;MACZ,OAAOxZ,wDAAA,CAACqX,gEAAU;QAACmB,KAAK,EAAC,OAAO;QAACxV,IAAI,EAAE1B,IAAI,CAAC,kBAAkB;MAAE,CAAE,CAAC;IACrE;IACA,IAAI+Z,SAAS,EAAE;MACb,OAAOrb,wDAAA,CAACqX,gEAAU;QAACmB,KAAK,EAAC,KAAK;QAACxV,IAAI,EAAE1B,IAAI,CAAC,aAAa;MAAE,CAAE,CAAC;IAC9D;IACA,IAAIuV,SAAS,EAAE;MACb,OAAO7W,wDAAA,CAACqX,gEAAU;QAACmB,KAAK,EAAC,QAAQ;QAACxV,IAAI,EAAE1B,IAAI,CAAC,mBAAmB;MAAE,CAAE,CAAC;IACvE;IACA,IAAIga,iBAAiB,EAAE;MACrB,OAAOtb,wDAAA,CAACqX,gEAAU;QAACmB,KAAK,EAAC,QAAQ;QAACxV,IAAI,EAAE1B,IAAI,CAAC,mBAAmB;MAAE,CAAE,CAAC;IACvE;IACA,IAAI8Z,SAAS,EAAE;MACb,OAAOpb,wDAAA,CAACqX,gEAAU;QAACmB,KAAK,EAAC,MAAM;QAACxV,IAAI,EAAE1B,IAAI,CAAC,aAAa;MAAE,CAAE,CAAC;IAC/D;IACA,OAAOI,SAAS;EAClB,CAAC,EAAE,CAACS,YAAY,EAAEqX,QAAQ,EAAEhZ,IAAI,EAAE6a,SAAS,EACzCD,SAAS,EAAE9Z,IAAI,EAAE4a,UAAU,EAAEZ,iBAAiB,EAAEzE,SAAS,CAAC,CAAC;EAE7DwC,+EAAc,CAACa,GAAG,EAAEL,mBAAmB,EAAGwC,KAAK,IAAK;IAClD,MAAMC,OAAO,GAAGD,KAAK,CAACE,cAAc;IACpC7B,YAAY,CAAC4B,OAAO,CAAC;EACvB,CAAC,CAAC;EAEF,MAAME,YAAY,GAAGrd,+CAAO,CAAC,MAAM;IACjC,IAAIua,iBAAiB,EAAE;MACrB,OAAOpY,IAAI,CAAC,mBAAmB,CAAC;IAClC;IAEA,IAAIuV,SAAS,EAAE;MACb,OAAOvV,IAAI,CAAC,iBAAiB,CAAC;IAChC;IAEA,IAAI2Z,aAAa,KAAKlC,sDAAiB,EAAE;MACvC,OAAOG,0EAAe,CAAC5X,IAAI,EAAE6Z,cAAc,IAAI,CAAC,EAAE;QAChDsB,sBAAsB,EAAE,IAAI;QAC5BpX,SAAS,EAAEN,8DAAM,CAAC2X;MACpB,CAAC,CAAC;IACJ;IAEA,OAAOhP,4EAAiB,CAACpM,IAAI,EAAE6Z,cAAc,IAAI,CAAC,EAAE;MAClD9G,MAAM,EAAE,IAAI;MACZhP,SAAS,EAAEN,8DAAM,CAAC2X;IACpB,CAAC,CAAC;EACJ,CAAC,EAAE,CAAChD,iBAAiB,EAAEuB,aAAa,EAAEE,cAAc,EAAEtE,SAAS,EAAEvV,IAAI,CAAC,CAAC;EAEvE,OACElB,yDAAA;IACE8Z,GAAG,EAAEA,GAAI;IACT7U,SAAS,EAAEgI,gEAAc,CACvB,kBAAkB,EAClBtI,8DAAM,CAACkT,SAAS,EAChBlT,8DAAM,CAAC4X,QAAQ,EACf,cAAc,EACdrB,iBAAiB,IAAIvW,8DAAM,CAAC6X,eAAe,EAC3C/F,SAAS,IAAI9R,8DAAM,CAAC8X,OAAO,EAC3BjD,WAAW,IAAI7U,8DAAM,CAAC6U,WACxB,CAAE;IACF1B,QAAQ,EAAE0B,WAAW,GAAGlY,SAAS,GAAG,CAAE;IACtCyW,IAAI,EAAEyB,WAAW,GAAGlY,SAAS,GAAG,QAAS;IACzC6C,OAAO,EAAEqV,WAAW,GAAGlY,SAAS,GAAGgW,eAAgB;IACnDoF,YAAY,EAAE,CAAC7D,4EAAY,IAAI,CAACW,WAAW,GAAGgB,SAAS,GAAGlZ,SAAU;IACpEqb,YAAY,EAAE,CAAC9D,4EAAY,IAAI,CAACW,WAAW,GAAGiB,WAAW,GAAGnZ,SAAU;IAAA2C,QAAA,GAErE0X,qBAAqB,EAEtB/b,wDAAA;MACEka,GAAG,EAAEC,UAAW;MAChB9U,SAAS,EAAEN,8DAAM,CAACiY,cAAe;MACjC7G,KAAK,EAAE,UAAUlR,iBAAiB,eAAeA,iBAAiB,IAAK;MAAAZ,QAAA,EAEtEyB,OAAO,IACN9F,wDAAA,CAACsZ,4DAAW;QACV2D,6BAA6B,EAAEpD,mBAAoB;QACnDqD,6BAA6B,EAAErD,mBAAoB;QACnDsD,YAAY,EAAEhD,UAAW;QACzBrU,OAAO,EAAEA,OAAQ;QACjBI,IAAI,EAAEjB,iBAAkB;QACxBmY,UAAU,EAAEzC,OAAQ;QACpB0C,oBAAoB;MAAA,CACrB;IACF,CAEE,CAAC,EACL,CAAC1D,SAAS,IACT3Z,wDAAA,CAACoL,mDAAM;MACL/F,SAAS,EAAEgI,gEAAc,CACvBtI,8DAAM,CAACwT,GAAG,EACVmB,iBAAiB,IAAI3U,8DAAM,CAACuY,aAC9B,CAAE;MACFhF,cAAc;MACdpS,IAAI,EAAC,MAAM;MACXsS,KAAK,EAAErW,YAAY,GAAG,kBAAkB,GAAG,OAAQ;MACnDob,iBAAiB,EAAE9C,SAAS,IAAI,CAACf,iBAAkB;MACnDjB,IAAI;MACJC,KAAK;MAAArU,QAAA,EAEJmY;IAAY,CACP,CACT,EACAJ,UAAU,EACVP,QAAQ,IAAI7b,wDAAA,CAAC6E,0DAAI;MAACuB,IAAI,EAAC,YAAY;MAACf,SAAS,EAAEN,8DAAM,CAACyY;IAAS,CAAE,CAAC;EAAA,CAChE,CAAC;AAEV;AAEA,iEAAete,4CAAI,CACjByI,mDAAU,CAAYgD,MAAM,IAA2B;EACrD,MAAM8O,oBAAoB,GAAGT,6EAA0B,CAACrO,MAAM,CAAC;EAE/D,OAAO;IACL8O;EACF,CAAC;AACH,CAAC,CAAC,CAACF,YAAY,CACjB,CAAC,E;;;;;;;;;;;;;;AC9RD;AACA,iEAAe,CAAC,0vDAA0vD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACE9tD;AAEa;AAcH;AACI;AACiC;AAChC;AACgB;AACjB;AACN;AACO;AAEI;AAClB;AACoC;AACpC;AACgB;AACV;AAEV;AAC0B;AACtB;AACR;AACgB;AAClB;AACU;AACI;AACP;AACM;AACN;AACkB;AACR;AACM;AAEb;AAAA;AAwB7C,MAAMvU,WAAW,GAAG,GAAG;AACvB,MAAMsZ,qBAAqB,GAAG,GAAG;AACjC,MAAMC,eAAe,GAAG,GAAG;AAC3B,MAAMC,4BAA4B,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAU;AACtD,MAAMC,wBAAwB,GAAG,GAAG,GAAG/Z,gEAAG;AAE1C,MAAMga,qBAAqB,GAAGf,0DAAQ,CAAEgB,EAAE,IAAKA,EAAE,CAAC,CAAC,EAAEJ,eAAe,EAAE,IAAI,CAAC;AAE3E,MAAM3gB,SAAoC,GAAGA,CAAC;EAC5C0N,KAAK;EACLsT,aAAa;EACbC,qBAAqB;EACrBC,iBAAiB;EACjBC,eAAe;EACflQ,WAAW;EACX1J,IAAI;EACJkD,aAAa;EACbqO,eAAe;EACfsI,gBAAgB;EAChBC,qBAAqB;EACrBC,kBAAkB;EAClBC;AACF,CAAC,KAAK;EACJ,MAAM;IACJC,cAAc;IACdtF,iBAAiB;IACjBuF,gBAAgB;IAChBC,eAAe;IACfC,gBAAgB;IAChBC,sBAAsB;IACtBC,iBAAiB;IACjBC,4BAA4B;IAC5BC;EACF,CAAC,GAAGvgB,mDAAU,CAAC,CAAC;EAChB,MAAMwgB,SAAS,GAAG9G,8CAAM,CAAiB,CAAC;EAC1C,MAAM+G,aAAa,GAAG/G,8CAAM,CAAiB,CAAC;EAC9C,MAAMgH,aAAa,GAAGhH,8CAAM,CAAqB,CAAC;EAClD,MAAMiH,eAAe,GAAGjH,8CAAM,CAAiB,CAAC;EAEhD,MAAMkH,WAAW,GAAGlH,8CAAM,CAAiB,CAAC;EAE5C,MAAM1Q,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAM2U,aAAa,GAAGhV,mEAAgB,CAAC9F,IAAI,CAAC;EAE5C,MAAMmE,IAAI,GAAG2W,aAAa,IAAInT,oEAAa,CAACmT,aAAa,CAAC,GAAGA,aAAa,GAAGve,SAAS;EACtF,MAAMwe,IAAI,GAAGD,aAAa,IAAIvC,oEAAa,CAACuC,aAAa,CAAC,GAAGA,aAAa,GAAGve,SAAS;EACtF,MAAM6O,MAAM,GAAG/L,OAAO,CAAC6D,aAAa,IAAImD,cAAc,EAAE2U,SAAS,KAAK9X,aAAa,CAAC;EAEpF,MAAM+X,YAAY,GAAG5U,cAAc,EAAE4U,YAAY;EACjD,MAAM,CAACC,0BAA0B,EAAEC,6BAA6B,CAAC,GAAG7Y,gDAAQ,CAAC,KAAK,CAAC;EACnF,MAAM,CAAC8Y,8BAA8B,EAAEC,iCAAiC,CAAC,GAAG/Y,gDAAQ,CAAC,KAAK,CAAC;EAC3F,MAAM,CAACgZ,8BAA8B,EAAEC,iCAAiC,CAAC,GAAGjZ,gDAAQ,CAAC,KAAK,CAAC;EAC3F,MAAM,CAACkZ,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnZ,gDAAQ,CAAmB,KAAK,CAAC;EACjF,MAAM,CAACoZ,oBAAoB,EAAEC,eAAe,EAAEC,iBAAiB,CAAC,GAAG3H,2DAAO,CAAC,KAAK,CAAC;EACjF,MAAM4H,kBAAkB,GAAGlI,8CAAM,CAA2B,CAAC;EAE7D,MAAMmI,qBAAqB,GAAG9hB,+CAAO,CAAC,MAAM;IAC1C,IAAI,CAACuX,eAAe,EAAE;MACpB,OAAOhV,SAAS;IAClB;IACA,MAAM;MACJwf,0BAA0B;MAC1B,GAAGC;IACL,CAAC,GAAGzK,eAAe;IACnB,OAAO,CAACnG,MAAM,IAAI6Q,MAAM,CAACC,MAAM,CAACF,mBAAmB,CAAC,CAACG,KAAK,CAAC9c,OAAO,CAAC;EACrE,CAAC,EAAE,CAAC+L,MAAM,EAAEmG,eAAe,CAAC,CAAC;EAE7B,MAAM6K,+BAA+B,GAAG,CAAChR,MAAM,IAAImG,eAAe,EAAE8K,gCAAgC;EACpG,MAAMC,6BAA6B,GAAG,CAAClR,MAAM,IAAImG,eAAe,EAAE1H,8BAA8B;EAChG,MAAMD,4BAA4B,GAAG,CAACwB,MAAM,IAAImG,eAAe,EAAEC,6BAA6B;EAE9F,MAAMpV,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAC5B,MAAMyB,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EACtB,MAAM+hB,QAAQ,GAAGlW,cAAc,EAAEmW,KAAK;EACtC,MAAMC,aAAa,GAAGziB,+CAAO,CAAC,MAAM;IAClC,OAAOuiB,QAAQ,EAAEG,IAAI,CAAC,CAACC,QAAQ,EAAEthB,IAAI,KAAKshB,QAAQ,CAAC3Q,MAAM,GAAG3Q,IAAI,CAAC2Q,MAAM,CAAC,CACrE9H,MAAM,CAAE7I,IAAI,IAAKA,IAAI,CAACuI,KAAK,KAAK,CAAC,IAAIvI,IAAI,CAACkD,QAAQ,KAAKnE,wDAAmB,CAAC;EAChF,CAAC,EAAE,CAACmiB,QAAQ,CAAC,CAAC;EAEd,MAAMK,YAAY,GAAG5iB,+CAAO,CAAC,MAAM;IACjC,MAAM6iB,QAAQ,GAAG,IAAIC,GAAG,CAAC,CAAC;IAE1B,IAAI,CAACL,aAAa,EAAE,OAAOI,QAAQ;IAEnCJ,aAAa,CAACM,OAAO,CAAE1hB,IAAI,IAAK;MAC9B,MAAM6N,WAAW,GAAGqT,QAAQ,EAAE1f,IAAI,CAC/BmgB,SAAS,IAAKA,SAAS,CAACze,QAAQ,KAAKnE,wDAAmB,IACpD4iB,SAAS,CAAChR,MAAM,KAAK3Q,IAAI,CAAC2Q,MACjC,CAAC;MACD,IAAI9C,WAAW,EAAE;QACf2T,QAAQ,CAACI,GAAG,CAAC5hB,IAAI,EAAE6N,WAAW,CAAC;MACjC;IACF,CAAC,CAAC;IAEF,OAAO2T,QAAQ;EACjB,CAAC,EAAE,CAACN,QAAQ,EAAEE,aAAa,CAAC,CAAC;EAE7B,MAAMS,QAAQ,GAAGljB,+CAAO,CAAC,MAAM;IAC7B,OAAOyiB,aAAa,EAAEU,MAAM,CAAC,CAACC,IAAI,EAAE/hB,IAAI,KAAM+hB,IAAI,CAAC5e,MAAM,GAAGnD,IAAI,CAACmD,MAAM,GAAG4e,IAAI,GAAG/hB,IAAK,CAAC;EACzF,CAAC,EAAE,CAACohB,aAAa,CAAC,CAAC;EAEnB,MAAM;IACJY,OAAO,EAAE3I;EACX,CAAC,GAAG+D,wFAAuB,CAAC;IAAE6E,OAAO,EAAEzC,WAAW;IAAE0C,UAAU,EAAEpE,qBAAqB;IAAEqE,UAAU,EAAE,CAACva;EAAO,CAAC,CAAC;EAE7G,MAAMwa,cAAc,GAAGpe,OAAO,CAAC0a,kBAAkB,CAAC,IAAI,CAACkB,YAAY;EACnE,MAAMyC,YAAY,GAAGre,OAAO,CAAC4b,YAAY,CAAC;EAC1C,MAAM0C,gBAAgB,GAAGF,cAAc,IAAIC,YAAY,IAAIxC,0BAA0B;EACrF,MAAM0C,oBAAoB,GAAGF,YAAY,GAAGpC,8BAA8B,GAAGF,8BAA8B;EAE3G3T,iDAAS,CAAC,MAAM;IACd,IAAIsS,kBAAkB,EAAE;MACtB,MAAMhN,MAAM,GAAG,eAAe,IAAIgN,kBAAkB,GAChDA,kBAAkB,CAAC8D,aAAa,GAChC9D,kBAAkB,CAAC1X,EAAE;MACzB8X,eAAe,CAAC;QAAEpN;MAAO,CAAC,CAAC;IAC7B;EACF,CAAC,EAAE,CAACgN,kBAAkB,CAAC,CAAC;EAExBtS,iDAAS,CAAC,MAAM;IACd,IAAI,CAACxE,MAAM,EAAE;MACXkY,6BAA6B,CAAC,KAAK,CAAC;MACpCX,wBAAwB,CAAC;QAAEnf,IAAI,EAAEkB;MAAU,CAAC,CAAC;MAC7Ckf,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC,EAAE,CAACxY,MAAM,CAAC,CAAC;EAEZwE,iDAAS,CAAC,MAAM;IACd8T,iCAAiC,CAAClc,OAAO,CAAC4b,YAAY,IAAI,IAAI,IAAIA,YAAY,CAAC,CAAC;EAClF,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElB,MAAM6C,YAAY,GAAGrjB,mEAAe,CAAE+R,CAAgC,IAAK;IACzE,IAAIkR,YAAY,EAAE;IAClB,MAAMK,aAAa,GAAGvR,CAAC,CAACuR,aAAa;IAErCxE,qBAAqB,CAAC,MAAM;MAC1B,MAAM;QAAEyE;MAAU,CAAC,GAAGD,aAAa;MAEnC5C,6BAA6B,CAAC6C,SAAS,GAAG,GAAG,CAAC;MAE9C,IAAItD,aAAa,CAACuD,OAAO,IAAItD,aAAa,CAACsD,OAAO,EAAE;QAClD,MAAM;UAAEC,GAAG,EAAEC;QAAU,CAAC,GAAGxD,aAAa,CAACsD,OAAO,CAACG,qBAAqB,CAAC,CAAC;QACxE,MAAM;UAAEF,GAAG,EAAEG;QAAc,CAAC,GAAG3D,aAAa,CAACuD,OAAO,CAACG,qBAAqB,CAAC,CAAC;QAC5E/C,iCAAiC,CAAC8C,SAAS,GAAGE,aAAa,IAAI,CAAC,CAAC;MACnE;MAEA,IAAIzD,eAAe,CAACqD,OAAO,IAAIpD,WAAW,CAACoD,OAAO,EAAE;QAClD,MAAM;UAAEC,GAAG,EAAEI;QAAQ,CAAC,GAAG1D,eAAe,CAACqD,OAAO,CAACG,qBAAqB,CAAC,CAAC;QACxE,MAAM;UAAEF,GAAG,EAAEK;QAAY,CAAC,GAAG1D,WAAW,CAACoD,OAAO,CAACG,qBAAqB,CAAC,CAAC;QACxE,MAAMjf,QAAQ,GAAGmf,OAAO,GAAGC,WAAW,IAAIjF,wBAAwB;QAClE,IAAIna,QAAQ,EAAE;UACZwc,eAAe,CAAC,CAAC;QACnB,CAAC,MAAM;UACLC,iBAAiB,CAAC,CAAC;QACrB;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAM4C,sBAAsB,GAAGriB,IAAI,CAAC,wBAAwB,EAAE;IAC5DgI,IAAI,EAAEmU,gEAAe,CAACnU,IAAI,CAAE;IAC5B0K,IAAI,EACFhU,wDAAA,CAAC8d,yDAAQ;MACP9a,IAAI,EAAE1B,IAAI,CAAC,mCAAmC,CAAE;MAChDsiB,GAAG,EAAEtiB,IAAI,CAAC,4BAA4B;IAAE,CACzC;EAEL,CAAC,EAAE;IAAEgG,SAAS,EAAE;EAAK,CAAC,CAAC;EAEvB,MAAMuc,mBAAmB,GAAG1kB,+CAAO,CAAC,MAAM;IACxC,IAAI+gB,IAAI,EAAE;MACR,OAAO5e,IAAI,CAAC,4BAA4B,EAAE;QAAE6D,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAE4e,IAAI;MAAE,CAAC,EAAE;QAC5E5Y,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE;MAChB,CAAC,CAAC;IACJ;IAEA,IAAI1D,MAAM,EAAE;MACV,OAAOjP,IAAI,CAAC,yBAAyB,EAAEI,SAAS,EAAE;QAChD4F,SAAS,EAAE,IAAI;QACfwc,iBAAiB,EAAE,CAAC,IAAI;MAC1B,CAAC,CAAC;IACJ;IAEA,IAAInD,gBAAgB,KAAK,aAAa,EAAE;MACtC,OAAOrf,IAAI,CAAC,iCAAiC,CAAC;IAChD;IAEA,OAAOA,IAAI,CAAC,qBAAqB,EAAE;MACjCgI,IAAI,EAAEmU,gEAAe,CAACnU,IAAI;IAC5B,CAAC,EAAE;MAAEhC,SAAS,EAAE,IAAI;MAAE2M,YAAY,EAAE;IAAK,CAAC,CAAC;EAC7C,CAAC,EAAE,CAACiM,IAAI,EAAE3P,MAAM,EAAEoQ,gBAAgB,EAAErX,IAAI,EAAEhI,IAAI,CAAC,CAAC;EAEhD,SAASyiB,uBAAuBA,CAAA,EAAG;IACjC,OACE/jB,wDAAA;MAAIqF,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACif,UAAU,EAAEjf,+DAAM,CAACkf,MAAM,CAAE;MAAA5f,QAAA,EAC7D/C,IAAI,CAAC,mBAAmB;IAAC,CACxB,CAAC;EAET;EAEA,SAAS4iB,4BAA4BA,CAAA,EAAG;IACtC,OACElkB,wDAAA;MAAGqF,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACgP,WAAW,EAAEhP,+DAAM,CAACkf,MAAM,CAAE;MAAA5f,QAAA,EAC7Dsf;IAAsB,CACtB,CAAC;EAER;EAEA,SAASQ,qBAAqBA,CAAA,EAAG;IAC/B,OACEnkB,wDAAA;MAAIka,GAAG,EAAE4F,aAAc;MAACza,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACif,UAAU,EAAEjf,+DAAM,CAACkf,MAAM,CAAE;MAAA5f,QAAA,EACjF/C,IAAI,CAACiP,MAAM,GAAG,qBAAqB,GAAG,iBAAiB;IAAC,CACvD,CAAC;EAET;EAEA,SAAS6T,0BAA0BA,CAAA,EAAG;IACpC,OACEpkB,wDAAA;MAAGqF,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACgP,WAAW,EAAEhP,+DAAM,CAACsf,oBAAoB,EAAEtf,+DAAM,CAACkf,MAAM,CAAE;MAAA5f,QAAA,EAC1Fwf;IAAmB,CACnB,CAAC;EAER;EAEA,MAAMnM,eAAe,GAAG9X,mEAAe,CAAC,CAACY,IAAgB,EAAEoR,MAA8B,KAAK;IAC5F,IAAIA,MAAM,KAAK,QAAQ,EAAE;MACvB,IAAI,EAAE,IAAI,IAAIpR,IAAI,CAAC,EAAE;QACnB;MACF;MACA,IAAIoiB,cAAc,EAAE;QAClB9I,iBAAiB,CAAC;UAAEtZ,IAAI;UAAEwG,WAAW,EAAEwE,cAAc,EAAE2U;QAAU,CAAC,CAAC;QACnE;MACF;MACAZ,gBAAgB,CAAC;QAAE/e,IAAI;QAAE2e;MAAM,CAAC,CAAC;MACjC;IACF;IACAQ,wBAAwB,CAAC;MAAEnf;IAAK,CAAC,CAAC;EACpC,CAAC,CAAC;EAEF,MAAM8jB,iBAAiB,GAAG1kB,mEAAe,CAAEY,IAAiB,IAAK;IAC/D,IAAIA,IAAI,CAACoB,IAAI,KAAK,UAAU,IAAI,CAACkd,iBAAiB,IAAI,CAAC3Z,IAAI,EAAEqC,EAAE,EAAE;IACjE,MAAM/F,SAAS,GAAGqd,iBAAiB,CAACte,IAAI,CAACgH,EAAE,CAAC;IAE5CkY,4BAA4B,CAAC;MAC3Blf,IAAI,EAAEiB,SAAS;MACfuF,WAAW,EAAE7B,IAAI,CAACqC;IACpB,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAM+c,cAAc,GAAG3kB,mEAAe,CAAC,MAAM;IAC3C,IAAI+gB,gBAAgB,KAAK,UAAU,EAAE;MACnClB,iBAAiB,CAAC,CAAC;IACrB;EACF,CAAC,CAAC;EAEF,SAAS+E,eAAeA,CAAA,EAAG;IACzB,IAAI7D,gBAAgB,KAAK,UAAU,EAAE;MACnC,OACE3gB,wDAAA,CAAC+d,2DAAc;QACb1Y,SAAS,EAAEN,+DAAM,CAAC0f,kBAAmB;QACrCC,KAAK,EAAE3F,eAAgB;QACvB4F,UAAU,EAAEJ,cAAe;QAC3BK,sBAAsB,EAAE,IAAI7f,+DAAM,CAAC8f,IAAI,EAAG;QAC1CC,YAAY,EAAC,eAAe;QAAAzgB,QAAA,EAE3Bya,iBAAiB,IAAIC,eAAe,EAAEgG,GAAG,CAAE7S,MAAM,IAAK;UACrD,MAAMzQ,SAAS,GAAGqd,iBAAiB,CAAC5M,MAAM,CAAC;UAC3C,IAAI,CAACzQ,SAAS,EAAE,OAAOC,SAAS;UAEhC,OACE1B,wDAAA,CAACuZ,sDAAY;YAEX/Y,IAAI,EAAEiB,SAAS,CAACjB,IAAK;YACrBqZ,mBAAmB,EAAEA,mBAAoB;YACzCtV,OAAO,EAAE+f,iBAAkB;YAC3B5K,iBAAiB;UAAA,GAJZxH,MAKN,CAAC;QAEN,CAAC;MAAC,CACY,CAAC;IAErB;IAEA,MAAM8S,eAAe,GAAGnG,qBAAqB,GAAG8B,gBAAgB,CAAC,EAAEtX,MAAM,CAAE6I,MAAM,IAAK;MACpF,MAAM1R,IAAI,GAAGoe,aAAa,GAAG1M,MAAM,CAAC;MACpC,IAAI,CAAC1R,IAAI,EAAE,OAAO,KAAK;MAEvB,MAAM;QAAE4a,SAAS;QAAE6J;MAAmB,CAAC,GAAGzkB,IAAI;MAE9C,IAAIihB,6BAA6B,IAAIrG,SAAS,EAAE;QAC9C,OAAO,CAACrM,4BAA4B,GAAGkW,kBAAkB,GAAG,KAAK;MACnE;MAEA,IAAI1D,+BAA+B,IAAI,CAACnG,SAAS,EAAE,OAAO,KAAK;MAE/D,OAAO,IAAI;IACb,CAAC,CAAC;IAEF,OACEpb,wDAAA;MAAKqF,SAAS,EAAEN,+DAAM,CAAC0f,kBAAmB;MAAApgB,QAAA,EACvCua,aAAa,IAAIoG,eAAe,EAAEE,OAAO,CAAEhT,MAAM,IAAK;QACrD,MAAM1R,IAAI,GAAGoe,aAAa,CAAC1M,MAAM,CAAC;QAClC,MAAMiT,gBAAgB,GAAG3gB,OAAO,CAAChE,IAAI,CAACykB,kBAAkB,CAAC,IAAI,CAAClW,4BAA4B;QAC1F,MAAMqW,uBAAuB,GAAGD,gBAAgB,IAAI,CAAC3kB,IAAI,CAAC6a,SAAS,IAAI,CAACoG,6BAA6B;QAErG,MAAM4D,QAAQ,GAAG,CACfrlB,wDAAA,CAACuZ,sDAAY;UAEX/Y,IAAI,EAAEA,IAAK;UACXqZ,mBAAmB,EAAEA,mBAAoB;UACzCL,QAAQ,EAAE2L,gBAAgB,IAAI,CAACC,uBAAwB;UACvD7gB,OAAO,EAAEmT;QAAgB,GAJpBxF,MAKN,CAAC,CACH;QAED,IAAIkT,uBAAuB,EAAE;UAC3BC,QAAQ,CAACC,IAAI,CACXtlB,wDAAA,CAACuZ,sDAAY;YAEXC,QAAQ;YACRhZ,IAAI,EAAEA,IAAK;YACXqZ,mBAAmB,EAAEA,mBAAoB;YACzCtV,OAAO,EAAEmT;UAAgB,GAJpB,UAAUxF,MAAM,EAKtB,CACH,CAAC;QACH;QAEA,OAAOmT,QAAQ;MACjB,CAAC;IAAC,CACC,CAAC;EAEV;EAEA,SAASE,kBAAkBA,CAAA,EAAG;IAC5B,OACEvlB,wDAAA;MAAKqF,SAAS,EAAEN,+DAAM,CAACygB,mBAAoB;MAAAnhB,QAAA,EACxCud,aAAa,EAAEmD,GAAG,CAAEvkB,IAAI,IAAK;QAC5B,OACER,wDAAA,CAACsX,yDAAe;UACdxE,MAAM,EAAEtS,IAAK;UACbiX,aAAa,EAAEsK,YAAY,CAAC0D,GAAG,CAACjlB,IAAI,CAAE;UACtCgX,eAAe,EAAE6K,QAAQ,GAAGzR,IAAI,CAACC,KAAK,CAACwR,QAAQ,CAAC1e,MAAM,GAAG0e,QAAQ,CAAClR,MAAM,CAAC,GAAGzP,SAAU;UACtF6C,OAAO,EAAEmT;QAAgB,CAC1B,CAAC;MAEN,CAAC;IAAC,CACC,CAAC;EAEV;EAEA,MAAMgO,iBAAiB,GAAG9lB,mEAAe,CAAE+lB,QAA0B,IAAK;IACxE/E,mBAAmB,CAAC+E,QAAQ,CAAC;EAC/B,CAAC,CAAC;EAEF,MAAMC,gBAAgB,GAAGhmB,mEAAe,CAAC,MAAM;IAC7C+f,wBAAwB,CAAC;MAAEnf,IAAI,EAAEkB;IAAU,CAAC,CAAC;IAC7C2d,gBAAgB,CAAC,CAAC;IAClBD,cAAc,CAAC,CAAC;EAClB,CAAC,CAAC;EAEF,MAAMyG,sBAAsB,GAAGjmB,mEAAe,CAAC,MAAM;IACnD,IAAIgjB,cAAc,EAAE;MAClBpD,sBAAsB,CAAC;QAAEL;MAAM,CAAC,CAAC;MACjC;IACF;IACA,IAAI0D,YAAY,EAAE;MAChBlD,wBAAwB,CAAC;QAAEnf,IAAI,EAAEkB;MAAU,CAAC,CAAC;MAC7C;IACF;IACAkkB,gBAAgB,CAAC,CAAC;EACpB,CAAC,CAAC;EAEF,MAAME,qBAAqB,GAAGlmB,mEAAe,CAAC,MAAM;IAClDohB,kBAAkB,CAACoC,OAAO,GAAG,CAAC;EAChC,CAAC,CAAC;EAEF,MAAM2C,sBAAsB,GAAGnmB,mEAAe,CAAEomB,OAA2B,IAAK;IAC9EhF,kBAAkB,CAACoC,OAAO,GAAG4C,OAAO;EACtC,CAAC,CAAC;EAEF,SAASC,gBAAgBA,CAAA,EAAG;IAC1B,OACE7lB,yDAAA;MAAK8Z,GAAG,EAAE8F,WAAY;MAAC3a,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAAC8f,IAAI,EAAE,eAAe,CAAE;MAACqB,QAAQ,EAAEjD,YAAa;MAAA5e,QAAA,GACrGjE,yDAAA;QAAKiF,SAAS,EAAEN,+DAAM,CAACohB,OAAQ;QAAA9hB,QAAA,GAC7BrE,wDAAA,CAAC4E,uDAAM;UACLS,SAAS,EAAEN,+DAAM,CAACuB,MAAO;UACzBJ,IAAI,EAAElB,WAAY;UAClBG,IAAI,EAAE8a,aAAc;UACpBmG,WAAW,EAAEN;QAAsB,CACpC,CAAC,EACF9lB,wDAAA,CAAC6d,oEAAmB;UAClBxY,SAAS,EAAEN,+DAAM,CAACshB,cAAe;UACjC7N,KAAK,EAAC,MAAM;UACZ8N,WAAW,EAAE9H,4BAA6B;UAC1C+H,kBAAkB,EAAER;QAAuB,CAC5C,CAAC;MAAA,CACC,CAAC,EACL,CAACxV,MAAM,IAAI,CAAC2P,IAAI,IAAI,CAACxJ,eAAe,EAAEwK,0BAA0B,IAC/D9gB,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACG0f,uBAAuB,CAAC,CAAC,EACzBG,4BAA4B,CAAC,CAAC,EAC9BqB,kBAAkB,CAAC,CAAC;MAAA,CACrB,CACH,EAEA,CAACtE,qBAAqB,IACrB7gB,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACG8f,qBAAqB,CAAC,CAAC,EACvBC,0BAA0B,CAAC,CAAC,EAC7BpkB,wDAAA,CAACqe,8DAAoB;UACnBnE,GAAG,EAAE6F,eAAgB;UACrBhR,4BAA4B,EAAEA,4BAA6B;UAC3D0S,6BAA6B,EAAEA,6BAA8B;UAC7DlR,MAAM,EAAEA,MAAO;UACfiW,WAAW,EAAEhiB,OAAO,CAACua,eAAe,EAAErV,MAAM,CAAE;UAC9CpF,QAAQ,EAAEuc,oBAAqB;UAC/B6E,iBAAiB,EAAEA;QAAkB,CACtC,CAAC,EACF1lB,wDAAA,CAACie,uDAAU;UACT7X,IAAI,EAAC,UAAU;UACfqgB,SAAS,EAAEC,cAAc,CAAC/F,gBAAgB,CAAE;UAC5Ctb,SAAS,EAAEN,+DAAM,CAAC4hB,mBAAoB;UAAAtiB,QAAA,EAErCmgB,eAAe,CAAC;QAAC,CACR,CAAC;MAAA,CACb,CACH;IAAA,CACE,CAAC;EAEV;EAEA,MAAMoC,YAAY,GAAG/D,YAAY,IAAID,cAAc;EAEnD,MAAMiE,eAAe,GAAGxZ,gEAAc,CACpC,qBAAqB,EACrBuZ,YAAY,IAAI,YAClB,CAAC;EAED,SAASE,YAAYA,CAAA,EAAG;IACtB,IAAI,CAAChE,gBAAgB,EAAE,OAAOphB,SAAS;IACvC,IAAIkhB,cAAc,EAAE;MAClB,MAAMmE,cAAc,GAAG9H,qBAAqB,IAAI,CAACD,gBAAgB;MACjE,OACE5e,yDAAA;QAAKiF,SAAS,EAAEN,+DAAM,CAACiiB,4BAA6B;QAAA3iB,QAAA,GAClDrE,wDAAA;UAAIqF,SAAS,EAAEN,+DAAM,CAACkiB,gBAAiB;UAAA5iB,QAAA,EACpC6a,kBAAkB,CAACpb;QAAK,CACvB,CAAC,EACJijB,cAAc,IAEX/mB,wDAAA;UAAKqF,SAAS,EAAEN,+DAAM,CAACmiB,uBAAwB;UAAA7iB,QAAA,EAC5C/C,IAAI,CAAC,SAAS;QAAC,CACb,CACN,EACF,CAACylB,cAAc,IAAI/H,gBAAgB,KAAKtd,SAAS,IAE9C1B,wDAAA;UAAKqF,SAAS,EAAEN,+DAAM,CAACmiB,uBAAwB;UAAA7iB,QAAA,EAC5C/C,IAAI,CAAC,8BAA8B,EAAE;YACpC0T,KAAK,EAAEgK;UACT,CAAC,EAAE;YAAE1X,SAAS,EAAE,IAAI;YAAE2M,YAAY,EAAE,IAAI;YAAEmB,WAAW,EAAE4J;UAAiB,CAAC;QAAC,CACvE,CACN,EACHhf,wDAAA,CAACoe,2DAAiB;UAACwB,SAAS,EAAEA;QAAU,CAAE,CAAC;MAAA,CACxC,CAAC;IAEV;IACA,OACE5f,wDAAA;MAAIqF,SAAS,EAAEN,+DAAM,CAACoiB,gBAAiB;MAAA9iB,QAAA,EACpC/C,IAAI,CAACyhB,oBAAoB,GAAIxS,MAAM,GAAG,qBAAqB,GAAG,iBAAiB,GAAI,mBAAmB;IAAC,CACtG,CAAC;EAET;EAEA,OACEnQ,yDAAA,CAAC4d,kDAAK;IACJ4B,SAAS,EAAEA,SAAU;IACrBhW,OAAO,EAAEgc,gBAAiB;IAC1Bxd,MAAM,EAAEA,MAAO;IACfgf,MAAM;IACN5a,gBAAgB,EAAEzH,+DAAM,CAAC0H,OAAQ;IACjCpH,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACsiB,WAAW,EAAEtiB,+DAAM,CAACO,IAAI,CAAE;IAC3DgiB,kBAAkB;IAAAjjB,QAAA,GAElBrE,wDAAA,CAACoL,mDAAM;MACL/F,SAAS,EAAEN,+DAAM,CAACwiB,WAAY;MAC9BC,KAAK;MACLhP,KAAK,EAAC,aAAa;MACnBtS,IAAI,EAAC,MAAM;MACX3B,OAAO,EAAEshB,sBAAuB;MAChC4B,SAAS,EAAEb,YAAY,GAAGrlB,OAAO,CAAC,aAAa,CAAC,GAAGA,OAAO,CAAC,cAAc,CAAE;MAAA8C,QAAA,EAE3ErE,wDAAA;QAAKqF,SAAS,EAAEwhB;MAAgB,CAAE;IAAC,CAC7B,CAAC,EACT7mB,wDAAA,CAACke,4DAAY;MAAC7Y,SAAS,EAAEN,+DAAM,CAACgS,OAAQ;MAACA,OAAO,EAAElI,WAAY;MAAC6Y,aAAa;IAAA,CAAE,CAAC,EAC/E1nB,wDAAA;MAAKqF,SAAS,EAAEgI,gEAAc,CAC5BtI,+DAAM,CAAC2G,MAAM,EACbkX,cAAc,IAAI7d,+DAAM,CAAC4iB,YAAY,EACrC,CAAC7E,gBAAgB,IAAI/d,+DAAM,CAAC6iB,YAAY,EACxC/G,oBAAoB,IAAI9b,+DAAM,CAAC8iB,QAAQ,CAAE;MAAAxjB,QAAA,EAEzCrE,wDAAA,CAACie,uDAAU;QACT7X,IAAI,EAAC,mBAAmB;QACxBqgB,SAAS,EAAE,CAAC3D,gBAAgB,GAAG,CAAC,GAAGF,cAAc,GAAG,CAAC,GAAGG,oBAAoB,GAAG,CAAC,GAAG,CAAE;QACrF+E,cAAc,EAAE/iB,+DAAM,CAACgjB,WAAY;QAAA1jB,QAAA,EAElCyiB,YAAY,CAAC;MAAC,CACL;IAAC,CACV,CAAC,EACN1mB,yDAAA,CAAC6d,uDAAU;MACT/D,GAAG,EAAE2F,aAAc;MACnBxa,SAAS,EAAEN,+DAAM,CAACijB,UAAW;MAC7B5hB,IAAI,EAAC,WAAW;MAChBqgB,SAAS,EAAE5D,YAAY,GAAG,CAAC,GAAGD,cAAc,GAAG,CAAC,GAAG,CAAE;MAAAve,QAAA,GAEpD,CAACwe,YAAY,IAAI,CAACD,cAAc,IAAIqD,gBAAgB,CAAC,CAAC,EACtDrD,cAAc,IAAI1D,kBAAkB,IAEjClf,wDAAA,CAACme,+DAAqB;QACpB8J,WAAW,EAAEvQ;MAAgB,CAC9B,CACF,EACFmL,YAAY,IAAIrX,cAAc,EAAE2U,SAAS,IACxCngB,wDAAA,CAACoO,sDAAY;QACX5N,IAAI,EAAE4f,YAAa;QACnB/R,WAAW,EAAE0T,YAAY,CAAC0D,GAAG,CAACrF,YAAY,CAAE;QAC5C9f,MAAM,EAAEkL,cAAc,CAAC2U;MAAU,CAClC,CACF;IAAA,CACS,CAAC;EAAA,CACR,CAAC;AAEZ,CAAC;AAED,iEAAejhB,4CAAI,CAACyI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EACpF,MAAM;IACJ4c,SAAS;IACTtU,KAAK;IACLvL;EACF,CAAC,GAAGsC,MAAM;EAEV,MAAMxF,IAAI,GAAGmG,KAAK,EAAE6U,SAAS,GAAGpT,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAAC6U,SAAS,CAAC,GAAGze,SAAS;EAC/E,MAAM8U,YAAY,GAAGrR,IAAI,GAAGiI,qEAAkB,CAACzC,MAAM,EAAExF,IAAI,EAAEqC,EAAE,CAAC,GAAG9F,SAAS;EAE5E,MAAM;IAAEymB;EAAY,CAAC,GAAGlb,iEAAc,CAACtC,MAAM,CAAC;EAC9C,MAAMqU,gBAAgB,GAAGmJ,WAAW,CAACnT,KAAK;EAC1C,MAAMiK,qBAAqB,GAAGkJ,WAAW,CAAC7S,SAAS,KAAK,KAAK;EAC7D,MAAM4J,kBAAkB,GAAG5T,KAAK,EAAE4T,kBAAkB;EAEpD,OAAO;IACLkJ,gBAAgB,EAAEzd,MAAM,CAACqM,SAAS,CAACqR,iBAAiB;IACpDzJ,aAAa,EAAEsJ,SAAS,EAAElf,IAAI;IAC9B6V,qBAAqB,EAAEqJ,SAAS,EAAEI,aAAa;IAC/CxJ,iBAAiB,EAAEnU,MAAM,CAAC4d,aAAa,EAAEvf,IAAI;IAC7C+V,eAAe,EAAEpU,MAAM,CAAC4d,aAAa,EAAEpf,GAAG;IAC1C0F,WAAW,EAAE+E,KAAK,EAAEmD,OAAO;IAC3B5R,IAAI;IACJkD,aAAa;IACbqO,eAAe,EAAEF,YAAY,EAAEE,eAAe;IAC9CsI,gBAAgB;IAChBC,qBAAqB;IACrBC,kBAAkB;IAClBC,KAAK,EAAElS,iEAAc,CAACtC,MAAM,CAAC,CAACnD;EAChC,CAAC;AACH,CAAC,CAAC,CAAC5J,SAAS,CAAC,CAAC,EAAC;AAEf,SAAS8oB,cAAcA,CAACf,QAA0B,EAAE;EAClD,IAAIA,QAAQ,KAAK,KAAK,EAAE,OAAO,CAAC;EAChC,IAAIA,QAAQ,KAAK,UAAU,EAAE,OAAO,CAAC;EACrC,OAAO,CAAC;AACV,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChoB2C;AACc;AAQtB;AACuB;AACL;AACgB;AAEJ;AACgB;AACpC;AACgB;AAEc;AACtB;AACpB;AACY;AACH;AAEG;AAAA;AAe7C,MAAMrH,qBAAqB,GAAG,GAAG;AAEjC,MAAMH,qBAAgD,GAAGA,CAAC;EACxDyK,WAAW;EACXpoB,IAAI;EACJ6I,MAAM;EACNwf,iBAAiB;EACjBC,eAAe;EACfC,eAAe;EACfd;AACF,CAAC,KAAK;EACJ,MAAM;IACJ3I,eAAe;IACf0J;EACF,CAAC,GAAG5pB,mDAAU,CAAC,CAAC;EAChB,MAAM4gB,WAAW,GAAGlH,wDAAM,CAAiB,CAAC;EAE5C,MAAMxX,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EACtB,MAAMspB,cAAc,GAAG9pB,yDAAO,CAAC,MAAM;IACnC,OAAOypB,WAAW,EAAE7D,GAAG,CAAEmE,CAAC,IAAKA,CAAC,CAAC1hB,EAAE,CAAC;EACtC,CAAC,EAAE,CAACohB,WAAW,CAAC,CAAC;EAEjB,MAAMO,SAAS,GAAG3kB,OAAO,CAAC6E,MAAM,EAAE+f,eAAe,EAAE1f,MAAM,IACpDL,MAAM,EAAEggB,iBAAiB,EAAE3f,MAAM,IAAIL,MAAM,EAAEigB,kBAAkB,EAAE5f,MAAM,CAAC;EAE7E,MAAM6f,yBAAyB,GAAG3pB,kEAAe,CAAC,MAAM;IACtD,IAAIY,IAAI,EAAE;MACR,MAAM0R,MAAM,GAAG,eAAe,IAAI1R,IAAI,GAClCA,IAAI,CAACwiB,aAAa,GAClBxiB,IAAI,CAACgH,EAAE;MACX8X,eAAe,CAAC;QAAEpN;MAAO,CAAC,CAAC;IAC7B;EACF,CAAC,CAAC;EAEF,MAAMsX,YAAY,GAAGhlB,OAAO,CAAC,CAACokB,WAAW,IAAIA,WAAW,CAAClf,MAAM,KAAK,CAAC,CAAC;EAEtE,MAAM,CAAC+f,WAAW,EAAE9E,UAAU,CAAC,GAAG+D,oEAAiB,CACjDa,yBAAyB,EACzBN,cAAc,EACd,CAACzoB,IAAI,EACLgoB,uDACF,CAAC;EAED,MAAM;IAAEhG;EAAQ,CAAC,GAAG5E,uFAAuB,CAAC;IAAE6E,OAAO,EAAEzC,WAAW;IAAE0C,UAAU,EAAEpE;EAAsB,CAAC,CAAC;EAExG,MAAMoL,sBAAsB,GAAG9pB,kEAAe,CAAC,MAAM;IACnDopB,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACT+f,eAAe,EAAE,EAAE;QACnBE,kBAAkB,EAAE,EAAE;QACtBD,iBAAiB,EAAE;MACrB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,SAASM,iCAAiCA,CAAA,EAAG;IAC3C,OACEvpB,yDAAA;MAAKiF,SAAS,EAAEN,+DAAM,CAAC6kB,iBAAkB;MAAAvlB,QAAA,GACvCrE,wDAAA,CAAC2oB,wEAAuB;QACtBziB,IAAI,EAAE,GAAI;QACV2jB,MAAM,EAAEpB,0EAAc,CAACqB,aAAc;QACrCxR,cAAc;QACdD,MAAM;MAAA,CACP,CAAC,EACFrY,wDAAA;QAAKqF,SAAS,EAAEN,+DAAM,CAACglB,wBAAyB;QAAA1lB,QAAA,EAC7C/C,IAAI,CAAC,oBAAoB;MAAC,CACxB,CAAC,EACL6nB,SAAS,IACRnpB,wDAAA,CAAC0G,iDAAI;QACHrB,SAAS,EAAEN,+DAAM,CAACilB,iBAAkB;QACpCzlB,OAAO,EAAEmlB,sBAAuB;QAAArlB,QAAA,EAE/B/C,IAAI,CAAC,yBAAyB;MAAC,CAC5B,CACP;IAAA,CACE,CAAC;EAEV;EAEA,OACEtB,wDAAA;IAAKka,GAAG,EAAE8F,WAAY;IAAC3a,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACklB,gBAAgB,EAAE,eAAe,CAAE;IAAA5lB,QAAA,EACzFjE,yDAAA,CAAC6d,uDAAU;MACT7X,IAAI,EAAC,UAAU;MACfqgB,SAAS,EAAEsC,eAAgB;MAAA1kB,QAAA,GAE1BmlB,YAAY,IAAIX,iBAAiB,IAAIc,iCAAiC,CAAC,CAAC,EACzE3pB,wDAAA,CAAC+d,2DAAc;QACb1Y,SAAS,EAAEgI,gEAAc,CAACtI,+DAAM,CAACmlB,wBAAwB,CAAE;QAC3DxF,KAAK,EAAE+E,WAAY;QACnB9E,UAAU,EAAEA,UAAW;QACvBG,YAAY,EAAC,eAAe;QAC5BqF,UAAU;QACVC,gBAAgB,EAAE5B,uDAAmB;QACrC5D,sBAAsB,EAAE,IAAI7f,+DAAM,CAACklB,gBAAgB,EAAG;QAAA5lB,QAAA,EAErDukB,WAAW,EAAE7D,GAAG,CAAEmE,CAAC,IAClBlpB,wDAAA,CAACuZ,sDAAY;UAEX/Y,IAAI,EAAE0oB,CAAE;UACRrP,mBAAmB,EAAE2I,OAAQ;UAC7BhJ,QAAQ;UACRjV,OAAO,EAAE0jB;QAAY,GAJhBiB,CAAC,CAAC1hB,EAKR,CACF;MAAC,CACY,CAAC;IAAA,CACP;EAAC,CACV,CAAC;AAEV,CAAC;AAED,iEAAetI,sDAAI,CAACyI,mDAAU,CAAYgD,MAAM,IAA2B;EACzE,MAAM;IACJud;EACF,CAAC,GAAGvd,MAAM;EAEV,MAAM;IAAEwd;EAAY,CAAC,GAAGlb,iEAAc,CAACtC,MAAM,CAAC;EAC9C,MAAMnK,IAAI,GAAG2nB,WAAW,EAAEjW,MAAM,GAAGgW,SAAS,EAAElf,IAAI,CAACmf,WAAW,CAACjW,MAAM,CAAC,GAAGxQ,SAAS;EAClF,MAAM2H,MAAM,GAAG8e,WAAW,CAAC9e,MAAM;EACjC,MAAMwf,iBAAiB,GAAGV,WAAW,CAACkC,WAAW;EACjD,MAAMvB,eAAe,GAAGX,WAAW,CAAC7S,SAAS;EAC7C,MAAMyT,eAAe,GAAGZ,WAAW,CAACY,eAAe;EAEnD,OAAO;IACLH,WAAW,EAAET,WAAW,CAACxG,KAAK;IAC9BnhB,IAAI;IACJ6I,MAAM;IACNwf,iBAAiB;IACjBC,eAAe;IACfC;EACF,CAAC;AACH,CAAC,CAAC,CAAC5K,qBAAqB,CAAC,CAAC,E;;;;;;;;;;;;;;AC7K1B;AACA,iEAAe,CAAC,gvBAAgvB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOntB;AACY;AAetB;AACuB;AAEiB;AACM;AACpC;AACgB;AAElB;AACwC;AAClD;AACQ;AACM;AAC+B;AAEzB;AAAA;AAWrD,MAAMC,iBAA4C,GAAGA,CAAC;EACpDuM,UAAU;EACVC,QAAQ;EACRvhB,MAAM;EACNuW;AACF,CAAC,KAAK;EACJ,MAAMte,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EACtB,MAAM;IACJqpB;EACF,CAAC,GAAG5pB,mDAAU,CAAC,CAAC;EAEhB,MAAM,CAACyrB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGrjB,0DAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACsjB,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGvjB,0DAAQ,CAAC,EAAE,CAAC;EAClE,MAAM,CAACwjB,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGzjB,0DAAQ,CAAC,EAAE,CAAC;EAChE,MAAM0jB,kBAAkB,GAAGhsB,yDAAO,CAAC,MAAM;IACvC,MAAM4lB,GAIL,GAAG;MACF5e,KAAK,EAAE,EAAE;MACTN,OAAO,EAAE,EAAE;MACXL,QAAQ,EAAE;IACZ,CAAC;IAED,KAAK,MAAM4lB,OAAO,IAAIR,QAAQ,IAAI,EAAE,EAAE;MACpC,MAAM;QAAES;MAAU,CAAC,GAAGD,OAAO;MAE7B,IAAI,CAACA,OAAO,CAACpW,KAAK,EAAE;QAClB;MACF;MAEA,MAAMsW,KAAK,GAAGX,UAAU,EAAE3oB,IAAI,CAAEupB,IAAI,IAAK;QACvC,IAAIA,IAAI,CAAC3pB,IAAI,KAAK,UAAU,IAAIypB,SAAS,CAACzpB,IAAI,KAAK,UAAU,EAAE;UAC7D,OAAO2pB,IAAI,CAACC,UAAU,KAAKH,SAAS,CAACG,UAAU;QACjD;QAEA,IAAID,IAAI,CAAC3pB,IAAI,KAAK,OAAO,IAAIypB,SAAS,CAACzpB,IAAI,KAAK,OAAO,EAAE;UACvD,OAAO2pB,IAAI,CAACzlB,OAAO,CAAC0B,EAAE,KAAK6jB,SAAS,CAAClnB,UAAU;QACjD;QAEA,IAAIonB,IAAI,CAAC3pB,IAAI,KAAK,SAAS,IAAIypB,SAAS,CAACzpB,IAAI,KAAK,SAAS,EAAE;UAC3D,OAAO2pB,IAAI,CAACzlB,OAAO,CAAC0B,EAAE,KAAK6jB,SAAS,CAAClnB,UAAU;QACjD;QAEA,OAAO,KAAK;MACd,CAAC,CAAC;MAEF,IAAImnB,KAAK,EAAE1pB,IAAI,KAAK,UAAU,EAAE;QAC9BmjB,GAAG,CAACvf,QAAQ,CAAC8f,IAAI,CAACgG,KAAK,CAAC;MAC1B;MACA,IAAIA,KAAK,EAAE1pB,IAAI,KAAK,OAAO,EAAE;QAC3BmjB,GAAG,CAAC5e,KAAK,CAACmf,IAAI,CAACgG,KAAK,CAAC;MACvB;MACA,IAAIA,KAAK,EAAE1pB,IAAI,KAAK,SAAS,EAAE;QAC7BmjB,GAAG,CAAClf,OAAO,CAACyf,IAAI,CAACgG,KAAK,CAAC;MACzB;IACF;IAEA,OAAOvG,GAAG;EACZ,CAAC,EAAE,CAAC4F,UAAU,EAAEC,QAAQ,CAAC,CAAC;EAE1B,MAAMa,6BAA6B,GAAGtsB,yDAAO,CAAC,MAAM;IAClD,MAAMusB,cAAc,GAAGA,CAA8BhH,KAAU,EAAEtb,KAAa,KAAU;MACtF,IAAI,CAACA,KAAK,CAACuiB,IAAI,CAAC,CAAC,EAAE,OAAOjH,KAAK;MAE/B,OAAOA,KAAK,CAACrb,MAAM,CAChBuiB,IAAI,IAAgBpnB,OAAO,CAAConB,IAAI,CAACxlB,IAAI,EAAEylB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC1iB,KAAK,CAACyiB,WAAW,CAAC,CAAC,CAAC,CACrF,CAAC;IACH,CAAC;IAED,OAAO;MACL1lB,KAAK,EAAEulB,cAAc,CAACP,kBAAkB,CAAChlB,KAAK,EAAE0kB,gBAAgB,CAAC;MACjEhlB,OAAO,EAAE6lB,cAAc,CAACP,kBAAkB,CAACtlB,OAAO,EAAEolB,kBAAkB,CAAC;MACvEzlB,QAAQ,EAAEkmB,cAAc,CAACP,kBAAkB,CAAC3lB,QAAQ,EAAEulB,mBAAmB;IAC3E,CAAC;EACH,CAAC,EAAE,CAACI,kBAAkB,EAAEN,gBAAgB,EAAEE,mBAAmB,EAAEE,kBAAkB,CAAC,CAAC;;EAEnF;EACA,MAAMc,WAAW,GAAGjT,wDAAM,CAAiB,CAAC;EAC5C,MAAM;IACJkT,iBAAiB,EAAEC,qBAAqB;IACxCC,iBAAiB,EAAEC,qBAAqB;IACxCC,iBAAiB,EAAEC,qBAAqB;IACxCC,sBAAsB,EAAEC,0BAA0B;IAClDC,qBAAqB,EAAEC;EACzB,CAAC,GAAGlC,yEAAsB,CAAC3K,SAAS,CAAC;EACrC,MAAM8M,kBAAkB,GAAG9sB,kEAAe,CAAC,MAAMmsB,WAAW,CAAC3I,OAAQ,CAAC;;EAEtE;EACA,MAAMuJ,YAAY,GAAG7T,wDAAM,CAAiB,CAAC;EAC7C,MAAM;IACJkT,iBAAiB,EAAEY,sBAAsB;IACzCV,iBAAiB,EAAEW,sBAAsB;IACzCT,iBAAiB,EAAEU,sBAAsB;IACzCR,sBAAsB,EAAES,2BAA2B;IACnDP,qBAAqB,EAAEQ;EACzB,CAAC,GAAGzC,yEAAsB,CAAC3K,SAAS,CAAC;EACrC,MAAMqN,mBAAmB,GAAGrtB,kEAAe,CACzC,MAAM+sB,YAAY,CAACvJ,OACrB,CAAC;;EAED;EACA,MAAM8J,eAAe,GAAGpU,wDAAM,CAAiB,CAAC;EAChD,MAAM;IACJkT,iBAAiB,EAAEmB,yBAAyB;IAC5CjB,iBAAiB,EAAEkB,yBAAyB;IAC5ChB,iBAAiB,EAAEiB,yBAAyB;IAC5Cf,sBAAsB,EAAEgB,8BAA8B;IACtDd,qBAAqB,EAAEe;EACzB,CAAC,GAAGhD,yEAAsB,CAAC3K,SAAS,CAAC;EACrC,MAAM4N,sBAAsB,GAAG5tB,kEAAe,CAAC,MAAMstB,eAAe,CAAC9J,OAAQ,CAAC;;EAE9E;EACA,MAAMqK,cAAc,GAAG3U,wDAAM,CAAiB,CAAC;EAC/C,MAAM;IACJkT,iBAAiB,EAAE0B,wBAAwB;IAC3CxB,iBAAiB,EAAEyB,wBAAwB;IAC3CvB,iBAAiB,EAAEwB,wBAAwB;IAC3CtB,sBAAsB,EAAEuB,6BAA6B;IACrDrB,qBAAqB,EAAEsB;EACzB,CAAC,GAAGvD,yEAAsB,CAAC3K,SAAS,CAAC;EACrC,MAAMmO,qBAAqB,GAAGnuB,kEAAe,CAAC,MAAM6tB,cAAc,CAACrK,OAAQ,CAAC;EAE5E,MAAM4K,cAA6G,GAC/G7uB,yDAAO,CAAC,MAAM;IACd,MAAM8uB,QAAQ,GAAG5kB,MAAM,CAAC4kB,QAAQ;IAChC,OAAO,CAAC;MAAEC,SAAS;MAAE9lB,MAAM,EAAE+lB;IAAW,CAAC,KACvC/tB,yDAAA;MACEiF,SAAS,EAAEN,uEAAM,CAAC6mB,IAAK;MACvBrnB,OAAO,EAAE2pB,SAAU;MAAA7pB,QAAA,GAElB4pB,QAAQ,KAAK,QAAQ,IAAI3sB,IAAI,CAAC,qBAAqB,CAAC,EACpD2sB,QAAQ,KAAK,UAAU,IAAI3sB,IAAI,CAAC,uBAAuB,CAAC,EACxD2sB,QAAQ,KAAK,SAAS,IAAI3sB,IAAI,CAAC,sBAAsB,CAAC,EACvDtB,wDAAA,CAAC6E,0DAAI;QACHuB,IAAI,EAAC,iBAAiB;QACtBf,SAAS,EAAEN,uEAAM,CAACqpB;MAAS,CAC5B,CAAC;IAAA,CACC,CACN;EACH,CAAC,EAAE,CAAC9sB,IAAI,EAAE+H,MAAM,CAAC,CAAC;EAEpB,MAAMglB,eACuF,GACzFlvB,yDAAO,CAAC,MAAM;IACd,MAAMmvB,eAAe,GAAGjlB,MAAM,EAAE+f,eAAe,EAAE1f,MAAM,IAAI,CAAC;IAC5D,OAAO,CAAC;MAAEwkB,SAAS;MAAE9lB,MAAM,EAAE+lB;IAAW,CAAC,KACvC/tB,yDAAA;MACEiF,SAAS,EAAEN,uEAAM,CAAC6mB,IAAK;MACvBrnB,OAAO,EAAE2pB,SAAU;MAAA7pB,QAAA,GAElBiqB,eAAe,KAAK,CAAC,IAAIhtB,IAAI,CAAC,oBAAoB,CAAC,EACnDgtB,eAAe,GAAG,CAAC,IACfhtB,IAAI,CAAC,0BAA0B,EAAE;QAAE0T,KAAK,EAAEsZ;MAAgB,CAAC,EAAE;QAAElZ,WAAW,EAAEkZ;MAAgB,CAAC,CAAC,EACnGtuB,wDAAA,CAAC6E,0DAAI;QACHuB,IAAI,EAAC,iBAAiB;QACtBf,SAAS,EAAEN,uEAAM,CAACqpB;MAAS,CAC5B,CAAC;IAAA,CACC,CACN;EACH,CAAC,EAAE,CAAC9sB,IAAI,EAAE+H,MAAM,CAAC,CAAC;EACpB,MAAMklB,kBACuF,GACzFpvB,yDAAO,CAAC,MAAM;IACd,MAAMmvB,eAAe,GAAGjlB,MAAM,EAAEigB,kBAAkB,EAAE5f,MAAM,IAAI,CAAC;IAC/D,OAAO,CAAC;MAAEwkB,SAAS;MAAE9lB,MAAM,EAAE+lB;IAAW,CAAC,KACvC/tB,yDAAA;MACEiF,SAAS,EAAEN,uEAAM,CAAC6mB,IAAK;MACvBrnB,OAAO,EAAE2pB,SAAU;MAAA7pB,QAAA,GAElBiqB,eAAe,KAAK,CAAC,IAAIhtB,IAAI,CAAC,uBAAuB,CAAC,EACtDgtB,eAAe,GAAG,CAAC,IACfhtB,IAAI,CAAC,6BAA6B,EAAE;QAAE0T,KAAK,EAAEsZ;MAAgB,CAAC,EAAE;QAAElZ,WAAW,EAAEkZ;MAAgB,CAAC,CAAC,EACtGtuB,wDAAA,CAAC6E,0DAAI;QACHuB,IAAI,EAAC,iBAAiB;QACtBf,SAAS,EAAEN,uEAAM,CAACqpB;MAAS,CAC5B,CAAC;IAAA,CACC,CACN;EACH,CAAC,EAAE,CAAC9sB,IAAI,EAAE+H,MAAM,CAAC,CAAC;EACpB,MAAMmlB,iBAAgH,GAClHrvB,yDAAO,CAAC,MAAM;IACd,MAAMmvB,eAAe,GAAGjlB,MAAM,EAAEggB,iBAAiB,EAAE3f,MAAM,IAAI,CAAC;IAC9D,OAAO,CAAC;MAAEwkB,SAAS;MAAE9lB,MAAM,EAAE+lB;IAAW,CAAC,KACvC/tB,yDAAA;MACEiF,SAAS,EAAEN,uEAAM,CAAC6mB,IAAK;MACvBrnB,OAAO,EAAE2pB,SAAU;MAAA7pB,QAAA,GAElBiqB,eAAe,KAAK,CAAC,IAAIhtB,IAAI,CAAC,qBAAqB,CAAC,EACpDgtB,eAAe,GAAG,CAAC,IACfhtB,IAAI,CAAC,2BAA2B,EAAE;QAAE0T,KAAK,EAAEsZ;MAAgB,CAAC,EAAE;QAAElZ,WAAW,EAAEkZ;MAAgB,CAAC,CAAC,EACpGtuB,wDAAA,CAAC6E,0DAAI;QACHuB,IAAI,EAAC,iBAAiB;QACtBf,SAAS,EAAEN,uEAAM,CAACqpB;MAAS,CAC5B,CAAC;IAAA,CACC,CACN;EACH,CAAC,EAAE,CAAC9sB,IAAI,EAAE+H,MAAM,CAAC,CAAC;EAEpB,MAAMolB,uBAAuB,GAAG7uB,kEAAe,CAAEgC,IAAyB,IAAK;IAC7EonB,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACT4kB,QAAQ,EAAErsB;MACZ;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAM8sB,4BAA4B,GAAG9uB,kEAAe,CAAC,MAAM;IACzDopB,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACT+f,eAAe,EAAE;MACnB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EACF,MAAMuF,8BAA8B,GAAG/uB,kEAAe,CAAC,MAAM;IAC3DopB,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACTggB,iBAAiB,EAAE;MACrB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EACF,MAAMuF,+BAA+B,GAAGhvB,kEAAe,CAAC,MAAM;IAC5DopB,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACTigB,kBAAkB,EAAE;MACtB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAMuF,wBAAwB,GAAGjvB,kEAAe,CAAEyrB,SAAoC,IAAK;IACzF,IAAI,CAACT,QAAQ,EAAE;IACf,MAAMxB,eAAe,GAAG/f,MAAM,CAAC+f,eAAe,IAAI,EAAE;IACpD,MAAM0F,cAAc,GAChBlE,QAAQ,CAAC5oB,IAAI,CAAEopB,OAAO,IACtBA,OAAO,CAACC,SAAS,CAACzpB,IAAI,KAAK,OAAO,IAAIwpB,OAAO,CAACC,SAAS,CAAClnB,UAAU,KAAKknB,SAAS,CAACvlB,OAAO,CAAC0B,EAC3F,CAAC,EAAE6jB,SAAS;IAEd,IAAI,CAACyD,cAAc,EAAE;IAErB,MAAM9iB,QAAQ,GAAGod,eAAe,CAAC2F,IAAI,CAAEnD,IAAI,IAAKA,IAAI,CAACznB,UAAU,KAAK2qB,cAAc,CAAC3qB,UAAU,CAAC;IAC9F,MAAM6qB,iBAAiB,GAAGhjB,QAAQ,GAC9Bod,eAAe,CAAC/f,MAAM,CAAEuiB,IAAI,IAAKA,IAAI,CAACznB,UAAU,KAAK2qB,cAAc,CAAC3qB,UAAU,CAAC,GAC/E,CAAC,GAAGilB,eAAe,EAAE0F,cAAc,CAAC;IACxC9F,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACT+f,eAAe,EAAE4F;MACnB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAMC,0BAA0B,GAAGrvB,kEAAe,CAAEyrB,SAAsC,IAAK;IAC7F,IAAI,CAACT,QAAQ,EAAE;IACf,MAAMvB,iBAAiB,GAAGhgB,MAAM,CAACggB,iBAAiB,IAAI,EAAE;IACxD,MAAM6F,gBAAgB,GAAGtE,QAAQ,CAAC5oB,IAAI,CACnCopB,OAAO,IACNA,OAAO,CAACC,SAAS,CAACzpB,IAAI,KAAK,SAAS,IAAIwpB,OAAO,CAACC,SAAS,CAAClnB,UAAU,KAAKknB,SAAS,CAACvlB,OAAO,CAAC0B,EAC/F,CAAC,EAAE6jB,SAAS;IAEZ,IAAI,CAAC6D,gBAAgB,EAAE;IAEvB,MAAMljB,QAAQ,GAAGqd,iBAAiB,CAAC0F,IAAI,CAAEnD,IAAI,IAAKA,IAAI,CAACznB,UAAU,KAAK+qB,gBAAgB,CAAC/qB,UAAU,CAAC;IAClG,MAAM6qB,iBAAiB,GAAGhjB,QAAQ,GAC9Bqd,iBAAiB,CAAChgB,MAAM,CAAEuiB,IAAI,IAAKA,IAAI,CAACznB,UAAU,KAAK+qB,gBAAgB,CAAC/qB,UAAU,CAAC,GACnF,CAAC,GAAGklB,iBAAiB,EAAE6F,gBAAgB,CAAC;IAC5ClG,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACTggB,iBAAiB,EAAE2F;MACrB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,MAAMG,2BAA2B,GAAGvvB,kEAAe,CAAEyrB,SAAuC,IAAK;IAC/F,IAAI,CAACT,QAAQ,EAAE;IACf,MAAMtB,kBAAkB,GAAGjgB,MAAM,CAACigB,kBAAkB,IAAI,EAAE;IAC1D,MAAM8F,iBAAiB,GAAGxE,QAAQ,CAAC5oB,IAAI,CACpCopB,OAAO,IACNA,OAAO,CAACC,SAAS,CAACzpB,IAAI,KAAK,UAAU,IAAIwpB,OAAO,CAACC,SAAS,CAACG,UAAU,KAAKH,SAAS,CAACG,UACxF,CAAC,EAAEH,SAAS;IAEZ,IAAI,CAAC+D,iBAAiB,EAAE;IAExB,MAAMpjB,QAAQ,GAAGsd,kBAAkB,CAACyF,IAAI,CAAEnD,IAAI,IAAKA,IAAI,CAACJ,UAAU,KAAK4D,iBAAiB,CAAC5D,UAAU,CAAC;IACpG,MAAMwD,iBAAiB,GAAGhjB,QAAQ,GAC9Bsd,kBAAkB,CAACjgB,MAAM,CAAEuiB,IAAI,IAAKA,IAAI,CAACJ,UAAU,KAAK4D,iBAAiB,CAAC5D,UAAU,CAAC,GACrF,CAAC,GAAGlC,kBAAkB,EAAE8F,iBAAiB,CAAC;IAC9CpG,uBAAuB,CAAC;MAAE3f,MAAM,EAAE;QAChC,GAAGA,MAAM;QACTigB,kBAAkB,EAAE0F;MACtB;IAAE,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,SAASK,mBAAmBA,CAAA,EAAG;IAC7B,OACEjvB,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACEjE,yDAAA,CAACN,qDAAQ;QAAC+D,IAAI,EAAC,eAAe;QAACU,OAAO,EAAEA,CAAA,KAAM;UAAEkqB,uBAAuB,CAAC,SAAS,CAAC;QAAE,CAAE;QAAApqB,QAAA,GACpFrE,wDAAA;UAAKqF,SAAS,EAAEN,uEAAM,CAACuqB,YAAa;UAAAjrB,QAAA,EACjC/C,IAAI,CAAC,iBAAiB;QAAC,CACrB,CAAC,EACNtB,wDAAA,CAAC6E,0DAAI;UACHQ,SAAS,EAAEN,uEAAM,CAACwqB,YAAa;UAC/BnpB,IAAI,EAAEiD,MAAM,EAAE4kB,QAAQ,KAAK,SAAS,GAAG,OAAO,GAAG;QAAc,CAChE,CAAC;MAAA,CACM,CAAC,EACX7tB,yDAAA,CAACN,qDAAQ;QAAC+D,IAAI,EAAC,cAAc;QAACU,OAAO,EAAEA,CAAA,KAAM;UAAEkqB,uBAAuB,CAAC,QAAQ,CAAC;QAAE,CAAE;QAAApqB,QAAA,GAClFrE,wDAAA;UAAKqF,SAAS,EAAEN,uEAAM,CAACuqB,YAAa;UAAAjrB,QAAA,EACjC/C,IAAI,CAAC,gBAAgB;QAAC,CACpB,CAAC,EACNtB,wDAAA,CAAC6E,0DAAI;UACHQ,SAAS,EAAEN,uEAAM,CAACwqB,YAAa;UAC/BnpB,IAAI,EAAEiD,MAAM,EAAE4kB,QAAQ,KAAK,QAAQ,GAAG,OAAO,GAAG;QAAc,CAC/D,CAAC;MAAA,CAEM,CAAC,EACX7tB,yDAAA,CAACN,qDAAQ;QAAC+D,IAAI,EAAC,gBAAgB;QAAAU,OAAO,EAAEA,CAAA,KAAM;UAAEkqB,uBAAuB,CAAC,UAAU,CAAC;QAAE,CAAE;QAAApqB,QAAA,GACrFrE,wDAAA;UAAKqF,SAAS,EAAEN,uEAAM,CAACuqB,YAAa;UAAAjrB,QAAA,EACjC/C,IAAI,CAAC,kBAAkB;QAAC,CACtB,CAAC,EACNtB,wDAAA,CAAC6E,0DAAI;UACHQ,SAAS,EAAEN,uEAAM,CAACwqB,YAAa;UAC/BnpB,IAAI,EAAEiD,MAAM,EAAE4kB,QAAQ,KAAK,UAAU,GAAG,OAAO,GAAG;QAAc,CACjE,CAAC;MAAA,CACM,CAAC;IAAA,CACX,CAAC;EAEP;EAEA,SAASuB,cAAcA,CAAA,EAAG;IACxB,OACExvB,wDAAA,CAACwqB,iDAAI;MACHpiB,MAAM,EAAE6jB,qBAAsB;MAC9BwD,MAAM,EAAEtD,qBAAsB;MAC9BjS,GAAG,EAAE6R,WAAY;MACjB1mB,SAAS,EAAEgI,gEAAc,CACvBtI,uEAAM,CAAC2qB,IAAI,EACX3qB,uEAAM,CAAC4qB,IAAI,EACX,uBACF,CAAE;MACFC,cAAc,EAAElD,kBAAmB;MACnCmD,SAAS;MACTjmB,OAAO,EAAE2iB,0BAA2B;MACpCuD,mBAAmB,EAAErD,yBAA0B;MAC/CsD,SAAS,EAAC,MAAM;MAAA1rB,QAAA,EAEfgrB,mBAAmB,CAAC;IAAC,CAClB,CAAC;EAEX;EAEA,MAAMW,2BAA2B,GAAG1F,6DAAW,CAAC,MAAM;IACpDQ,mBAAmB,CAAC,EAAE,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EACN,MAAMmF,8BAA8B,GAAG3F,6DAAW,CAAC,MAAM;IACvDU,sBAAsB,CAAC,EAAE,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EACN,MAAMkF,6BAA6B,GAAG5F,6DAAW,CAAC,MAAM;IACtDY,qBAAqB,CAAC,EAAE,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;EACN,MAAMiF,sBAAsB,GAAGvwB,kEAAe,CAAE+R,CAAmB,IAAK;IACtEA,CAAC,CAACye,eAAe,CAAC,CAAC;IACnBze,CAAC,CAAC0e,cAAc,CAAC,CAAC;EACpB,CAAC,CAAC;EAEF,MAAMC,0BAA0B,GAAGxX,wDAAM,CAAiB,CAAC;EAC3D,MAAM;IAAE0J;EAAQ,CAAC,GAAG5E,uFAAuB,CAAC;IAC1C6E,OAAO,EAAE6N,0BAA0B;IACnC3N,UAAU,EAAE,CAACkK;EACf,CAAC,CAAC;EAEF,SAAS0D,oBAAoBA,CAAA,EAAG;IAC9B,MAAMC,MAAM,GAAG/E,6BAA6B,CAACtlB,KAAK;IAClD,MAAMsqB,kBAAkB,GAAGpnB,MAAM,CAAC+f,eAAe,IAAI,EAAE;IACvD,MAAMsH,aAAa,GAAGD,kBAAkB,CAAC/mB,MAAM,KAAK,CAAC;IACrD,OACEtJ,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAAC4rB,oBAAqB;MAACzW,GAAG,EAAEoW,0BAA2B;MAAAjsB,QAAA,GAC3ErE,wDAAA,CAACyqB,wDAAW;QACVlmB,OAAO,EAAE4rB,sBAAuB;QAChC9qB,SAAS,EAAEN,uEAAM,CAAC6rB,MAAO;QACzB/e,KAAK,EAAEgZ,gBAAiB;QACxBzX,QAAQ,EAAE0X,mBAAoB;QAC9B+F,OAAO,EAAEb,2BAA4B;QACrCc,WAAW,EAAExvB,IAAI,CAAC,QAAQ;MAAE,CAC7B,CAAC,EACFtB,wDAAA,CAACF,qDAAQ;QAAC+D,IAAI,EAAC,QAAQ;QAACU,OAAO,EAAEmqB,4BAA6B;QAACxa,QAAQ,EAAEwc,aAAc;QAAArsB,QAAA,EACpF/C,IAAI,CAAC,0BAA0B;MAAC,CACzB,CAAC,EACVkvB,MAAM,CAACzL,GAAG,CAAE5e,KAAK,IAAK;QACrB,MAAM4qB,UAAU,GAAGL,aAAa,IAC3BD,kBAAkB,CAAC1B,IAAI,CAAExD,IAAI,IAAKA,IAAI,CAACpnB,UAAU,KAAKgC,KAAK,CAACL,OAAO,CAAC0B,EAAE,CAAC;QAC5E,OACEpH,yDAAA,CAACN,qDAAQ;UAEPyE,OAAO,EAAEA,CAAA,KAAM;YACbsqB,wBAAwB,CAAC1oB,KAAK,CAAC;UACjC,CAAE;UAAA9B,QAAA,GAEFrE,wDAAA,CAAC0qB,wEAA8B;YAC7BrlB,SAAS,EAAEN,uEAAM,CAACe,OAAQ;YAC1BA,OAAO,EAAEK,KAAK,CAACL,OAAQ;YACvBlE,IAAI,EAAC,OAAO;YACZsb,6BAA6B,EAAEsF,OAAQ;YACvCvF,6BAA6B,EAAEuF;UAAQ,CACxC,CAAC,EACFxiB,wDAAA;YAAKqF,SAAS,EAAEN,uEAAM,CAACisB,mBAAoB;YAAA3sB,QAAA,EACxC8B,KAAK,CAACC;UAAI,CACR,CAAC,EACNpG,wDAAA,CAAC6E,0DAAI;YACHQ,SAAS,EAAEN,uEAAM,CAACwqB,YAAa;YAC/BnpB,IAAI,EAAE2qB,UAAU,GAAG,OAAO,GAAG;UAAc,CAC5C,CAAC;QAAA,GAlBG5qB,KAAK,CAACC,IAmBH,CAAC;MAEf,CAAC,CAAC;IAAA,CACC,CAAC;EAEV;EAEA,SAAS6qB,eAAeA,CAAA,EAAG;IACzB,OACEjxB,wDAAA,CAACwqB,iDAAI;MACHpiB,MAAM,EAAEwkB,sBAAuB;MAC/B6C,MAAM,EAAE5C,sBAAuB;MAC/B3S,GAAG,EAAEyS,YAAa;MAClBtnB,SAAS,EAAEgI,gEAAc,CACvBtI,uEAAM,CAAC2qB,IAAI,EACX3qB,uEAAM,CAAC4qB,IAAI,EACX,uBACF,CAAE;MACFC,cAAc,EAAE3C,mBAAoB;MACpC4C,SAAS;MACTjmB,OAAO,EAAEmjB,2BAA4B;MACrC+C,mBAAmB,EAAE9C,0BAA2B;MAAA3oB,QAAA,EAE/CksB,oBAAoB,CAAC;IAAC,CACnB,CAAC;EAEX;EAEA,SAASW,uBAAuBA,CAAA,EAAG;IACjC,MAAMC,SAAS,GAAG1F,6BAA6B,CAACjmB,QAAQ;IACxD,MAAMirB,kBAAkB,GAAGpnB,MAAM,CAACigB,kBAAkB,IAAI,EAAE;IAC1D,MAAMoH,aAAa,GAAGD,kBAAkB,CAAC/mB,MAAM,KAAK,CAAC;IAErD,OACEtJ,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAAC4rB,oBAAqB;MAAAtsB,QAAA,GAC1CrE,wDAAA,CAACyqB,wDAAW;QACVlmB,OAAO,EAAE4rB,sBAAuB;QAChC9qB,SAAS,EAAEN,uEAAM,CAAC6rB,MAAO;QACzB/e,KAAK,EAAEkZ,mBAAoB;QAC3B3X,QAAQ,EAAE4X,sBAAuB;QACjC6F,OAAO,EAAEZ,8BAA+B;QACxCa,WAAW,EAAExvB,IAAI,CAAC,QAAQ;MAAE,CAC7B,CAAC,EACFtB,wDAAA,CAACF,qDAAQ;QAAC+D,IAAI,EAAC,QAAQ;QAACU,OAAO,EAAEqqB,+BAAgC;QAAC1a,QAAQ,EAAEwc,aAAc;QAAArsB,QAAA,EACvF/C,IAAI,CAAC,0BAA0B;MAAC,CACzB,CAAC,EACV6vB,SAAS,CAACpM,GAAG,CAAEvf,QAAQ,IAAK;QAC3B,MAAMurB,UAAU,GAAGL,aAAa,IAC3BD,kBAAkB,CAAC1B,IAAI,CAAExD,IAAI,IAAKA,IAAI,CAACC,UAAU,KAAKhmB,QAAQ,CAACgmB,UAAU,CAAC;QAE/E,OACEprB,yDAAA,CAACN,qDAAQ;UAEPyE,OAAO,EAAEA,CAAA,KAAM;YACb4qB,2BAA2B,CAAC3pB,QAAQ,CAAC;UACvC,CAAE;UAAAnB,QAAA,GAEFrE,wDAAA,CAAC8E,+EAAuB;YACtBO,SAAS,EAAEN,uEAAM,CAACS,QAAS;YAC3BC,gBAAgB,EAAE,CAACD,QAAQ,CAACE,WAAW,EAAEF,QAAQ,CAACG,SAAS;UAAE,CAC9D,CAAC,EACF3F,wDAAA;YAAKqF,SAAS,EAAEN,uEAAM,CAACqsB,6BAA8B;YAAA/sB,QAAA,EAClDmB,QAAQ,CAACY;UAAI,CACX,CAAC,EACNpG,wDAAA,CAAC6E,0DAAI;YACHQ,SAAS,EAAEN,uEAAM,CAACwqB,YAAa;YAC/BnpB,IAAI,EAAE2qB,UAAU,GAAG,OAAO,GAAG;UAAc,CAC5C,CAAC;QAAA,GAfGvrB,QAAQ,CAACY,IAgBN,CAAC;MAEf,CAAC,CAAC;IAAA,CACC,CAAC;EAEV;EAEA,SAASirB,kBAAkBA,CAAA,EAAG;IAC5B,OACErxB,wDAAA,CAACwqB,iDAAI;MACHpiB,MAAM,EAAE+kB,yBAA0B;MAClCsC,MAAM,EAAErC,yBAA0B;MAClClT,GAAG,EAAEgT,eAAgB;MACrB7nB,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAAC2qB,IAAI,EAAE3qB,uEAAM,CAACusB,KAAK,EAAE,uBAAuB,CAAE;MAC9E1B,cAAc,EAAEpC,sBAAuB;MACvCqC,SAAS;MACTjmB,OAAO,EAAE0jB,8BAA+B;MACxCwC,mBAAmB,EAAEvC,6BAA8B;MACnDwC,SAAS,EAAC,OAAO;MAAA1rB,QAAA,EAEhB6sB,uBAAuB,CAAC;IAAC,CACtB,CAAC;EAEX;EAEA,SAASK,sBAAsBA,CAAA,EAAG;IAChC,MAAMC,QAAQ,GAAG/F,6BAA6B,CAAC5lB,OAAO;IACtD,MAAM4qB,kBAAkB,GAAGpnB,MAAM,CAACggB,iBAAiB,IAAI,EAAE;IACzD,MAAMqH,aAAa,GAAGD,kBAAkB,CAAC/mB,MAAM,KAAK,CAAC;IAErD,OACEtJ,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAAC4rB,oBAAqB;MAAAtsB,QAAA,GAC1CrE,wDAAA,CAACyqB,wDAAW;QACVlmB,OAAO,EAAE4rB,sBAAuB;QAChC9qB,SAAS,EAAEN,uEAAM,CAAC6rB,MAAO;QACzB/e,KAAK,EAAEoZ,kBAAmB;QAC1B7X,QAAQ,EAAE8X,qBAAsB;QAChC2F,OAAO,EAAEX,6BAA8B;QACvCY,WAAW,EAAExvB,IAAI,CAAC,QAAQ;MAAE,CAC7B,CAAC,EACFtB,wDAAA,CAACF,qDAAQ;QAAC+D,IAAI,EAAC,QAAQ;QAACU,OAAO,EAAEoqB,8BAA+B;QAACza,QAAQ,EAAEwc,aAAc;QAAArsB,QAAA,EACtF/C,IAAI,CAAC,0BAA0B;MAAC,CACzB,CAAC,EACVkwB,QAAQ,CAACzM,GAAG,CAAElf,OAAO,IAAK;QACzB,MAAMkrB,UAAU,GAAGL,aAAa,IAC3BD,kBAAkB,CAAC1B,IAAI,CAAExD,IAAI,IAAKA,IAAI,CAACpnB,UAAU,KAAK0B,OAAO,CAACC,OAAO,CAAC0B,EAAE,CAAC;QAE9E,OACEpH,yDAAA,CAACN,qDAAQ;UAEPyE,OAAO,EAAEA,CAAA,KAAM;YACb0qB,0BAA0B,CAACppB,OAAO,CAAC;UACrC,CAAE;UAAAxB,QAAA,GAGFrE,wDAAA,CAAC0qB,wEAA8B;YAC7BrlB,SAAS,EAAEN,uEAAM,CAACe,OAAQ;YAC1BA,OAAO,EAAED,OAAO,CAACC,OAAQ;YACzBlE,IAAI,EAAC;UAAS,CACf,CAAC,EAEF5B,wDAAA;YAAKqF,SAAS,EAAEN,uEAAM,CAACisB,mBAAoB;YAAA3sB,QAAA,EACxCwB,OAAO,CAACO;UAAI,CACV,CAAC,EACNpG,wDAAA,CAAC6E,0DAAI;YACHQ,SAAS,EAAEN,uEAAM,CAACwqB,YAAa;YAC/BnpB,IAAI,EAAE2qB,UAAU,GAAG,OAAO,GAAG;UAAc,CAC5C,CAAC;QAAA,GAlBGlrB,OAAO,CAACO,IAmBL,CAAC;MAEf,CAAC,CAAC;IAAA,CACC,CAAC;EAEV;EAEA,SAASqrB,iBAAiBA,CAAA,EAAG;IAC3B,OACEzxB,wDAAA,CAACwqB,iDAAI;MACHpiB,MAAM,EAAEslB,wBAAyB;MACjC+B,MAAM,EAAE9B,wBAAyB;MACjCzT,GAAG,EAAEuT,cAAe;MACpBpoB,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAAC2qB,IAAI,EAAE3qB,uEAAM,CAACusB,KAAK,EAAE,uBAAuB,CAAE;MAC9E1B,cAAc,EAAE7B,qBAAsB;MACtC8B,SAAS;MACTjmB,OAAO,EAAEikB,6BAA8B;MACvCiC,mBAAmB,EAAEhC,4BAA6B;MAAAzpB,QAAA,EAEjDktB,sBAAsB,CAAC;IAAC,CACrB,CAAC;EAEX;EAEA,OACEnxB,yDAAA;IAAKiF,SAAS,EAAEN,uEAAM,CAACO,IAAK;IAAAjB,QAAA,GACzBG,OAAO,CAAC2nB,qBAAqB,CAAC,IAAIqD,cAAc,CAAC,CAAC,EAClDhrB,OAAO,CAACqoB,sBAAsB,CAAC,IAAIoE,eAAe,CAAC,CAAC,EACpDzsB,OAAO,CAAC4oB,yBAAyB,CAAC,IAAIiE,kBAAkB,CAAC,CAAC,EAC1D7sB,OAAO,CAACmpB,wBAAwB,CAAC,IAAI8D,iBAAiB,CAAC,CAAC,EACzDrxB,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAAC2sB,gBAAiB;MAAArtB,QAAA,GACtCrE,wDAAA,CAACguB,cAAc;QACbE,SAAS,EAAE7B,qBAAsB;QACjCjkB,MAAM,EAAE6jB;MAAsB,CAC/B,CAAC,EACFjsB,wDAAA,CAACquB,eAAe;QACdH,SAAS,EAAEpB,sBAAuB;QAClC1kB,MAAM,EAAEwkB;MAAuB,CAChC,CAAC,EACF5sB,wDAAA,CAACuuB,kBAAkB;QACjBL,SAAS,EAAEb,yBAA0B;QACrCjlB,MAAM,EAAE+kB;MAA0B,CACnC,CAAC,EACFntB,wDAAA,CAACwuB,iBAAiB;QAChBN,SAAS,EAAEN,wBAAyB;QACpCxlB,MAAM,EAAEslB;MAAyB,CAClC,CAAC;IAAA,CACC,CAAC;EAAA,CACH,CAAC;AAEV,CAAC;AAED,iEAAexuB,sDAAI,CAACyI,mDAAU,CAAEgD,MAAM,IAA2B;EAC/D,MAAM;IAAEwd;EAAY,CAAC,GAAGlb,iEAAc,CAACtC,MAAM,CAAC;EAE9C,MAAMggB,UAAU,GAAGxC,WAAW,CAACwC,UAAU;EACzC,MAAMC,QAAQ,GAAGzC,WAAW,CAACyC,QAAQ;EACrC,MAAMvhB,MAAM,GAAG8e,WAAW,CAAC9e,MAAM;EAEjC,OAAO;IACLshB,UAAU;IACVC,QAAQ;IACRvhB;EACF,CAAC;AACH,CAAC,CAAC,CAAC+U,iBAAiB,CAAC,CAAC,E;;;;;;;;;;;;;;AC9oBtB;AACA,iEAAe,CAAC,4GAA4G,E;;;;;;;;;;;;;;;;;;;;;;;ACApE;AACX;AAKW;AACE;AACC;AAE2B;AAGnC;AAEe;AAAA;AAclE,MAAMwT,sBAAsB,GAAG,GAAG,GAAGltB,gEAAG;AAExC,MAAMgmB,8BAAyD,GAAGA,CAAC;EACjErlB,SAAS;EACTzD,IAAI;EACJkE,OAAO;EACPoX,6BAA6B;EAC7BD,6BAA6B;EAC7B1O;AACF,CAAC,KAAK;EACJ,MAAM4L,UAAU,GAAGrB,wDAAM,CAAiB,CAAC;EAE3C,MAAM+Y,WAAW,GAAGF,mFAAuB,CAACxX,UAAU,EAAEzY,SAAS,EAAEE,IAAI,KAAK,SAAS,CAAC;EAEtF,OACE5B,uDAAA;IACEka,GAAG,EAAEC,UAAW;IAChB9U,SAAS,EAAEgI,gEAAc,CAACtI,mFAAM,CAACO,IAAI,EAAED,SAAS,CAAE;IAClD8Q,KAAK,EAAE,UAAUyb,sBAAsB,eAAeA,sBAAsB,IAAK;IAAAvtB,QAAA,EAEjFrE,uDAAA,CAACsZ,2DAAW;MACV6D,YAAY,EAAEhD,UAAW;MACzBrU,OAAO,EAAEA,OAAQ;MACjBI,IAAI,EAAE0rB,sBAAuB;MAC7BvU,oBAAoB;MACpBH,6BAA6B,EAAEA,6BAA8B;MAC7DD,6BAA6B,EAAEA,6BAA8B;MAC7D6U,cAAc,EAAE/sB,mFAAM,CAACgtB,KAAM;MAC7BF,WAAW,EAAEA;IAAY,CAC1B;EAAC,CACC,CAAC;AAEV,CAAC;AAED,iEAAe3yB,sDAAI,CAACyI,mDAAU,CAAYgD,MAAM,IAA2B;EACzE,OAAO;IACL4D,KAAK,EAAErB,8DAAW,CAACvC,MAAM;EAC3B,CAAC;AACH,CAAC,CAAC,CAAC+f,8BAA8B,CAAC,CAAC,E;;;;;;;;;;;;;;ACpEnC;AACA,iEAAe,CAAC,kaAAka,E;;;;;;;;;;;;;;;;;;;;;ACEhZ;AACW;AAIa;AAEW;AACxB;AAEW;AAAA;AAgBxD,MAAMrM,oBAAoB,GAAGA,CAAC;EAC5BnE,GAAG,EAAE+X,WAAW;EAChB3J,aAAa;EACb5C,iBAAiB;EACjB3W,4BAA4B;EAC5B0S,6BAA6B;EAC7BlR,MAAM;EACNiW,WAAW;EACXliB;AACqB,CAAC,KAAK;EAC3B,IAAI4V,GAAG,GAAGpB,wDAAM,CAAiB,CAAC;EAClC,IAAImZ,WAAW,EAAE;IACf/X,GAAG,GAAG+X,WAAW;EACnB;EAEA,MAAM3wB,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMuyB,cAAc,GAAG1tB,OAAO,CAAC8jB,aAAa,EAAE6J,WAAW,EAAEzoB,MAAM,CAAC;EAElE,MAAM,CAACiX,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnZ,0DAAQ,CAAmB,KAAK,CAAC;EAEjF,SAAS2qB,eAAeA,CAACzM,QAA0B,EAAE;IACnD/E,mBAAmB,CAAC+E,QAAQ,CAAC;IAC7BD,iBAAiB,CAACC,QAAQ,CAAC;EAC7B;EAEA,SAAS0M,kBAAkBA,CAAC1M,QAA0B,EAAE;IACtD,IAAIA,QAAQ,KAAK,KAAK,EAAE,OAAOrkB,IAAI,CAAC,kBAAkB,CAAC;IACvD,IAAIqkB,QAAQ,KAAK,UAAU,EAAE,OAAOrkB,IAAI,CAAC,qBAAqB,CAAC;IAC/D,IAAIqkB,QAAQ,KAAK,aAAa,EAAE,OAAOrkB,IAAI,CAAC,0BAA0B,CAAC;IACvE,OAAOqkB,QAAQ;EACjB;EAEA,SAAS2M,kBAAkBA,CAAC3M,QAA0B,EAAE;IACtD,OACE3lB,uDAAA;MACEqF,SAAS,EAAEgI,gEAAc,CACvBtI,yEAAM,CAAC6mB,IAAI,EACXjL,gBAAgB,KAAKgF,QAAQ,IAAI5gB,yEAAM,CAACwtB,YAC1C,CAAE;MACFhuB,OAAO,EAAEA,CAAA,KAAM6tB,eAAe,CAACzM,QAAQ,CAAE;MAAAthB,QAAA,EAExCguB,kBAAkB,CAAC1M,QAAQ;IAAC,CAC1B,CAAC;EAEV;EAEAqM,sEAAmB,CAAC9X,GAAG,EAAExY,SAAS,EAAE,IAAI,CAAC;EAEzC,OACEtB,wDAAA;IAAK8Z,GAAG,EAAEA,GAAI;IAAC7U,SAAS,EAAEgI,gEAAc,CAACtI,yEAAM,CAACytB,IAAI,EAAEluB,QAAQ,IAAIS,yEAAM,CAAC0tB,MAAM,EAAE,cAAc,CAAE;IAAApuB,QAAA,GAC9FiuB,kBAAkB,CAAC,KAAK,CAAC,EACzB,CAACvjB,4BAA4B,IAAI,CAACwB,MAAM,IAAIiW,WAAW,IAAI8L,kBAAkB,CAAC,UAAU,CAAC,EACzF,CAAC,CAACvjB,4BAA4B,IAAI,CAAC0S,6BAA6B,KAC5DyQ,cAAc,IAAII,kBAAkB,CAAC,aAAa,CAAC;EAAA,CACrD,CAAC;AAEV,CAAC;AAED,iEAAepzB,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAEud;EAAU,CAAC,GAAGvd,MAAM;EAE5B,OAAO;IACL2d,aAAa,EAAEJ,SAAS,EAAEI;EAC5B,CAAC;AACH,CACF,CAAC,CAACjK,oBAAoB,CAAC,CAAC,E;;;;;;;;;;;;;;AChGxB;AACA,iEAAe,CAAC,mkBAAmkB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD1hB;AACZ;AAIa;AACc;AACiB;AAE1B;AAClB;AACgB;AAEF;AACtB;AACqC;AAER;AAAA;AAMlE,MAAM7f,8BAA8B,GAAGA,CAAC;EAAE8M;AAAgB,CAAC,KAAK;EAC9D,MAAM;IAAEsnB;EAAoC,CAAC,GAAGxzB,mDAAU,CAAC,CAAC;EAE5D,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAMG,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxCgzB,mCAAmC,CAAC,CAAC;EACvC,CAAC,CAAC;EAEF,MAAMC,SAAS,GAAG1zB,yDAAO,CAAC,MAAM;IAC9B,IAAI,CAACqM,cAAc,EAAE,OAAO9J,SAAS;IACrC,MAAM;MAAEoxB;IAAO,CAAC,GAAGtnB,cAAc;IACjC,OAAOsnB,MAAM,CAAC/N,GAAG,CAAEthB,KAAK,IAAwB,CAC9C+C,8EAAsB,CAAC/C,KAAK,CAACJ,IAAI,GAAG,IAAI,EAAE/B,IAAI,CAAC6F,IAAI,EAAE,IAAI,EAAEzF,SAAS,EAAE,IAAI,CAAC,EAC3EgM,4EAAiB,CAACpM,IAAI,EAAEmC,KAAK,CAAC+N,YAAY,EAAE;MAAEuhB,kBAAkB,EAAEhuB,oFAAM,CAACiuB;IAAkB,CAAC,CAAC,CAC9F,CAAC;EACJ,CAAC,EAAE,CAAC1xB,IAAI,EAAEkK,cAAc,CAAC,CAAC;EAE1B,MAAMW,MAAM,GAAGhN,yDAAO,CAAC,MAAM;IAC3B,IAAI,CAACiJ,MAAM,EAAE,OAAO1G,SAAS;IAC7B,OACEtB,yDAAA;MAAKiF,SAAS,EAAEN,oFAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC5BrE,wDAAA;QAAGqF,SAAS,EAAEN,oFAAM,CAACkuB,UAAW;QAAA5uB,QAAA,EAAE/C,IAAI,CAAC,kBAAkB;MAAC,CAAI,CAAC,EAC/DtB,wDAAA,CAACoL,kDAAM;QACL7G,OAAO,EAAEkH,WAAY;QACrBW,QAAQ,EAAC,YAAY;QACrBC,aAAa,EAAEtH,oFAAM,CAACuH,cAAe;QAAAjI,QAAA,EAEpC/C,IAAI,CAAC,kBAAkB;MAAC,CACnB,CAAC;IAAA,CACN,CAAC;EAEV,CAAC,EAAE,CAACA,IAAI,EAAE8G,MAAM,EAAEqD,WAAW,CAAC,CAAC;EAE/B,IAAI,CAAConB,SAAS,IAAI,CAACrnB,cAAc,EAAE,OAAO9J,SAAS;EAEnD,MAAM;IAAEwxB,YAAY;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAG5nB,cAAc;EAC3D,MAAMqJ,QAAQ,GAAGue,QAAQ,KAAKD,QAAQ,GAAG,CAACD,YAAY,GAAGC,QAAQ,KAAKC,QAAQ,GAAGD,QAAQ,CAAC,GAAG,CAAC;EAE9F,MAAMznB,MAAM,GACVtL,yDAAA;IAAKiF,SAAS,EAAEN,oFAAM,CAAC2G,MAAO;IAAArH,QAAA,GAC5BrE,wDAAA,CAAC4N,+DAAe;MACdqH,QAAQ,EAAEyd,4EAAiB,CAACpxB,IAAI,EAAE8xB,QAAQ,CAAE;MAC5Cre,SAAS,EAAE2d,4EAAiB,CAACpxB,IAAI,EAAE6xB,QAAQ,CAAE;MAC7CE,iBAAiB,EAAEX,4EAAiB,CAACpxB,IAAI,EAAE4xB,YAAY,CAAE;MACzDI,iBAAiB,EAAC,MAAM;MACxBze,QAAQ,EAAEA,QAAS;MACnB0e,UAAU;MACVC,kBAAkB;MAClBnuB,SAAS,EAAEN,oFAAM,CAAC8P;IAAS,CAC5B,CAAC,EACF7U,wDAAA;MAAGqF,SAAS,EAAEN,oFAAM,CAAC0uB,WAAY;MAAApvB,QAAA,EAAE/C,IAAI,CAAC,+BAA+B;IAAC,CAAI,CAAC,EAC7EtB,wDAAA;MAAGqF,SAAS,EAAEN,oFAAM,CAAC2uB,UAAW;MAAArvB,QAAA,EAAE/C,IAAI,CAAC,yBAAyB;IAAC,CAAI,CAAC;EAAA,CACnE,CACN;EAED,OACEtB,wDAAA,CAAC2yB,+DAAc;IACbvqB,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAE6B,WAAY;IACrBC,MAAM,EAAEA,MAAO;IACfmnB,SAAS,EAAEA,SAAU;IACrBc,cAAc,EAAEtmB,gEAAc,CAACtI,oFAAM,CAAC6uB,KAAK,EAAE,eAAe,CAAE;IAC9DznB,MAAM,EAAEA;EAAO,CAChB,CAAC;AAEN,CAAC;AAED,iEAAejN,sDAAI,CAACV,8BAA8B,CAAC,E;;;;;;;;;;;;;;AC9FnD;AACA,iEAAe,CAAC,olBAAolB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA7jB;AACM;AAUH;AACgC;AAChB;AACR;AACY;AAE4B;AACnC;AACV;AACA;AAE8B;AAChC;AACQ;AACgC;AACtC;AACmB;AAEZ;AAAA;AAgBpD,MAAM01B,YAAY,GAAG,GAAG;AAExB,MAAMC,gBAAgB,GAAGA,CAAC;EACxBrF,cAAc;EACdM,iBAAiB;EACjBF,gBAAgB;EAChBprB,KAAK;EACLswB,KAAK;EACLloB,QAAQ;EACRmoB,YAAY;EACZhvB,SAAS;EACT9C,WAAW;EACX+xB,iBAAiB;EACjB7yB;AACQ,CAAC,KAAK;EACd,MAAM;IACJ8yB;EACF,CAAC,GAAGn1B,mDAAU,CAAC,CAAC;EAEhB,MAAM;IAAEo1B;EAAS,CAAC,GAAGT,+DAAY,CAAC,CAAC;EAEnC,MAAMzyB,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EACtB,MAAM,CAAC80B,WAAW,EAAEC,aAAa,EAAEC,eAAe,CAAC,GAAGvb,0DAAO,CAAC,KAAK,CAAC;EACpE,MAAMqN,SAAS,GAAGqN,gGAAsB,CAAC,CAAChF,cAAc,EAAEM,iBAAiB,EAAEF,gBAAgB,CAAC,CAAC;EAC/F,MAAM0F,aAAa,GAAGxF,iBAAiB,EAAEyF,SAAS;EAElD,MAAM9Y,qBAAqB,GAAG5c,+CAAO,CAAC,MAAM;IAC1C,MAAM6c,cAAc,GAAG,CAACoT,iBAAiB,CAAC1pB,WAAW,EAAE0pB,iBAAiB,CAACzpB,SAAS,CAAC;IAEnF,OACE3F,wDAAA,CAAC8E,gFAAuB;MACtBO,SAAS,EAAEN,sEAAM,CAACkX,aAAc;MAChC6Y,eAAe,EAAE/vB,sEAAM,CAACgwB,mBAAoB;MAC5CtvB,gBAAgB,EAAEuW,cAAe;MACjCpW,WAAW,EAAEspB,gBAAgB,CAACppB,OAAQ;MACtCkvB,SAAS,EAAE,GAAG,GAAGtwB,mEAAI;MACrBuwB,SAAS,EAAE,IAAK;MAChBhvB,WAAW,EAAEuuB,QAAQ,GAAG,EAAE,GAAG,EAAG;MAChCxuB,UAAU,EAAE;IAAI,CACjB,CAAC;EAEN,CAAC,EAAE,CAACopB,iBAAiB,EAAEF,gBAAgB,EAAEsF,QAAQ,CAAC,CAAC;EAEnD,OACEp0B,yDAAA;IAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,sEAAM,CAACO,IAAI,EACxC,kBAAkB,EAClBgvB,iBAAiB,IAAIvvB,sEAAM,CAACmwB,iBAAiB,EAC7Cd,KAAK,IAAIrvB,sEAAM,CAACowB,SAAS,EACzB9vB,SAAS,CAAE;IAAAhB,QAAA,GAEXjE,yDAAA,CAAC6d,uDAAU;MACT5Y,SAAS,EAAEN,sEAAM,CAACijB,UAAW;MAC7BF,cAAc,EAAEza,gEAAc,CAACtI,sEAAM,CAACqwB,eAAe,CAAE;MACvD3O,SAAS,EAAEA,SAAU;MACrB4O,SAAS,EAAE,CAAE;MACbjvB,IAAI,EAAC,oBAAoB;MAAA/B,QAAA,GAExB0X,qBAAqB,EACtB/b,wDAAA,CAAC2E,wEAAuB;QACtBU,SAAS,EAAEN,sEAAM,CAACe,OAAQ;QAC1BA,OAAO,EAAEgpB,cAAc,CAAChpB,OAAQ;QAChCI,IAAI,EAAEguB,YAAa;QACnB7b,MAAM,EAAE,CAACoc,WAAY;QACrB3X,YAAY,EAAE,CAAC7D,4EAAY,GAAGyb,aAAa,GAAGhzB,SAAU;QACxDqb,YAAY,EAAE,CAAC9D,4EAAY,GAAG0b,eAAe,GAAGjzB;MAAU,CAC3D,CAAC;IAAA,CACQ,CAAC,EACZ8C,OAAO,CAAC4vB,KAAK,CAAC,IACbp0B,wDAAA;MAAKqF,SAAS,EAAEN,sEAAM,CAACqvB,KAAM;MAAA/vB,QAAA,EAAE+vB;IAAK,CAAM,CAC3C,EACAtwB,KAAK,IAAI9D,wDAAA;MAAIqF,SAAS,EAAEN,sEAAM,CAACjB,KAAM;MAAAO,QAAA,EAAEP;IAAK,CAAK,CAAC,EAClDU,OAAO,CAAC0H,QAAQ,CAAC,IAChBlM,wDAAA;MACEqF,SAAS,EAAEgI,gEAAc,CAACtI,sEAAM,CAACmH,QAAQ,EAAEmoB,YAAY,IAAItvB,sEAAM,CAACuwB,aAAa,CAAE;MACjFnf,KAAK,EAAE7I,4DAAU,CAACsnB,aAAa,IAAI,UAAUA,aAAa,EAAE,CAAE;MAC9DrwB,OAAO,EAAEA,CAAA,KAAM;QACb,IAAI8vB,YAAY,EAAE;UAChBE,QAAQ,CAAC;YAAE/sB,EAAE,EAAE6sB,YAAY,CAAC7sB;UAAG,CAAC,CAAC;QACnC;MACF,CAAE;MAAAnD,QAAA,EAED6H;IAAQ,CACN,CACN,EACAzK,SAAS,IAAI6yB,iBAAiB,IAC7Bt0B,wDAAA,CAACi0B,iEAAuB;MACtBxyB,SAAS,EAAEA;IAAU,CACtB,CACF,EACAc,WAAW,IACVnC,yDAAA;MAAGiF,SAAS,EAAEN,sEAAM,CAACpB,MAAO;MAAAU,QAAA,GAC1BrE,wDAAA;QAAAqE,QAAA,EACGwvB,sFAA4B,CAACvyB,IAAI,EAAEiB,WAAW;MAAC,CAC5C,CAAC,EACNA,WAAW,CAACmB,QAAQ,KAAK,KAAK,IAAI1D,wDAAA,CAACg0B,+DAAQ;QAACpyB,IAAI,EAAC,MAAM;QAACsE,IAAI,EAAC;MAAQ,CAAE,CAAC,EACxE3D,WAAW,CAACmB,QAAQ,KAAK,KAAK,IAAI1D,wDAAA,CAAC6E,2DAAI;QAACuB,IAAI,EAAC;MAAS,CAAE,CAAC;IAAA,CACzD,CACJ;EAAA,CACE,CAAC;AAEV,CAAC;AAED,iEAAelH,4CAAI,CAACi1B,gBAAgB,CAAC,E;;;;;;;;;;;;;;ACpJrC;AACA,iEAAe,CAAC,0NAA0N,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACDjL;AACW;AAQX;AACH;AACiB;AACL;AACT;AAEZ;AACgB;AACV;AAEd;AAEsB;AAAA;AAW3D,MAAMF,uBAAuB,GAAGA,CAAC;EAC/BxyB,SAAS;EACTf,sBAAsB;EACtBC;AACqB,CAAC,KAAK;EAC3B,MAAM;IACJG,qBAAqB;IACrBC,gCAAgC;IAChCC,uBAAuB;IACvBC,cAAc;IACdG,mBAAmB;IACnBR,gBAAgB;IAChBS;EACF,CAAC,GAAGjC,mDAAU,CAAC,CAAC;EAEhB,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EACtB,MAAM4B,OAAO,GAAG1B,6DAAU,CAAC,CAAC;EAE5B,MAAMW,IAAI,GAAGiB,SAAS,EAAEjB,IAAI;EAC5B,MAAM2B,YAAY,GAAG3B,IAAI,EAAEoB,IAAI,KAAK,gBAAgB;EACpD,MAAMU,eAAe,GAAGH,YAAY,GAAG3B,IAAI,CAAC+B,WAAW,GAAGb,SAAS;EAEnE,MAAMiJ,MAAM,GAAGjD,kDAAS,CAAC,CAAC;EAC1B,MAAM4D,KAAK,GAAG2B,iEAAc,CAACtC,MAAM,CAAC,CAAC6qB,aAAa;EAClD,MAAMl1B,MAAM,GAAGgL,KAAK,EAAEhL,MAAM;EAE5B,MAAMqB,kBAAkB,GAAGnB,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,GAAGpB,IAAI,CAACqB,IAAI,GAAGH,SAAS;EAClF,MAAMK,qBAAqB,GAAG5C,yDAAO,CAAC,MAAM;IAC1C,IAAI,CAACwC,kBAAkB,EAAE,OAAOD,SAAS;IACzC,OAAOf,wBAAwB,EAAEqB,IAAI,CAAEC,MAAM,IAC3CA,MAAM,CAACL,IAAI,KAAK,aAAa,IAAIK,MAAM,CAACJ,IAAI,KAAKF,kBACnD,CAAC;EACH,CAAC,EAAE,CAACA,kBAAkB,EAAEhB,wBAAwB,CAAC,CAAC;EAElD,MAAM80B,4BAA4B,GAAG/0B,sBAAsB,EAAEkB,IAAI,KAAK,aAAa,GAC/ElB,sBAAsB,CAACmB,IAAI,GAAGH,SAAS;EAC3C,MAAMU,UAAU,GAAGT,kBAAkB,KAAKD,SAAS,IAAI+zB,4BAA4B,KAAK9zB,kBAAkB;EAC1G,MAAMU,OAAO,GAAGmC,OAAO,CAACzC,qBAAqB,CAAC,IAAI,CAACK,UAAU;EAE7D,MAAMa,cAAc,GAAGrD,kEAAe,CAAC,MAAM;IAC3C,IAAI,CAAC6B,SAAS,IAAIA,SAAS,EAAEjB,IAAI,CAACoB,IAAI,KAAK,gBAAgB,EAAE;IAE7D,IAAIH,SAAS,CAACyB,aAAa,IAAIzB,SAAS,CAACyB,aAAa,GAAGxD,+DAAa,CAAC,CAAC,EAAE;MACxEkB,gBAAgB,CAAC;QACfkC,OAAO,EAAE;UACPK,GAAG,EAAE,+BAA+B;UACpCC,SAAS,EAAE;YAAEC,IAAI,EAAE5D,wEAAgB,CAAC8B,OAAO,EAAEE,SAAS,CAACyB,aAAa,GAAG,IAAI;UAAE;QAC/E;MACF,CAAC,CAAC;MACF;IACF;IAEApC,qBAAqB,CAAC;MAAEN,IAAI,EAAEiB;IAAU,CAAC,CAAC;EAC5C,CAAC,CAAC;EAEF,MAAMuC,UAAU,GAAGpE,kEAAe,CAAC,MAAM;IACvC,IAAIwC,UAAU,EAAE;MACdnB,cAAc,CAAC;QACbgD,WAAW,EAAE;UAAErC,IAAI,EAAE,SAAS;UAAEuC,UAAU,EAAE9E,2DAAsBA;QAAC;MACrE,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI0C,qBAAqB,EAAE;MAChCf,uBAAuB,CAAC;QAAEiD,WAAW,EAAElC;MAAsB,CAAC,CAAC;IACjE;EACF,CAAC,CAAC;EAEF,MAAMuB,UAAU,GAAG1D,kEAAe,CAAC,MAAM;IACvC,IAAI,CAAC6B,SAAS,IAAI,CAACnB,MAAM,EAAE;IAC3B,IAAImB,SAAS,CAAC8B,WAAW,IAAI9B,SAAS,CAAC8B,WAAW,GAAG7D,+DAAa,CAAC,CAAC,EAAE;MACpEkB,gBAAgB,CAAC;QACfkC,OAAO,EAAE;UACPK,GAAG,EAAE,6BAA6B;UAClCC,SAAS,EAAE;YAAEC,IAAI,EAAE5D,wEAAgB,CAAC8B,OAAO,EAAEE,SAAS,CAAC8B,WAAW,GAAG,IAAI;UAAE;QAC7E;MACF,CAAC,CAAC;MACF;IACF;IACAxC,gCAAgC,CAAC;MAAET,MAAM;MAAEE,IAAI,EAAEiB;IAAU,CAAC,CAAC;EAC/D,CAAC,CAAC;EAEF,MAAMi0B,YAAY,GAAG91B,kEAAe,CAAC,MAAM;IACzC,IAAI,CAAC6B,SAAS,IAAIA,SAAS,CAACjB,IAAI,CAACoB,IAAI,KAAK,gBAAgB,IAAI,CAACH,SAAS,CAACkB,SAAS,EAAE;IACpFtB,kBAAkB,CAAC,CAAC;IACpBD,mBAAmB,CAAC;MAAEZ,IAAI,EAAEiB,SAAS,CAACkB,SAAS;MAAEc,KAAK,EAAE;QACtDC,QAAQ,EAAEnE,wDAAmB;QAAEoE,MAAM,EAAE,CAAC;QAAEC,KAAK,EAAE;MACnD;IAAE,CAAC,CAAC;IACJhD,gBAAgB,CAAC;MACfiD,IAAI,EAAE,gBAAgB;MACtBf,OAAO,EAAE;QACPK,GAAG,EAAE,0BAA0B;QAC/BC,SAAS,EAAE;UAAE5C,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;YAAEwC,KAAK,EAAErC,SAAS,CAACjB,IAAI,CAACsD,KAAK;YAAEC,MAAM,EAAEtC,SAAS,CAACjB,IAAI,CAACuD;UAAO,CAAC;QAAE;MACxG;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,OACE3D,yDAAA;IAAKiF,SAAS,EAAEN,6EAAM,CAAC4wB,aAAc;IAAAtxB,QAAA,GACnCrE,wDAAA,CAACoL,kDAAM;MACLoN,KAAK,EAAC,mBAAmB;MACzBpM,QAAQ,EAAC,sBAAsB;MAC/BwpB,aAAa,EAAC,KAAK;MACnBvpB,aAAa,EAAEtH,6EAAM,CAAClB,IAAK;MAC3BU,OAAO,EAAEtB,cAAe;MACxBwkB,SAAS,EAAEnmB,IAAI,CAAC,kBAAkB,CAAE;MACpCiU,iBAAiB;MACjBmD,KAAK;MACLrT,SAAS,EAAEN,6EAAM,CAAC8wB,YAAa;MAAAxxB,QAAA,EAE/BrE,wDAAA;QAAMqF,SAAS,EAAEN,6EAAM,CAAC/B,IAAK;QAAAqB,QAAA,EAC1B/C,IAAI,CAAC,kBAAkB;MAAC,CACrB;IAAC,CACD,CAAC,EACR,CAACe,OAAO,IAAI,CAACD,UAAU,KACtBpC,wDAAA,CAACoL,kDAAM;MACLoN,KAAK,EAAC,mBAAmB;MACzBpM,QAAQ,EAAEhK,UAAU,GAAG,gBAAgB,GAAG,YAAa;MACvDwzB,aAAa,EAAC,KAAK;MACnBvpB,aAAa,EAAEtH,6EAAM,CAAClB,IAAK;MAC3BU,OAAO,EAAElC,OAAO,IAAID,UAAU,GAAG4B,UAAU,GAAGtC,SAAU;MACxDwS,QAAQ,EAAE,CAAC7R,OAAO,IAAI,CAACD,UAAW;MAClCqlB,SAAS,EAAEnmB,IAAI,CAACc,UAAU,GAAG,iBAAiB,GAAG,cAAc,CAAE;MACjEmT,iBAAiB;MACjBmD,KAAK;MACLrT,SAAS,EAAEN,6EAAM,CAAC8wB,YAAa;MAAAxxB,QAAA,EAE/BrE,wDAAA;QAAMqF,SAAS,EAAEN,6EAAM,CAAC/B,IAAK;QAAAqB,QAAA,EAC1B/C,IAAI,CAACc,UAAU,GAAG,iBAAiB,GAAG,cAAc;MAAC,CAClD;IAAC,CACD,CACT,EACA,CAACE,eAAe,IACftC,wDAAA,CAACoL,kDAAM;MACLoN,KAAK,EAAC,mBAAmB;MACzBpM,QAAQ,EAAC,MAAM;MACfwpB,aAAa,EAAC,KAAK;MACnBvpB,aAAa,EAAEtH,6EAAM,CAAClB,IAAK;MAC3BU,OAAO,EAAEjB,UAAW;MACpBmkB,SAAS,EAAEnmB,IAAI,CAAC,MAAM,CAAE;MACxBiU,iBAAiB;MACjBmD,KAAK;MACLrT,SAAS,EAAEN,6EAAM,CAAC8wB,YAAa;MAAAxxB,QAAA,EAE/BrE,wDAAA;QAAMqF,SAAS,EAAEN,6EAAM,CAAC/B,IAAK;QAAAqB,QAAA,EAC1B/C,IAAI,CAAC,MAAM;MAAC,CACT;IAAC,CACD,CACT,EACAkD,OAAO,CAAClC,eAAe,CAAC,IACvBtC,wDAAA,CAACoL,kDAAM;MACLoN,KAAK,EAAC,mBAAmB;MACzBpM,QAAQ,EAAC,QAAQ;MACjBwpB,aAAa,EAAC,KAAK;MACnBvpB,aAAa,EAAEtH,6EAAM,CAAClB,IAAK;MAC3BU,OAAO,EAAEmxB,YAAa;MACtBjO,SAAS,EAAEnmB,IAAI,CAAC,gBAAgB,CAAE;MAClCiU,iBAAiB;MACjBmD,KAAK;MACLrT,SAAS,EAAEN,6EAAM,CAAC8wB,YAAa;MAAAxxB,QAAA,EAE/BrE,wDAAA;QAAMqF,SAAS,EAAEN,6EAAM,CAAC/B,IAAK;QAAAqB,QAAA,EAC1B/C,IAAI,CAAC,gBAAgB;MAAC,CACnB;IAAC,CACD,CACT;EAAA,CACE,CAAC;AAEV,CAAC;AAED,iEAAepC,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAEtC;EAAc,CAAC,GAAGsC,MAAM;EAChC,MAAMmrB,WAAW,GAAGztB,aAAa,GAAGktB,6DAAU,CAAC5qB,MAAM,EAAEtC,aAAa,CAAC,GAAG3G,SAAS;EACjF,MAAMhB,sBAAsB,GAAGo1B,WAAW,EAAE7xB,WAAW;EACvD,MAAMtD,wBAAwB,GAAGgK,MAAM,CAAChK,wBAAwB,EAAEo1B,QAAQ;EAE1E,OAAO;IACLr1B,sBAAsB;IACtBC;EACF,CAAC;AACH,CACF,CAAC,CAACszB,uBAAuB,CAAC,CAAC,E;;;;;;;;;;;;;;ACnN3B;AACA,iEAAe,CAAC,2fAA2f,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDvc;AACR;AAKE;AACa;AACF;AAEP;AAClB;AACgB;AACF;AAEgB;AACxB;AACd;AACF;AAC6B;AAEP;AAAA;AAY5D,MAAM31B,wBAAwB,GAAGA,CAAC;EAAEgN,KAAK;EAAE6qB,aAAa;EAAEC,SAAS;EAAEC;AAAmC,CAAC,KAAK;EAC5G,MAAM;IAAEC;EAA8B,CAAC,GAAGl3B,mDAAU,CAAC,CAAC;EAEtD,MAAM+d,YAAY,GAAGrE,wDAAM,CAAiB,CAAC;EAE7C,MAAMxX,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,EAAE4G,MAAM,CAAC;EACrC,MAAMqkB,cAAc,GAAGtrB,mEAAgB,CAACkrB,aAAa,CAAC;EACtD,MAAMK,kBAAkB,GAAGvrB,mEAAgB,CAACmrB,SAAS,CAAC;EACtD,MAAMK,oBAAoB,GAAGxrB,mEAAgB,CAACorB,WAAW,CAAC;EAE1D,MAAM5qB,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxC02B,6BAA6B,CAAC,CAAC;EACjC,CAAC,CAAC;EAEF,MAAMI,SAAS,GAAGv3B,yDAAO,CAAC,MAAM;IAC9B,IAAI,CAACo3B,cAAc,EAAE7sB,MAAM,EAAE,OAAOhI,SAAS;IAE7C,OAAO60B,cAAc,CAACxR,GAAG,CAAEvkB,IAAI,IAAK;MAClC,MAAMkL,MAAM,GAAGpK,IAAI,CAAC,6BAA6B,EAAE;QACjDd,IAAI,EAAEg2B,kBAAkB,IAAIl1B,IAAI,CAAC,UAAU,CAAC;QAC5C4a,UAAU,EAAE1b,IAAI,CAAC0b,UAAU,GAAG5a,IAAI,CAACyC,MAAM,CAACvD,IAAI,CAAC0b,UAAU,CAAC,GAAG,EAAE;QAC/DsL,KAAK,EAAElmB,IAAI,CAACyC,MAAM,CAACvD,IAAI,CAACgnB,KAAK;MAC/B,CAAC,CAAC;MAEF,MAAMqL,SAAoB,GAAG,CAC3B,CAACnxB,SAAS,EACRtB,yDAAA;QAAMiF,SAAS,EAAEN,8EAAM,CAAC4xB,UAAW;QAAAtyB,QAAA,GAChCoyB,oBAAoB,IACnBz2B,wDAAA,CAAC2E,uEAAuB;UACtBU,SAAS,EAAEN,8EAAM,CAACsxB,WAAY;UAC9BvwB,OAAO,EAAE2wB,oBAAqB;UAC9BvwB,IAAI,EAAE,EAAG;UACTkS,IAAI,EAAE;QAAM,CACb,CACF,EACDpY,wDAAA;UAAAqE,QAAA,EAAOqH;QAAM,CAAO,CAAC;MAAA,CACjB,CAAC,CACP,EACF,CAACpK,IAAI,CAAC,sBAAsB,CAAC,EAAE;QAAEoP,MAAM,EAAElQ,IAAI,CAACF;MAAO,CAAC,CAAC,EACvD,CAACgB,IAAI,CAAC,iBAAiB,CAAC,EAAEkF,8EAAsB,CAAChG,IAAI,CAAC6C,IAAI,GAAG,IAAI,EAAE/B,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,CAAC,EACpF,CAAC7F,IAAI,CAAC,wBAAwB,CAAC,EAC7BlB,yDAAA;QAAMiF,SAAS,EAAEN,8EAAM,CAAC6xB,QAAS;QAAAvyB,QAAA,GAC9BqJ,4EAAiB,CAACpM,IAAI,EAAEd,IAAI,CAACq2B,SAAS,EAAE;UAAExxB,SAAS,EAAEN,8EAAM,CAAC+xB;QAAS,CAAC,CAAC,EACxE92B,wDAAA,CAACi2B,4DAAW;UAAC5wB,SAAS,EAAEN,8EAAM,CAACqvB,KAAM;UAAA/vB,QAAA,EAClC/C,IAAI,CAAC,wBAAwB,EAAE;YAAEy1B,QAAQ,EAAEv2B,IAAI,CAACu2B;UAAS,CAAC;QAAC,CACjD,CAAC;MAAA,CACV,CAAC,CACP,CACH;MAED,OAAO;QAAElE,SAAS;QAAE1vB,GAAG,EAAE,GAAG3C,IAAI,CAACgnB,KAAK,IAAIhnB,IAAI,CAAC0b,UAAU;MAAG,CAAC;IAC/D,CAAC,CAAC;EACJ,CAAC,EAAE,CAACqa,cAAc,EAAEC,kBAAkB,EAAEC,oBAAoB,EAAEn1B,IAAI,CAAC,CAAC;EAEpE,MAAM01B,UAAU,GAAGT,cAAc,EAAE7sB,MAAM,IAAI,CAAC;EAE9CssB,iEAAc,CAAC;IACb7Y,YAAY;IACZ8Z,QAAQ,EAAE,IAAIlyB,8EAAM,CAACmyB,SAAS,EAAE;IAChCC,aAAa,EAAE;EACjB,CAAC,EAAE,CAACT,SAAS,CAAC,CAAC;EAEf,OACEt2B,yDAAA,CAAC4d,kDAAK;IACJ5V,MAAM,EAAEA,MAAO;IACfyB,cAAc;IACd/F,KAAK,EAAExC,IAAI,CAAC,6BAA6B,EAAE;MAAE0T,KAAK,EAAEgiB;IAAW,CAAC,EAAE;MAAE5hB,WAAW,EAAE4hB;IAAW,CAAC,CAAE;IAC/F3xB,SAAS,EAAEN,8EAAM,CAACuG,KAAM;IACxBkB,gBAAgB,EAAEzH,8EAAM,CAAC0H,OAAQ;IACjC7C,OAAO,EAAE6B,WAAY;IACrB2rB,iBAAiB;IACjBhQ,MAAM;IAAA/iB,QAAA,GAENrE,wDAAA;MAAKqF,SAAS,EAAEN,8EAAM,CAACsyB,kBAAmB;MAACnd,GAAG,EAAEiD,YAAa;MAAA9Y,QAAA,EAC3DrE,wDAAA;QAAKqF,SAAS,EAAEN,8EAAM,CAACmyB,SAAU;QAAA7yB,QAAA,EAC9BqyB,SAAS,EAAE3R,GAAG,CAAE6G,IAAI,IACnB5rB,wDAAA,CAACk2B,0DAAS;UAAgBrD,SAAS,EAAEjH,IAAI,CAACiH;QAAU,GAApCjH,IAAI,CAACzoB,GAAiC,CACvD;MAAC,CACC;IAAC,CACH,CAAC,EACNnD,wDAAA,CAACoL,mDAAM;MAAC/F,SAAS,EAAEN,8EAAM,CAACuyB,QAAS;MAAC/yB,OAAO,EAAEkH,WAAY;MAAApH,QAAA,EACtD/C,IAAI,CAAC,IAAI;IAAC,CACL,CAAC;EAAA,CACJ,CAAC;AAEZ,CAAC;AAED,iEAAepC,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAE4sB;EAAyB,CAAC,GAAGtqB,iEAAc,CAACtC,MAAM,CAAC;EAE3D,OAAO;IACLwrB,aAAa,EAAEoB,wBAAwB,EAAEpB,aAAa;IACtDC,SAAS,EAAEmB,wBAAwB,EAAEnB,SAAS;IAC9CC,WAAW,EAAEkB,wBAAwB,EAAElB;EACzC,CAAC;AACH,CACF,CAAC,CAAC/3B,wBAAwB,CAAC,CAAC,E;;;;;;;;;;;;;;ACpI5B;AACA,iEAAe,CAAC,kkDAAkkD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDjgD;AACV;AASG;AACD;AACb;AAEiC;AAC3B;AAClB;AACA;AACgB;AAEF;AACgB;AAClC;AACc;AACJ;AACd;AACc;AACR;AACR;AACQ;AACE;AACO;AACH;AAEG;AAAA;AAavD,MAAMw5B,kBAAkB,GAAG,EAAE;AAC7B,MAAMC,mBAAmB,GAAG,KAAK;AACjC,MAAMC,qBAAqB,GAAG,UAAU;AACxC,MAAMC,iBAAiB,GAAG,KAAK;AAC/B,MAAMC,mBAAmB,GAAG,IAAI;AAChC,MAAMjzB,iBAAiB,GAAG,EAAE;AAC5B,MAAMkzB,yBAAyB,GAAG,CAAC;AAEnC,MAAM/5B,mBAAmB,GAAGA,CAAC;EAC3BkN,KAAK;EACL8sB,YAAY;EACZvpB,WAAW;EACXwpB,eAAe;EACfC;AACqB,CAAC,KAAK;EAC3B,MAAM;IAAEC,wBAAwB;IAAEC,sBAAsB;IAAEC;EAAgB,CAAC,GAAGr5B,mDAAU,CAAC,CAAC;EAE1F,MAAMgJ,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAE7B,MAAMotB,qBAAqB,GAAGztB,mEAAgB,CAACmtB,YAAY,CAAC;EAC5D,MAAMO,qBAAqB,GAAG1tB,mEAAgB,CAACqtB,YAAY,CAAC;EAE5D,MAAMM,uBAAuB,GAAGz5B,yDAAO,CAAC,MAAM;IAC5C,IAAI,CAACw5B,qBAAqB,EAAE,OAAOj3B,SAAS;IAC5C,MAAMiJ,MAAM,GAAGjD,kDAAS,CAAC,CAAC;IAC1B,OAAOixB,qBAAqB,CACzB5T,GAAG,CAAEvd,EAAE,IAAKuF,6DAAU,CAACpC,MAAM,EAAEnD,EAAE,CAAC,CAAC,CACnC6B,MAAM,CAAC7E,OAAO,CAAC;EACpB,CAAC,EAAE,CAACm0B,qBAAqB,CAAC,CAAC;EAE3B,MAAM,CAACE,UAAU,EAAEC,UAAU,EAAEC,UAAU,CAAC,GAAGH,uBAAuB,IAAI,EAAE;EAE1E,MAAMI,aAAa,GAAGlF,gGAAsB,CAAC,CAAC+E,UAAU,EAAErxB,EAAE,IAAI,GAAG,CAAC,CAAC;EACrE,MAAMyxB,aAAa,GAAGnF,gGAAsB,CAAC,CAACgF,UAAU,EAAEtxB,EAAE,IAAI,GAAG,CAAC,CAAC;EACrE,MAAM0xB,aAAa,GAAGpF,gGAAsB,CAAC,CAACiF,UAAU,EAAEvxB,EAAE,IAAI,GAAG,CAAC,CAAC;EAErE,MAAM8M,aAAa,GAAGokB,qBAAqB,EAAEl4B,IAAI,CAAC8T,aAAa,IAAI,CAAC;EAEpE,MAAMhT,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMw5B,WAAW,GAAGT,qBAAqB,EAAElkB,KAAK,CAAC5S,IAAI,KAAK,QAAQ,GAC9D82B,qBAAqB,CAAClkB,KAAK,GAC3B9S,SAAS;EACb,MAAM8Q,SAAS,GAAGkmB,qBAAqB,EAAElmB,SAAS;EAElD,MAAM,CAAC4mB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG5xB,0DAAQ,CAACqwB,kBAAkB,CAAC;EAC9E,MAAM,CAACwB,oBAAoB,EAAEC,kBAAkB,EAAEC,mBAAmB,CAAC,GAAGpgB,0DAAO,CAAC,CAAC;EACjF,MAAM,CAACqgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjyB,0DAAQ,CAAC,EAAE,CAAC;EAExD,MAAMkyB,UAAU,GAAGR,WAAW,EAAES,YAAY,IAAI9B,kBAAkB;EAElE,MAAM+B,aAAa,GAAGrnB,SAAS,EAAEonB,YAAY,IAAID,UAAU;EAE3D,MAAMG,cAAc,GAAGlpB,IAAI,CAACiH,IAAI,CAACgiB,aAAa,GAAG5B,iBAAiB,CAAC,GAAGA,iBAAiB,GAAGF,mBAAmB;EAE7GnrB,2DAAS,CAAC,MAAM;IACdysB,oBAAoB,CAACQ,aAAa,CAAC;EACrC,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB,MAAME,WAAW,GAAGZ,WAAW,EAAEY,WAAW;EAE5C,MAAMC,aAAa,GAAGxnB,SAAS,EAAEqkB,SAAS,GAAGuC,iBAAiB,GAAG5mB,SAAS,CAACqkB,SAAS,GAAG,CAAC;EACxF,MAAMoD,YAAY,GAAGb,iBAAiB,IAAIU,cAAc;EAExD,MAAMI,mBAAmB,GAAG/6B,yDAAO,CAAC,MAAM;IACxC,IAAI86B,YAAY,EAAE,OAAO34B,IAAI,CAAC,yBAAyB,CAAC;IACxD,IAAI04B,aAAa,IAAI,CAAC,EAAE,OAAOt4B,SAAS;IACxC,OACEtB,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GAAE,GAEA,EAAArE,wDAAA,CAACy3B,gEAAe;QAACz0B,IAAI,EAAE1B,IAAI,CAACyC,MAAM,CAACi2B,aAAa;MAAE,CAAE,CAAC;IAAA,CACrD,CAAC;EAEP,CAAC,EAAE,CAACA,aAAa,EAAEC,YAAY,EAAE34B,IAAI,CAAC,CAAC;EAEvC,MAAM64B,kBAAkB,GAAGv6B,kEAAe,CAAEiS,KAAa,IAAK;IAC5DwnB,oBAAoB,CAACxnB,KAAK,CAAC;EAC7B,CAAC,CAAC;EAEF,MAAMuoB,cAAc,GAAGx6B,kEAAe,CAAC,MAAM;IAC3C,IAAI,CAAC0L,KAAK,EAAE+G,aAAa,IAAI,CAACjK,MAAM,EAAE;IACtCqwB,eAAe,CAAC;MAAEvmB,MAAM,EAAE5G,KAAK,CAAC+G;IAAc,CAAC,CAAC;EAClD,CAAC,CAAC;EAEF,MAAMgoB,wBAAwB,GAAGz6B,kEAAe,CAAC,MAAM;IACrD25B,kBAAkB,CAAC,CAAC;EACtB,CAAC,CAAC;EAEF,MAAMe,gBAAgB,GAAG16B,kEAAe,CAAC,MAAM;IAC7C,IAAIq6B,YAAY,EAAE;MAChBI,wBAAwB,CAAC,CAAC;IAC5B;EACF,CAAC,CAAC;EAEF,MAAME,qBAAqB,GAAG36B,kEAAe,CAAE+R,CAAsC,IAAK;IACxF,MAAME,KAAK,GAAGF,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC2oB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IAC/C,MAAMC,QAAQ,GAAGC,MAAM,CAAC7oB,KAAK,CAAC;IAC9B,IAAI4oB,QAAQ,GAAGzC,qBAAqB,EAAE;IACtC0B,iBAAiB,CAAC7nB,KAAK,CAAC;EAC1B,CAAC,CAAC;EAEF,MAAM8oB,qBAAqB,GAAG/6B,kEAAe,CAAC,MAAM;IAClD,IAAI,CAAC84B,qBAAqB,EAAEl4B,IAAI,CAACgH,EAAE,IAAI,CAAC8D,KAAK,EAAE;IAE/C,MAAMsvB,WAAW,GAAGF,MAAM,CAACjB,cAAc,CAAC;IAC1C,IAAImB,WAAW,GAAGf,aAAa,EAAE;IAEjCR,oBAAoB,CAACuB,WAAW,CAAC;IACjCpB,mBAAmB,CAAC,CAAC;IAErBE,iBAAiB,CAAC,EAAE,CAAC;IAErB,MAAM;MAAEp5B,MAAM;MAAEwC,OAAO;MAAE8M;IAAe,CAAC,GAAGtE,KAAK;IACjD,MAAMuvB,WAAW,GAAGr2B,OAAO,CAACgO,SAAS,EAAEqkB,SAAS,CAAC;IAEjD2B,sBAAsB,CAAC;MACrBtmB,MAAM,EAAEwmB,qBAAqB,CAACl4B,IAAI,CAACgH,EAAE;MACrCqvB,SAAS,EAAE+D,WAAW;MACtBt6B,MAAM;MACNwC,OAAO,EAAEA,OAAO,GAAG;QAAEE,IAAI,EAAEF;MAAQ,CAAC,GAAGpB,SAAS;MAChDkO,cAAc;MACdirB;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMC,YAAY,GAAGl7B,kEAAe,CAAC,MAAM;IACzC,IAAI,CAAC84B,qBAAqB,EAAEl4B,IAAI,CAACgH,EAAE,IAAI,CAAC8D,KAAK,EAAE;IAC/C,MAAM;MAAEhL,MAAM;MAAEwC,OAAO;MAAE8M;IAAe,CAAC,GAAGtE,KAAK;IACjD,MAAMuvB,WAAW,GAAGr2B,OAAO,CAACgO,SAAS,EAAEqkB,SAAS,CAAC;IAEjD2B,sBAAsB,CAAC;MACrBtmB,MAAM,EAAEwmB,qBAAqB,CAACl4B,IAAI,CAACgH,EAAE;MACrCqvB,SAAS,EAAEuC,iBAAiB;MAC5B94B,MAAM;MACNwC,OAAO,EAAEA,OAAO,GAAG;QAAEE,IAAI,EAAEF;MAAQ,CAAC,GAAGpB,SAAS;MAChDkO,cAAc;MACdirB;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAME,YAAY,GAAG57B,yDAAO,CAAC,MAAM;IACjC,IAAI,CAACi6B,iBAAiB,IAAI,CAACD,WAAW,EAAE6B,SAAS,EAAEtxB,MAAM,EAAE,OAAOhI,SAAS;IAE3E,MAAM;MAAEs5B;IAAU,CAAC,GAAG7B,WAAW;IACjC,MAAM8B,WAAW,GAAGzoB,SAAS,EAAE0oB,OAAO,IAAIR,MAAM,CAACS,gBAAgB;IAEjE,KAAK,MAAMC,KAAK,IAAIJ,SAAS,EAAE;MAC7B,IAAII,KAAK,CAACz3B,MAAM,GAAGy1B,iBAAiB,IAC9BgC,KAAK,CAACz3B,MAAM,KAAKy1B,iBAAiB,IAAIgC,KAAK,CAAC/3B,IAAI,IAAI43B,WAAY,EAAE;QACtE,OAAOG,KAAK,CAACC,GAAG;MAClB;IACF;IAEA,OAAOL,SAAS,CAACA,SAAS,CAACtxB,MAAM,GAAG,CAAC,CAAC,CAAC2xB,GAAG,GAAG,CAAC;EAChD,CAAC,EAAE,CAACjC,iBAAiB,EAAED,WAAW,EAAE3mB,SAAS,EAAE0oB,OAAO,CAAC,CAAC;EAExD,SAASI,eAAeA,CAAA,EAAG;IACzB,OACEl7B,yDAAA;MAAKiF,SAAS,EAAEN,yEAAM,CAACw2B,SAAU;MAAAl3B,QAAA,GAC/BjE,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAACy2B,QAAS;QAAAn3B,QAAA,GAC9BjE,yDAAA;UAAKiF,SAAS,EAAEN,yEAAM,CAAC02B,aAAc;UAAAp3B,QAAA,GACnCrE,wDAAA,CAACg0B,+DAAQ;YAACpyB,IAAI,EAAC,MAAM;YAACsE,IAAI,EAAC;UAAU,CAAE,CAAC,EACvC5E,IAAI,CAACyC,MAAM,CAAC81B,aAAa,CAAC;QAAA,CACxB,CAAC,EACN75B,wDAAA;UAAKqF,SAAS,EAAEN,yEAAM,CAAC22B,aAAc;UAAAr3B,QAAA,EAAE/C,IAAI,CAAC,uBAAuB;QAAC,CAAM,CAAC;MAAA,CACxE,CAAC,EACNlB,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAACy2B,QAAS;QAAAn3B,QAAA,GAC9BrE,wDAAA;UAAKqF,SAAS,EAAEN,yEAAM,CAAC02B,aAAc;UAAAp3B,QAAA,EACnCrE,wDAAA,CAACiO,sDAAS;YAACyH,MAAM,EAAEqkB,WAAW,IAAI,CAAE;YAAC4B,mBAAmB;YAACC,KAAK,EAAExB;UAAe,CAAE;QAAC,CAC/E,CAAC,EACNp6B,wDAAA;UAAKqF,SAAS,EAAEN,yEAAM,CAAC22B,aAAc;UAAAr3B,QAAA,EAAE/C,IAAI,CAAC,2BAA2B;QAAC,CAAM,CAAC;MAAA,CAC5E,CAAC,EACNlB,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAACy2B,QAAS;QAAAn3B,QAAA,GAC9BjE,yDAAA;UAAKiF,SAAS,EAAEN,yEAAM,CAAC02B,aAAc;UAAAp3B,QAAA,GACnCrE,wDAAA,CAAC2E,wEAAuB;YACtB0T,MAAM,EAAE,KAAM;YACdhT,SAAS,EAAEN,yEAAM,CAACsxB,WAAY;YAC9BvwB,OAAO,EAAE4yB,qBAAqB,EAAEl4B,IAAI,CAACsF,OAAQ;YAC7CI,IAAI,EAAEjB;UAAkB,CACzB,CAAC,EACD3D,IAAI,CAACyC,MAAM,CAACo1B,WAAW,EAAE0C,SAAS,IAAI,CAAC,CAAC;QAAA,CACtC,CAAC,EACN77B,wDAAA;UAAKqF,SAAS,EAAEN,yEAAM,CAAC22B,aAAc;UAAAr3B,QAAA,EAAE/C,IAAI,CAAC,iBAAiB;QAAC,CAAM,CAAC;MAAA,CAClE,CAAC;IAAA,CACH,CAAC;EAEV;EAEA,MAAMw6B,SAAS,GAAGt3B,OAAO,CAACgO,SAAS,EAAEqkB,SAAS,IAAIkE,YAAY,IAAIA,YAAY,IAAIzmB,aAAa,CAAC;EAEhG,SAASynB,4BAA4BA,CAAA,EAAG;IACtC,MAAM3F,SAAS,GAAGsC,qBAAqB,EAAEl4B,IAAI,CAACsD,KAAK,IAAIxC,IAAI,CAAC,UAAU,CAAC;IACvE,MAAM06B,WAAW,GAAGjB,YAAY,IAAIA,YAAY,IAAI,GAAG,GACnD,CAAC5B,WAAW,EAAE8C,WAAW,IAAI,CAAC,IAAIlB,YAAY,GAC9Cr5B,SAAS;IAEb,OACE1B,wDAAA,CAACie,uDAAU;MACT7X,IAAI,EAAC,MAAM;MACXqgB,SAAS,EAAEqV,SAAS,GAAG,CAAC,GAAG,CAAE;MAC7Bz2B,SAAS,EAAEN,yEAAM,CAACm3B,sBAAuB;MACzCpU,cAAc,EAAE/iB,yEAAM,CAACo3B,eAAgB;MAAA93B,QAAA,EAEtCy3B,SAAS,GACR17B,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAACq3B,aAAc;QAAA/3B,QAAA,GACnCrE,wDAAA;UAAMqF,SAAS,EAAEN,yEAAM,CAACs3B,WAAY;UAAAh4B,QAAA,EAAE/C,IAAI,CAAC,yBAAyB;QAAC,CAAO,CAAC,EAC7EtB,wDAAA;UAAMqF,SAAS,EAAEN,yEAAM,CAACu3B,YAAa;UAAAj4B,QAAA,EAClC/C,IAAI,CAAC,YAAY,EAAE;YAAEwC,KAAK,EAAEsyB,SAAS;YAAEryB,MAAM,EAAEi4B,WAAW,GAAG16B,IAAI,CAACyC,MAAM,CAACi4B,WAAW,CAAC,GAAGt6B;UAAU,CAAC;QAAC,CACjG,CAAC;MAAA,CACJ,CAAC,GAEN1B,wDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACw3B,YAAa;QAAAl4B,QAAA,EAAE/C,IAAI,CAAC,0BAA0B;MAAC,CAAM;IAC7E,CACS,CAAC;EAEjB;EAEA,SAASk7B,aAAaA,CAAA,EAAG;IACvB,OACEp8B,yDAAA;MAAKiF,SAAS,EAAEN,yEAAM,CAAC03B,OAAQ;MAAAp4B,QAAA,GAC5B03B,4BAA4B,CAAC,CAAC,EAC/B37B,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAAC23B,SAAU;QAAAr4B,QAAA,GAC/BrE,wDAAA;UAAKqF,SAAS,EAAEN,yEAAM,CAAC43B,cAAe;UAAAt4B,QAAA,EACnC02B,YAAY,IAAIA,YAAY,GAAG,GAAG,GAAG,GAAGA,YAAY,GAAG,GAAIA,YAAY,IAAI;QAAE,CAC3E,CAAC,EACN36B,yDAAA;UAAKiF,SAAS,EAAEN,yEAAM,CAAC63B,UAAW;UAAAv4B,QAAA,GAC/Bg0B,eAAe,IAAIr4B,wDAAA,CAAC4E,uDAAM;YAACO,IAAI,EAAEkzB,eAAgB;YAACnyB,IAAI,EAAC;UAAO,CAAE,CAAC,EACjEmyB,eAAe,IAAIr4B,wDAAA,CAAC03B,8DAAa;YAACvyB,IAAI,EAAEkzB,eAAgB;YAAChzB,SAAS,EAAEN,yEAAM,CAAC83B;UAAW,CAAE,CAAC;QAAA,CACvF,CAAC,EACNz8B,yDAAA;UAAKiF,SAAS,EAAEN,yEAAM,CAAC+3B,YAAa;UAAAz4B,QAAA,GAClCrE,wDAAA,CAACg0B,+DAAQ;YAACpyB,IAAI,EAAC,MAAM;YAACsE,IAAI,EAAC;UAAU,CAAE,CAAC,EACvC5E,IAAI,CAACyC,MAAM,CAACq1B,iBAAiB,CAAC;QAAA,CAC5B,CAAC;MAAA,CACH,CAAC;IAAA,CACH,CAAC;EAEV;EAEA,SAAS2D,kBAAkBA,CACzBC,KAAa,EACbC,KAAa,EACb93B,IAAyB,EACzBxB,MAA0B,EAC1B8iB,SAAiB,EACjB;IACA,OACErmB,yDAAA;MAAKiF,SAAS,EAAEN,yEAAM,CAACm4B,YAAa;MAAA74B,QAAA,GAClCrE,wDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACo4B,iBAAkB;QAAA94B,QAAA,EACtCmzB,sEAAU,CAACyF,KAAK,EAAE,CAAC,OAAO,CAAC;MAAC,CAC1B,CAAC,EACNj9B,wDAAA,CAACie,uDAAU;QACT7X,IAAI,EAAC,MAAM;QACXqgB,SAAS,EAAEA,SAAU;QACrBphB,SAAS,EAAEN,yEAAM,CAAC63B,UAAW;QAC7B9U,cAAc,EAAE/iB,yEAAM,CAACo3B,eAAgB;QAAA93B,QAAA,EAEtCc,IAAI,IACH/E,yDAAA,CAAAF,yDAAA;UAAAmE,QAAA,GACErE,wDAAA,CAAC4E,uDAAM;YAACO,IAAI,EAAEA,IAAK;YAACe,IAAI,EAAC;UAAO,CAAE,CAAC,EACnClG,wDAAA,CAAC03B,8DAAa;YAACvyB,IAAI,EAAEA,IAAK;YAACE,SAAS,EAAEN,yEAAM,CAAC83B;UAAW,CAAE,CAAC;QAAA,CAC3D;MACH,CACS,CAAC,EACZl5B,MAAM,KAAKjC,SAAS,IACnBtB,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAAC+3B,YAAa;QAAAz4B,QAAA,GAClCrE,wDAAA,CAACg0B,+DAAQ;UAACpyB,IAAI,EAAC,MAAM;UAACsE,IAAI,EAAC;QAAU,CAAE,CAAC,EACvC5E,IAAI,CAACyC,MAAM,CAACJ,MAAM,CAAC;MAAA,CACjB,CACN;IAAA,GAtBuCq5B,KAuBrC,CAAC;EAEV;EAEA,SAASI,gBAAgBA,CAAA,EAAG;IAC1B,MAAMC,QAAQ,GAAGlF,yBAAyB;IAC1C,MAAM6C,SAAS,GAAG7B,WAAW,EAAE6B,SAAS;IAExC,OACE56B,yDAAA;MAAKiF,SAAS,EAAEN,yEAAM,CAAC03B,OAAQ;MAAAp4B,QAAA,GAC7BrE,wDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACw3B,YAAa;QAAAl4B,QAAA,EACjC/C,IAAI,CAAC,uBAAuB,EAAE;UAAE0T,KAAK,EAAEqoB;QAAS,CAAC,EAAE;UAAEjoB,WAAW,EAAEioB;QAAS,CAAC;MAAC,CAC3E,CAAC,EACLN,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAElE,UAAU,EAAEmC,SAAS,GAAG,CAAC,CAAC,EAAEr3B,MAAM,EAAEq1B,aAAa,CAAC,EAC9E+D,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAEjE,UAAU,EAAEkC,SAAS,GAAG,CAAC,CAAC,EAAEr3B,MAAM,EAAEs1B,aAAa,CAAC,EAC9E8D,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAEhE,UAAU,EAAEiC,SAAS,GAAG,CAAC,CAAC,EAAEr3B,MAAM,EAAEu1B,aAAa,CAAC;IAAA,CAC5E,CAAC;EAEV;EAEA,OACE94B,yDAAA,CAAC4d,kDAAK;IACJ5V,MAAM,EAAEA,MAAO;IACfk1B,sBAAsB;IACtBlW,MAAM;IACN5a,gBAAgB,EAAEzH,yEAAM,CAAC0H,OAAQ;IACjC7C,OAAO,EAAE2uB,wBAAyB;IAClCjR,kBAAkB;IAAAjjB,QAAA,GAElBrE,wDAAA;MAAKqF,SAAS,EAAEN,yEAAM,CAACw4B,kBAAmB;MAAAl5B,QAAA,EACxCrE,wDAAA,CAACke,4DAAY;QAACnH,OAAO,EAAElI,WAAY;QAACxJ,SAAS,EAAEN,yEAAM,CAACy4B,YAAa;QAAC9V,aAAa;MAAA,CAAE;IAAC,CACjF,CAAC,EAEN1nB,wDAAA,CAAC63B,iEAAU;MACTxyB,SAAS,EAAEN,yEAAM,CAAC04B,MAAO;MACzBC,YAAY,EAAE7D,aAAc;MAC5B8D,QAAQ,EAAEhE,UAAW;MACrBiE,eAAe,EAAE/D,aAAc;MAC/BgE,kBAAkB,EAAE3F,mBAAoB;MACxC4F,QAAQ,EAAEhE,cAAe;MACzBiE,wBAAwB,EAAE7D,mBAAoB;MAC9C9mB,QAAQ,EAAE+mB,kBAAmB;MAC7B6D,YAAY,EAAE1D,gBAAiB;MAC/B2D,kBAAkB,EAAE5D,wBAAyB;MAC7C6D,qBAAqB;MACrBC,sBAAsB;IAAA,CACvB,CAAC,EAEFn+B,wDAAA;MAAIqF,SAAS,EAAEN,yEAAM,CAACjB,KAAM;MAAAO,QAAA,EAAE/C,IAAI,CAAC,qBAAqB;IAAC,CAAK,CAAC,EAC9Dg6B,eAAe,CAAC,CAAC,EAEjBkB,aAAa,CAAC,CAAC,EACfY,gBAAgB,CAAC,CAAC,EAEnBp9B,wDAAA,CAACoL,mDAAM;MAACmK,iBAAiB;MAAChR,OAAO,EAAEu2B,YAAa;MAAAz2B,QAAA,EAC7C/C,IAAI,CAACkR,SAAS,EAAEqkB,SAAS,GAAG,qBAAqB,GAAG,2BAA2B,EAAE;QAChFlzB,MAAM,EAAE+J,4EAAiB,CAACpM,IAAI,EAC5BkR,SAAS,EAAEqkB,SAAS,GAAGuC,iBAAiB,GAAG5mB,SAAS,CAACqkB,SAAS,GAAGuC,iBAAiB,EAClF;UAAE/kB,MAAM,EAAE,IAAI;UAAEhP,SAAS,EAAEN,yEAAM,CAACq5B;QAAW,CAAC;MAClD,CAAC,EAAE;QAAE92B,SAAS,EAAE;MAAK,CAAC;IAAC,CACjB,CAAC,EACTlH,yDAAA,CAACu3B,0DAAa;MACZvvB,MAAM,EAAEkxB,oBAAqB;MAC7Bx1B,KAAK,EAAExC,IAAI,CAAC,2BAA2B,CAAE;MACzC+8B,YAAY,EAAE/8B,IAAI,CAAC,4BAA4B,CAAE;MACjDg9B,iBAAiB,EAAE,CAAC7E,cAAc,IAAIiB,MAAM,CAACjB,cAAc,CAAC,GAAGI,aAAc;MAC7E0E,cAAc,EAAE5D,qBAAsB;MACtC/wB,OAAO,EAAE4vB,mBAAoB;MAAAn1B,QAAA,GAE7BrE,wDAAA;QAAAqE,QAAA,EAAI/C,IAAI,CAAC,iCAAiC,EAAE;UAAE0T,KAAK,EAAE0jB,qBAAqB,EAAEl4B,IAAI,CAAC8T;QAAc,CAAC;MAAC,CAAI,CAAC,EACtGlU,yDAAA;QAAKiF,SAAS,EAAEN,yEAAM,CAACy5B,cAAe;QAAAn6B,QAAA,GACpCrE,wDAAA,CAACg0B,+DAAQ;UAACpyB,IAAI,EAAC,MAAM;UAACsE,IAAI,EAAC,UAAU;UAACb,SAAS,EAAEN,yEAAM,CAAC05B;QAAmB,CAAE,CAAC,EAC9Ez+B,wDAAA,CAAC43B,sDAAS;UACR/lB,KAAK,EAAE4nB,cAAe;UACtBrmB,QAAQ,EAAEmnB,qBAAsB;UAChCzJ,WAAW,EAAExvB,IAAI,CAAC,iCAAiC,CAAE;UACrDo9B,SAAS,EAAC,SAAS;UACnBC,yBAAyB;QAAA,CAC1B,CAAC;MAAA,CACC,CAAC;IAAA,CACO,CAAC;EAAA,CACX,CAAC;AAEZ,CAAC;AAED,iEAAez/B,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAEiJ,KAAK;IAAEvL;EAAc,CAAC,GAAGsC,MAAM;EACvC,MAAM;IAAEi0B;EAAoB,CAAC,GAAG3xB,iEAAc,CAACtC,MAAM,CAAC;EACtD,MAAM0H,aAAa,GAAGusB,mBAAmB,EAAEvsB,aAAa;EACxD,MAAMpD,WAAW,GAAGoD,aAAa,GAC7B1H,MAAM,CAACmM,mBAAmB,GAAGzE,aAAa,CAAC,GAAG3Q,SAAS;EAE3D,MAAM22B,eAAe,GAAGhwB,aAAa,GAAG0E,6DAAU,CAACpC,MAAM,EAAEtC,aAAa,CAAC,GAAG3G,SAAS;EAErF,MAAM42B,YAAY,GAAGrpB,WAAW,EAAEuF,KAAK,CAAC5S,IAAI,KAAK,QAAQ,GACrDqN,WAAW,CAACuF,KAAK,CAACqqB,UAAU,GAC5Bn9B,SAAS;EAEb,OAAO;IACL02B,YAAY,EAAEnpB,WAAW;IACzBJ,WAAW,EAAE+E,KAAK,EAAEmD,OAAO;IAC3BshB,eAAe;IACfC;EACF,CAAC;AACH,CACF,CAAC,CAACl6B,mBAAmB,CAAC,CAAC,E;;;;;;;;;;;;;;ACtavB;AACA,iEAAe,CAAC,oHAAoH,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDjF;AACS;AAKI;AACN;AACI;AAEI;AAClB;AACgB;AAEpB;AACE;AACQ;AAEa;AAAA;AAWnE,MAAM4G,WAAW,GAAG,CAAC,GAAGN,gEAAG;AAE3B,MAAMnG,+BAA+B,GAAGA,CAAC;EAAE+M,KAAK;EAAEwzB,OAAO;EAAEC;AAA+B,CAAC,KAAK;EAC9F,MAAM;IAAEC,oCAAoC;IAAEzvB;EAAwB,CAAC,GAAGnQ,mDAAU,CAAC,CAAC;EACtF,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAM2zB,gBAAgB,GAAGh0B,mEAAgB,CAAC6zB,OAAO,CAAC;EAClD,MAAMI,gBAAgB,GAAGj0B,mEAAgB,CAAC8zB,OAAO,CAAC;EAClD,MAAMvzB,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAM6zB,aAAa,GAAGv/B,kEAAe,CAAC,MAAM;IAC1C,IAAI,CAAC4L,cAAc,EAAE6G,aAAa,EAAE;IAEpC2sB,oCAAoC,CAAC,CAAC;IACtCzvB,uBAAuB,CAAC;MACtB8C,aAAa,EAAE7G,cAAc,CAAC6G,aAAa;MAC3C/R,MAAM,EAAEkL,cAAc,CAACmH,SAAS;MAChC7P,OAAO,EAAE0I,cAAc,CAAC1I,OAAO;MAC/B8M,cAAc,EAAEpE,cAAc,CAACoE;IACjC,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAI,CAACqvB,gBAAgB,IAAI,CAACC,gBAAgB,EAAE,OAAOx9B,SAAS;EAE5D,OACEtB,yDAAA,CAACu3B,0DAAa;IACZvvB,MAAM,EAAEA,MAAO;IACftE,KAAK,EAAExC,IAAI,CAAC,iCAAiC,CAAE;IAC/CsI,OAAO,EAAEo1B,oCAAqC;IAC9CX,YAAY,EAAE/8B,IAAI,CAAC,UAAU,CAAE;IAC/Bi9B,cAAc,EAAEY,aAAc;IAAA96B,QAAA,GAE9BjE,yDAAA;MAAKiF,SAAS,EAAEN,qFAAM,CAACq6B,OAAQ;MAAA/6B,QAAA,GAC7BrE,wDAAA,CAAC4E,sDAAM;QAACO,IAAI,EAAE85B,gBAAiB;QAAC/4B,IAAI,EAAElB;MAAY,CAAE,CAAC,EACrDhF,wDAAA,CAAC6E,0DAAI;QAACuB,IAAI,EAAC,MAAM;QAACf,SAAS,EAAEN,qFAAM,CAACsB;MAAM,CAAE,CAAC,EAC7CrG,wDAAA,CAAC4E,sDAAM;QAACO,IAAI,EAAE+5B,gBAAiB;QAACh5B,IAAI,EAAElB;MAAY,CAAE,CAAC;IAAA,CAClD,CAAC,EACNhF,wDAAA;MAAAqE,QAAA,EACG/C,IAAI,CAAC,uCAAuC,EAAE;QAC7Cw9B,OAAO,EAAEv4B,mEAAY,CAACjF,IAAI,EAAE29B,gBAAgB,CAAC;QAC7CF,OAAO,EAAEx4B,mEAAY,CAACjF,IAAI,EAAE49B,gBAAgB;MAC9C,CAAC,EAAE;QACD53B,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE;MAChB,CAAC;IAAC,CACD,CAAC;EAAA,CACS,CAAC;AAEpB,CAAC;AAED,iEAAe/U,sDAAI,CACjByI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAChE,MAAMwzB,OAAO,GAAGxzB,KAAK,EAAEoH,SAAS,GAAG3F,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAACoH,SAAS,CAAC,GAAGhR,SAAS;EAClF,MAAMq9B,OAAO,GAAGzzB,KAAK,EAAEqH,SAAS,GAAG5F,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAACqH,SAAS,CAAC,GAAGjR,SAAS;EAElF,OAAO;IACLo9B,OAAO;IACPC;EACF,CAAC;AACH,CAAC,CAAC,CAACxgC,+BAA+B,CACpC,CAAC,E;;;;;;;;;;;;;;AC1FD;AACA,iEAAe,CAAC,iWAAiW,E;;;;;;;;;;;;;;;;;;;;;;;;ACDrT;AACA;AAKE;AAEd;AACgB;AAElB;AACN;AAC4C;AAE5B;AAAA;AAUxD,MAAMF,oBAAoB,GAAGA,CAAC;EAC5BiN,KAAK;EACL2D;AACqB,CAAC,KAAK;EAC3B,MAAM;IAAEowB;EAA0B,CAAC,GAAGjgC,mDAAU,CAAC,CAAC;EAClD,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,IAAI2D,WAAW,CAAC;EAE5C,MAAMxD,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxCy/B,yBAAyB,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEF,MAAM3zB,MAAM,GAAGvM,yDAAO,CAAC,MAAM;IAC3B,OACEiB,wDAAA;MAAKiF,SAAS,EAAEN,yEAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BrE,uDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACu6B,WAAY;QAAAj7B,QAAA,EACjCrE,uDAAA,CAAC6E,0DAAI;UAACuB,IAAI,EAAC,gBAAgB;UAACf,SAAS,EAAEN,yEAAM,CAAClB;QAAK,CAAE;MAAC,CACnD,CAAC,EACN7D,uDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACjB,KAAM;QAAAO,QAAA,EAC1B/C,IAAI,CAAC,sBAAsB;MAAC,CAC1B,CAAC,EACNtB,uDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACmH,QAAS;QAAA7H,QAAA,EAC7B/C,IAAI,CAAC,yBAAyB;MAAC,CAC7B,CAAC;IAAA,CACH,CAAC;EAEV,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,MAAM6K,MAAM,GAAGhN,yDAAO,CAAC,MAAM;IAC3B,IAAI,CAACiJ,MAAM,EAAE,OAAO1G,SAAS;IAC7B,OACE1B,uDAAA;MAAKqF,SAAS,EAAEN,yEAAM,CAACoH,MAAO;MAAA9H,QAAA,EAC5BrE,uDAAA,CAACoL,kDAAM;QACLgB,QAAQ,EAAC,YAAY;QACrBC,aAAa,EAAEtH,yEAAM,CAACuH,cAAe;QACrC/H,OAAO,EAAEkH,WAAY;QAAApH,QAAA,EAEpB/C,IAAI,CAAC,kBAAkB;MAAC,CACnB;IAAC,CACN,CAAC;EAEV,CAAC,EAAE,CAACA,IAAI,EAAE8G,MAAM,EAAEqD,WAAW,CAAC,CAAC;EAE/B,MAAMc,YAAY,GAAGpN,yDAAO,CAAC,MAAM;IACjC,MAAM6V,KAAK,GAAG/F,WAAW,EAAEzO,IAAI,CAAC8T,aAAa,IAAI,CAAC;IAClD,OAAO,CACL,CAAC,cAAc,EAAEhT,IAAI,CAAC,gCAAgC,EAAE;MAAE0T;IAAM,CAAC,EAAE;MAAEI,WAAW,EAAEJ;IAAM,CAAC,CAAC,EACxF1T,IAAI,CAAC,mCAAmC,EAAE;MAAE0T;IAAM,CAAC,EAAE;MAAEI,WAAW,EAAEJ;IAAM,CAAC,CAAC,CAAC,EAC/E,CAAC,oBAAoB,EAAE1T,IAAI,CAAC,kCAAkC,CAAC,EAC7DA,IAAI,CAAC,qCAAqC,EAAE;MAAE0T;IAAM,CAAC,CAAC,CAAC,EACzD,CAAC,cAAc,EAAE1T,IAAI,CAAC,mCAAmC,CAAC,EACxDA,IAAI,CAAC,sCAAsC,CAAC,CAAC,CAChD;EACH,CAAC,EAAE,CAACA,IAAI,EAAE2N,WAAW,CAAC,CAAC;EAEvB,OACEjP,uDAAA,CAACqL,+DAAe;IACdjD,MAAM,EAAEA,MAAO;IACfsD,MAAM,EAAEA,MAAO;IACfa,YAAY,EAAEA,YAAa;IAC3BJ,MAAM,EAAEA,MAAO;IACfvC,OAAO,EAAE6B;EAAY,CACtB,CAAC;AAEN,CAAC;AAED,iEAAevM,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAE40B;EAAqB,CAAC,GAAGtyB,iEAAc,CAACtC,MAAM,CAAC;EACvD,MAAM0H,aAAa,GAAGktB,oBAAoB,EAAEltB,aAAa;EACzD,OAAO;IACLpD,WAAW,EAAEoD,aAAa,GACtB1H,MAAM,CAACmM,mBAAmB,GAAGzE,aAAa,CAAC,GAAG3Q;EACpD,CAAC;AACH,CACF,CAAC,CAACrD,oBAAoB,CAAC,CAAC,E;;;;;;;;;;;;;;ACrGxB;AACA,iEAAe,CAAC,stBAAstB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCjsB;AACuB;AAKP;AACS;AACG;AAC2B;AACxC;AACqB;AACb;AAGU;AAEH;AACD;AAClB;AACgB;AAEc;AACtC;AACJ;AACQ;AACE;AAC+B;AAClC;AACQ;AAEC;AAAA;AAEpD,MAAM8P,oBAAoB,GAAG,EAAE,GAAGX,mDAAI;AACtC,MAAMmyB,uBAAuB,GAAG,IAAI;AAUpC,MAAMxhC,gBAAgB,GAAGA,CAAC;EAAEmN,KAAK;EAAE8sB;AAAoC,CAAC,KAAK;EAC3E,MAAM;IACJwH,qBAAqB;IACrBjgB,wBAAwB;IACxBnQ,wBAAwB;IACxBqwB,4BAA4B;IAC5BC,sBAAsB;IACtBl/B,gBAAgB;IAChBC,iBAAiB;IACjBk/B,OAAO;IACPxgB;EACF,CAAC,GAAGngB,mDAAU,CAAC,CAAC;EAEhB,MAAMgJ,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,oEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAMotB,qBAAqB,GAAGztB,oEAAgB,CAACmtB,YAAY,CAAC;EAE5D,MAAM53B,IAAI,GAAGk4B,qBAAqB,EAAEl4B,IAAI;EACxC,MAAMgU,KAAK,GAAGkkB,qBAAqB,EAAElkB,KAAK;EAC1C,MAAMhC,SAAS,GAAGkmB,qBAAqB,EAAElmB,SAAS;EAClD,MAAMwtB,UAAU,GAAGxrB,KAAK,EAAE5S,IAAI,KAAK,UAAU;EAE7C,MAAM,CAACq+B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGz4B,0DAAQ,CAAoC,CAAC;EAC/F,MAAM04B,qBAAqB,GAAG37B,OAAO,CAAChE,IAAI,IAAIgU,KAAK,IAAIyrB,iBAAiB,CAAC;EAEzE,MAAMG,eAAe,GAAGtnB,wDAAM,CAAiB,CAAC;EAChD,MAAMxX,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EAEtB,MAAM0gC,uBAAuB,GAAGzgC,mEAAe,CAAC,MAAM;IACpD,IAAI,CAAC4L,cAAc,EAAE80B,gBAAgB,EAAE;IACvCJ,oBAAoB,CAACV,qFAA8B,CAACh0B,cAAc,CAAC80B,gBAAgB,EAAEL,iBAAiB,CAAC,CAAC;EAC1G,CAAC,CAAC;EAEFP,0EAAW,CAACW,uBAAuB,EAAEj4B,MAAM,GAAGu3B,uBAAuB,GAAGj+B,SAAS,EAAE,IAAI,CAAC;EAExFkL,2DAAS,CAAC,MAAM;IACd,IAAIxE,MAAM,EAAE;MACV,IAAIoD,cAAc,EAAE80B,gBAAgB,EAAE;QACpCD,uBAAuB,CAAC,CAAC;MAC3B,CAAC,MAAM;QACLH,oBAAoB,CAACx+B,SAAS,CAAC;MACjC;IACF;EACF,CAAC,EAAE,CAAC0G,MAAM,EAAEoD,cAAc,EAAE80B,gBAAgB,CAAC,CAAC;EAE9C1zB,2DAAS,CAAC,MAAM;IACd,MAAM+d,UAAU,GAAGnf,cAAc,EAAE80B,gBAAgB;IACnD,IAAI,CAAC3V,UAAU,EAAE;IACjB8U,mFAA4B,CAAC9U,UAAU,CAAC;EAC1C,CAAC,EAAE,CAACnf,cAAc,EAAE80B,gBAAgB,CAAC,CAAC;EAEtC,MAAM70B,WAAW,GAAG7L,mEAAe,CAAC,MAAMggC,qBAAqB,CAAC,CAAC,CAAC;EAElE,MAAMxtB,oBAAoB,GAAGxS,mEAAe,CAAC,MAAM;IACjD,IAAI,CAACY,IAAI,EAAE;IACXgP,wBAAwB,CAAC;MAAE6C,aAAa,EAAE7R,IAAI,CAACgH;IAAG,CAAC,CAAC;EACtD,CAAC,CAAC;EAEF,MAAM+4B,8BAA8B,GAAG3gC,mEAAe,CAAC,MAAM;IAC3DkgC,sBAAsB,CAAC,CAAC,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,MAAMU,sBAAsB,GAAG5gC,mEAAe,CAAC,MAAM;IACnD,IAAI,CAACY,IAAI,EAAE;IACX,MAAM61B,WAAW,GAAGld,yEAAkB,CAAC3Y,IAAI,CAAC;IAC5Cq/B,4BAA4B,CAAC;MAAE3tB,MAAM,EAAE1R,IAAI,CAACgH,EAAE;MAAE4uB,SAAS,EAAE51B,IAAI,CAACsD,KAAK;MAAEuyB;IAAY,CAAC,CAAC;EACvF,CAAC,CAAC;EAEF,MAAMoK,eAAe,GAAG7gC,mEAAe,CAAC,MAAM;IAC5C,IAAI,CAACY,IAAI,EAAE;IACXo/B,qBAAqB,CAAC;MAAEc,iBAAiB,EAAE;IAAK,CAAC,CAAC;IAClD/gB,wBAAwB,CAAC;MAAEnf;IAAK,CAAC,CAAC;EACpC,CAAC,CAAC;EAEF,MAAMmgC,WAAW,GAAGxhC,yDAAO,CAAC,MAAM;IAChC,IAAI,CAACqB,IAAI,EAAEogC,WAAW,EAAE,OAAOl/B,SAAS;IACxC,OAAO,GAAGpC,oDAAe,WAAWkB,IAAI,CAACogC,WAAW,EAAE;EACxD,CAAC,EAAE,CAACpgC,IAAI,CAAC,CAAC;EAEV,MAAMqC,cAAc,GAAGjD,mEAAe,CAAC,MAAM;IAC3C,IAAI,CAAC+gC,WAAW,EAAE;IAClBnhC,oEAAmB,CAACmhC,WAAW,CAAC;IAChC//B,gBAAgB,CAAC;MACfkC,OAAO,EAAExB,IAAI,CAAC,YAAY;IAC5B,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMu/B,eAAe,GAAGjhC,mEAAe,CAAC,MAAM;IAC5C,IAAI,CAAC+gC,WAAW,EAAE;IAClB9/B,iBAAiB,CAAC;MAAEmC,IAAI,EAAE;QAAEA,IAAI,EAAE29B;MAAY;IAAE,CAAC,CAAC;EACpD,CAAC,CAAC;EAEF,MAAMG,kBAAkB,GAAGlhC,mEAAe,CAAC,MAAM;IAC/C,IAAI4U,KAAK,EAAE5S,IAAI,KAAK,UAAU,IAAI4S,KAAK,CAACusB,iBAAiB,EAAE;MACzDhB,OAAO,CAAC;QAAEnc,GAAG,EAAEpP,KAAK,CAACusB;MAAkB,CAAC,CAAC;IAC3C;EACF,CAAC,CAAC;EAEF,MAAMC,wBAAwB,GAAGphC,mEAAe,CAAC,MAAM;IACrD,IAAI,CAACY,IAAI,EAAE;IACXiL,WAAW,CAAC,CAAC;IACb8T,gBAAgB,CAAC;MAAE/e;IAAK,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,MAAMygC,YAAY,GAAG9hC,yDAAO,CAAC,MAAM;IACjC,IAAI,CAACghC,qBAAqB,EAAE;MAC1B,OAAOz+B,SAAS;IAClB;IAEA,MAAM00B,SAAS,GAAG51B,IAAI,CAAEsD,KAAK,IAAIxC,IAAI,CAAC,UAAU,CAAC;IACjD,MAAM8yB,KAAK,GAAG4L,UAAU,GAAG1+B,IAAI,CAAC,kBAAkB,CAAC,GAAGA,IAAI,CAAC,sBAAsB,CAAC;IAClF,MAAM4K,QAAQ,GACZlM,wDAAA,CAAC0G,iDAAI;MAACrB,SAAS,EAAEN,sEAAM,CAACm8B,aAAc;MAAC75B,SAAS;MAAC9C,OAAO,EAAEg8B,8BAA+B;MAAAl8B,QAAA,EACtF/C,IAAI,CAAC,gCAAgC;IAAC,CACnC,CACP;IAED,OACEtB,wDAAA;MAAKka,GAAG,EAAEkmB,eAAgB;MAAA/7B,QAAA,EACxBrE,wDAAA,CAACm0B,0DAAgB;QACfrF,cAAc,EAAEmR,iBAAiB,CAAE95B,KAAM;QACzCipB,iBAAiB,EAAE6Q,iBAAiB,CAAEz6B,QAAS;QAC/C0pB,gBAAgB,EAAE+Q,iBAAiB,CAAEp6B,OAAQ;QAC7C/B,KAAK,EAAEsyB,SAAU;QACjBhC,KAAK,EAAEA,KAAM;QACbloB,QAAQ,EAAEA;MAAS,CACpB;IAAC,CACC,CAAC;EAEV,CAAC,EAAE,CAACi0B,qBAAqB,EAAE3/B,IAAI,EAAEw/B,UAAU,EAAE1+B,IAAI,EAAE2+B,iBAAiB,EAAEM,8BAA8B,CAAC,CAAC;EAEtG,MAAMY,aAAa,GAAGhiC,yDAAO,CAAC,MAAM;IAClC,IAAI,CAACqB,IAAI,IAAI,CAACgU,KAAK,IAAI2rB,qBAAqB,EAAE;MAC5C,OAAOz+B,SAAS;IAClB;IAEA,MAAM00B,SAAS,GAAG51B,IAAI,CAACsD,KAAK,IAAIxC,IAAI,CAAC,UAAU,CAAC;IAChD,MAAMgT,aAAa,GAAG9T,IAAI,CAAC8T,aAAa,IAAI,CAAC;IAE7C,OACElU,yDAAA;MAAKiF,SAAS,EAAEN,sEAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BrE,wDAAA,CAACuZ,sDAAY;QAAC/Y,IAAI,EAAEA,IAAK;QAACmZ,SAAS;QAACC,WAAW;MAAA,CAAE,CAAC,EAClD5Z,wDAAA;QAAIqF,SAAS,EAAEN,sEAAM,CAACjB,KAAM;QAAAO,QAAA,EACzB+xB;MAAS,CACR,CAAC,EACJ4J,UAAU,GACThgC,wDAAA;QAAMqF,SAAS,EAAEN,sEAAM,CAACq8B,aAAc;QAAA/8B,QAAA,EAAE/C,IAAI,CAAC,kBAAkB;MAAC,CAAO,CAAC,GAExEtB,wDAAA;QAAGqF,SAAS,EAAEN,sEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAC9B/C,IAAI,CAAC,uBAAuB,EAAE;UAC7B0T,KAAK,EAAEV,aAAa;UACpB9T,IAAI,EAAER,wDAAA;YAAMqF,SAAS,EAAEN,sEAAM,CAACs8B,QAAS;YAAAh9B,QAAA,EAAE+xB;UAAS,CAAO,CAAC;UAC1DpiB,IAAI,EAAEhU,wDAAA,CAAC0G,iDAAI;YAACW,SAAS;YAAC9C,OAAO,EAAE6N,oBAAqB;YAAA/N,QAAA,EAAE/C,IAAI,CAAC,sBAAsB;UAAC,CAAO;QAC3F,CAAC,EAAE;UAAE8T,WAAW,EAAEd,aAAa;UAAEhN,SAAS,EAAE,IAAI;UAAE2M,YAAY,EAAE;QAAK,CAAC;MAAC,CACtE,CACJ;IAAA,CACE,CAAC;EAEV,CAAC,EAAE,CAACzT,IAAI,EAAEgU,KAAK,EAAE2rB,qBAAqB,EAAEH,UAAU,EAAE1+B,IAAI,EAAE8Q,oBAAoB,CAAC,CAAC;EAEhF,MAAM1G,MAAM,GAAGu1B,YAAY,IAAIE,aAAa;EAE5C,MAAMG,SAAS,GAAGniC,yDAAO,CAAC,MAAM;IAC9B,IAAI,CAACqB,IAAI,IAAI,CAACgU,KAAK,IAAI,CAAChC,SAAS,EAAE;MACjC,OAAO9Q,SAAS;IAClB;IAEA,MAAMmxB,SAAoB,GAAG,EAAE;IAE/BA,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,oBAAoB,CAAC,EAC1BkF,8EAAsB,CAACgO,KAAK,CAAC+sB,SAAS,GAAG,IAAI,EAAEjgC,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,CAChE,CAAC;IAEF0rB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,iBAAiB,CAAC,EACvBkF,8EAAsB,CAACgO,KAAK,CAACC,OAAO,GAAG,IAAI,EAAEnT,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,CAC9D,CAAC;IAEF,IAAI3G,IAAI,CAACsU,iBAAiB,EAAE;MAC1B+d,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,sBAAsB,CAAC,EAC5BA,IAAI,CAAC,2BAA2B,EAAE;QAChC0T,KAAK,EAAExU,IAAI,CAACoU,mBAAmB,IAAI,CAAC;QACpC4sB,KAAK,EAAElgC,IAAI,CAACyC,MAAM,CAACvD,IAAI,CAACsU,iBAAiB;MAC3C,CAAC,EAAE;QAAEM,WAAW,EAAE5U,IAAI,CAACoU,mBAAmB,IAAI;MAAE,CAAC,CAAC,CACnD,CAAC;IACJ;IAEA,IAAIJ,KAAK,CAAC5S,IAAI,KAAK,QAAQ,EAAE;MAC3BixB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,yBAAyB,CAAC,EAC/BA,IAAI,CAAC,uBAAuB,EAAE;QAC5B8hB,OAAO,EAAE9hB,IAAI,CAACyC,MAAM,CAACyQ,KAAK,CAACitB,YAAY,CAAC;QACxCD,KAAK,EAAElgC,IAAI,CAACyC,MAAM,CAACyQ,KAAK,CAACktB,WAAW;MACtC,CAAC,CAAC,CACH,CAAC;IACJ;IAEA,IAAI1B,UAAU,EAAE;MACdnN,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,yBAAyB,CAAC,EAC/BoM,4EAAiB,CAACpM,IAAI,EAAEkT,KAAK,CAACmtB,YAAY,EAAE;QAAEt8B,SAAS,EAAEN,sEAAM,CAAC+xB;MAAS,CAAC,CAAC,CAC5E,CAAC;IACJ;IAEA,MAAM8K,aAAa,GAAGpvB,SAAS,CAACovB,aAAa;IAC7C,MAAMvL,WAAW,GAAGld,yEAAkB,CAAC3Y,IAAI,CAAC;IAC5C,MAAMkU,eAAe,GAAGF,KAAK,CAACC,OAAO,GAAG/U,+DAAa,CAAC,CAAC;IACvD,MAAMiV,kBAAkB,GAAGD,eAAe,GAAG,CAAC,IAAIA,eAAe,GAAGvG,oBAAoB;IAExF,MAAM0zB,gBAAgB,GAAGrtB,KAAK,CAAC5S,IAAI,KAAK,UAAU,IAC7C4C,OAAO,CAACgQ,KAAK,CAACusB,iBAAiB,IAAIvsB,KAAK,CAACstB,mBAAmB,CAAC;IAClE,MAAMC,gBAAgB,GAAGvtB,KAAK,CAAC5S,IAAI,KAAK,UAAU,IAAI4C,OAAO,CAACgQ,KAAK,CAACwtB,WAAW,CAAC;IAEhF,MAAM71B,MAAM,GACV/L,yDAAA;MAAKiF,SAAS,EAAEN,sEAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC3Bu9B,aAAa,GAAG,CAAC,IAChB5hC,wDAAA,CAAC0G,iDAAI;QAACrB,SAAS,EAAEN,sEAAM,CAACk9B,eAAgB;QAAC56B,SAAS;QAAC9C,OAAO,EAAEi8B,sBAAuB;QAAAn8B,QAAA,EAChF/C,IAAI,CAAC,wBAAwB,EAAE;UAC9B0T,KAAK,EAAE4sB,aAAa;UACpBphC,IAAI,EAAE61B,WAAW,IACfr2B,wDAAA,CAAC2E,wEAAuB;YACtBU,SAAS,EAAEN,sEAAM,CAACm9B,kBAAmB;YACrCp8B,OAAO,EAAEuwB,WAAY;YACrBnwB,IAAI,EAAE,EAAG;YACTkS,IAAI,EAAE;UAAM,CACb;QAEL,CAAC,EAAE;UAAEhD,WAAW,EAAEwsB,aAAa;UAAEt6B,SAAS,EAAE;QAAK,CAAC;MAAC,CAC/C,CACP,EACAu6B,gBAAgB,IACf7hC,wDAAA,CAAC0G,iDAAI;QAACrB,SAAS,EAAEN,sEAAM,CAACk9B,eAAgB;QAAC56B,SAAS;QAAC9C,OAAO,EAAEu8B,kBAAmB;QAAAz8B,QAAA,EAC5E/C,IAAI,CAAC,8BAA8B,EAAE;UACpC0T,KAAK,EAAEqhB,WAAW,GAChBj2B,yDAAA,CAAAF,yDAAA;YAAAmE,QAAA,GACG/C,IAAI,CAACyC,MAAM,CAACyQ,KAAK,CAACstB,mBAAoB,CAAC,EACxC9hC,wDAAA,CAAC2E,wEAAuB;cACtBU,SAAS,EAAEN,sEAAM,CAACm9B,kBAAmB;cACrCp8B,OAAO,EAAEuwB,WAAY;cACrBnwB,IAAI,EAAE,EAAG;cACTkS,IAAI,EAAE;YAAM,CACb,CAAC;UAAA,CACF,CAAC,GACD9W,IAAI,CAACyC,MAAM,CAACyQ,KAAK,CAACstB,mBAAoB;QAC5C,CAAC,EAAE;UAAEx6B,SAAS,EAAE;QAAK,CAAC;MAAC,CACnB,CACP,EACAy6B,gBAAgB,IACf/hC,wDAAA,CAAC0G,iDAAI;QAACrB,SAAS,EAAEN,sEAAM,CAACk9B,eAAgB;QAAC56B,SAAS;QAAC9C,OAAO,EAAEy8B,wBAAyB;QAAA38B,QAAA,EAClF/C,IAAI,CAAC,8BAA8B,EAAE;UACpC0T,KAAK,EAAEqhB,WAAW,GAChBj2B,yDAAA,CAAAF,yDAAA;YAAAmE,QAAA,GACG/C,IAAI,CAACyC,MAAM,CAACyQ,KAAK,CAACwtB,WAAY,CAAC,EAChChiC,wDAAA,CAAC2E,wEAAuB;cACtBU,SAAS,EAAEN,sEAAM,CAACm9B,kBAAmB;cACrCp8B,OAAO,EAAEuwB,WAAY;cACrBnwB,IAAI,EAAE,EAAG;cACTkS,IAAI,EAAE;YAAM,CACb,CAAC;UAAA,CACF,CAAC,GACD9W,IAAI,CAACyC,MAAM,CAACyQ,KAAK,CAACwtB,WAAY;QACpC,CAAC,EAAE;UAAE16B,SAAS,EAAE;QAAK,CAAC;MAAC,CACnB,CACP,EACDtH,wDAAA,CAACoL,mDAAM;QACLmK,iBAAiB;QACjBlQ,SAAS,EAAEN,sEAAM,CAACo9B,YAAa;QAC/B59B,OAAO,EAAEy7B,UAAU,GAAGv0B,WAAW,GAAGg1B,eAAgB;QAAAp8B,QAAA,EAEnD27B,UAAU,GAAG1+B,IAAI,CAAC,IAAI,CAAC,GACtBlB,yDAAA;UAAAiE,QAAA,GACErE,wDAAA;YAAAqE,QAAA,EACG/C,IAAI,CAAC,iBAAiB;UAAC,CACrB,CAAC,EACLoT,eAAe,GAAG,CAAC,IAClB1U,wDAAA;YAAKqF,SAAS,EAAEN,sEAAM,CAACyQ,cAAe;YAAAnR,QAAA,EACnC/C,IAAI,CAAC,qBAAqB,EAAE;cAC3BmU,IAAI,EAAEd,kBAAkB,GACpB3U,wDAAA,CAACiO,sDAAS;gBAACyH,MAAM,EAAElB,KAAK,CAACC;cAAQ,CAAE,CAAC,GACpClH,uEAAe,CAACjM,IAAI,EAAEoT,eAAe;YAC3C,CAAC,EAAE;cAAEpN,SAAS,EAAE;YAAK,CAAC;UAAC,CACpB,CACN;QAAA,CACE;MACN,CACK,CAAC;IAAA,CACN,CACN;IAED,OAAO;MACLurB,SAAS;MACT1mB;IACF,CAAC;EACH,CAAC,EAAE,CAAC3L,IAAI,EAAEgU,KAAK,EAAEhC,SAAS,EAAEwtB,UAAU,EAAE1+B,IAAI,EAAEm/B,eAAe,EAAED,sBAAsB,EAAE/0B,WAAW,EAChGq1B,kBAAkB,EAAEE,wBAAwB,CAAC,CAAC;EAEhD,MAAMoB,aAAa,GAAGjjC,yDAAO,CAAC,MAAM;IAClC,IAAI,CAACghC,qBAAqB,EAAE,OAAOz+B,SAAS;IAE5C,OACEtB,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA,CAACF,qDAAQ;QAAC+D,IAAI,EAAC,MAAM;QAACU,OAAO,EAAE6N,oBAAqB;QAAA/N,QAAA,EACjD/C,IAAI,CAAC,8BAA8B;MAAC,CAC7B,CAAC,EACXtB,wDAAA,CAACF,qDAAQ;QAAC+D,IAAI,EAAC,YAAY;QAACU,OAAO,EAAE1B,cAAe;QAAAwB,QAAA,EACjD/C,IAAI,CAAC,UAAU;MAAC,CACT,CAAC,EACXtB,wDAAA,CAACF,qDAAQ;QAAC+D,IAAI,EAAC,SAAS;QAACU,OAAO,EAAEs8B,eAAgB;QAAAx8B,QAAA,EAC/C/C,IAAI,CAAC,OAAO;MAAC,CACN,CAAC;IAAA,CACX,CAAC;EAEP,CAAC,EAAE,CAAC6+B,qBAAqB,EAAE7+B,IAAI,EAAE8Q,oBAAoB,EAAEvP,cAAc,EAAEg+B,eAAe,CAAC,CAAC;EAExF,OACE7gC,wDAAA,CAAC2yB,+DAAc;IACbvqB,MAAM,EAAEA,MAAO;IACfsD,MAAM,EAAEA,MAAO;IACfS,MAAM,EAAEm1B,SAAS,EAAEn1B,MAAO;IAC1B0mB,SAAS,EAAEyO,SAAS,EAAEzO,SAAU;IAChCxtB,SAAS,EAAEN,sEAAM,CAACuG,KAAM;IACxBkB,gBAAgB,EAAEzH,sEAAM,CAACs9B,YAAa;IACtCC,gBAAgB,EAAEnC,qBAAqB,GAAG,mBAAmB,GAAGz+B,SAAU;IAC1E0gC,aAAa,EAAEA,aAAc;IAC7Bx4B,OAAO,EAAE6B;EAAY,CACtB,CAAC;AAEN,CAAC;AAED,iEAAevM,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAE43B;EAAiB,CAAC,GAAGt1B,iEAAc,CAACtC,MAAM,CAAC;EACnD,MAAM0H,aAAa,GAAGkwB,gBAAgB,EAAElwB,aAAa;EACrD,OAAO;IACL+lB,YAAY,EAAE/lB,aAAa,GACvB1H,MAAM,CAACmM,mBAAmB,GAAGzE,aAAa,CAAC,GAAG3Q;EACpD,CAAC;AACH,CACF,CAAC,CAACvD,gBAAgB,CAAC,CAAC,E;;;;;;;;;;;;;;AClYpB;AACA,iEAAe,CAAC,sxDAAsxD,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDxtD;AACP;AASK;AACd;AACgC;AAC3B;AACG;AACT;AACI;AACU;AACF;AAG3B;AAC2B;AACb;AACA;AACsB;AACI;AACE;AAEtB;AAClB;AACA;AACgB;AACV;AAEwB;AAClC;AACU;AACS;AACY;AAC7B;AACE;AACR;AACI;AACU;AAClB;AACyC;AAC1B;AAEF;AAAA;AAoBjD,MAAM+1B,YAAY,GAAG,GAAG;AAExB,MAAMp2B,aAAa,GAAGA,CAAC;EACrBwN,KAAK;EACLw3B,QAAQ;EACRC,UAAU;EACVC,cAAc;EACd36B,aAAa;EACb46B,wBAAwB;EACxBC,cAAc;EACdxiC,sBAAsB;EACtBC,wBAAwB;EACxBwiC,cAAc;EACdrN,WAAW;EACXsN;AACqB,CAAC,KAAK;EAC3B,MAAM;IACJ/hC,kBAAkB;IAClBF,oBAAoB;IACpBkiC,kBAAkB;IAClBC,gBAAgB;IAChBC,YAAY;IACZl0B,oBAAoB;IACpBzO,gBAAgB;IAChB4iC,WAAW;IACXpkB,cAAc;IACdqkB,sBAAsB;IACtBza,uBAAuB;IACvBzJ,gBAAgB;IAChBmkB;EACF,CAAC,GAAGtkC,mDAAU,CAAC,CAAC;EAEhB,MAAM,CAACukC,oBAAoB,EAAEC,kBAAkB,EAAEC,mBAAmB,CAAC,GAAGzqB,2DAAO,CAAC,CAAC;EAEjF,MAAM9X,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EACtB,MAAM4B,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAC5B,MAAM,CAACikC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGt8B,0DAAQ,CAAU,KAAK,CAAC;EAC5E,MAAM,CAACu8B,cAAc,EAAEC,iBAAiB,CAAC,GAAGx8B,0DAAQ,CAAU,KAAK,CAAC;EAEpE,MAAMy8B,mBAAmB,GAAGprB,wDAAM,CAAiB,CAAC;EAEpD,MAAMqrB,iBAAiB,GAAGvkC,mEAAe,CAAC,MAAM;IAC9C,IAAI,CAACY,IAAI,IAAI,CAAC4E,cAAc,EAAES,OAAO,EAAE;IAEvC0Z,gBAAgB,CAAC;MAAE/e;IAAK,CAAC,CAAC;IAC1BwoB,uBAAuB,CAAC;MACtB3f,MAAM,EAAE;QACN4kB,QAAQ,EAAE,QAAQ;QAClB7E,eAAe,EAAE,EAAE;QACnBE,kBAAkB,EAAE,EAAE;QACtBD,iBAAiB,EAAE,CAAC;UAClBznB,IAAI,EAAE,SAAS;UACfuC,UAAU,EAAEiB,cAAc,CAACS,OAAO,CAACC,OAAO,CAAC0B;QAC7C,CAAC;MACH;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAM48B,mBAAmB,GAAGxkC,mEAAe,CAAC,MAAM;IAChD,IAAI,CAACY,IAAI,IAAI,CAAC4E,cAAc,EAAEI,QAAQ,EAAE;IAExC+Z,gBAAgB,CAAC;MAAE/e;IAAK,CAAC,CAAC;IAC1BwoB,uBAAuB,CAAC;MACtB3f,MAAM,EAAE;QACN4kB,QAAQ,EAAE,QAAQ;QAClB7E,eAAe,EAAE,EAAE;QACnBE,kBAAkB,EAAE,CAAC;UACnB1nB,IAAI,EAAE,UAAU;UAChB4pB,UAAU,EAAEpmB,cAAc,CAACI,QAAQ,CAACgmB;QACtC,CAAC,CAAC;QACFnC,iBAAiB,EAAE;MACrB;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMgb,gBAAgB,GAAGzkC,mEAAe,CAAC,MAAM;IAC7C,IAAI,CAACY,IAAI,IAAI,CAAC4E,cAAc,EAAEe,KAAK,EAAE;IAErCoZ,gBAAgB,CAAC;MAAE/e;IAAK,CAAC,CAAC;IAC1BwoB,uBAAuB,CAAC;MACtB3f,MAAM,EAAE;QACN4kB,QAAQ,EAAE,QAAQ;QAClB7E,eAAe,EAAE,CAAC;UAChBxnB,IAAI,EAAE,OAAO;UACbuC,UAAU,EAAEiB,cAAc,CAACe,KAAK,CAACL,OAAO,CAAC0B;QAC3C,CAAC,CAAC;QACF8hB,kBAAkB,EAAE,EAAE;QACtBD,iBAAiB,EAAE;MACrB;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMjhB,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,oEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAMg5B,iBAAiB,GAAGr5B,oEAAgB,CAAC63B,QAAQ,CAAC;EACpD,MAAMyB,mBAAmB,GAAGt5B,oEAAgB,CAAC83B,UAAU,CAAC;EAExD,MAAMyB,YAAY,GAAGD,mBAAmB,IAAI7mB,oEAAa,CAAC6mB,mBAAmB,CAAC;EAE9E,MAAM;IAAE/jC,IAAI,EAAEC;EAAS,CAAC,GAAG+K,cAAc,IAAI,CAAC,CAAC;EAC/C,MAAMhK,WAAW,GAAGf,QAAQ,IAAI,MAAM,IAAIA,QAAQ;EAClD,MAAMgB,SAAS,GAAGD,WAAW,GAAGf,QAAQ,GAAGiB,SAAS;EACpD,MAAM+iC,QAAQ,GAAGhjC,SAAS,EAAEgQ,MAAM,KAAKpJ,aAAa;EACpD,MAAMq8B,oBAAoB,GAAIjjC,SAAS,IAAIwhC,wBAAwB,IACjExhC,SAAS,CAAC4B,IAAI,GAAG4/B,wBAAwB,GAAGvjC,gEAAa,CAAC,CAC3D,IAAK,CAAC;EACP,MAAMilC,cAAc,GAAG/zB,IAAI,CAACiH,IAAI,CAAC6sB,oBAAoB,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;EAErE,MAAMlkC,IAAI,GAAGgB,WAAW,GAAGf,QAAQ,CAACD,IAAI,GAAGC,QAAQ;EACnD,MAAM41B,WAAW,GAAG71B,IAAI,IAAI2Y,0EAAkB,CAAC3Y,IAAI,CAAC;EACpD,MAAMokC,gBAAgB,GAAGF,oBAAoB,GAAG,CAAC,IAAIlgC,OAAO,CAAC/C,SAAS,EAAE4P,cAAc,CAAC;EAEvF,MAAMlP,YAAY,GAAG3B,IAAI,IAAIA,IAAI,CAACoB,IAAI,KAAK,gBAAgB;EAC3D,MAAMkZ,UAAU,GAAG3Y,YAAY,GAAG3B,IAAI,GAAGkB,SAAS;EAElD,MAAMmjC,YAAY,GAAG1lC,yDAAO,CAAC,MAAM;IACjC,IAAI,CAACqB,IAAI,IAAIA,IAAI,CAACoB,IAAI,KAAK,gBAAgB,EAAE,OAAOF,SAAS;IAE7D,IAAIshC,cAAc,EAAE;MAClB,MAAM8B,kBAAkB,GAAG,IAAIrC,sEAAe,CAACO,cAAc,CAAC,EAAE;MAChE,MAAM+B,UAAU,GAAGD,kBAAkB,IAAIv+B,mEAAY,CAACjF,IAAI,EAAE0hC,cAAc,CAAC;MAC3E,MAAMgC,YAAY,GAAGl4B,oEAAa,CAACk2B,cAAc,CAAC,GAC9C1hC,IAAI,CAAC,oBAAoB,CAAC,GAC1BA,IAAI,CAAC,uBAAuB,CAAC;MAEjC,OAAOA,IAAI,CAAC,uBAAuB,EAAE;QACnCyC,MAAM,EAAEvD,IAAI,CAACuD,MAAM;QAAEkhC,KAAK,EAAEF,UAAU,IAAIC;MAAa,CAAC,EAAE;QAC1D19B,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE;MAChB,CAAC,CAAC;IACJ;IAEA,OAAO3S,IAAI,CAAC,qBAAqB,EAAE;MAAEyC,MAAM,EAAEvD,IAAI,CAACuD;IAAO,CAAC,CAAC;EAC7D,CAAC,EAAE,CAACvD,IAAI,EAAEwiC,cAAc,EAAE1hC,IAAI,CAAC,CAAC;EAEhC,MAAMK,kBAAkB,GAAGnB,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,GAAGpB,IAAI,CAACqB,IAAI,GAAGH,SAAS;EAElF,MAAMwjC,qBAAqB,GAAG/lC,yDAAO,CAAC,MAAM;IAC1C,IAAI,CAACwC,kBAAkB,EAAE,OAAOD,SAAS;IACzC,OAAOf,wBAAwB,EAAEqB,IAAI,CAAEC,MAAM,IAC3CA,MAAM,CAACL,IAAI,KAAK,aAAa,IAAIK,MAAM,CAACJ,IAAI,KAAKF,kBAAkB,CAAC;EACxE,CAAC,EAAE,CAACA,kBAAkB,EAAEhB,wBAAwB,CAAC,CAAC;EAElD,MAAMwkC,YAAY,GAAG3gC,OAAO,CAAC0gC,qBAAqB,CAAC;EACnD,MAAME,eAAe,GAAG5gC,OAAO,CAAC/C,SAAS,EAAE4jC,YAAY,CAAC;EAExD,MAAM9kC,SAAS,GAAG,CAAC6kC,eAAe,IAAI3jC,SAAS,EAAEkB,SAAS,KACxD6hC,YAAY,GAAGtB,cAAc,GACzB1iC,IAAI,EAAEoB,IAAI,KAAK,UAAU,GACvB2iC,mBAAmB,EAAE/8B,EAAE,KAAKa,aAAa,GACzC7H,IAAI,EAAE8kC,OAAO,KAAKj9B,aAAa,IAAI88B,YAAY,CACtD;EAED,SAASI,cAAcA,CAACC,OAAiB,EAAE;IACzC,IAAI,CAACrjC,YAAY,EAAE,OAAOT,SAAS;IACnC,MAAM2Y,OAAO,GAAG7Z,IAAI,CAAC+B,WAAW;IAChC,IAAI,CAAC8X,OAAO,EAAE,OAAO3Y,SAAS;IAE9B,IAAIlB,IAAI,EAAE8Z,aAAa,IAAIkrB,OAAO,EAAE;MAClC,OAAOnrB,OAAO,CAACrY,IAAI,CAAE2B,MAAM,IAAKA,MAAM,CAACD,QAAQ,KAAKqV,sDAAiB,CAAC;IACxE;IAEA,OAAOsB,OAAO,CAACrY,IAAI,CAAE2B,MAAM,IAAKA,MAAM,CAACD,QAAQ,KAAKnE,wDAAmB,CAAC;EAC1E;EAEA,MAAMgD,WAAW,GAAGgjC,cAAc,CAAC,CAAC;EACpC,MAAME,YAAY,GAAGF,cAAc,CAACvB,cAAc,CAAC;EACnD,MAAM0B,kBAAkB,GAAGnjC,WAAW,EAAEmB,QAAQ,KAAKqV,sDAAiB,IAAI5W,YAAY,GAClF3B,IAAI,CAAC+B,WAAW,EAAEP,IAAI,CAAE2B,MAAM,IAAKA,MAAM,CAACD,QAAQ,KAAKnE,wDAAmB,CAAC,GAC3EmC,SAAS;EACb,MAAMikC,UAAU,GAAG,CAACR,YAAY,IAAI3kC,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,IAC9DpB,IAAI,CAAC8kC,OAAO,KAAKj9B,aAAa,IAAI7D,OAAO,CAACjC,WAAW,CAAC;EAE3D,MAAMqjC,cAAc,GAAG,CAAC,MAAM;IAC5B,IAAI,CAACzjC,YAAY,EAAE,OAAOT,SAAS;IACnC,MAAM;MAAEmkC,SAAS;MAAEP;IAAQ,CAAC,GAAG9kC,IAAI;IACnC,MAAMmK,MAAM,GAAGjD,kDAAS,CAAC,CAAC,CAAC,CAAC;IAC5B,MAAMu9B,KAAK,GAAGK,OAAO,GAAGv4B,6DAAU,CAACpC,MAAM,EAAE26B,OAAO,CAAC,GAAG5jC,SAAS;IAC/D,OAAOujC,KAAK,GAAG1+B,mEAAY,CAACjF,IAAI,EAAE2jC,KAAK,CAAC,GAAGY,SAAS;EACtD,CAAC,EAAE,CAAC;EAEJ,MAAMp6B,WAAW,GAAG7L,mEAAe,CAAC,MAAM;IACxCyB,kBAAkB,CAAC,CAAC;EACtB,CAAC,CAAC;EAEF,MAAMykC,mBAAmB,GAAGlmC,mEAAe,CAAC,MAAM;IAChD,MAAMmmC,QAAQ,GAAGtB,QAAQ,GAAGF,mBAAmB,GAAGD,iBAAiB;IACnE,IAAI,CAAC7iC,SAAS,EAAE4jC,YAAY,IAAI,CAACU,QAAQ,EAAE;IAC3C,MAAM;MAAEV;IAAa,CAAC,GAAG5jC,SAAS;IAClC8hC,YAAY,CAAC;MAAE7yB,MAAM,EAAEq1B,QAAQ,CAACv+B,EAAE;MAAEw+B,SAAS,EAAEX;IAAa,CAAC,CAAC;IAC9D55B,WAAW,CAAC,CAAC;EACf,CAAC,CAAC;EAEF,MAAM/I,uBAAuB,GAAG9C,mEAAe,CAAC,MAAM;IACpD,MAAM;MAAE+C,SAAS;MAAEF;IAAU,CAAC,GAAGhB,SAAU;IAC3CN,oBAAoB,CAAC;MAAEX,IAAI,EAAEmC,SAAU;MAAEC,YAAY,EAAE,CAACH;IAAU,CAAC,CAAC;IACpEgJ,WAAW,CAAC,CAAC;EACf,CAAC,CAAC;EAEF,MAAMw6B,oBAAoB,GAAGrmC,mEAAe,CAAC,MAAM;IACjD,MAAM;MAAE+C;IAAU,CAAC,GAAGlB,SAAU;IAChC4hC,kBAAkB,CAAC;MAAE7iC,IAAI,EAAEmC;IAAW,CAAC,CAAC;IACxCkhC,mBAAmB,CAAC,CAAC;IACrBp4B,WAAW,CAAC,CAAC;EACf,CAAC,CAAC;EAEF,MAAMy6B,mBAAmB,GAAGtmC,mEAAe,CAAC,MAAM;IAChD,IAAI,CAAC6B,SAAS,EAAEkB,SAAS,IAAI,CAAClB,SAAS,CAAC0kC,wBAAwB,IAAI,CAAC3lC,IAAI,IAAI,CAAC4E,cAAc,EAAE;IAE9F,MAAM;MAAEwB;IAAgB,CAAC,GAAGxB,cAAc;IAC1C,IAAI,CAACwB,eAAe,EAAE;IAEtB88B,8BAA8B,CAAC;MAC7BljC,IAAI,EAAEiB,SAAS;MACfgC,KAAK,EAAEhC,SAAS,CAAC0kC,wBAAwB;MACzCC,OAAO,EAAEx/B;IACX,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMy/B,sBAAsB,GAAGzmC,mEAAe,CAAC,MAAM;IACnD,IAAI,CAAC6B,SAAS,EAAE;IAChB,MAAM6kC,WAAW,GAAG/B,mBAAmB,EAAE/8B,EAAE;IAC3C6H,oBAAoB,CAAC;MAAE6C,MAAM,EAAEzQ,SAAS,CAACjB,IAAI,CAACgH,EAAE;MAAEhH,IAAI,EAAEiB,SAAS;MAAEnB,MAAM,EAAEgmC;IAAY,CAAC,CAAC;EAC3F,CAAC,CAAC;EAEF,MAAMC,aAAa,GAAG3mC,mEAAe,CAAC,MAAM;IAC1C,IAAIY,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,IAAI,CAAC2jC,cAAc,CAAC,CAAC,EAAE;IAC1DxB,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC,CAAC;EAEF,MAAMyC,iBAAiB,GAAG5mC,mEAAe,CAAC,MAAM;IAC9CmkC,qBAAqB,CAAC,KAAK,CAAC;EAC9B,CAAC,CAAC;EAEF,MAAM0C,oBAAoB,GAAG7mC,mEAAe,CAAC,MAAM;IACjD,MAAMuF,IAAI,GAAGi+B,aAAa,IAAItN,WAAW;IACzC,MAAMryB,KAAK,GAAG8hC,cAAc,CAACvB,cAAc,CAAC;IAC5C,IAAI,CAAC7+B,IAAI,IAAI,CAAC1B,KAAK,IAAIjD,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,EAAE;IACxD4kC,iBAAiB,CAAC,CAAC;IACnBpnB,cAAc,CAAC,CAAC;IAChBokB,WAAW,CAAC;MAAEljC,MAAM,EAAE6E,IAAI,CAACqC,EAAE;MAAE3F,IAAI,EAAErB,IAAI,CAACqB,IAAI;MAAE4B;IAAM,CAAC,CAAC;EAC1D,CAAC,CAAC;EAEF,MAAMijC,oBAAoB,GAAG9mC,mEAAe,CAAC,MAAM;IACjD,IAAI,CAACY,IAAI,IAAIA,IAAI,CAACoB,IAAI,KAAK,gBAAgB,EAAE;IAE7C6hC,sBAAsB,CAAC;MACrBjjC;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAM4E,cAAc,GAAGjG,yDAAO,CAAC,MAAM;IACnC,OAAOqB,IAAI,IAAIiE,yEAAiB,CAACjE,IAAI,CAAC;EACxC,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,MAAMmmC,kBAAkB,GAAG/mC,mEAAe,CAAC,MAAM;IAC/C,IAAI+lC,UAAU,EAAE;MACd,OACEvlC,yDAAA,CAACgL,mDAAM;QAAC/F,SAAS,EAAEN,mEAAM,CAAC6hC,SAAU;QAACriC,OAAO,EAAEgiC,aAAc;QAAAliC,QAAA,GAC1DrE,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,eAAe,EAAE;YACrBsS,KAAK,EAAErR,WAAW,EAAEmB,QAAQ,KAAKqV,sDAAiB,GAC9CG,2EAAe,CAAC5X,IAAI,EAAEiB,WAAW,CAACoB,MAAM,EAAE;cAAE8Y,sBAAsB,EAAE;YAAK,CAAC,CAAC,GAC3E/O,6EAAiB,CAACpM,IAAI,EAAEiB,WAAW,EAAEoB,MAAM,EAAE;cAAE0Q,MAAM,EAAE;YAAK,CAAC;UACnE,CAAC,EAAE;YAAE/M,SAAS,EAAE;UAAK,CAAC;QAAC,CACpB,CAAC,EACL/E,WAAW,EAAEmB,QAAQ,KAAKqV,sDAAiB,IAAIvU,OAAO,CAACkhC,kBAAkB,CAAC,IACzE1lC,wDAAA;UAAKqF,SAAS,EAAEN,mEAAM,CAAC8hC,UAAW;UAAAxiC,QAAA,EAC/B/C,IAAI,CAAC,iBAAiB,EAAE;YACvBsS,KAAK,EAAElG,6EAAiB,CAACpM,IAAI,EAAEokC,kBAAkB,CAAC/hC,MAAM,EAAE;cAAE0Q,MAAM,EAAE;YAAK,CAAC;UAC5E,CAAC,EAAE;YAAE/M,SAAS,EAAE;UAAK,CAAC;QAAC,CACpB,CACN;MAAA,CACK,CAAC;IAEb;IAEA,IAAI89B,eAAe,EAAE;MACnB,OACEplC,wDAAA,CAACoL,mDAAM;QAAC7G,OAAO,EAAEuhC,mBAAoB;QAAAzhC,QAAA,EAClC/C,IAAI,CAAC,sBAAsB;MAAC,CACvB,CAAC;IAEb;IAEA,IAAIf,SAAS,IAAIkB,SAAS,EAAE8P,uBAAuB,IAAI,CAAC9P,SAAS,CAAC4jC,YAAY,EAAE;MAC9E,OACErlC,wDAAA,CAACoL,mDAAM;QACL07B,OAAO;QACPviC,OAAO,EAAE8hC,sBAAuB;QAChCj6B,QAAQ,EAAC,mBAAmB;QAC5BC,aAAa,EAAEtH,mEAAM,CAACgiC,WAAY;QAClCnR,aAAa,EAAC,KAAK;QAAAvxB,QAAA,EAElB/C,IAAI,CAAC,wBAAwB;MAAC,CACzB,CAAC;IAEb;IAEA,IAAIf,SAAS,IAAIkB,SAAS,EAAE6P,UAAU,IAAI,CAAC7P,SAAS,CAAC4jC,YAAY,EAAE;MACjE,OACErlC,wDAAA,CAACoL,mDAAM;QACL07B,OAAO;QACPviC,OAAO,EAAE8hC,sBAAuB;QAChCj6B,QAAQ,EAAC,mBAAmB;QAC5BC,aAAa,EAAEtH,mEAAM,CAACgiC,WAAY;QAClCnR,aAAa,EAAC,KAAK;QAAAvxB,QAAA,EAElB/C,IAAI,CAAC,iBAAiB;MAAC,CAClB,CAAC;IAEb;IAEA,IAAIG,SAAS,EAAEulC,kBAAkB,EAAE;MACjC,OACEhnC,wDAAA,CAACoL,mDAAM;QACL07B,OAAO;QACPviC,OAAO,EAAE8hC,sBAAuB;QAChCj6B,QAAQ,EAAC,mBAAmB;QAC5BC,aAAa,EAAEtH,mEAAM,CAACgiC,WAAY;QAClCnR,aAAa,EAAC,KAAK;QAAAvxB,QAAA,EAElB/C,IAAI,CAAC,qBAAqB;MAAC,CACtB,CAAC;IAEb;IAEA,OACEtB,wDAAA,CAACoL,mDAAM;MAAC7G,OAAO,EAAEkH,WAAY;MAAApH,QAAA,EAC1B/C,IAAI,CAAC,IAAI;IAAC,CACL,CAAC;EAEb,CAAC,CAAC;EAEF,MAAM2lC,YAAY,GAAG9nC,yDAAO,CAAC,MAAM;IACjC,IAAI,CAACqB,IAAI,EAAE,OAAOkB,SAAS;IAC3B,IAAIsB,IAAI,GAAG,EAAE;IACb,IAAIxC,IAAI,CAACoB,IAAI,KAAK,UAAU,EAAE;MAC5B,IAAIpB,IAAI,CAAC0mC,aAAa,EAAE;QACtBlkC,IAAI,IAAI,GAAG1B,IAAI,CAAC,mBAAmB,CAAC,IAAIkF,8EAAsB,CAAChG,IAAI,CAAC0mC,aAAa,GAAG,IAAI,EAAE5lC,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,EAAE;MAC9G;MACA,IAAI3G,IAAI,CAAC2mC,YAAY,EAAE;QACrBnkC,IAAI,IAAI,IAAI;QACZA,IAAI,IAAI,GAAG1B,IAAI,CAAC,kBAAkB,CAAC,IAAIkF,8EAAsB,CAAChG,IAAI,CAAC2mC,YAAY,GAAG,IAAI,EAAE7lC,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,EAAE;MAC5G;IACF;IAEA,OAAOnE,IAAI;EACb,CAAC,EAAE,CAACxC,IAAI,EAAEc,IAAI,CAAC,CAAC;EAEhB,MAAMggC,SAAS,GAAGniC,yDAAO,CAAC,MAAM;IAC9B,IAAI,CAACsB,QAAQ,IAAI,CAACD,IAAI,EAAE;MACtB,OAAOkB,SAAS;IAClB;IAEA,MAAM;MACJ+P,MAAM;MAAEL,YAAY;MAAEC,cAAc;MAAE5O,SAAS;MAAE2kC,WAAW;MAAE/B;IAChE,CAAC,GAAG5jC,SAAS,IAAI,CAAC,CAAC;IACnB,MAAM4lC,UAAU,GAAGzC,gBAAgB,IAAIpgC,OAAO,CAAC6M,cAAc,CAAC;IAE9D,MAAMi2B,cAAc,GAAGl2B,YAAY,IAAImzB,mBAAmB;IAE1D,MAAMgD,oBAAoB,GAAG9lC,SAAS,EAAE+lC,UAAU,IAAK,CAAC/lC,SAAS,IAAIjB,IAAI,EAAEoB,IAAI,KAAK,UAAW;IAE/F,MAAMmS,WAAW,GAAG,CAAC,MAAM;MACzB,IAAI,CAACtS,SAAS,EAAE,OAAOH,IAAI,CAAC,4BAA4B,CAAC;MACzD,IAAIkjC,YAAY,EAAE,OAAO9iC,SAAS;MAClC,IAAID,SAAS,CAAC+lC,UAAU,EAAE,OAAOlmC,IAAI,CAAC,6BAA6B,CAAC;MAEpE,IAAIG,SAAS,CAAC4jC,YAAY,EAAE,OAAO/jC,IAAI,CAAC,6BAA6B,CAAC;MACtE,IAAIf,SAAS,IAAIkB,SAAS,CAAC6P,UAAU,IAAI7P,SAAS,CAAC8P,uBAAuB,IAAI,CAAC9P,SAAS,CAAC4jC,YAAY,EAAE;QACrG,OAAO/jC,IAAI,CAAC,6BAA6B,CAAC;MAC5C;MACA,IAAIG,SAAS,CAAC6P,UAAU,IAAI/Q,SAAS,EAAE;QACrC,OAAOA,SAAS,GACZe,IAAI,CAAC,gCAAgC,CAAC,GACtCA,IAAI,CAAC,uCAAuC,EAAE;UAAE6D,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEijC,mBAAoB;QAAG,CAAC,CAAC;MACxG;MACA,IAAI,CAAChkC,SAAS,IAAI,CAACkkC,QAAQ,EAAE,OAAO/iC,SAAS;MAC7C,IAAI0lC,WAAW,IAAIC,UAAU,EAAE;QAC7B,OAAO9mC,SAAS,GACZe,IAAI,CAAC,8BAA8B,EAAE;UACrCqC,MAAM,EAAE0N;QACV,CAAC,EAAE;UACD+D,WAAW,EAAE/D,cAAc;UAC3B/J,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CAAC,CAAC,GACA3S,IAAI,CAAC,qCAAqC,EAAE;UAC5CqC,MAAM,EAAE0N,cAAc;UACtBlM,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEijC,mBAAoB;QAC/C,CAAC,EAAE;UACDnvB,WAAW,EAAE/D,cAAc;UAC3B/J,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CAAC,CAAC;MACN;MAEA,IAAIxS,SAAS,CAAC6P,UAAU,IAAI/Q,SAAS,EAAE;QACrC,IAAI8mC,UAAU,EAAE;UACd,OAAO/lC,IAAI,CAAC,4BAA4B,EAAE;YACxCqC,MAAM,EAAE0N;UACV,CAAC,EAAE;YACD+D,WAAW,EAAE/D,cAAc;YAC3B/J,SAAS,EAAE,IAAI;YACf2M,YAAY,EAAE;UAChB,CAAC,CAAC;QACJ;QAEA,OAAO3S,IAAI,CAAC,mCAAmC,CAAC;MAClD;MAEA,IAAIf,SAAS,EAAE;QACb,IAAI8mC,UAAU,EAAE;UACd,OAAO/lC,IAAI,CAAC,qBAAqB,EAAE;YACjCqC,MAAM,EAAE0N;UACV,CAAC,EAAE;YACD/J,SAAS,EAAE,IAAI;YACf2M,YAAY,EAAE,IAAI;YAClBmB,WAAW,EAAE/D;UACf,CAAC,CAAC;QACJ;QAEA,OAAO/P,IAAI,CAAC,4BAA4B,CAAC;MAC3C;MAEA,IAAI+lC,UAAU,EAAE;QACd,OAAO/lC,IAAI,CAAC,4BAA4B,EAAE;UACxCqC,MAAM,EAAE0N,cAAc;UACtBlM,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEijC,mBAAoB;QAC/C,CAAC,EAAE;UACDj9B,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE,IAAI;UAClBmB,WAAW,EAAE/D;QACf,CAAC,CAAC;MACJ;MAEA,OAAO/P,IAAI,CAAC,mCAAmC,EAAE;QAAE6D,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEijC,mBAAoB;MAAG,CAAC,CAAC;IACvG,CAAC,EAAE,CAAC;IAEJ,SAASkD,QAAQA,CAAA,EAAG;MAClB,IAAItlC,YAAY,EAAE,OAAO3B,IAAI,CAACsD,KAAK;MACnC,IAAI,CAACrC,SAAS,EAAE,OAAOH,IAAI,CAAC,sBAAsB,CAAC;MAEnD,OAAOf,SAAS,GAAGe,IAAI,CAAC,kBAAkB,CAAC,GAAGA,IAAI,CAAC,eAAe,CAAC;IACrE;IAEA,MAAMomC,qBAAqB,GACzBtnC,yDAAA;MACEiF,SAAS,EAAEN,mEAAM,CAAC4iC,WAAY;MAAAtjC,QAAA,GAG9BrE,wDAAA,CAACoL,mDAAM;QACL/F,SAAS,EAAEN,mEAAM,CAACwiB,WAAY;QAC9BC,KAAK;QACLhP,KAAK,EAAC,mBAAmB;QACzBtS,IAAI,EAAC,MAAM;QACXkG,QAAQ,EAAC,OAAO;QAChBqb,SAAS,EAAEnmB,IAAI,CAAC,OAAO,CAAE;QACzBiD,OAAO,EAAEkH;MAAY,CACtB,CAAC,EAEDjH,OAAO,CAACjC,WAAW,EAAEoB,MAAM,CAAC,IAC3B3D,wDAAA;QAAKqF,SAAS,EAAEN,mEAAM,CAAC6iC,wBAAyB;QAAAvjC,QAAA,EAC7C9B,WAAW,CAACmB,QAAQ,KAAKqV,sDAAiB,GACvCG,2EAAe,CAAC5X,IAAI,EAAEiB,WAAW,CAACoB,MAAM,EAAE;UAC1C0B,SAAS,EAAEN,mEAAM,CAAC8iC,mBAAmB;UACrCprB,sBAAsB,EAAE;QAC1B,CAAC,CAAC,GACA/O,6EAAiB,CAACpM,IAAI,EAAEiB,WAAW,CAACoB,MAAM,EAAE;UAC5C0Q,MAAM,EAAE,IAAI;UACZhP,SAAS,EAAEN,mEAAM,CAAC8iC;QACpB,CAAC;MAAC,CACD,CACN;IAAA,CACE,CACN;IAED,MAAMC,gBAAgB,GAAG3lC,YAAY,IACnCnC,wDAAA;MAAKka,GAAG,EAAEgqB,mBAAoB;MAAC7+B,SAAS,EAAEgI,gEAAc,CAACtI,mEAAM,CAAC2G,MAAM,EAAE3G,mEAAM,CAAC+V,UAAU,CAAE;MAAAzW,QAAA,EACzFrE,wDAAA,CAACm0B,0DAAgB;QACf/E,iBAAiB,EAAEhqB,cAAc,CAAEI,QAAU;QAC7C0pB,gBAAgB,EAAE9pB,cAAc,CAAES,OAAS;QAC3CipB,cAAc,EAAE1pB,cAAc,CAAEe,KAAO;QACvCrC,KAAK,EAAEtD,IAAI,CAACsD,KAAM;QAClBoI,QAAQ,EAAE24B,YAAa;QACvBxQ,YAAY,EAAE2O,cAAe;QAC7B1O,iBAAiB,EAAE/zB,SAAU;QAC7BkB,SAAS,EAAEA;MAAU,CACtB;IAAC,CACC,CACN;IAED,MAAM0/B,aAAa,GACjB/gC,yDAAA;MAAKiF,SAAS,EAAEN,mEAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BrE,wDAAA,CAAC2E,wEAAuB;QACtBU,SAAS,EAAEN,mEAAM,CAACsxB,WAAY;QAC9BvwB,OAAO,EAAEuwB,WAAY;QACrBnwB,IAAI,EAAEguB;MAAa,CACpB,CAAC,EACFl0B,wDAAA;QAAIqF,SAAS,EAAEN,mEAAM,CAACjB,KAAM;QAAAO,QAAA,EACzBojC,QAAQ,CAAC;MAAC,CACT,CAAC,EACJjjC,OAAO,CAACuP,WAAW,CAAC,IACnB/T,wDAAA;QAAGqF,SAAS,EAAEgI,gEAAc,CAACtI,mEAAM,CAACgP,WAAW,EAAEwzB,oBAAoB,IAAIxiC,mEAAM,CAACgjC,kBAAkB,CAAE;QAAA1jC,QAAA,EACjG0P;MAAW,CACX,CACJ;IAAA,CACE,CACN;IAED,MAAM8e,SAAoB,GAAG,EAAE;IAC/B,IAAIryB,IAAI,CAACoB,IAAI,KAAK,UAAU,EAAE;MAC5B,MAAMomC,OAAO,GAAGv2B,MAAM,IAAIL,YAAY;MAEtC,IAAI42B,OAAO,EAAE;QACXnV,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,cAAc,CAAC,EACpB,CAACmQ,MAAM,GACLrR,yDAAA,CAAAF,yDAAA;UAAAmE,QAAA,GACErE,wDAAA,CAAC4E,uDAAM;YAACsB,IAAI,EAAC,OAAO;YAACf,IAAI,EAAEw9B,yEAAkBA;UAAC,CAAE,CAAC,EACjD3iC,wDAAA;YAAMqF,SAAS,EAAEN,mEAAM,CAACkjC,OAAQ;YAAA5jC,QAAA,EAAE9C,OAAO,CAACohC,yEAAkB,CAACuF,QAAS;UAAC,CAAO,CAAC;QAAA,CAC/E,CAAC,GACD;UAAEx3B,MAAM,EAAEe;QAAO,CAAC,CACvB,CAAC;MACJ;MAEA,IAAIhQ,SAAS,EAAE4B,IAAI,EAAE;QACnBwvB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,cAAc,CAAC,EACpBtB,wDAAA;UAAM8D,KAAK,EAAEmjC,YAAa;UAAA5iC,QAAA,EAAEmC,8EAAsB,CAAC/E,SAAS,CAAC4B,IAAI,GAAG,IAAI,EAAE/B,IAAI,CAAC6F,IAAI,EAAE,IAAI;QAAC,CAAO,CAAC,CACnG,CAAC;MACJ;MAEA,IAAI3G,IAAI,CAAC0mC,aAAa,IAAI,CAACzlC,SAAS,EAAE;QACpCoxB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,mBAAmB,CAAC,EACzBkF,8EAAsB,CAAChG,IAAI,CAAC0mC,aAAa,GAAG,IAAI,EAAE5lC,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,CACnE,CAAC;MACJ;MAEA,IAAI3G,IAAI,CAAC2mC,YAAY,IAAI,CAAC1lC,SAAS,EAAE;QACnCoxB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,kBAAkB,CAAC,EACxBkF,8EAAsB,CAAChG,IAAI,CAAC2mC,YAAY,GAAG,IAAI,EAAE7lC,IAAI,CAAC6F,IAAI,EAAE,IAAI,CAAC,CAClE,CAAC;MACJ;MAEA,MAAMghC,UAAU,GAAG3nC,IAAI,CAACoT,KAAK,IAAInS,SAAS,EAAE8P,uBAAuB,IAAI,CAAC,CAAC;MAEzEshB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,eAAe,CAAC,EACrBlB,yDAAA;QAAKiF,SAAS,EAAEN,mEAAM,CAACqjC,SAAU;QAAA/jC,QAAA,GAC9BqJ,6EAAiB,CAACpM,IAAI,EAAE6mC,UAAU,EAAE;UAAE9iC,SAAS,EAAEN,mEAAM,CAACsjC;QAAe,CAAC,CAAC,EACzE9nC,SAAS,IAAIqkC,gBAAgB,IAAIpgC,OAAO,CAAC6M,cAAc,CAAC,IACvDrR,wDAAA,CAACi2B,4DAAW;UAAC1xB,OAAO,EAAEq/B,kBAAmB;UAAAv/B,QAAA,EACtC/C,IAAI,CAAC,iBAAiB,EAAE;YAAEqC,MAAM,EAAE0N;UAAe,CAAC,EAAE;YAAE+D,WAAW,EAAE/D;UAAe,CAAC;QAAC,CAC1E,CACd;MAAA,CACE,CAAC,CACP,CAAC;MAEF,IAAI7Q,IAAI,CAACsU,iBAAiB,EAAE;QAC1B+d,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,sBAAsB,CAAC,EAC5BA,IAAI,CAAC,2BAA2B,EAAE;UAChC0T,KAAK,EAAExU,IAAI,CAACoU,mBAAmB,IAAI,CAAC;UACpC4sB,KAAK,EAAEhhC,IAAI,CAACsU;QACd,CAAC,EAAE;UACDM,WAAW,EAAE5U,IAAI,CAACoU,mBAAmB,IAAI;QAC3C,CAAC,CAAC,CACH,CAAC;MACJ;MAEA,IAAIpU,IAAI,CAACgR,YAAY,IAAI,CAAC6zB,YAAY,EAAE;QACtCxS,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,gBAAgB,CAAC,EACtBtB,wDAAA;UAAKqF,SAAS,EAAEN,mEAAM,CAACqjC,SAAU;UAAA/jC,QAAA,EAC9B/C,IAAI,CAAC,yBAAyB;QAAC,CAC7B,CAAC,CACP,CAAC;MACJ;MAEA,IAAIG,SAAS,EAAEqB,OAAO,EAAE;QACtB+vB,SAAS,CAACvN,IAAI,CAAC,CACb5jB,SAAS,EACT+E,+FAAsB,CAAChF,SAAS,CAACqB,OAAO,CAAC,CAC1C,CAAC;MACJ;IACF;IAEA,IAAIX,YAAY,EAAE;MAChB,MAAM;QAAE0jC,SAAS;QAAEyC,YAAY;QAAEhD;MAAQ,CAAC,GAAG9kC,IAAI;MACjD,MAAM+nC,SAAS,GAAGjD,OAAO,GAAGv4B,6DAAU,CAACrF,kDAAS,CAAC,CAAC,EAAE49B,OAAO,CAAC,GAAG5jC,SAAS;MACxE,MAAM;QACJyE,KAAK;QAAEX,QAAQ;QAAEK,OAAO;QAAEe;MAC5B,CAAC,GAAGxB,cAAc,IAAI,CAAC,CAAC;MAExB,IAAIkjC,YAAY,EAAE;QAChBzV,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,eAAe,CAAC,EACrBlB,yDAAA;UACEiF,SAAS,EAAEN,mEAAM,CAACujC,YAAa;UAC/B/jC,OAAO,EAAEA,CAAA,KAAM;YACb/E,oEAAmB,CAAC8oC,YAAY,CAAC;YACjC1nC,gBAAgB,CAAC;cACfkC,OAAO,EAAE;gBAAEK,GAAG,EAAE;cAAsB,CAAC;cACvCU,IAAI,EAAE;YACR,CAAC,CAAC;UACJ,CAAE;UAAAQ,QAAA,GAEDikC,YAAY,EACbtoC,wDAAA,CAAC6E,2DAAI;YAACQ,SAAS,EAAEN,mEAAM,CAACyjC,QAAS;YAACpiC,IAAI,EAAC;UAAM,CAAE,CAAC;QAAA,CAC5C,CAAC,CACR,CAAC;MACJ,CAAC,MAAM,IAAImiC,SAAS,IAAI1C,SAAS,EAAE;QACjChT,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,eAAe,CAAC,EACrBgkC,OAAO,GAAG;UAAE50B,MAAM,EAAE40B,OAAO;UAAEmD,eAAe,EAAE;QAAK,CAAC,GAAG5C,SAAS,IAAI,EAAE,CACvE,CAAC;MACJ;MAEA,IAAI1/B,KAAK,EAAE;QACT0sB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,oBAAoB,CAAC,EAC1BlB,yDAAA;UAAMiF,SAAS,EAAEN,mEAAM,CAAC2jC,eAAgB;UAAArkC,QAAA,GACtCrE,wDAAA;YACEqF,SAAS,EAAEN,mEAAM,CAAC4jC,aAAc;YAChCpkC,OAAO,EAAE8/B,gBAAiB;YAAAhgC,QAAA,EAEzB8B,KAAK,CAACC;UAAI,CACP,CAAC,EACPpG,wDAAA,CAACi2B,4DAAW;YAAA5xB,QAAA,EAAEu+B,gEAAa,CAACz8B,KAAK,CAACyiC,aAAa;UAAC,CAAc,CAAC;QAAA,CAC3D,CAAC,CACR,CAAC;MACJ;MAEA,IAAIpjC,QAAQ,EAAE;QACZqtB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,uBAAuB,CAAC,EAC7BlB,yDAAA;UAAMiF,SAAS,EAAEN,mEAAM,CAAC2jC,eAAgB;UAAArkC,QAAA,GACtCrE,wDAAA;YACEqF,SAAS,EAAEN,mEAAM,CAAC4jC,aAAc;YAChCpkC,OAAO,EAAE6/B,mBAAoB;YAAA//B,QAAA,EAE5BmB,QAAQ,CAACY;UAAI,CACV,CAAC,EACPpG,wDAAA,CAACi2B,4DAAW;YAAA5xB,QAAA,EAAEu+B,gEAAa,CAACp9B,QAAQ,CAACojC,aAAa;UAAC,CAAc,CAAC;QAAA,CAC9D,CAAC,CACR,CAAC;MACJ;MAEA,IAAI/iC,OAAO,EAAE;QACXgtB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,qBAAqB,CAAC,EAC3BlB,yDAAA;UAAMiF,SAAS,EAAEN,mEAAM,CAAC2jC,eAAgB;UAAArkC,QAAA,GACtCrE,wDAAA;YACEqF,SAAS,EAAEN,mEAAM,CAAC4jC,aAAc;YAChCpkC,OAAO,EAAE4/B,iBAAkB;YAAA9/B,QAAA,EAE1BwB,OAAO,CAACO;UAAI,CACT,CAAC,EACPpG,wDAAA,CAACi2B,4DAAW;YAAA5xB,QAAA,EAAEu+B,gEAAa,CAAC/8B,OAAO,CAAC+iC,aAAa;UAAC,CAAc,CAAC;QAAA,CAC7D,CAAC,CACR,CAAC;MACJ;MAEA/V,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,sBAAsB,CAAC,EAC5BA,IAAI,CAAC,gBAAgB,EAAE;QACrBunC,MAAM,EAAEroC,IAAI,CAACsoC,WAAW;QACxBtH,KAAK,EAAEhhC,IAAI,CAACuoC;MACd,CAAC,CAAC,CACH,CAAC;MAEF,IAAIvoC,IAAI,CAACwoC,WAAW,IAAIxoC,IAAI,CAACyoC,aAAa,EAAE;QAC1C,MAAMC,cAAc,GAAG9xB,6EAAsB,CAAC5W,IAAI,CAACwoC,WAAW,EAAExoC,IAAI,CAACyoC,aAAa,EAAE3nC,IAAI,CAAC6F,IAAI,CAAC;QAC9F0rB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,eAAe,CAAC,EACrBlB,yDAAA;UAAMiF,SAAS,EAAEN,mEAAM,CAACokC,WAAY;UAAA9kC,QAAA,GACjC/C,IAAI,CAAC,qBAAqB,EAAE;YAAEqC,MAAM,EAAEulC;UAAe,CAAC,CAAC,EACxDlpC,wDAAA,CAACi2B,4DAAW;YAAC1xB,OAAO,EAAEmiC,oBAAqB;YAAAriC,QAAA,EACxC/C,IAAI,CAAC,uBAAuB;UAAC,CACnB,CAAC;QAAA,CACV,CAAC,CACR,CAAC;MACJ;MAEA,IAAIsF,eAAe,EAAE;QACnB,MAAM;UAAEI,WAAW;UAAEC;QAAS,CAAC,GAAGL,eAAe;QACjD,MAAM+D,MAAM,GAAGjD,kDAAS,CAAC,CAAC,CAAC,CAAC;;QAE5B,MAAM6sB,QAAQ,GAAI/sB,EAAU,IAAK;UAC/B87B,gBAAgB,CAAC;YAAE97B;UAAG,CAAC,CAAC;UACxBnG,kBAAkB,CAAC,CAAC;QACtB,CAAC;QAED,MAAMwF,SAAS,GAAGkG,6DAAU,CAACpC,MAAM,EAAE3D,WAAW,CAAE;QAClD,MAAMF,MAAM,GAAGG,QAAQ,GAAG8F,6DAAU,CAACpC,MAAM,EAAE1D,QAAQ,CAAC,GAAGvF,SAAS;QAElE,MAAMsB,IAAI,GAAG2D,yFAAsB,CAAC;UAClCC,eAAe;UAAEC,SAAS;UAAEC,MAAM;UAAEC,UAAU,EAAEwtB,QAAQ;UAAEjzB;QAC5D,CAAC,CAAC;QAEFuxB,SAAS,CAACvN,IAAI,CAAC,CACb5jB,SAAS,EACTtB,yDAAA;UAAKiF,SAAS,EAAEN,mEAAM,CAACqkC,gBAAiB;UAAA/kC,QAAA,GACtCrE,wDAAA;YAAAqE,QAAA,EACGrB;UAAI,CACF,CAAC,EACLwB,OAAO,CAAC/C,SAAS,EAAE0kC,wBAAwB,CAAC,IAC3CnmC,wDAAA,CAACoL,mDAAM;YACLoc,KAAK;YACLniB,SAAS,EAAEN,mEAAM,CAACskC,mBAAoB;YACtCnjC,IAAI,EAAC,SAAS;YACdsS,KAAK,EAAC,aAAa;YACnBiP,SAAS,EAAC,yBAAyB;YACnCljB,OAAO,EAAE2hC,mBAAoB;YAC7B95B,QAAQ,EAAC;UAAQ,CAClB,CACF;QAAA,CACE,CAAC,CACP,CAAC;MACJ;IACF;IAEA,MAAMk9B,OAAO,GAAGnG,cAAc,IAAIhhC,YAAY,IAAI3B,IAAI,CAAC+oC,WAAW,IAChE,GAAGpG,cAAc,GAAG3iC,IAAI,CAAC+oC,WAAW,EACrC;IAED,MAAMp9B,MAAM,GACV/L,yDAAA;MAAKiF,SAAS,EAAEN,mEAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC3B,CAAC9D,SAAS,IAAI+oC,OAAO,IAAI3D,UAAU,KAClCvlC,yDAAA;QAAKiF,SAAS,EAAEN,mEAAM,CAACykC,iBAAkB;QAAAnlC,QAAA,GACtCilC,OAAO,IACNtpC,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,iBAAiB,EAAE;YACvB0S,IAAI,EAAEhU,wDAAA,CAAC8d,yDAAQ;cAAC8F,GAAG,EAAE0lB,OAAQ;cAACG,eAAe;cAACzmC,IAAI,EAAE1B,IAAI,CAAC,qBAAqB;YAAE,CAAE;UACpF,CAAC,EAAE;YAAEgG,SAAS,EAAE;UAAK,CAAC;QAAC,CACpB,CACN,EACA/G,SAAS,IACRP,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,WAAWkjC,YAAY,GAAG,SAAS,GAAG,EAAE,GAAG/hC,SAAS,GAAG,QAAQ,GAAG,OAAO,EAAE,EAAE;YACjFuR,IAAI,EACFhU,wDAAA,CAAC0G,iDAAI;cAACW,SAAS;cAAC9C,OAAO,EAAE7B,uBAAwB;cAAA2B,QAAA,EAC9C/C,IAAI,CAAC,gBAAgBmB,SAAS,GAAG,MAAM,GAAG,MAAM,EAAE;YAAC,CAChD;UAEV,CAAC,EAAE;YACD6E,SAAS,EAAE;UACb,CAAC;QAAC,CACC,CACN,EACA,CAACq+B,UAAU,IAAI2B,cAAc,IAC5BtnC,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,sBAAsB;QAAC,CAC1B,CACN,EACAqkC,UAAU,IAAIC,cAAc,IAC3B5lC,wDAAA;UAAAqE,QAAA,EACG/C,IAAI,CAAC,iBAAiB,EAAE;YACvBgI,IAAI,EAAEs8B;UACR,CAAC,EAAE;YAAEt+B,SAAS,EAAE;UAAK,CAAC;QAAC,CACpB,CACN;MAAA,CACE,CACN,EACAq/B,kBAAkB,CAAC,CAAC;IAAA,CAClB,CACN;IAED,OAAO;MACLgB,WAAW,EAAExlC,YAAY,GAAGulC,qBAAqB,GAAGhmC,SAAS;MAC7DgK,MAAM,EAAEvJ,YAAY,GAAG2lC,gBAAgB,GAAG3G,aAAa;MACvDtO,SAAS;MACT1mB;IACF,CAAC;EACH,CAAC,EAAE,CACD1L,QAAQ,EAAEgB,SAAS,EAAE8iC,mBAAmB,EAAElO,WAAW,EAAE/0B,IAAI,EAC3Df,SAAS,EAAEqkC,gBAAgB,EAAEH,QAAQ,EAAEljC,OAAO,EAAE4hC,cAAc,EAC9D3iC,IAAI,EAAE4E,cAAc,EAAEuhC,kBAAkB,EAAEnC,YAAY,EACtDriC,YAAY,EAAE8kC,YAAY,EAC1BtB,UAAU,EAAEC,cAAc,EAAErjC,WAAW,EAAEsiC,YAAY,EACrD7B,cAAc,EAAEmB,iBAAiB,EAAEC,mBAAmB,EAAEC,gBAAgB,CACzE,CAAC;EAEF,MAAMjC,aAAa,GAAG3hC,QAAQ,IAC5BT,wDAAA,CAACK,mEAAa;IACZC,MAAM,EAAEkL,cAAc,CAAElL,MAAQ;IAChCE,IAAI,EAAEC,QAAS;IACfF,SAAS,EAAEA,SAAU;IACrBI,wBAAwB,EAAEA,wBAAyB;IACnDD,sBAAsB,EAAEA;EAAuB,CAChD,CACF;EAED,OACEN,yDAAA,CAAAF,yDAAA;IAAAmE,QAAA,GACErE,wDAAA,CAAC2yB,+DAAc;MACbvqB,MAAM,EAAEA,MAAO;MACfu/B,WAAW,EAAErG,SAAS,EAAEqG,WAAY;MACpCj8B,MAAM,EAAE41B,SAAS,EAAE51B,MAAO;MAC1BgB,WAAW,EAAEvK,YAAa;MAC1B0wB,SAAS,EAAEyO,SAAS,EAAEzO,SAAU;MAChC1mB,MAAM,EAAEm1B,SAAS,EAAEn1B,MAAO;MAC1B9G,SAAS,EAAEN,mEAAM,CAACuG,KAAM;MACxBkB,gBAAgB,EAAEzH,mEAAM,CAACs9B,YAAa;MACtCC,gBAAgB,EAAEngC,YAAY,GAAG,mBAAmB,GAAGT,SAAU;MACjE0gC,aAAa,EAAEA,aAAc;MAC7Bx4B,OAAO,EAAE6B,WAAY;MACrBi+B,cAAc,EAAEllC,OAAO,CAACmhC,UAAU,CAAE;MACpCgE,oBAAoB,EAAElE,YAAY,EAAE/hC,QAAS;MAC7C4jB,kBAAkB;IAAA,CACnB,CAAC,EACDxM,UAAU,IAAIgb,WAAW,IAAItxB,OAAO,CAACihC,YAAY,CAAC,IACjDrlC,yDAAA,CAACu3B,0DAAa;MACZvvB,MAAM,EAAE07B,kBAAmB;MAC3B8F,cAAc;MACdhgC,OAAO,EAAE48B,iBAAkB;MAC3BnI,YAAY,EAAE/8B,IAAI,CAAC,eAAe,EAAE;QAClCsS,KAAK,EAAE6xB,YAAY,EAAE/hC,QAAQ,KAAKqV,sDAAiB,GAC/CG,2EAAe,CAAC5X,IAAI,EAAEmkC,YAAY,CAAC9hC,MAAM,EAAE;UAAE8Y,sBAAsB,EAAE;QAAK,CAAC,CAAC,GAC5E/O,6EAAiB,CAACpM,IAAI,EAAEmkC,YAAY,CAAC9hC,MAAM,EAAE;UAAE0Q,MAAM,EAAE;QAAK,CAAC;MACnE,CAAC,EAAE;QAAE/M,SAAS,EAAE;MAAK,CAAC,CAAE;MACxBi3B,cAAc,EAAEkI,oBAAqB;MAAApiC,QAAA,GAGpCyW,UAAU,CAACR,aAAa,IAErBta,wDAAA;QAAKqF,SAAS,EAAEN,mEAAM,CAAC8kC,kBAAmB;QAAAxlC,QAAA,EACvC/C,IAAI,CAAC,iCAAiC;MAAC,CACrC,CACN,EACHtB,wDAAA,CAACkF,yEAAmB;QAClBC,IAAI,EAAEi+B,aAAa,IAAItN,WAAY;QACnCt1B,IAAI,EAAEsa;MAAW,CAClB,CAAC,EACF9a,wDAAA;QAAKqF,SAAS,EAAEN,mEAAM,CAAC+kC,YAAa;QAAAzlC,QAAA,EACjC/C,IAAI,CAAC,qBAAqB;MAAC,CACzB,CAAC,EACL,CAAC8hC,aAAa,IAEXpjC,wDAAA;QAAAqE,QAAA,EACG/C,IAAI,CAAC,2BAA2B,EAAE;UACjCd,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;YAAEwC,KAAK,EAAEgX,UAAU,CAAChX,KAAK;YAAEC,MAAM,EAAE+W,UAAU,CAAC/W;UAAO,CAAC,CAAC;UAChF6P,KAAK,EAAE6xB,YAAY,EAAE/hC,QAAQ,KAAKqV,sDAAiB,GAC/C2pB,2EAAe,CAACphC,IAAI,EAAEmkC,YAAY,CAAC9hC,MAAM,EAAE,IAAI,CAAC,GAChD+uB,6EAAiB,CAACpxB,IAAI,EAAEmkC,YAAY,CAAC9hC,MAAM;QACjD,CAAC,EAAE;UACD2D,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CAAC;MAAC,CACD,CACJ,EACFmvB,aAAa,IAEVpjC,wDAAA;QAAAqE,QAAA,EACG/C,IAAI,CAAC,kCAAkC,EAAE;UACxCd,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;YAAEwC,KAAK,EAAEgX,UAAU,CAAChX,KAAK;YAAEC,MAAM,EAAE+W,UAAU,CAAC/W;UAAO,CAAC,CAAC;UAChF6P,KAAK,EAAE6xB,YAAY,EAAE/hC,QAAQ,KAAKqV,sDAAiB,GAC/C2pB,2EAAe,CAACphC,IAAI,EAAEmkC,YAAY,CAAC9hC,MAAM,EAAE,IAAI,CAAC,GAChD+uB,6EAAiB,CAACpxB,IAAI,EAAEmkC,YAAY,CAAC9hC,MAAM,CAAC;UAChDwB,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAE8hC,aAAa;QACxC,CAAC,EAAE;UACD97B,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CAAC;MAAC,CACD,CACJ,EACF,CAAC6G,UAAU,CAACR,aAAa,IACxBla,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACErE,wDAAA,CAAC6iC,qDAAQ;UACPx9B,SAAS,EAAEN,mEAAM,CAACglC,QAAS;UAC3B12B,KAAK,EAAE/R,IAAI,CAAC,eAAe,CAAE;UAC7BwS,OAAO,EAAEkwB,cAAe;UACxBgG,OAAO,EAAE/F;QAAkB,CAC5B,CAAC,EAEFjkC,wDAAA;UAAKqF,SAAS,EAAEN,mEAAM,CAACklC,mBAAoB;UAAA5lC,QAAA,EACxC/C,IAAI,CAAC,qBAAqB;QAAC,CACzB,CAAC;MAAA,CACN,CACH;IAAA,CACY,CAChB,EACAG,SAAS,IACRrB,yDAAA,CAACu3B,0DAAa;MACZvvB,MAAM,EAAEu7B,oBAAqB;MAC7B/5B,OAAO,EAAEi6B,mBAAoB;MAC7BtF,cAAc,EAAE0H,oBAAqB;MACrCniC,KAAK,EAAExC,IAAI,CAAC,sBAAsB,CAAE;MAAA+C,QAAA,GAEpCrE,wDAAA;QAAAqE,QAAA,EACG/C,IAAI,CAAC,gCAAgC,EAAE;UACtCqC,MAAM,EAAE+uB,6EAAiB,CAACpxB,IAAI,EAAEG,SAAS,CAAC4P,cAAe,CAAC;UAC1DlM,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEgjC,iBAAkB;QAC7C,CAAC,EAAE;UACDh9B,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CAAC;MAAC,CACC,CAAC,EACL2wB,gBAAgB,IACf5kC,wDAAA;QAAAqE,QAAA,EACG/C,IAAI,CAAC,kCAAkC,EAAE;UACxC0T,KAAK,EAAE2vB;QACT,CAAC,EAAE;UACDr9B,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE,IAAI;UAClBmB,WAAW,EAAEuvB;QACf,CAAC;MAAC,CACC,CACN,EACD3kC,wDAAA;QAAAqE,QAAA,EAAM/C,IAAI,CAAC,6BAA6B;MAAC,CAAM,CAAC;IAAA,CACnC,CAChB;EAAA,CACD,CAAC;AAEP,CAAC;AAED,iEAAepC,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAM7K,QAAQ,GAAG6K,KAAK,EAAE9K,IAAI;EAC5B,MAAMgB,WAAW,GAAGf,QAAQ,IAAI,MAAM,IAAIA,QAAQ;EAClD,MAAM4H,aAAa,GAAGsC,MAAM,CAACtC,aAAa;EAE1C,MAAMoJ,MAAM,GAAGjQ,WAAW,IAAIf,QAAQ,CAACgR,MAAM;EAC7C,MAAMqxB,QAAQ,GAAGrxB,MAAM,GAAG1E,6DAAU,CAACpC,MAAM,EAAE8G,MAAM,CAAC,GAAG/P,SAAS;EAChE,MAAMqhC,UAAU,GAAGz3B,KAAK,EAAEhL,MAAM,GAAGyM,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAAChL,MAAM,CAAC,GAAGoB,SAAS;EAC/E,MAAMwe,IAAI,GAAG6iB,UAAU,IAAIrlB,oEAAa,CAACqlB,UAAU,CAAC,GAAGA,UAAU,GAAGrhC,SAAS;EAC7E,MAAMwhC,cAAc,GAAGhjB,IAAI,IAAIsiB,iEAAgB,CAACtiB,IAAI,EAAE,cAAc,CAAC;EACrE,MAAM4V,WAAW,GAAGP,6DAAU,CAAC5qB,MAAM,EAAEtC,aAAc,CAAC;EACtD,MAAM+6B,aAAa,GAAG93B,KAAK,EAAEtE,WAAW,IAAIqB,aAAa,KAAKiD,KAAK,CAACtE,WAAW,GAC3E+F,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAACtE,WAAW,CAAC,GAAGtF,SAAS;EACrD,MAAMhB,sBAAsB,GAAGo1B,WAAW,EAAE7xB,WAAW;EACvD,MAAMtD,wBAAwB,GAAGgK,MAAM,CAAChK,wBAAwB,EAAEo1B,QAAQ;EAE1E,MAAMv1B,IAAI,GAAGgB,WAAW,GAAGf,QAAQ,CAACD,IAAI,GAAGC,QAAQ;EACnD,MAAMypC,gBAAgB,GAAG1pC,IAAI,EAAEoB,IAAI,KAAK,gBAAgB,IAAIpB,IAAI,CAAC0pC,gBAAgB;EACjF,MAAMlH,cAAc,GAAGkH,gBAAgB,GAAGn9B,6DAAU,CAACpC,MAAM,EAAEu/B,gBAAgB,CAAC,GAAGxoC,SAAS;EAE1F,OAAO;IACLohC,QAAQ;IACRC,UAAU;IACVC,cAAc;IACd36B,aAAa;IACb46B,wBAAwB,EAAEt4B,MAAM,CAACqM,SAAS,CAACisB,wBAAwB;IACnEE,cAAc,EAAEx4B,MAAM,CAACqM,SAAS,CAACmsB,cAAc;IAC/CD,cAAc;IACdxiC,sBAAsB;IACtBC,wBAAwB;IACxBm1B,WAAW;IACXsN;EACF,CAAC;AACH,CACF,CAAC,CAACtlC,aAAa,CAAC,CAAC,E;;;;;;;;;;;;;;AChgCjB;AACA,iEAAe,CAAC,sFAAsF,E;;;;;;;;;;;;;;;;;;;;;;;;;ACDtC;AAChB;AAIwB;AACZ;AAC4B;AAExC;AACgB;AAExB;AACF;AAEa;AAAA;AAMnD,MAAME,eAAe,GAAGA,CAAC;EACvBsN;AACQ,CAAC,KAAK;EACd,MAAM;IAAE8+B;EAAqB,CAAC,GAAGhrC,mDAAU,CAAC,CAAC;EAC7C,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM8L,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxCwqC,oBAAoB,CAAC,CAAC;EACxB,CAAC,CAAC;EAEF,MAAMC,cAAc,GAAG/f,6DAAW,CAAC,MAAM;IACvC,IAAI,CAAChf,KAAK,EAAE,OAAO,EAAE;IAErB,IAAIA,KAAK,CAACg/B,SAAS,EAAE;MACnB,MAAMC,aAAa,GAAGj/B,KAAK,CAACg/B,SAAS,GAAGh/B,KAAK,CAACg/B,SAAS,GAAG5qC,+DAAa,CAAC,CAAC,GAAG,CAAC;MAC7E,OAAO4B,IAAI,CAAC,mBAAmB,EAAE;QAC/BkpC,YAAY,EAAEL,2EAAmB,CAAC7oC,IAAI,EAAEipC,aAAa;MACvD,CAAC,EACD;QACEjjC,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE;MAChB,CAAC,CAAC;IACJ;IAEA,IAAI3I,KAAK,CAACm/B,MAAM,EAAE;MAChB,OAAOhkC,8FAAsB,CAAC6E,KAAK,CAACm/B,MAAM,CAAC;IAC7C;IAEA,OAAOnpC,IAAI,CAAC,iBAAiB,CAAC;EAChC,CAAC,EAAE,CAACgK,KAAK,EAAEhK,IAAI,CAAC,CAAC;EAEjB,OACElB,yDAAA,CAAC4d,iDAAK;IACJ5V,MAAM,EAAE5D,OAAO,CAAC8G,KAAK,CAAE;IACvBjG,SAAS,EAAC,QAAQ;IAClBuE,OAAO,EAAE6B,WAAY;IACrB3H,KAAK,EAAExC,IAAI,CAAC,iBAAiB,CAAE;IAC/BopC,eAAe,EAAE3lC,oEAAM,CAAC2G,MAAO;IAAArH,QAAA,GAE/BrE,wDAAA;MAAGqF,SAAS,EAAEN,oEAAM,CAACjC,OAAQ;MAAAuB,QAAA,EAC1BgmC,cAAc,CAAC;IAAC,CAChB,CAAC,EACJrqC,wDAAA,CAACoL,kDAAM;MACL7G,OAAO,EAAEkH,WAAY;MAAApH,QAAA,EAEpB/C,IAAI,CAAC,IAAI;IAAC,CACL,CAAC;EAAA,CACJ,CAAC;AAEZ,CAAC;AAED,iEAAepC,sDAAI,CAAClB,eAAe,CAAC,E;;;;;;;;;;;;;;ACxEpC;AACA,iEAAe,CAAC,sIAAsI,E;;;;;;;;;;;;;;;;;;;;;;;;;ACDnG;AACS;AAKF;AACe;AACS;AAEhB;AAClB;AACgB;AAEV;AAEQ;AAAA;AAW9D,MAAMc,0BAA0B,GAAGA,CAAC;EAClCwM,KAAK;EAAEq/B,UAAU;EAAEvH;AACE,CAAC,KAAK;EAC3B,MAAM;IACJwH,+BAA+B;IAAEC,qBAAqB;IAAEtW;EAC1D,CAAC,GAAGn1B,mDAAU,CAAC,CAAC;EAChB,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAMw/B,mBAAmB,GAAG7/B,mEAAgB,CAAC0/B,UAAU,CAAC;EACxD,MAAMI,sBAAsB,GAAG9/B,mEAAgB,CAACm4B,aAAa,CAAC;EAE9D,MAAM4H,eAAe,GAAGprC,kEAAe,CAAE4H,EAAU,IAAK;IACtDojC,+BAA+B,CAAC,CAAC;IACjCrW,QAAQ,CAAC;MAAE/sB;IAAG,CAAC,CAAC;EAClB,CAAC,CAAC;EAEF,MAAM23B,aAAa,GAAGv/B,kEAAe,CAAC,MAAM;IAC1C,IAAI,CAAC4L,cAAc,EAAEhL,IAAI,CAACmC,SAAS,IAAI,CAAC6I,cAAc,CAAC/H,KAAK,EAAE;IAE9DonC,qBAAqB,CAAC;MACpBrqC,IAAI,EAAEgL,cAAc,CAAChL,IAAI,CAACmC,SAAS;MACnCc,KAAK,EAAE+H,cAAc,CAAC/H;IACxB,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,IAAI,CAAC+H,cAAc,IAAI,CAACu/B,sBAAsB,EAAE,OAAOrpC,SAAS;EAEhE,MAAM;IAAE+B,KAAK;IAAE2iC;EAAQ,CAAC,GAAG56B,cAAc;EAEzC,MAAMuI,WAAW,GAAGpN,wFAAsB,CAAC;IACzCC,eAAe,EAAEw/B,OAAO;IAAEv/B,SAAS,EAAEkkC,sBAAsB;IAC3DjkC,MAAM,EAAEgkC,mBAAmB;IAAE/jC,UAAU,EAAEikC,eAAe;IAAE1pC;EAC5D,CAAC,CAAC;EAEF,OACElB,yDAAA,CAACu3B,yDAAa;IACZvvB,MAAM,EAAEA,MAAO;IACftE,KAAK,EAAExC,IAAI,CAAC,4BAA4B,CAAE;IAC1CsI,OAAO,EAAEghC,+BAAgC;IACzCvM,YAAY,EAAE/8B,IAAI,CAAC,6BAA6B,EAAE;MAChDqC,MAAM,EAAE+J,4EAAiB,CAACpM,IAAI,EAAEmC,KAAK,EAAE;QAAE4Q,MAAM,EAAE;MAAK,CAAC;IACzD,CAAC,EAAE;MAAE/M,SAAS,EAAE;IAAK,CAAC,CAAE;IACxBi3B,cAAc,EAAEY,aAAc;IAAA96B,QAAA,GAE9BrE,wDAAA;MAAKqF,SAAS,EAAEN,+EAAM,CAACkmC,WAAY;MAAA5mC,QAAA,EAAE/C,IAAI,CAAC,kCAAkC;IAAC,CAAM,CAAC,EACnFkD,OAAO,CAACuP,WAAW,CAAC,IACnB/T,wDAAA;MAAKqF,SAAS,EAAEN,+EAAM,CAACmmC,eAAgB;MAAA7mC,QAAA,EACpC0P;IAAW,CACT,CACN;EAAA,CACY,CAAC;AAEpB,CAAC;AAED,iEAAe7U,sDAAI,CACjByI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAChE,MAAMq/B,UAAU,GAAGr/B,KAAK,EAAE86B,OAAO,CAACn/B,QAAQ,GAAG8F,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAAC86B,OAAO,CAACn/B,QAAQ,CAAC,GAAGvF,SAAS;EACnG,MAAM0hC,aAAa,GAAG93B,KAAK,EAAE86B,OAAO,CAACp/B,WAAW,GAAG+F,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAAC86B,OAAO,CAACp/B,WAAW,CAAC,GAAGtF,SAAS;EAE5G,OAAO;IACLipC,UAAU;IACVvH;EACF,CAAC;AACH,CAAC,CAAC,CAACtkC,0BAA0B,CAC/B,CAAC,E;;;;;;;;;;;;;;AC7FD;AACA,iEAAe,CAAC,2WAA2W,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD/T;AACA;AAKL;AACS;AAK1B;AACoD;AAG5C;AACA;AACc;AACM;AAEA;AAClB;AACgB;AAEV;AACqB;AACrB;AACa;AAEX;AAAA;AAExD,MAAMysC,+BAA+B,GAAG,EAAE;AAc1C,MAAMxsC,oBAAoB,GAAGA,CAAC;EAC5BuM,KAAK;EAAE83B,aAAa;EAAEoI,eAAe;EAAEC,aAAa;EAAEC,YAAY;EAAEC;AAC/C,CAAC,KAAK;EAC3B,MAAM;IACJC,yBAAyB;IAAEC;EAC7B,CAAC,GAAGzsC,mDAAU,CAAC,CAAC;EAChB,MAAMkC,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,oEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAMwgC,kBAAkB,GAAG7gC,oEAAgB,CAACm4B,aAAa,CAAC;EAE1D,MAAMjE,aAAa,GAAGv/B,mEAAe,CAAC,MAAM;IAC1C,IAAI,CAAC4L,cAAc,EAAE;IAErBqgC,mBAAmB,CAAC;MAAE7F,SAAS,EAAEx6B,cAAc,CAACw6B;IAAU,CAAC,CAAC;IAC5D4F,yBAAyB,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEF,MAAMxmC,cAAc,GAAGjG,yDAAO,CAAC,MAAM;IACnC,OAAOqM,cAAc,EAAEhL,IAAI,IAAIiE,wEAAiB,CAAC+G,cAAc,CAAChL,IAAI,CAAC;EACvE,CAAC,EAAE,CAACgL,cAAc,EAAEhL,IAAI,CAAC,CAAC;EAE1B,MAAMurC,YAAY,GAAGvgC,cAAc,EAAE/H,KAAK,CAACC,QAAQ,KAAKqV,sDAAiB;EACzE,MAAMizB,UAAU,GAAGD,YAAY,GAAGN,aAAa,GAAGD,eAAe;EACjE,MAAMS,WAAW,GAAGzgC,cAAc,EAAE/H,KAAK,CAACE,MAAM,IAAI,CAAC;EACrD,MAAMuoC,aAAa,GAAGF,UAAU,GAC3BxkB,iDAAK,CAACykB,WAAW,GAAGD,UAAU,EAAED,YAAY,GAAG,CAAC,GAAG,CAAC,CAAC,GACtDE,WAAW;EAEf,MAAMpZ,SAAoB,GAAG1zB,yDAAO,CAAC,MAAM;IACzC,IAAI,CAACiG,cAAc,EAAE,OAAO,EAAE;IAE9B,MAAM;MAAEe,KAAK;MAAEX,QAAQ;MAAEK;IAAQ,CAAC,GAAGT,cAAc;IACnD,MAAM+mC,IAAe,GAAG,EAAE;IAE1B,IAAIhmC,KAAK,EAAE;MACTgmC,IAAI,CAAC7mB,IAAI,CAAC,CACRhkB,IAAI,CAAC,oBAAoB,CAAC,EAC1BlB,yDAAA;QAAMiF,SAAS,EAAEN,0EAAM,CAACqnC,cAAe;QAAA/nC,QAAA,GACrCrE,wDAAA;UAAAqE,QAAA,EAAO8B,KAAK,CAACC;QAAI,CAAO,CAAC,EACzBpG,wDAAA,CAACi2B,4DAAW;UAAA5xB,QAAA,EAAEu+B,+DAAa,CAACz8B,KAAK,CAACyiC,aAAa;QAAC,CAAc,CAAC;MAAA,CAC3D,CAAC,CACR,CAAC;IACJ;IAEA,IAAIpjC,QAAQ,EAAE;MACZ2mC,IAAI,CAAC7mB,IAAI,CAAC,CACRhkB,IAAI,CAAC,uBAAuB,CAAC,EAC7BlB,yDAAA;QAAMiF,SAAS,EAAEN,0EAAM,CAACqnC,cAAe;QAAA/nC,QAAA,GACrCrE,wDAAA;UAAAqE,QAAA,EAAOmB,QAAQ,CAACY;QAAI,CAAO,CAAC,EAC5BpG,wDAAA,CAACi2B,4DAAW;UAAA5xB,QAAA,EAAEu+B,+DAAa,CAACp9B,QAAQ,CAACojC,aAAa;QAAC,CAAc,CAAC;MAAA,CAC9D,CAAC,CACR,CAAC;IACJ;IAEA,IAAI/iC,OAAO,EAAE;MACXsmC,IAAI,CAAC7mB,IAAI,CAAC,CACRhkB,IAAI,CAAC,qBAAqB,CAAC,EAC3BlB,yDAAA;QAAMiF,SAAS,EAAEN,0EAAM,CAACqnC,cAAe;QAAA/nC,QAAA,GACrCrE,wDAAA;UAAAqE,QAAA,EAAOwB,OAAO,CAACO;QAAI,CAAO,CAAC,EAC3BpG,wDAAA,CAACi2B,4DAAW;UAAA5xB,QAAA,EAAEu+B,+DAAa,CAAC/8B,OAAO,CAAC+iC,aAAa;QAAC,CAAc,CAAC;MAAA,CAC7D,CAAC,CACR,CAAC;IACJ;IAEA,MAAMpoC,IAAI,GAAGgL,cAAc,EAAEhL,IAAI;IACjC,IAAIA,IAAI,EAAEwoC,WAAW,IAAIxoC,IAAI,CAACyoC,aAAa,EAAE;MAC3C,MAAMC,cAAc,GAAG9xB,4EAAsB,CAAC5W,IAAI,CAACwoC,WAAW,EAAExoC,IAAI,CAACyoC,aAAa,EAAE3nC,IAAI,CAAC6F,IAAI,CAAC;MAC9FglC,IAAI,CAAC7mB,IAAI,CAAC,CACRhkB,IAAI,CAAC,eAAe,CAAC,EACrBA,IAAI,CAAC,qBAAqB,EAAE;QAAEqC,MAAM,EAAEulC;MAAe,CAAC,CAAC,CACxD,CAAC;IACJ;IAEA,OAAOiD,IAAI;EACb,CAAC,EAAE,CAAC/mC,cAAc,EAAE9D,IAAI,EAAEkK,cAAc,EAAEhL,IAAI,CAAC,CAAC;EAEhD,MAAM6rC,YAAY,GAAGltC,yDAAO,CAAC,MAAM;IACjC,IAAI,CAACqM,cAAc,EAAE,OAAO9J,SAAS;IAErC,MAAM;MAAElB;IAAK,CAAC,GAAGgL,cAAc;IAC/B,MAAM;MAAE8gC;IAAe,CAAC,GAAG9rC,IAAI;IAC/B,IAAI,CAAC8rC,cAAc,IAAIA,cAAc,IAAI,CAAC,IAAIJ,aAAa,IAAI,CAAC,EAAE,OAAOxqC,SAAS;IAElF,MAAM6qC,WAAW,GAAGD,cAAc,GAAG,GAAG;IAExC,IAAIE,eAAuB;IAC3B,IAAIT,YAAY,EAAE;MAChB,IAAI,CAACJ,UAAU,EAAE,OAAOjqC,SAAS;MACjC8qC,eAAe,GAAGnB,qEAAe,CAACa,aAAa,EAAEP,UAAU,EAAE,IAAI,CAAC,GAAG,GAAG;IAC1E,CAAC,MAAM;MACL,IAAI,CAACD,YAAY,EAAE,OAAOhqC,SAAS;MACnC8qC,eAAe,GAAGN,aAAa,GAAGR,YAAY,GAAG,GAAG;IACtD;IAEA,MAAMe,OAAO,GAAGF,WAAW,IAAIC,eAAe;IAC9C,MAAM3zB,OAAO,GAAG4zB,OAAO,GACnB,CAAC,CAAC,GAAGD,eAAe,GAAGD,WAAW,IAAI,GAAG,GACzC,CAACC,eAAe,GAAGD,WAAW,GAAG,CAAC,IAAI,GAAG;IAE7C,IAAI1zB,OAAO,IAAI0yB,+BAA+B,EAAE,OAAO7pC,SAAS;IAEhE,OAAO;MAAEmX,OAAO;MAAE6zB,KAAK,EAAED;IAAQ,CAAC;EACpC,CAAC,EAAE,CAACjhC,cAAc,EAAE0gC,aAAa,EAAEH,YAAY,EAAEJ,UAAU,EAAED,YAAY,CAAC,CAAC;EAE3E,IAAI,CAAClgC,cAAc,IAAI,CAACsgC,kBAAkB,EAAE,OAAOpqC,SAAS;EAE5D,MAAM;IAAElB,IAAI;IAAEiD;EAAM,CAAC,GAAG+H,cAAc;EACtC,MAAM61B,QAAQ,GAAG//B,IAAI,CAAC,YAAY,EAAE;IAAEwC,KAAK,EAAEtD,IAAI,CAACsD,KAAK;IAAEC,MAAM,EAAEvD,IAAI,CAACuD;EAAO,CAAC,CAAC;EAC/E,MAAM4oC,SAAS,GAAGpmC,mEAAY,CAACjF,IAAI,EAAEwqC,kBAAkB,CAAC;EAExD,MAAM3wB,cAAc,GAAGmwB,qFAA0B,CAAChqC,IAAI,EAAEmC,KAAK,CAAC;EAC9D,MAAMmpC,4BAA4B,GAAGb,YAAY,GAC7CrJ,0EAAe,CAACphC,IAAI,EAAE4qC,aAAa,EAAE,IAAI,CAAC,GAC1CxZ,4EAAiB,CAACpxB,IAAI,EAAE4qC,aAAa,CAAC;EAC1C,MAAMW,4BAA4B,GAAGd,YAAY,GAC7C7yB,0EAAe,CAAC5X,IAAI,EAAE4qC,aAAa,EAAE;IAAEzvB,sBAAsB,EAAE;EAAK,CAAC,CAAC,GACtE/O,4EAAiB,CAACpM,IAAI,EAAE4qC,aAAa,EAAE;IAAE73B,MAAM,EAAE;EAAK,CAAC,CAAC;EAE5D,OACEjU,yDAAA,CAACu3B,0DAAa;IACZvvB,MAAM,EAAEA,MAAO;IACftE,KAAK,EAAExC,IAAI,CAAC,sBAAsB,CAAE;IACpCsI,OAAO,EAAEgiC,yBAA0B;IACnCvN,YAAY,EAAE/8B,IAAI,CAAC,uBAAuB,EAAE;MAC1CqC,MAAM,EAAEkpC;IACV,CAAC,EAAE;MAAEvlC,SAAS,EAAE;IAAK,CAAC,CAAE;IACxBi3B,cAAc,EAAEY,aAAc;IAAA96B,QAAA,GAE9BrE,wDAAA,CAACkF,yEAAmB;MAClBC,IAAI,EAAE2mC,kBAAmB;MACzBtrC,IAAI,EAAEA;IAAK,CACZ,CAAC,EACFR,wDAAA;MAAGqF,SAAS,EAAEN,0EAAM,CAACgP,WAAY;MAAA1P,QAAA,EAC9B/C,IAAI,CAAC,qBAAqB,EAAE;QAC3Bd,IAAI,EAAE6gC,QAAQ;QACd/3B,IAAI,EAAEqjC,SAAS;QACflpC,KAAK,EAAE0X;MACT,CAAC,EAAE;QAAE7T,SAAS,EAAE,IAAI;QAAE2M,YAAY,EAAE;MAAK,CAAC;IAAC,CAC1C,CAAC,EACJjU,wDAAA;MAAGqF,SAAS,EAAEN,0EAAM,CAAC+nC,WAAY;MAAAzoC,QAAA,EAC9B/C,IAAI,CAAC,wBAAwB,EAAE;QAC9BqC,MAAM,EAAEipC;MACV,CAAC,EAAE;QAAEtlC,SAAS,EAAE,IAAI;QAAE2M,YAAY,EAAE;MAAK,CAAC;IAAC,CAC1C,CAAC,EACHzP,OAAO,CAACquB,SAAS,CAACnpB,MAAM,CAAC,IACxB1J,wDAAA,CAACk2B,0DAAS;MAACrD,SAAS,EAAEA,SAAU;MAACxtB,SAAS,EAAEN,0EAAM,CAAC6uB;IAAM,CAAE,CAC5D,EACAyY,YAAY,IACXrsC,wDAAA;MAAGqF,SAAS,EAAEgnC,YAAY,CAACK,KAAK,GAAG3nC,0EAAM,CAACgoC,OAAO,GAAGhoC,0EAAM,CAACioC,OAAQ;MAAA3oC,QAAA,EAChE/C,IAAI,CAAC+qC,YAAY,CAACK,KAAK,GAAG,mBAAmB,GAAG,oBAAoB,EAAE;QACrE7zB,OAAO,EAAE+pB,+DAAa,CAACyJ,YAAY,CAACxzB,OAAO,EAAE,CAAC,CAAC;QAC/CrY,IAAI,EAAEA,IAAI,CAACsD;MACb,CAAC,EAAE;QAAEwD,SAAS,EAAE,IAAI;QAAE2M,YAAY,EAAE;MAAK,CAAC;IAAC,CAC1C,CACJ;EAAA,CACY,CAAC;AAEpB,CAAC;AAED,iEAAe/U,sDAAI,CACjByI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAChE,MAAM83B,aAAa,GAAG93B,KAAK,EAAEhL,MAAM,GAAGyM,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAAChL,MAAM,CAAC,GAAGoB,SAAS;EAClF,MAAM8pC,eAAe,GAAGL,kFAA+B,CAACxgC,MAAM,CAAC;EAC/D,MAAM8gC,aAAa,GAAGL,gFAA6B,CAACzgC,MAAM,CAAC;EAE3D,MAAMsiC,qBAAqB,GAAGtiC,MAAM,CAACqM,SAAS,EAAEi2B,qBAAqB;EACrE,MAAMvB,YAAY,GAAGuB,qBAAqB,GAAGA,qBAAqB,GAAG,IAAI,GAAGvrC,SAAS;EACrF,MAAMiqC,UAAU,GAAGhhC,MAAM,CAACqM,SAAS,EAAE20B,UAAU;EAE/C,OAAO;IACLvI,aAAa;IACboI,eAAe;IACfC,aAAa;IACbC,YAAY;IACZC;EACF,CAAC;AACH,CAAC,CAAC,CAAC5sC,oBAAoB,CACzB,CAAC,E;;;;;;;;;;;;;;ACjOD;AACA,iEAAe,CAAC,wFAAwF,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACCnE;AACkC;AAED;AACT;AACT;AACU;AAEE;AACV;AAEM;AACE;AAEP;AAAA;AAWvD,MAAMlB,mBAAmB,GAAGA,CAAC;EAC3ByN,KAAK;EACLjD,aAAa;EACbG;AACqB,CAAC,KAAK;EAC3B,MAAM;IAAE2kC,wBAAwB;IAAEC;EAAc,CAAC,GAAGhuC,mDAAU,CAAC,CAAC;EAEhE,MAAMmC,OAAO,GAAG1B,6DAAU,CAAC,CAAC;EAC5B,MAAMuI,MAAM,GAAGkD,KAAK;EAEpB,MAAM,CAAC3C,WAAW,EAAEC,cAAc,CAAC,GAAGnB,0DAAQ,CAAS,EAAE,CAAC;EAE1D,MAAMoB,gBAAgB,GAAG1J,yDAAO,CAAC,MAAM;IACrC,MAAMwL,MAAM,GAAGjD,kDAAS,CAAC,CAAC;IAC1B,MAAM2lC,WAAW,GAAG7kC,OAAO,GAAGA,OAAO,CAAC8kC,MAAM,CAACjlC,aAAc,CAAC,GAAG3G,SAAS;IACxE,MAAM6rC,eAAe,GAAGF,WAAW,GAAGtlC,yEAAkB,CAAC;MAAEoB,GAAG,EAAEkkC,WAAW;MAAEjkC,KAAK,EAAET;IAAY,CAAC,CAAC,GAAG,EAAE;IAEvG,OAAOV,uEAAW,CAACD,uDAAM,CAACulC,eAAe,CAAC,CAAClkC,MAAM,CAAE/I,MAAM,IAAK;MAC5D,OAAO4sC,gEAAa,CAACviC,MAAM,EAAErK,MAAM,CAAC;IACtC,CAAC,CAAC,EAAEoB,SAAS,EAAE,CAAC2G,aAAa,CAAE,CAAC;EAClC,CAAC,EAAE,CAACA,aAAa,EAAEM,WAAW,EAAEH,OAAO,CAAC,CAAC;EAEzC,MAAMgB,2BAA2B,GAAG5J,kEAAe,CAAE4tC,UAAkB,IAAK;IAC1EJ,aAAa,CAAC;MAAEzjC,SAAS,EAAE6jC;IAAW,CAAC,CAAC;IACxCL,wBAAwB,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,OACEntC,wDAAA,CAACmI,mEAAW;IACV9C,SAAS,EAAEN,yEAAM,CAACO,IAAK;IACvB8C,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAEujC,wBAAyB;IAClCrpC,KAAK,EAAEvC,OAAO,CAAC,iCAAiC,CAAE;IAClDsI,cAAc;IACdC,mBAAmB;IACnBC,eAAe;IAAA1F,QAAA,EAEfrE,wDAAA,CAACkI,kEAAU;MACT7C,SAAS,EAAEN,yEAAM,CAACmF,MAAO;MACzBC,OAAO,EAAEtB,gBAAiB;MAC1BuB,WAAW,EAAEzB,WAAY;MACzB0B,iBAAiB,EAAE9I,OAAO,CAAC,QAAQ,CAAE;MACrCmJ,kBAAkB,EAAElB,2BAA4B;MAChDc,cAAc,EAAE1B,cAAe;MAC/B2B,YAAY;MACZC,kBAAkB;MAClBC,UAAU;MACVgjC,aAAa;IAAA,CACd;EAAC,CACS,CAAC;AAElB,CAAC;AAED,iEAAevuC,sDAAI,CAACyI,mDAAU,CAAYgD,MAAM,IAA2B;EACzE,MAAM;IAAEtC;EAAc,CAAC,GAAGsC,MAAM;EAEhC,OAAO;IACLtC,aAAa;IACbG,OAAO,EAAEmC,MAAM,CAACG,WAAW,EAAEtC;EAC/B,CAAC;AACH,CAAC,CAAC,CAAC3K,mBAAmB,CAAC,CAAC,E;;;;;;;;;;;;;;ACvFxB;AACA,iEAAe,CAAC,2WAA2W,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCtV;AACuB;AAOtB;AACmD;AACC;AAE1B;AAEE;AAClB;AACgB;AAExB;AACI;AACE;AACR;AAE0B;AAAA;AAiBhE,MAAMI,4BAA4B,GAAGA,CAAC;EACpCqN,KAAK;EAAEkgC,eAAe;EACtBoC,oBAAoB;EAAEC,oBAAoB;EAAEC,oBAAoB;EAChErC,aAAa;EAAEsC,kBAAkB;EAAEC,kBAAkB;EAAErC;AAClC,CAAC,KAAK;EAC3B,MAAM;IACJsC,iCAAiC;IACjC5sC,kBAAkB;IAClBD,mBAAmB;IACnBR;EACF,CAAC,GAAGxB,mDAAU,CAAC,CAAC;EAChB,MAAMgJ,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAM,CAAC7H,KAAK,EAAEyqC,QAAQ,CAAC,GAAGzmC,0DAAQ,CAAqB/F,SAAS,CAAC;EACjE,MAAM,CAACqqC,YAAY,EAAEoC,eAAe,CAAC,GAAG1mC,0DAAQ,CAAC,KAAK,CAAC;EAEvD,MAAM+D,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAM;IAAE9K,IAAI,EAAEC;EAAS,CAAC,GAAG+K,cAAc,IAAI,CAAC,CAAC;EAC/C,MAAMhK,WAAW,GAAGf,QAAQ,IAAI,MAAM,IAAIA,QAAQ;EAClD,MAAMgB,SAAS,GAAGD,WAAW,GAAGf,QAAQ,GAAGiB,SAAS;EACpD,MAAM0sC,QAAQ,GAAG5pC,OAAO,CAACf,KAAK,CAAC;EAE/B,MAAMnC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM0uC,iBAAiB,GAAGzuC,kEAAe,CAAE+R,CAAC,IAAK;IAC/C,MAAME,KAAK,GAAGF,CAAC,CAACC,MAAM,CAACC,KAAK;IAC5B,MAAM9N,MAAM,GAAGuqC,UAAU,CAACz8B,KAAK,CAAC;IAChC,MAAM08B,SAAS,GAAGxC,YAAY,GAAGiC,kBAAkB,GAAGH,oBAAoB;IAC1E,MAAMW,MAAM,GAAG38B,KAAK,KAAK,EAAE,IAAI6oB,MAAM,CAAC+T,KAAK,CAAC1qC,MAAM,CAAC,GAAGrC,SAAS,GAC3D6sC,SAAS,GAAG39B,IAAI,CAAC89B,GAAG,CAAC3qC,MAAM,EAAEwqC,SAAS,CAAC,GAAGxqC,MAAM;IACpDmqC,QAAQ,CAACM,MAAM,CAAC;EAClB,CAAC,CAAC;EAEF,MAAM/iC,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxCquC,iCAAiC,CAAC,CAAC;EACrC,CAAC,CAAC;EAEF,MAAMU,cAAc,GAAG/uC,kEAAe,CAAC,MAAM;IAC3C,IAAI,CAAC6B,SAAS,IAAIA,SAAS,CAACjB,IAAI,CAACoB,IAAI,KAAK,gBAAgB,IAAI,CAACH,SAAS,CAACkB,SAAS,IAAI,CAACc,KAAK,EAAE;IAC9FwqC,iCAAiC,CAAC,CAAC;IACnC5sC,kBAAkB,CAAC,CAAC;IACpBD,mBAAmB,CACjB;MACEZ,IAAI,EAAEiB,SAAS,CAACkB,SAAS;MACzBc,KAAK,EAAE;QACLC,QAAQ,EAAEqoC,YAAY,GAAG,KAAK,GAAG,KAAK;QACtCpoC,MAAM,EAAEooC,YAAY,GAAG4B,uEAAiB,CAAClqC,KAAK,CAAC,GAAGA,KAAK;QACvDG,KAAK,EAAE;MACT;IACF,CAAC,CAAC;IACJhD,gBAAgB,CAAC;MACfiD,IAAI,EAAE,cAAc;MACpBf,OAAO,EAAE;QACPK,GAAG,EAAE,wBAAwB;QAC7BC,SAAS,EAAE;UACT5C,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;YAAEwC,KAAK,EAAErC,SAAS,CAACjB,IAAI,CAACsD,KAAK;YAAEC,MAAM,EAAEtC,SAAS,CAACjB,IAAI,CAACuD;UAAO,CAAC;QACzF;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EACF,MAAMioC,UAAU,GAAGD,YAAY,GAAGN,aAAa,GAAGD,eAAe;EACjE,MAAMoD,SAAS,GAAG7C,YAAY,GAAGgC,kBAAkB,GAAGH,oBAAoB;EAC1E,MAAMiB,cAAc,GAAGT,QAAQ,IAAI3qC,KAAK,IAAImrC,SAAS;EAErD,OACExuC,yDAAA,CAAC4d,kDAAK;IACJ5V,MAAM,EAAEA,MAAO;IACftE,KAAK,EAAEioC,YAAY,GAAGzqC,IAAI,CAAC,YAAY,CAAC,GAAGA,IAAI,CAAC,cAAc,CAAE;IAChEuI,cAAc;IACdud,MAAM;IACNxd,OAAO,EAAE6B,WAAY;IAAApH,QAAA,GAErBrE,wDAAA;MAAKqF,SAAS,EAAEN,kFAAM,CAAC+pC,UAAW;MAAAzqC,QAAA,EAChCrE,wDAAA,CAAC43B,sDAAS;QACRvkB,KAAK,EAAE04B,YAAY,GAAGzqC,IAAI,CAAC,iBAAiB,CAAC,GAAGA,IAAI,CAAC,mBAAmB,CAAE;QAC1E8R,QAAQ,EAAEi7B,iBAAkB;QAC5Bx8B,KAAK,EAAEpO,KAAK,EAAE+P,QAAQ,CAAC,CAAE;QACzBkrB,SAAS,EAAC,SAAS;QACnBxmB,QAAQ,EAAE,CAAE;QACZymB,yBAAyB,EAAE,CAACoN;MAAa,CAC1C;IAAC,CACC,CAAC,EAEN3rC,yDAAA;MAAKiF,SAAS,EAAEN,kFAAM,CAACgqC,qBAAsB;MAAA1qC,QAAA,GAC3CjE,yDAAA;QAAAiE,QAAA,GACG,CAACwqC,cAAc,IAAIrqC,OAAO,CAACwnC,UAAU,CAAC,IAAI1qC,IAAI,CAAC,qCAAqC,EAAE;UACrFsS,KAAK,EAAEm4B,YAAY,GAAGrJ,0EAAe,CAACphC,IAAI,EAAEstC,SAAS,CAAC,GAAGlc,4EAAiB,CAACpxB,IAAI,EAAEstC,SAAS;QAC5F,CAAC,EAAE;UACD36B,YAAY,EAAE,IAAI;UAClB3M,SAAS,EAAE;QACb,CAAC,CAAC,EACDunC,cAAc,IAAI,CAAC,MAAM;UACxB,MAAMG,mBAAmB,GAAGhD,UAAU,GAAGtR,MAAM,CAAC,CAACj3B,KAAK,GAAGuoC,UAAU,EAAEiD,OAAO,CAAC,CAAC,CAAC,GAAGxrC,KAAK;UACvF,OAAOnC,IAAI,CAAC,oCAAoC,EAC9C;YACEsS,KAAK,EAAEm4B,YAAY,GACfrJ,0EAAe,CAACphC,IAAI,EAAE0tC,mBAAmB,CAAC,GAC1Ctc,4EAAiB,CAACpxB,IAAI,EAAE0tC,mBAAmB;UACjD,CAAC,EACD;YACE/6B,YAAY,EAAE,IAAI;YAClB3M,SAAS,EAAE;UACb,CAAC,CAAC;QACN,CAAC,EAAE,CAAC;MAAA,CACA,CAAC,EAENunC,cAAc,IAAIrqC,OAAO,CAACunC,YAAY,GAAGJ,UAAU,GAAGmC,oBAAoB,CAAC,IAC1E9tC,wDAAA;QAAMqF,SAAS,EAAEN,kFAAM,CAACmqC,gBAAiB;QAAA7qC,QAAA,EACtC,KAAK+S,4EAAsB,CAC1B20B,YAAY,GAAGV,qEAAe,CAAC5nC,KAAK,EAAEkoC,UAAW,CAAC,GAAGloC,KAAK,GAAGqqC,oBAAqB,EAClF,KAAK,EACLxsC,IAAI,CAAC6F,IACP,CAAC;MAAE,CACC,CACP;IAAA,CACE,CAAC,EAENnH,wDAAA,CAAC6iC,oDAAQ;MACPx9B,SAAS,EAAEN,kFAAM,CAACglC,QAAS;MAC3B12B,KAAK,EAAE/R,IAAI,CAAC,eAAe,CAAE;MAC7BwS,OAAO,EAAEi4B,YAAa;MACtB/B,OAAO,EAAEmE;IAAgB,CAC1B,CAAC,EAEFnuC,wDAAA;MAAKqF,SAAS,EAAEN,kFAAM,CAACklC,mBAAoB;MAAA5lC,QAAA,EACxC/C,IAAI,CAAC,0BAA0B;IAAC,CAC9B,CAAC,EAENlB,yDAAA,CAACgL,kDAAM;MAACmK,iBAAiB;MAACrB,QAAQ,EAAE,CAAC26B,cAAe;MAACtqC,OAAO,EAAEoqC,cAAe;MAAAtqC,QAAA,GAC1EwqC,cAAc,IAAIvtC,IAAI,CAAC,gBAAgB,EAAE;QACxCsS,KAAK,EAAEm4B,YAAY,GAAG7yB,0EAAe,CAAC5X,IAAI,EAAEmC,KAAK,CAAC,GAC9CiK,4EAAiB,CAACpM,IAAI,EAAEmC,KAAK,EAAE;UAAE4Q,MAAM,EAAE;QAAK,CAAC;MACrD,CAAC,EAAE;QAAE/M,SAAS,EAAE;MAAK,CAAC,CAAC,EACtB,CAACunC,cAAc,IAAIvtC,IAAI,CAAC,MAAM,CAAC;IAAA,CAC1B,CAAC;EAAA,CACJ,CAAC;AAEZ,CAAC;AAED,iEAAepC,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM6gC,eAAe,GAAGL,kFAA+B,CAACxgC,MAAM,CAAC;EAC/D,MAAMijC,oBAAoB,GAAGjjC,MAAM,CAACqM,SAAS,CAACm4B,4BAA4B,IAAI,CAAC;EAC/E,MAAMtB,oBAAoB,GAAGljC,MAAM,CAACqM,SAAS,CAACo4B,4BAA4B;EAE1E,MAAMC,yBAAyB,GAAG1kC,MAAM,CAACqM,SAAS,CAACq4B,yBAAyB;EAC5E,MAAMvB,oBAAoB,GAAGuB,yBAAyB,GAAGA,yBAAyB,GAAG,IAAI,GAAG,CAAC;EAE7F,MAAM5D,aAAa,GAAGL,gFAA6B,CAACzgC,MAAM,CAAC;EAC3D,MAAMojC,kBAAkB,GAAGL,yEAAmB,CAAC/iC,MAAM,CAACqM,SAAS,CAACs4B,0BAA0B,IAAI,CAAC,CAAC;EAChG,MAAMC,gBAAgB,GAAG5kC,MAAM,CAACqM,SAAS,CAACw4B,0BAA0B;EACpE,MAAMxB,kBAAkB,GAAGuB,gBAAgB,GAAG7B,yEAAmB,CAAC6B,gBAAgB,CAAC,GAAG7tC,SAAS;EAE/F,MAAMiqC,UAAU,GAAGhhC,MAAM,CAACqM,SAAS,CAAC20B,UAAU;EAE9C,OAAO;IACLH,eAAe;IACfoC,oBAAoB;IACpBC,oBAAoB;IACpBC,oBAAoB;IACpBrC,aAAa;IACbsC,kBAAkB;IAClBC,kBAAkB;IAClBrC;EACF,CAAC;AACH,CACF,CAAC,CAAC1tC,4BAA4B,CAAC,CAAC,E;;;;;;;;;;;;;;AC/MhC;AACA,iEAAe,CAAC,wgBAAwgB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD5d;AACA;AAO0B;AACzB;AACR;AACS;AAEJ;AACQ;AAClB;AACgB;AACE;AAEtB;AACc;AACZ;AACwC;AAC9C;AAC4C;AAE7B;AAAA;AAWvD,MAAM+G,WAAW,GAAG,CAAC,GAAGN,gEAAG;AAE3B,MAAMhG,mBAAmB,GAAGA,CAAC;EAC3B4M,KAAK;EACLwqB,WAAW;EACXrc;AACqB,CAAC,KAAK;EAC3B,MAAM;IACJi2B,wBAAwB;IACxBzuC;EACF,CAAC,GAAG7B,mDAAU,CAAC,CAAC;EAChB,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EACtB,MAAM;IAAE60B;EAAS,CAAC,GAAGT,+DAAY,CAAC,CAAC;EAEnC,MAAM3rB,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAM;IAAErH;EAAY,CAAC,GAAGuH,cAAc,IAAI,CAAC,CAAC;EAE5C,MAAMopB,aAAa,GAAG3wB,WAAW,EAAE4wB,SAAS;EAE5C,MAAMjvB,WAAW,GAAG6pC,yEAAc,CAACxrC,WAAW,EAAE0rC,iBAAiB,CAAC;EAElE,MAAMlkC,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxC8vC,wBAAwB,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,MAAME,WAAW,GAAGhwC,kEAAe,CAAC,MAAM;IACxC,IAAIqE,WAAW,EAAE;MACfhD,cAAc,CAAC;QAAEgD;MAAY,CAAC,CAAC;IACjC;IACAyrC,wBAAwB,CAAC,CAAC;EAC5B,CAAC,CAAC;EAEF,MAAM3zB,qBAAqB,GAAG5c,yDAAO,CAAC,MAAM;IAC1C,IAAI,CAAC8E,WAAW,IAAI,CAACmE,MAAM,EAAE,OAAO1G,SAAS;IAE7C,MAAMsa,cAAc,GAAG,CAAC/X,WAAW,CAACyB,WAAW,EAAEzB,WAAW,CAAC0B,SAAS,CAAC;IAEvE,OACE3F,wDAAA,CAAC8E,gFAAuB;MACtBO,SAAS,EAAEN,yEAAM,CAACkX,aAAc;MAChCxW,gBAAgB,EAAEuW,cAAe;MACjCpW,WAAW,EAAEA,WAAW,CAACiqC,WAAY;MACrC7a,SAAS,EAAE,KAAK,GAAGtwB,gEAAI;MACvBuwB,SAAS,EAAE,IAAK;MAChBhvB,WAAW,EAAEuuB,QAAQ,GAAG,EAAE,GAAG,EAAG;MAChCxuB,UAAU,EAAE;IAAE,CACf,CAAC;EAEN,CAAC,EAAE,CAAC/B,WAAW,EAAEmE,MAAM,EAAEosB,QAAQ,EAAE5uB,WAAW,CAAC,CAAC;EAEhD,MAAMkqC,kBAAkB,GAAG3wC,yDAAO,CAAC,MAAM;IACvC,OAAO;MACL,GAAG22B,WAAW;MACd7xB;IACF,CAAC;EACH,CAAC,EAAE,CAAC6xB,WAAW,EAAE7xB,WAAW,CAAC,CAAC;EAE9B,MAAMyH,MAAM,GAAGvM,yDAAO,CAAC,MAAM;IAC3B,OACEiB,yDAAA;MAAKiF,SAAS,EAAEN,yEAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BjE,yDAAA;QACEiF,SAAS,EAAEgI,gEAAc,CAACtI,yEAAM,CAACgrC,YAAY,CAAE;QAC/C55B,KAAK,EAAE7I,4DAAU,CAACsnB,aAAa,IAAI,UAAUA,aAAa,EAAE,CAAE;QAAAvwB,QAAA,GAG7D0X,qBAAqB,EACtB/b,wDAAA,CAAC4E,uDAAM;UAACO,IAAI,EAAE2qC,kBAAmB;UAAC5pC,IAAI,EAAElB,WAAY;UAACK,SAAS,EAAEN,yEAAM,CAACuB;QAAO,CAAE,CAAC,EACjFtG,wDAAA,CAAC03B,8DAAa;UACZvyB,IAAI,EAAE2qC,kBAAmB;UACzBzqC,SAAS,EAAEN,yEAAM,CAACirC,SAAU;UAC5BvH,eAAe;UACfwH,MAAM;UACNC,UAAU;QAAA,CACX,CAAC,EACFlwC,wDAAA;UAAGqF,SAAS,EAAEN,yEAAM,CAAC9C,MAAO;UAACkU,KAAK,EAAE7I,4DAAU,CAACsnB,aAAa,IAAI,UAAUA,aAAa,EAAE,CAAE;UAAAvwB,QAAA,EACxF/C,IAAI,CAAC,QAAQ;QAAC,CACd,CAAC;MAAA,CACD,CAAC,EACNtB,wDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACqxB,SAAU;QAAA/xB,QAAA,EAC9B/C,IAAI,CAAC,uBAAuB,EAAE;UAC7Bd,IAAI,EAAEsvC,kBAAkB,EAAE7rC,WAAW,EAAEH;QACzC,CAAC;MAAC,CACC,CAAC,EACN9D,wDAAA;QAAKqF,SAAS,EAAEN,yEAAM,CAACorC,eAAgB;QAAA9rC,QAAA,EACpC/C,IAAI,CAAC,iCAAiC;MAAC,CACrC,CAAC;IAAA,CACH,CAAC;EAEV,CAAC,EAAE,CAACszB,aAAa,EAAE7Y,qBAAqB,EAAE+zB,kBAAkB,EAAExuC,IAAI,CAAC,CAAC;EAEpE,MAAMiL,YAAY,GAAG,CACnB,CAAC,cAAc,EAAEjL,IAAI,CAAC,+BAA+B,CAAC,EAAEA,IAAI,CAAC,8BAA8B,CAAC,CAAC,EAC7F,CAAC,gBAAgB,EAAEA,IAAI,CAAC,uCAAuC,CAAC,EAAEA,IAAI,CAAC,sCAAsC,CAAC,CAAC,EAC/G,CAAC,oBAAoB,EAAEA,IAAI,CAAC,0CAA0C,CAAC,EACrEA,IAAI,CAAC,yCAAyC,CAAC,CAAC,CAC1B;EAE1B,MAAM6K,MAAM,GAAGhN,yDAAO,CAAC,MAAM;IAC3B,IAAI,CAACiJ,MAAM,EAAE,OAAO1G,SAAS;IAC7B,OACE1B,wDAAA;MAAKqF,SAAS,EAAEN,yEAAM,CAACoH,MAAO;MAAA9H,QAAA,EAC5BjE,yDAAA,CAACgL,mDAAM;QACL7G,OAAO,EAAEqrC,WAAY;QAAAvrC,QAAA,GAEpB/C,IAAI,CAAC,wBAAwB,CAAC,EAC9B,CAACmY,oBAAoB,IAAIzZ,wDAAA,CAAC6E,2DAAI;UAACuB,IAAI,EAAC,YAAY;UAACf,SAAS,EAAEN,yEAAM,CAACyY;QAAS,CAAE,CAAC;MAAA,CAC1E;IAAC,CACN,CAAC;EAEV,CAAC,EAAE,CAAClc,IAAI,EAAEmY,oBAAoB,EAAErR,MAAM,CAAC,CAAC;EAExC,OACEpI,wDAAA,CAACqL,gEAAe;IACdjD,MAAM,EAAEA,MAAO;IACfsD,MAAM,EAAEA,MAAO;IACfa,YAAY,EAAEA,YAAa;IAC3BJ,MAAM,EAAEA,MAAO;IACfO,WAAW;IACX9C,OAAO,EAAE6B;EAAY,CACtB,CAAC;AAEN,CAAC;AAED,iEAAevM,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAMmrB,WAAW,GAAGP,6DAAU,CAAC5qB,MAAM,EAAEA,MAAM,CAACtC,aAAc,CAAE;EAC9D,MAAMoR,oBAAoB,GAAGT,6EAA0B,CAACrO,MAAM,CAAC;EAE/D,OAAO;IACLmrB,WAAW;IACXrc;EACF,CAAC;AACH,CACF,CAAC,CAAC/a,mBAAmB,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;AC5K4B;AACS;AAKI;AACN;AACkC;AAE1B;AAClB;AACgB;AAEW;AACrB;AAAA;AAUtD,MAAMG,wBAAwB,GAAGA,CAAC;EAAEyM,KAAK;EAAE8kC;AAAoC,CAAC,KAAK;EACnF,MAAM;IACJC,6BAA6B;IAAEC,YAAY;IAAE/b,QAAQ;IAAEnV,cAAc;IAAEmxB;EACzE,CAAC,GAAGnxC,mDAAU,CAAC,CAAC;EAChB,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAMklC,qBAAqB,GAAGvlC,mEAAgB,CAACmlC,YAAY,CAAC;EAE5D,MAAMjR,aAAa,GAAGv/B,kEAAe,CAAC,MAAM;IAC1C,IAAI,CAAC4L,cAAc,EAAEhL,IAAI,CAACmC,SAAS,IAAI,CAAC6I,cAAc,CAACxE,WAAW,EAAE;IAEpEspC,YAAY,CAAC;MACX9vC,IAAI,EAAEgL,cAAc,CAAChL,IAAI,CAACmC,SAAS;MACnCqE,WAAW,EAAEwE,cAAc,CAACxE,WAAW;MACvCypC,aAAa,EAAEjlC,cAAc,CAAChL,IAAI,CAACiwC;IACrC,CAAC,CAAC;IAEFJ,6BAA6B,CAAC,CAAC;IAC/B9b,QAAQ,CAAC;MAAE/sB,EAAE,EAAEgE,cAAc,CAACxE;IAAY,CAAC,CAAC;IAE5CoY,cAAc,CAAC,CAAC;IAChBmxB,sBAAsB,CAAC,CAAC;EAC1B,CAAC,CAAC;EAEF,IAAI,CAAC/kC,cAAc,EAAE,OAAO9J,SAAS;EAErC,MAAM;IAAElB;EAAK,CAAC,GAAGgL,cAAc;EAC/B,MAAMsP,UAAU,GAAGta,IAAI,CAACA,IAAI,CAACoB,IAAI,KAAK,gBAAgB,GAAGpB,IAAI,CAACA,IAAI,GAAGkB,SAAS;EAE9E,IAAI,CAACoZ,UAAU,EAAE,OAAOpZ,SAAS;EAEjC,OACEtB,yDAAA,CAACu3B,yDAAa;IACZvvB,MAAM,EAAEA,MAAO;IACfwhC,cAAc;IACdhgC,OAAO,EAAEymC,6BAA8B;IACvChS,YAAY,EAAE79B,IAAI,CAACiwC,aAAa,GAC5BnvC,IAAI,CACJ,2BAA2B,EAC3B;MAAEqC,MAAM,EAAE+J,4EAAiB,CAACpM,IAAI,EAAEd,IAAI,CAACiwC,aAAa,EAAE;QAAEp8B,MAAM,EAAE;MAAK,CAAC;IAAE,CAAC,EACzE;MAAE/M,SAAS,EAAE;IAAK,CACpB,CAAC,GAAGhG,IAAI,CAAC,+BAA+B,CAAE;IAC5Ci9B,cAAc,EAAEY,aAAc;IAAA96B,QAAA,GAE7BmsC,qBAAqB,IACpBxwC,wDAAA,CAACkF,wEAAmB;MAClBC,IAAI,EAAEqrC,qBAAsB;MAC5BhwC,IAAI,EAAEsa;IAAW,CAClB,CACF,EACD9a,wDAAA;MAAAqE,QAAA,EACG7D,IAAI,CAACiwC,aAAa,GACfnvC,IAAI,CAAC,gCAAgC,EAAE;QACvCd,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;UAAEwC,KAAK,EAAEgX,UAAU,CAAChX,KAAK;UAAEC,MAAM,EAAE+W,UAAU,CAAC/W;QAAO,CAAC,CAAC;QAChFJ,MAAM,EAAE+uB,4EAAiB,CAACpxB,IAAI,EAAEd,IAAI,CAACiwC,aAAa,CAAC;QACnDtrC,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEkvC,qBAAsB;MACjD,CAAC,EAAE;QACDlpC,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE;MAChB,CAAC,CAAC,GACA3S,IAAI,CAAC,oCAAoC,EAAE;QAC3Cd,IAAI,EAAEc,IAAI,CAAC,YAAY,EAAE;UAAEwC,KAAK,EAAEgX,UAAU,CAAChX,KAAK;UAAEC,MAAM,EAAE+W,UAAU,CAAC/W;QAAO,CAAC,CAAC;QAChFoB,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAEkvC,qBAAsB;MACjD,CAAC,EAAE;QACDlpC,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE;MAChB,CAAC;IAAC,CACH,CAAC;EAAA,CACS,CAAC;AAEpB,CAAC;AAED,iEAAe/U,sDAAI,CACjByI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAChE,MAAM8kC,YAAY,GAAG9kC,KAAK,EAAEtE,WAAW,GAAG+F,6DAAU,CAACpC,MAAM,EAAEW,KAAK,CAACtE,WAAW,CAAC,GAAGtF,SAAS;EAE3F,OAAO;IACL0uC;EACF,CAAC;AACH,CAAC,CAAC,CAACvxC,wBAAwB,CAC7B,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGoC;AACkC;AAKpB;AACU;AACT;AACK;AACK;AAEI;AACiB;AACnC;AACgB;AACJ;AAEA;AACE;AAAA;AAa9D,MAAMD,iBAAiB,GAAGA,CAAC;EACzB0M,KAAK;EAAEwlC,UAAU;EAAEzoC;AACE,CAAC,KAAK;EAC3B,MAAM;IACJkoC,sBAAsB;IACtBQ,qBAAqB;IACrBrxB;EACF,CAAC,GAAGtgB,mDAAU,CAAC,CAAC;EAChB,MAAMgJ,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAE7B,MAAMhK,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM,CAACgJ,WAAW,EAAEC,cAAc,CAAC,GAAGnB,0DAAQ,CAAS,EAAE,CAAC;EAE1D,MAAM+D,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAM0lC,cAAc,GAAGJ,sFAA6B,CAACF,kDAAa,CAAC;EAEnE,MAAMO,cAAc,GAAG9xC,yDAAO,CAAC,MAAM;IACnC,OAAO6I,uDAAM,CAAC,CACZ,IAAI8oC,UAAU,IAAI,EAAE,CAAC,EACrB,IAAIE,cAAc,IAAI,EAAE,CAAC,CAC1B,CAAC;EACJ,CAAC,EAAE,CAACF,UAAU,EAAEE,cAAc,CAAC,CAAC;EAEhC,MAAM;IAAExC,MAAM,EAAE0C,QAAQ;IAAEC;EAAoB,CAAC,GAAGN,iEAAa,CAAC;IAC9DznC,KAAK,EAAET,WAAW;IAClB+0B,YAAY,EAAEuT;EAChB,CAAC,CAAC;EAEF,MAAM37B,SAAS,GAAG67B,mBAAmB,KAAKxoC,WAAW;EAErD,MAAMyoC,UAAU,GAAGjyC,yDAAO,CAAC,MAAM;IAC/B,IAAIgyC,mBAAmB,EAAE,OAAOR,wDAAgB;IAEhD,OAAO,CAAC;MACN/uC,IAAI,EAAE,UAAU;MAChByvC,YAAY,EAAE,IAAI;MAClBC,UAAU,EAAE,SAAS;MACrBC,WAAW,EAAE,CAAC;MACdztC,KAAK,EAAExC,IAAI,CAAC,iBAAiB;IAC/B,CAAC,CAAC;EACJ,CAAC,EAAE,CAACA,IAAI,EAAE6vC,mBAAmB,CAAC,CAAC;EAE/B,MAAMK,oBAAoB,GAAG5xC,mEAAe,CAAE+lB,QAAoB,IAAK;IACrE,IAAIA,QAAQ,KAAK,UAAU,EAAE;IAE7BorB,qBAAqB,CAAC;MACpBvwC,IAAI,EAAEgL,cAAc,CAAEhL;IACxB,CAAC,CAAC;IACF+vC,sBAAsB,CAAC,CAAC;EAC1B,CAAC,CAAC;EAEF,MAAMkB,UAAU,GAAGtyC,yDAAO,CAAC,MAAM;IAC/B,IAAImW,SAAS,EAAE,OAAOq7B,wDAAgB;IACtC,MAAMhmC,MAAM,GAAGjD,kDAAS,CAAC,CAAC;IAE1B,OAAOO,uEAAW,CAAC,CAACipC,QAAQ,IAAI,EAAE,EAAE7nC,MAAM,CAAE/I,MAAM,IAChDA,MAAM,KAAK+H,aAAa,IAAI6kC,gEAAa,CAACviC,MAAM,EAAErK,MAAM,CACzD,CAAC,EACF,KAAK,CAAC;EACR,CAAC,EAAE,CAACgV,SAAS,EAAE47B,QAAQ,EAAE7oC,aAAa,CAAC,CAAC;EAExC,MAAMqpC,gBAAgB,GAAG9xC,mEAAe,CAAEU,MAAc,IAAK;IAC3D,IAAI,CAACkL,cAAc,EAAEhL,IAAI,EAAE;IAE3Bkf,4BAA4B,CAAC;MAC3Blf,IAAI,EAAEgL,cAAc,CAAChL,IAAI;MACzBwG,WAAW,EAAE1G;IACf,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,OACEN,wDAAA,CAACmI,oEAAW;IACVC,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAE2mC,sBAAuB;IAChCzsC,KAAK,EAAExC,IAAI,CAAC,mBAAmB,CAAE;IACjCuI,cAAc;IACdC,mBAAmB;IACnBC,eAAe;IACf4nC,YAAY;IAAAttC,QAAA,EAEZrE,wDAAA,CAACkI,mEAAU;MACTiC,OAAO,EAAEsnC,UAAW;MACpBL,UAAU,EAAEA,UAAW;MACvBQ,wBAAwB,EAAEJ,oBAAqB;MAC/ChnC,kBAAkB;MAClBqnC,iBAAiB;MACjBtnC,YAAY;MACZunC,eAAe;MACfx8B,SAAS,EAAEA,SAAU;MACrBlL,WAAW,EAAEzB,WAAY;MACzB0B,iBAAiB,EAAE/I,IAAI,CAAC,QAAQ,CAAE;MAClCgJ,cAAc,EAAE1B,cAAe;MAC/B8B,kBAAkB,EAAEgnC;IAAiB,CACtC;EAAC,CACS,CAAC;AAElB,CAAC;AAED,iEAAexyC,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IAAEG,WAAW;IAAEzC;EAAc,CAAC,GAAGsC,MAAM;EAE7C,OAAO;IACLmmC,UAAU,EAAEhmC,WAAW,EAAEtC,OAAO;IAChCH;EACF,CAAC;AACH,CACF,CAAC,CAACzJ,iBAAiB,CAAC,CAAC,E;;;;;;;;;;;;;;AC/IrB;AACA,iEAAe,CAAC,4MAA4M,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCvL;AACuB;AAKI;AACN;AAGY;AAEH;AACD;AAClB;AACgB;AAEF;AAChB;AACN;AACI;AACR;AACU;AACsC;AACjC;AAEC;AAAA;AAUpD,MAAM+gC,uBAAuB,GAAG,IAAI;AAEpC,MAAMzhC,gBAAgB,GAAGA,CAAC;EAAEoN,KAAK;EAAEzE;AAAiC,CAAC,KAAK;EACxE,MAAM;IACJkrC,qBAAqB;IACrB1wC,kBAAkB;IAClB2wC,WAAW;IACXC,kBAAkB;IAClBC,kCAAkC;IAClCC;EACF,CAAC,GAAG/yC,mDAAU,CAAC,CAAC;EAChB,MAAMgJ,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAE7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAM8mC,kBAAkB,GAAGnnC,mEAAgB,CAACpE,SAAS,CAAC;EACtD,MAAM,CAACwrC,yBAAyB,EAAEC,4BAA4B,CAAC,GAAG7qC,0DAAQ,CAAC,KAAK,CAAC;EAEjF,MAAM8qC,SAAS,GAAG/tC,OAAO,CAACgH,cAAc,EAAEhL,IAAI,EAAEwmC,kBAAkB,CAAC;EAEnE,MAAM,CAAC/G,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGz4B,0DAAQ,CAAoC,CAAC;EAE/F,MAAMnG,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM8L,WAAW,GAAG7L,kEAAe,CAAC,MAAMmyC,qBAAqB,CAAC,CAAC,CAAC;EAElE,MAAM3X,cAAc,GAAGx6B,kEAAe,CAAC,MAAM;IAC3CuyC,yBAAyB,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEF,MAAMK,SAAS,GAAGhnC,cAAc,EAAEinC,UAAU,GAAG,CAAC,CAAC;EACjD,MAAMC,aAAa,GAAGF,SAAS,EAAEnvC,IAAI;EACrC,MAAMmO,YAAY,GAAGhG,cAAc,EAAEmnC,mBAAmB;EAExD,MAAMC,aAAa,GAAGhzC,kEAAe,CAAC,MAAM;IAC1C,MAAMY,IAAI,GAAGgL,cAAc,EAAEhL,IAAI;IAEjC,IAAI,CAACA,IAAI,EAAE;IAEX,IAAI+xC,SAAS,IAAI/xC,IAAI,CAACwmC,kBAAkB,IAAIoL,kBAAkB,EAAE;MAC9D,IAAI,CAAC5gC,YAAY,EAAE;MAEnBygC,kBAAkB,CAAC;QACjB3xC,MAAM,EAAE8xC,kBAAkB,CAAC5qC,EAAE;QAC7BqrC,IAAI,EAAEryC,IAAI,CAACwmC,kBAAkB;QAC7BpzB,KAAK,EAAEpC;MACT,CAAC,CAAC;MACF/F,WAAW,CAAC,CAAC;MACbpK,kBAAkB,CAAC,CAAC;MACpB;IACF;IAEA,IAAI,CAACb,IAAI,EAAEmC,SAAS,EAAE;IAEtBqvC,WAAW,CAAC;MACVxxC,IAAI,EAAEA,IAAI,CAACmC,SAAS;MACpB0vC,yBAAyB;MACzB7gC,YAAY,EAAE,CAAChR,IAAI,CAAC+Q,uBAAuB,GAAGC,YAAY,GAAG9P;IAC/D,CAAC,CAAC;IACF+J,WAAW,CAAC,CAAC;EACf,CAAC,CAAC;EAEF,MAAM40B,uBAAuB,GAAGzgC,kEAAe,CAAC,MAAM;IACpD,IAAI,CAAC4L,cAAc,EAAE80B,gBAAgB,EAAE;IACvCJ,oBAAoB,CAACV,qFAA8B,CAACh0B,cAAc,CAAC80B,gBAAgB,EAAEL,iBAAiB,CAAC,CAAC;EAC1G,CAAC,CAAC;EAEF,MAAM6S,mBAAmB,GAAGlzC,kEAAe,CAAC,MAAM;IAChD,IAAI,CAAC4L,cAAc,EAAEsnB,MAAM,EAAE;IAE7Bof,kCAAkC,CAAC;MACjCpf,MAAM,EAAEtnB,cAAc,CAACsnB,MAAM;MAC7BI,YAAY,EAAE1hB,YAAY,IAAI,CAAC;MAC/B2hB,QAAQ,EAAE3nB,cAAc,CAAC2nB,QAAQ,IAAI,CAAC;MACtCC,QAAQ,EAAE5nB,cAAc,CAAC4nB,QAAQ,IAAI;IACvC,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFsM,yEAAW,CAACW,uBAAuB,EAAEj4B,MAAM,GAAGu3B,uBAAuB,GAAGj+B,SAAS,EAAE,IAAI,CAAC;EAExFkL,2DAAS,CAAC,MAAM;IACd,IAAIxE,MAAM,IAAIoD,cAAc,EAAE80B,gBAAgB,EAAE;MAC9CD,uBAAuB,CAAC,CAAC;IAC3B;EACF,CAAC,EAAE,CAACj4B,MAAM,EAAEoD,cAAc,EAAE80B,gBAAgB,CAAC,CAAC;EAE9C1zB,2DAAS,CAAC,MAAM;IACd,MAAM+d,UAAU,GAAGnf,cAAc,EAAE80B,gBAAgB;IACnD,IAAI,CAAC3V,UAAU,EAAE;IACjB8U,mFAA4B,CAAC9U,UAAU,CAAC;EAC1C,CAAC,EAAE,CAACnf,cAAc,EAAE80B,gBAAgB,CAAC,CAAC;EAEtC,MAAMyS,qBAAqB,GAAG5zC,yDAAO,CAAC,MAAOqS,YAAY,GACvDpR,yDAAA;IAAAiE,QAAA,GACErE,wDAAA,CAAC6E,2DAAI;MAACuB,IAAI,EAAC,MAAM;MAACf,SAAS,EAAC;IAAkB,CAAE,CAAC,EACjDrF,wDAAA,CAACy3B,+DAAe;MAACz0B,IAAI,EAAE1B,IAAI,CAACyC,MAAM,CAACyN,YAAY;IAAE,CAAE,CAAC;EAAA,CAChD,CAAC,GACL9P,SAAU,EAAE,CAACJ,IAAI,EAAEkQ,YAAY,CAAC,CAAC;EAErC,MAAM8vB,SAAS,GAAGniC,yDAAO,CAAC,MAAM;IAC9B,IAAI,CAAC8gC,iBAAiB,IAAI,CAAC73B,MAAM,EAAE;MACjC,OAAO1G,SAAS;IAClB;IAEA,MAAMlB,IAAI,GAAGgL,cAAc,EAAEhL,IAAI;IAEjC,MAAMwyC,QAAQ,GAAGZ,kBAAkB,GAAG7rC,mEAAY,CAACjF,IAAI,EAAE8wC,kBAAkB,CAAC,GAAG9wC,IAAI,CAAC,oBAAoB,CAAC;IAEzG,MAAMiL,YAAY,GAAI6lC,kBAAkB,GAAG,CACzC,CAAC,SAAS,EAAE9wC,IAAI,CAAC,wBAAwB,CAAC,EAAEA,IAAI,CAAC,kCAAkC,EAAE;MAAEgI,IAAI,EAAE0pC;IAAS,CAAC,CAAC,CAAC,EACzG,CAAC,OAAO,EAAE1xC,IAAI,CAAC,8BAA8B,CAAC,EAC5CA,IAAI,CAAC,wCAAwC,EAAE;MAAEgI,IAAI,EAAE0pC;IAAS,CAAC,CAAC,CAAC,EACrE,CAAC,SAAS,EAAE1xC,IAAI,CAAC,2BAA2B,CAAC,EAAEA,IAAI,CAAC,qCAAqC,EAAE;MAAEgI,IAAI,EAAE0pC;IAAS,CAAC,CAAC,CAAC,CAChH,GAAG,CACF,CAAC,SAAS,EAAE1xC,IAAI,CAAC,wBAAwB,CAAC,EAAEA,IAAI,CAAC,8BAA8B,CAAC,CAAC,EACjF,CAAC,OAAO,EAAEA,IAAI,CAAC,8BAA8B,CAAC,EAAEA,IAAI,CAAC,oCAAoC,CAAC,CAAC,EAC3F,CAAC,SAAS,EAAEA,IAAI,CAAC,2BAA2B,CAAC,EAAEA,IAAI,CAAC,iCAAiC,CAAC,CAAC,CAC9D;IAE3B,MAAM4K,QAAQ,GAAGkmC,kBAAkB,GAC/B9wC,IAAI,CAAC,qBAAqB,EAAE;MAAE6D,IAAI,EAAEoB,mEAAY,CAACjF,IAAI,EAAE8wC,kBAAkB;IAAE,CAAC,CAAC,GAC7E9wC,IAAI,CAAC,oBAAoB,CAAC;IAE9B,MAAM2xC,oBAAoB,GAAGzuC,OAAO,CAACkuC,aAAa,CAAC,IAC9CluC,OAAO,CAACgH,cAAc,EAAEsnB,MAAM,EAAEppB,MAAM,CAAC,IACvC,CAAClJ,IAAI,EAAE+Q,uBAAuB;IAEnC,MAAM7F,MAAM,GACV1L,wDAAA,CAACm0B,0DAAgB;MACfrF,cAAc,EAAEmR,iBAAiB,CAAC95B,KAAM;MACxCipB,iBAAiB,EAAE6Q,iBAAiB,CAACz6B,QAAS;MAC9C0pB,gBAAgB,EAAE+Q,iBAAiB,CAACp6B,OAAQ;MAC5C/B,KAAK,EAAExC,IAAI,CAAC,kBAAkB,CAAE;MAChC4K,QAAQ,EAAEA;IAAS,CACpB,CACF;IAED,MAAMC,MAAM,GACV/L,yDAAA;MAAKiF,SAAS,EAAEN,sEAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC3B,CAAC7D,IAAI,IACJR,wDAAA,CAACoL,mDAAM;QAAC/F,SAAS,EAAEN,sEAAM,CAACo9B,YAAa;QAAC59B,OAAO,EAAEkH,WAAY;QAAApH,QAAA,EAC1D/C,IAAI,CAAC,IAAI;MAAC,CACL,CACT,EACAd,IAAI,IACHJ,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACG,CAACkuC,SAAS,IACTvyC,wDAAA,CAAC6iC,qDAAQ;UACPxvB,KAAK,EAAE/R,IAAI,CAAC,wBAAwB,CAAE;UACtC0oC,OAAO,EAAEsI,4BAA6B;UACtCx+B,OAAO,EAAEu+B;QAA0B,CACpC,CACF,EACDryC,wDAAA,CAACoL,mDAAM;UAAC/F,SAAS,EAAEN,sEAAM,CAACo9B,YAAa;UAAC2E,OAAO;UAACviC,OAAO,EAAEquC,aAAc;UAAAvuC,QAAA,EACrEjE,yDAAA;YAAKiF,SAAS,EAAEN,sEAAM,CAACmuC,aAAc;YAAA7uC,QAAA,GACnCrE,wDAAA;cAAAqE,QAAA,EACG7D,IAAI,CAAC+Q,uBAAuB,GACzBjQ,IAAI,CAAC,gBAAgB,CAAC,GACtBixC,SAAS,GACPjxC,IAAI,CAAC,yBAAyB,EAAE;gBAAEqC,MAAM,EAAEovC;cAAsB,CAAC,EAAE;gBAAEzrC,SAAS,EAAE;cAAK,CAAC,CAAC,GACvFhG,IAAI,CAAC,mBAAmB,EAAE;gBAAEqC,MAAM,EAAEovC;cAAsB,CAAC,EAAE;gBAAEzrC,SAAS,EAAE;cAAK,CAAC;YAAC,CACpF,CAAC,EACL2rC,oBAAoB,IACnBjzC,wDAAA;cAAKqF,SAAS,EAAEN,sEAAM,CAACouC,kBAAmB;cAAA9uC,QAAA,EACvC/C,IAAI,CAAC,4BAA4B,EAAE;gBAClC8xC,KAAK,EAAEpzC,wDAAA,CAACiO,sDAAS;kBAACyH,MAAM,EAAEg9B,aAAc;kBAAC9W,KAAK,EAAExB;gBAAe,CAAE;cACnE,CAAC,EAAE;gBAAE9yB,SAAS,EAAE;cAAK,CAAC;YAAC,CACpB,CACN;UAAA,CACE;QAAC,CACA,CAAC,EACR2rC,oBAAoB,IACnBjzC,wDAAA,CAAC0G,iDAAI;UACHrB,SAAS,EAAEN,sEAAM,CAACiP,IAAK;UACvB3M,SAAS;UACT9C,OAAO,EAAEuuC,mBAAoB;UAAAzuC,QAAA,EAE5B/C,IAAI,CAAC,+BAA+B;QAAC,CAClC,CACP;MAAA,CACD,CACH;IAAA,CACE,CACN;IAED,OAAO;MACLiL,YAAY;MACZb,MAAM;MACNS;IACF,CAAC;EACH,CAAC,EAAE,CAAC8zB,iBAAiB,EAAE73B,MAAM,EAAE9G,IAAI,EACjC8wC,kBAAkB,EAAE5mC,cAAc,EAAEhL,IAAI,EACxC6xC,yBAAyB,EAAEE,SAAS,EACpC/mC,cAAc,EAAEsnB,MAAM,EAAEppB,MAAM,EAC9BgpC,aAAa,EAAEK,qBAAqB,CAAC,CAAC;EAExC,OACE/yC,wDAAA,CAACqL,gEAAe;IACdjD,MAAM,EAAEA,MAAO;IACfsD,MAAM,EAAE41B,SAAS,EAAE51B,MAAO;IAC1BS,MAAM,EAAEm1B,SAAS,EAAEn1B,MAAO;IAC1BI,YAAY,EAAE+0B,SAAS,EAAE/0B,YAAa;IACtCG,WAAW;IACX9C,OAAO,EAAE6B;EAAY,CACtB,CAAC;AAEN,CAAC;AAED,iEAAevM,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAMtE,WAAW,GAAGsE,KAAK,EAAEtE,WAAW;EACtC,MAAMH,SAAS,GAAGG,WAAW,GAAG+F,6DAAU,CAACpC,MAAM,EAAE3D,WAAW,CAAC,GAAGtF,SAAS;EAE3E,OAAO;IACLmF;EACF,CAAC;AACH,CACF,CAAC,CAAC3I,gBAAgB,CAAC,CAAC,E;;;;;;;;;;;;;;AC9PpB;AACA,iEAAe,CAAC,qWAAqW,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAzT;AACZ;AAIuB;AACE;AACA;AACP;AAEA;AAClB;AACgB;AAEc;AACtC;AACqC;AAEvB;AAAA;AAMtD,MAAMo1C,mBAAmB,GAAG,GAAG;AAC/B,MAAMC,mBAAmB,GAAG,EAAE;AAE9B,MAAMx1C,kBAAgC,GAAGA,CAAC;EACxCuN;AACF,CAAC,KAAK;EACJ,MAAM;IAAEkoC,uBAAuB;IAAEzT,OAAO;IAAExgB;EAAiB,CAAC,GAAGngB,mDAAU,CAAC,CAAC;EAE3E,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAC7B,MAAME,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAMw1B,kBAAkB,GAAGlhC,kEAAe,CAAC,MAAM;IAC/C,IAAI0L,KAAK,EAAEmoC,SAAS,CAAC1S,iBAAiB,EAAE;MACtChB,OAAO,CAAC;QAAEnc,GAAG,EAAEtY,KAAK,CAACmoC,SAAS,CAAC1S;MAAkB,CAAC,CAAC;IACrD;EACF,CAAC,CAAC;EAEF,MAAMC,wBAAwB,GAAGphC,kEAAe,CAAC,MAAM;IACrD,IAAI0L,KAAK,EAAE9K,IAAI,EAAE;MACf+e,gBAAgB,CAAC;QAAE/e,IAAI,EAAE8K,KAAK,CAAC9K;MAAK,CAAC,CAAC;IACxC;EACF,CAAC,CAAC;EAEF,MAAM8gC,SAAS,GAAGniC,yDAAO,CAAC,MAAM;IAC9B,IAAI,CAACqM,cAAc,EAAE,OAAO9J,SAAS;IAErC,MAAM;MAAElB,IAAI;MAAEizC;IAAU,CAAC,GAAGjoC,cAAc;IAC1C,MAAMpG,cAAc,GAAGX,wEAAiB,CAACjE,IAAI,CAAC;IAE9C,IAAI,CAAC4E,cAAc,EAAE,OAAO1D,SAAS;IAErC,MAAMgK,MAAM,GACVtL,yDAAA;MAAKiF,SAAS,EAAEN,wEAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BrE,wDAAA,CAAC2E,uEAAuB;QACtBU,SAAS,EAAEN,wEAAM,CAACe,OAAQ;QAC1BA,OAAO,EAAEV,cAAc,CAACe,KAAK,CAAEL,OAAQ;QACvCI,IAAI,EAAEotC;MAAoB,CAC3B,CAAC,EACFtzC,wDAAA,CAACoL,mDAAM;QACLqN,IAAI;QACJvS,IAAI,EAAC,MAAM;QACXwS,KAAK;QACLJ,cAAc;QAAAjU,QAAA,EAEb+S,4EAAsB,CAACq8B,SAAS,CAAC5hC,KAAK,EAAE4hC,SAAS,CAAC/vC,QAAQ,EAAEpC,IAAI,CAAC6F,IAAI;MAAC,CACjE,CAAC,EACTnH,wDAAA;QAAKqF,SAAS,EAAEN,wEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAChC/C,IAAI,CAAC,sBAAsB,EAAE;UAAE+/B,QAAQ,EAAE7gC,IAAI,CAACsD;QAAM,CAAC,EAAE;UACtDmQ,YAAY,EAAE,IAAI;UAClB3M,SAAS,EAAE;QACb,CAAC;MAAC,CACC,CAAC;IAAA,CACH,CACN;IAED,MAAMurB,SAAoB,GAAG,EAAE;IAE/BA,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,2BAA2B,CAAC,EACjC+xC,0EAAkB,CAACI,SAAS,CAACC,eAAe,GAAG,IAAI,EAAEpyC,IAAI,CAAC6F,IAAI,CAAC,CAChE,CAAC;IAEF0rB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,4BAA4B,CAAC,EAClClB,yDAAA;MAAMiF,SAAS,EAAEN,wEAAM,CAAC4uC,YAAa;MAAAtvC,QAAA,GAClCqJ,4EAAiB,CAACpM,IAAI,EAAEmyC,SAAS,CAACG,gBAAgB,EAAE;QAAEvuC,SAAS,EAAEN,wEAAM,CAAC+xB;MAAS,CAAC,CAAC,EACnF,MAAM,EACN1f,4EAAsB,CAACq8B,SAAS,CAACI,gBAAgB,EAAEJ,SAAS,CAAC/vC,QAAQ,EAAEpC,IAAI,CAAC6F,IAAI,CAAC,EAAC,GAErF;IAAA,CAAM,CAAC,CACR,CAAC;IAEF,IAAIssC,SAAS,CAACtM,YAAY,EAAE;MAC1BtU,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,wBAAwB,CAAC,EAC9B+xC,0EAAkB,CAACI,SAAS,CAACtM,YAAY,GAAG,IAAI,EAAE7lC,IAAI,CAAC6F,IAAI,CAAC,CAC7D,CAAC;IACJ;IAEA,IAAIssC,SAAS,CAACK,aAAa,EAAE;MAC3BjhB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,yBAAyB,CAAC,EAC/B8V,4EAAsB,CAACq8B,SAAS,CAACK,aAAa,EAAEL,SAAS,CAAC/vC,QAAQ,EAAEpC,IAAI,CAAC6F,IAAI,CAAC,CAC/E,CAAC;IACJ;IAEA,IAAIssC,SAAS,CAACM,UAAU,EAAE;MACxBlhB,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,4BAA4B,CAAC,EAClC8V,4EAAsB,CAACq8B,SAAS,CAACM,UAAU,EAAEN,SAAS,CAAC/vC,QAAQ,EAAEpC,IAAI,CAAC6F,IAAI,CAAC,CAC5E,CAAC;IACJ;IAEA,IAAIssC,SAAS,CAAC9R,YAAY,EAAE;MAC1B9O,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,4BAA4B,CAAC,EAClC8V,4EAAsB,CAACq8B,SAAS,CAAC9R,YAAY,EAAE8R,SAAS,CAAC/vC,QAAQ,EAAEpC,IAAI,CAAC6F,IAAI,CAAC,CAC9E,CAAC;IACJ;IAEA,MAAM06B,gBAAgB,GAAGr9B,OAAO,CAACivC,SAAS,CAAC1S,iBAAiB,IAAI0S,SAAS,CAAC3R,mBAAmB,CAAC;IAC9F,MAAMC,gBAAgB,GAAGv9B,OAAO,CAACivC,SAAS,CAACzR,WAAW,IAAIyR,SAAS,CAACzR,WAAW,CAAC;IAChF,MAAMgS,SAAS,GAAGnS,gBAAgB,IAAIE,gBAAgB;IAEtD,MAAM51B,MAAM,GAAG6nC,SAAS,IACtB5zC,yDAAA;MAAKiF,SAAS,EAAEN,wEAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC3Bw9B,gBAAgB,IACfzhC,yDAAA,CAACgL,mDAAM;QACL6oC,MAAM;QACN1vC,OAAO,EAAEu8B,kBAAmB;QAC5BvrB,iBAAiB;QACjBrP,IAAI,EAAC,MAAM;QAAA7B,QAAA,GAEV/C,IAAI,CAACyC,MAAM,CAAC0vC,SAAS,CAAC3R,mBAAoB,CAAC,EAC5C9hC,wDAAA,CAAC2E,uEAAuB;UACtBU,SAAS,EAAEN,wEAAM,CAACmvC,aAAc;UAChCpuC,OAAO,EAAEV,cAAc,CAACe,KAAK,CAAEL,OAAQ;UACvCI,IAAI,EAAEqtC;QAAoB,CAC3B,CAAC,EACDjyC,IAAI,CAAC,4BAA4B,CAAC;MAAA,CAC7B,CACT,EAEAygC,gBAAgB,IACf3hC,yDAAA,CAACgL,mDAAM;QACL6oC,MAAM;QACN1+B,iBAAiB;QACjBrP,IAAI,EAAC,MAAM;QACX3B,OAAO,EAAEy8B,wBAAyB;QAAA38B,QAAA,GAEjC/C,IAAI,CAACyC,MAAM,CAAC0vC,SAAS,CAACzR,WAAY,CAAC,EACpChiC,wDAAA,CAAC2E,uEAAuB;UACtBU,SAAS,EAAEN,wEAAM,CAACmvC,aAAc;UAChCpuC,OAAO,EAAEV,cAAc,CAACe,KAAK,CAAEL,OAAQ;UACvCI,IAAI,EAAEqtC;QAAoB,CAC3B,CAAC,EACDjyC,IAAI,CAAC,4BAA4B,CAAC;MAAA,CAC7B,CACT;IAAA,CACE,CACN;IAED,OAAO;MACLoK,MAAM;MACNmnB,SAAS;MACT1mB;IACF,CAAC;EACH,CAAC,EAAE,CAAC7K,IAAI,EAAEkK,cAAc,EAAEs1B,kBAAkB,EAAEE,wBAAwB,CAAC,CAAC;EAExE,IAAI,CAACM,SAAS,EAAE,OAAO5/B,SAAS;EAEhC,OACE1B,wDAAA,CAAC2yB,+DAAc;IACbvqB,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAE4pC,uBAAwB;IACjC9nC,MAAM,EAAE41B,SAAS,CAAC51B,MAAO;IACzBmnB,SAAS,EAAEyO,SAAS,CAACzO,SAAU;IAC/B1mB,MAAM,EAAEm1B,SAAS,CAACn1B;EAAO,CAC1B,CAAC;AAEN,CAAC;AAED,iEAAejN,sDAAI,CAACnB,kBAAkB,CAAC,E;;;;;;;;;;;;;;AC7LvC;AACA,iEAAe,CAAC,sSAAsS,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEjR;AACuB;AAIS;AAEd;AACK;AACM;AACJ;AAEI;AAClB;AACgB;AAEc;AAClC;AACE;AACU;AAC8B;AAC9C;AACF;AAEe;AAAA;AAWrD,MAAMu2C,aAAyB,GAAG;EAChCjD,YAAY,EAAE,IAAI;EAClBC,UAAU,EAAE,UAAU;EACtBxtC,KAAK,EAAE,EAAE;EACTywC,qBAAqB,EAAE;AACzB,CAAC;AACD,MAAMtvC,iBAAiB,GAAG,GAAG,GAAGP,gEAAG;AAEnC,MAAM/F,iBAAiB,GAAGA,CAAC;EAAE2M,KAAK;EAAEkpC,WAAW;EAAEC;AAAoC,CAAC,KAAK;EACzF,MAAM;IACJC,sBAAsB;IACtBC,sBAAsB;IACtBtzC,kBAAkB;IAClBuzC,yBAAyB;IACzBC;EACF,CAAC,GAAGz1C,mDAAU,CAAC,CAAC;EAChB,MAAMgJ,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAE7B,MAAM,CAACwpC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGttC,0DAAQ,CAAC,KAAK,CAAC;EAEnE,MAAMnG,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM6L,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAM9K,IAAI,GAAGgL,cAAc,EAAEhL,IAAI,EAAEA,IAAyB;EAC5D,MAAM4E,cAAc,GAAG5E,IAAI,IAAIiE,wEAAiB,CAACjE,IAAI,CAAC;EACtD,MAAMw0C,WAAW,GAAGxpC,cAAc,EAAEhL,IAAI,EAAEy0C,WAAW,GACjDrkC,IAAI,CAACskC,GAAG,CAAC1pC,cAAc,CAAChL,IAAI,CAACy0C,WAAW,GAAGv1C,+DAAa,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGgC,SAAS;EAE9E,MAAM+J,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxC80C,sBAAsB,CAAC,CAAC;EAC1B,CAAC,CAAC;EAEF,MAAM5Z,YAAY,GAAGl7B,kEAAe,CAAEu1C,QAAgB,IAAK;IACzDP,yBAAyB,CAAC;MACxBp0C,IAAI,EAAEgL,cAAc,CAAEhL,IAAI,CAACmC,SAAU;MACrCwyC;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMC,mBAAmB,GAAGx1C,kEAAe,CAAC,MAAM;IAChDi1C,kBAAkB,CAAC;MACjBQ,MAAM,EAAElB,mDAAe,CAACmB;IAC1B,CAAC,CAAC;IACFZ,sBAAsB,CAAC,CAAC;IACxBrzC,kBAAkB,CAAC,CAAC;EACtB,CAAC,CAAC;EAEF,OACEjB,yDAAA,CAAC4d,kDAAK;IACJ5V,MAAM,EAAEA,MAAO;IACftE,KAAK,EAAExC,IAAI,CAAC,mBAAmB,CAAE;IACjC81B,iBAAiB;IACjBvtB,cAAc;IACdud,MAAM;IACNxd,OAAO,EAAE6B,WAAY;IAAApH,QAAA,GAEpBe,cAAc,IACbhF,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACEjE,yDAAA;QAAKiF,SAAS,EAAEN,uEAAM,CAAC2G,MAAO;QAAArH,QAAA,GAC5BjE,yDAAA;UAAKiF,SAAS,EAAEN,uEAAM,CAACQ,WAAY;UAAAlB,QAAA,GACjCrE,wDAAA,CAAC8E,gFAAuB;YACtBO,SAAS,EAAEN,uEAAM,CAACS,QAAS;YAC3BC,gBAAgB,EAAE,CAACL,cAAc,CAACI,QAAQ,CAAEE,WAAW,EAAEN,cAAc,CAACI,QAAQ,CAAEG,SAAS,CAAE;YAC7FC,WAAW,EAAER,cAAc,CAACS,OAAO,EAAEC,OAAQ;YAC7CC,UAAU,EAAE,CAAE;YACdC,UAAU,EAAE,CAAE;YACdC,WAAW,EAAE;UAAG,CACjB,CAAC,EACFjG,wDAAA,CAAC2E,wEAAuB;YACtBU,SAAS,EAAEN,uEAAM,CAACe,OAAQ;YAC1BI,IAAI,EAAEjB,iBAAkB;YACxBa,OAAO,EAAEV,cAAc,CAACe,KAAK,EAAEL;UAAQ,CACxC,CAAC;QAAA,CACC,CAAC,EACN9F,wDAAA,CAAC6E,2DAAI;UAACuB,IAAI,EAAC,MAAM;UAACf,SAAS,EAAEN,uEAAM,CAACsB;QAAM,CAAE,CAAC,EAC7CrG,wDAAA,CAAC4E,uDAAM;UACLO,IAAI,EAAEmvC,aAAc;UACpBpuC,IAAI,EAAC,OAAO;UACZb,SAAS,EAAEN,uEAAM,CAACuB;QAAO,CAC1B,CAAC;MAAA,CACC,CAAC,EACNtG,wDAAA;QAAGqF,SAAS,EAAEN,uEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAC9B/C,IAAI,CAAC,yBAAyB,EAAE;UAC/Bd,IAAI,EAAE,GAAGA,IAAI,CAACsD,KAAK,KAAKtD,IAAI,CAACuD,MAAM;QACrC,CAAC,EAAE;UACDuD,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE,IAAI;UAClB6P,iBAAiB,EAAE,CAAC,IAAI;QAC1B,CAAC;MAAC,CACD,CAAC;IAAA,CACJ,CACH,EACAtf,OAAO,CAACwwC,WAAW,CAAC,IACnBh1C,wDAAA;MAAGqF,SAAS,EAAEN,uEAAM,CAACwwC,UAAW;MAAAlxC,QAAA,EAC7B/C,IAAI,CAAC,kBAAkB,EAAE;QAAE4P,IAAI,EAAEkjC,0DAAO,CAACY,WAAW;MAAE,CAAC,EAAE;QAAE5/B,WAAW,EAAEg/B,0DAAO,CAACY,WAAW;MAAE,CAAC;IAAC,CAC/F,CACJ,EACA,CAACR,WAAW,IACXp0C,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA;QAAMqF,SAAS,EAAEN,uEAAM,CAACywC,UAAW;QAAAnxC,QAAA,EAAE/C,IAAI,CAAC,sBAAsB;MAAC,CAAO,CAAC,EACzEtB,wDAAA,CAACoL,mDAAM;QAAC/F,SAAS,EAAC,MAAM;QAACd,OAAO,EAAE6wC,mBAAoB;QAAA/wC,QAAA,EAAE/C,IAAI,CAAC,UAAU;MAAC,CAAS,CAAC;IAAA,CAClF,CACH,EACAkzC,WAAW,IAAI,CAACQ,WAAW,IAC1Bh1C,wDAAA,CAACq0C,6DAAY;MACXoB,gBAAgB;MAChB3kB,WAAW,EAAExvB,IAAI,CAAC,0BAA0B,CAAE;MAC9Co0C,KAAK,EAAElqC,cAAc,EAAEmqC,QAAQ,IAAIr0C,IAAI,CAACs0C,WAAW,CAACpqC,cAAc,EAAEmqC,QAAQ,CAAE;MAC9E5hC,WAAW,EAAEzS,IAAI,CAAC,0BAA0B,CAAE;MAC9Cu0C,YAAY,EAAElB,sBAAuB;MACrCr/B,SAAS,EAAE9J,cAAc,EAAE8J,SAAU;MACrCwgC,IAAI,EAAErB,YAAa;MACnBsB,iBAAiB,EAAEjB,kBAAmB;MACtCkB,gBAAgB,EAAE5tC,MAAO;MACzB6tC,0BAA0B,EAAElB,qBAAsB;MAClDmB,WAAW,EAAE50C,IAAI,CAAC,oBAAoB,CAAE;MACxC60C,QAAQ,EAAErb;IAAa,CACxB,CACF;EAAA,CACI,CAAC;AAEZ,CAAC;AAED,iEAAe57B,sDAAI,CAACyI,mDAAU,CAC3BgD,MAAM,IAA2B;EAChC,MAAM;IACJyrC,QAAQ,EAAE;MACRC,KAAK,EAAE;QACL7B;MACF;IACF,CAAC;IACD8B,aAAa,EAAE;MACbR,IAAI,EAAErB;IACR;EACF,CAAC,GAAG9pC,MAAM;EAEV,OAAO;IACL6pC,WAAW;IACXC;EACF,CAAC;AACH,CACF,CAAC,CAAC91C,iBAAiB,CAAC,CAAC,E;;;;;;;;;;;;;;ACnLrB;AACA,iEAAe,CAAC,0uCAA0uC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGxtC;AACkC;AAWX;AACmB;AAGzC;AACuB;AACD;AACA;AAEF;AACV;AACA;AACgB;AACV;AAEV;AACc;AACZ;AACI;AACF;AACR;AACI;AACQ;AACR;AACN;AACQ;AACM;AACX;AAEe;AAAA;AAyBrD,MAAMm4C,gBAAgB,GAAG,CAAC;AAC1B,MAAMC,oBAAoB,GAAG,EAAE;AAC/B,MAAMC,mBAAmB,GAAG,IAAI;AAChC,MAAMC,cAA0B,GAAG;EACjC3F,UAAU,EAAE,eAAe;EAC3BiD,qBAAqB,EAAE,SAAS;EAChClD,YAAY,EAAE,IAAI;EAClBnJ,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMvqC,iBAAiB,GAAGA,CAAC;EACzB2N,KAAK;EACL4U,IAAI;EACJpd,OAAO;EACPyrC,SAAS;EACT1/B,WAAW;EACXqoC,cAAc;EACdC,0BAA0B;EAC1B9uC,aAAa;EACbytB;AACqB,CAAC,KAAK;EAC3B,MAAM;IAAEshB,sBAAsB;IAAEC,oBAAoB;IAAEC;EAAwB,CAAC,GAAGl4C,mDAAU,CAAC,CAAC;EAE9F,MAAM,CAACob,WAAW,EAAE+8B,cAAc,CAAC,GAAG9vC,0DAAQ,CAACsvC,oBAAoB,CAAC;EACpE,MAAM,CAACS,SAAS,EAAEC,WAAW,EAAEC,aAAa,CAAC,GAAGt+B,0DAAO,CAAC,CAAC;EACzD,MAAM,CAACu+B,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGnwC,0DAAQ,CAAC,IAAI,CAAC;EACxE,MAAM,CAACowC,YAAY,EAAEC,eAAe,CAAC,GAAGrwC,0DAAQ,CAACY,aAAa,CAAC;EAE/D,MAAMqI,MAAM,GAAGwP,IAAI,EAAE1Y,EAAE;EAEvB,MAAMmjC,UAAU,GAAGkN,YAAY,GAAI9qC,6DAAU,CAACrF,kDAAS,CAAC,CAAC,EAAEmwC,YAAY,CAAC,GAAI/hB,WAAW;EAEvF,MAAMv0B,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAC5B,MAAM;IAAE20B;EAAS,CAAC,GAAGT,+DAAY,CAAC,CAAC;EACnC,MAAMzyB,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EAEtB,MAAMo4C,4BAA4B,GAAGn4C,mEAAe,CAAE+R,CAAsC,IAAK;IAC/FimC,wBAAwB,CAAC,CAACjmC,CAAC,CAACC,MAAM,CAACkC,OAAO,CAAC;EAC7C,CAAC,CAAC;EAEF,MAAMqmB,kBAAkB,GAAGv6B,mEAAe,CAAEiS,KAAa,IAAK;IAC5D0lC,cAAc,CAAC1lC,KAAK,CAAC;IACrB4lC,WAAW,CAAC,CAAC;EACf,CAAC,CAAC;EAEF7qC,2DAAS,CAAC,MAAM;IACd,IAAI8D,MAAM,IAAI,CAACymC,0BAA0B,EAAE;MACzCG,uBAAuB,CAAC;QAAE5mC;MAAO,CAAC,CAAC;IACrC;EACF,CAAC,EAAE,CAACA,MAAM,EAAEymC,0BAA0B,CAAC,CAAC;EAExC,MAAMa,oBAAoB,GAAG74C,yDAAO,CAAC,MAAM;IACzC,MAAMqvC,MAAM,GAAG2I,0BAA0B,EAAEpyB,GAAG,CAAE5f,IAAI,IAAKA,IAAI,CAACqC,EAAE,CAAC,CAC9D6B,MAAM,CAAE7B,EAAE,IAAKA,EAAE,KAAKkJ,MAAM,CAAC;IAChC89B,MAAM,EAAEyJ,OAAO,CAAC5vC,aAAa,CAAC;IAC9B,OAAOmmC,MAAM;EACf,CAAC,EAAE,CAAC2I,0BAA0B,EAAEzmC,MAAM,EAAErI,aAAa,CAAC,CAAC;EAEvD,MAAM6vC,mBAAmB,GAAGF,oBAAoB,IAAIA,oBAAoB,CAACtuC,MAAM,GAAG,CAAC;EAEnFkD,2DAAS,CAAC,MAAM;IACd,IAAI,CAACtB,KAAK,EAAE;MACVosC,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAACpsC,KAAK,CAAC,CAAC;EAEXsB,2DAAS,CAAC,MAAM;IACd,MAAMurC,cAAc,GAAGr1C,OAAO,EAAEs1C,SAAS,EAAEC,WAAW,EAAEr2C,IAAI,CAAEs2C,OAAO,IAAKA,OAAO,CAACC,IAAI,CAAC;IACvF,IAAIJ,cAAc,EAAE;MAClBP,wBAAwB,CAACpzC,OAAO,CAAC2zC,cAAc,CAACK,WAAW,CAAC,CAAC;MAC7D,IAAIL,cAAc,CAAC73C,MAAM,EAAE;QACzBw3C,eAAe,CAACK,cAAc,CAAC73C,MAAM,CAAC;MACxC;MACA;IACF;IAEAs3C,wBAAwB,CAACV,cAAc,EAAEt1C,IAAI,KAAK,WAAW,IAAI,KAAK,CAAC;IACvE,IAAIs1C,cAAc,EAAEt1C,IAAI,KAAK,MAAM,IAAIo2C,oBAAoB,EAAElsB,QAAQ,CAACorB,cAAc,CAAC52C,MAAM,CAAC,EAAE;MAC5Fw3C,eAAe,CAACZ,cAAc,CAAC52C,MAAM,CAAC;MACtC;IACF;IAEAw3C,eAAe,CAACzvC,aAAa,CAAC;EAChC,CAAC,EAAE,CAAC6uC,cAAc,EAAEp0C,OAAO,EAAEs1C,SAAS,EAAEC,WAAW,EAAEL,oBAAoB,EAAE3vC,aAAa,CAAC,CAAC;EAE1F,MAAMowC,UAAU,GAAG74C,mEAAe,CAAC,MAAM;IACvC,IAAI,CAAC0L,KAAK,EAAE;IAEZ+rC,oBAAoB,CAAC;MACnB3mC,MAAM,EAAEpF,KAAK,CAACoF,MAAM;MACpBs1B,SAAS,EAAE16B,KAAK,CAAC06B,SAAS;MAC1BhxB,KAAK,EAAEwF,WAAW;MAClBk+B,SAAS,EAAEf,qBAAqB;MAChCr3C,MAAM,EAAEq3C,qBAAqB,IAAIE,YAAY,KAAKxvC,aAAa,GAAG3G,SAAS,GAAGm2C,YAAY;MAC1Fc,0BAA0B,EAAE;IAC9B,CAAC,CAAC;IACFvB,sBAAsB,CAAC,CAAC;EAC1B,CAAC,CAAC;EAEF,MAAMwB,sBAAsB,GAAGh5C,mEAAe,CAAEU,MAAc,IAAK;IACjEs3C,wBAAwB,CAAC,KAAK,CAAC;IAC/BE,eAAe,CAACx3C,MAAM,CAAC;EACzB,CAAC,CAAC;EAEF,MAAMu4C,cAAc,GAAGj5C,mEAAe,CAAEU,MAAc,IAAK;IACzD,MAAM6E,IAAI,GAAG4H,6DAAU,CAACrF,kDAAS,CAAC,CAAC,EAAEpH,MAAM,CAAC;IAC5C,MAAMywB,UAAU,GAAG8mB,YAAY,KAAKv3C,MAAM,IAAI,CAACq3C,qBAAqB;IACpE,IAAI,CAACxyC,IAAI,EAAE,OAAOzD,SAAS;IAE3B,OACEtB,yDAAA,CAACN,qDAAQ;MAEPyE,OAAO,EAAEA,CAAA,KAAMq0C,sBAAsB,CAACt4C,MAAM,CAAE;MAAA+D,QAAA,GAE9CrE,wDAAA,CAAC4E,uDAAM;QACLsB,IAAI,EAAC,OAAO;QACZf,IAAI,EAAEA;MAAK,CACZ,CAAC,EACF/E,yDAAA;QAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAAC+zC,QAAQ,CAAE;QAAAz0C,QAAA,GAC9CrE,wDAAA,CAAC03B,8DAAa;UAACryB,SAAS,EAAEN,uEAAM,CAACg0C,SAAU;UAAC5zC,IAAI,EAAEA,IAAK;UAAC8qC,MAAM;UAACC,UAAU;QAAA,CAAE,CAAC,EAC5ElwC,wDAAA;UAAMqF,SAAS,EAAEN,uEAAM,CAACi0C,YAAa;UAAA30C,QAAA,EAClCyI,oEAAa,CAAC3H,IAAI,CAAC,GAAG7D,IAAI,CAAC,qBAAqB,CAAC,GAAGA,IAAI,CAAC,aAAa;QAAC,CACpE,CAAC;MAAA,CACJ,CAAC,EACNtB,wDAAA,CAAC6E,2DAAI;QACHQ,SAAS,EAAEN,uEAAM,CAACqpB,QAAS;QAC3BhoB,IAAI,EAAE2qB,UAAU,GAAG,OAAO,GAAG;MAAc,CAC5C,CAAC;IAAA,CACM,CAAC;EAEf,CAAC,CAAC;EAEF,MAAMkoB,oBAAqE,GAAG95C,yDAAO,CAAC,MAAM;IAC1F,OAAO,CAAC;MAAE+uB,SAAS;MAAE9lB;IAAO,CAAC,KAC3BhI,yDAAA,CAACgL,mDAAM;MACLuI,MAAM,EAAE,CAAC6gB,QAAS;MAClBtuB,IAAI,EAAC,SAAS;MACdsS,KAAK,EAAC,aAAa;MACnBnT,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAACm0C,oBAAoB,EAAE9wC,MAAM,GAAG,QAAQ,GAAG,EAAE,CAAE;MAC/E7D,OAAO,EAAE2pB,SAAU;MACnBzG,SAAS,EAAEnmB,IAAI,CAAC,mBAAmB,CAAE;MAAA+C,QAAA,GAErCrE,wDAAA,CAAC4E,uDAAM;QACLS,SAAS,EAAEN,uEAAM,CAACo0C,sBAAuB;QACzCjzC,IAAI,EAAC,MAAM;QACXf,IAAI,EAAEwyC,qBAAqB,GAAGV,cAAc,GAAGtM;MAAW,CAC3D,CAAC,EACF3qC,wDAAA,CAAC6E,2DAAI;QACHuB,IAAI,EAAC,MAAM;QACXf,SAAS,EAAEN,uEAAM,CAACq0C;MAAe,CAClC,CAAC;IAAA,CACI,CACT;EACH,CAAC,EAAE,CAAC5kB,QAAQ,EAAElzB,IAAI,EAAEqpC,UAAU,EAAEgN,qBAAqB,CAAC,CAAC;EAEvD,MAAM0B,eAAe,GAAGl6C,yDAAO,CAAC,MAAM;IACpC,IAAI,CAAC+4C,mBAAmB,EAAE,OAAOx2C,SAAS;IAC1C,OACE1B,wDAAA,CAAC42C,yDAAY;MACXvxC,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAACu0C,cAAc,EAAE,uBAAuB,CAAE;MAC1EC,eAAe,EAAEx0C,uEAAM,CAACy0C,oBAAqB;MAC7CC,OAAO,EAAER,oBAAqB;MAC9BlpB,SAAS,EAAC,OAAO;MACjBF,SAAS;MAAAxrB,QAAA,EAER2zC,oBAAoB,CAACjzB,GAAG,CAAEvd,EAAE,IAC3BqxC,cAAc,CAACrxC,EAAE,CAClB;IAAC,CACU,CAAC;EAEnB,CAAC,EAAE,CAACyxC,oBAAoB,EAAEjB,oBAAoB,EAAEE,mBAAmB,CAAC,CAAC;EAErE,MAAMG,WAAW,GAAGl5C,yDAAO,CAAC,MAAM;IAChC,MAAMwL,MAAM,GAAGjD,kDAAS,CAAC,CAAC;IAC1B,MAAMgyC,GAAG,GAAG52C,OAAO,EAAEs1C,SAAS,EAAEC,WAAW;IAC3C,IAAI,CAACqB,GAAG,EAAE;MACR,OAAOh4C,SAAS;IAClB;IAEA,MAAM8sC,MAAqB,GAAG,EAAE;IAChC,IAAImL,gBAAgB,GAAG,KAAK;IAC5B,IAAIC,eAAe,GAAG,CAAC;IAEvBF,GAAG,CAACx3B,OAAO,CAAEo2B,OAAO,IAAK;MACvB,MAAMnzC,IAAI,GAAGmzC,OAAO,CAACh4C,MAAM,GAAGyM,6DAAU,CAACpC,MAAM,EAAE2tC,OAAO,CAACh4C,MAAM,CAAC,GAAGoB,SAAS;MAC5E,IAAI,CAACyD,IAAI,IAAI,CAACmzC,OAAO,CAACE,WAAW,IAAI,CAACF,OAAO,CAACC,IAAI,EAAE;MACpD,IAAID,OAAO,CAACC,IAAI,EAAE;QAChBqB,eAAe,GAAGtB,OAAO,CAACtjC,KAAK;MACjC;MAEA,IAAIsjC,OAAO,CAACC,IAAI,KAAKD,OAAO,CAACh4C,MAAM,KAAKu3C,YAAY,IAAKS,OAAO,CAACE,WAAW,IAAI,CAACb,qBAAsB,CAAC,EAAE;MAE1G,MAAMkC,gBAAgB,GAAGhC,YAAY,KAAKS,OAAO,CAACh4C,MAAM,IAAKq3C,qBAAqB,IAAIW,OAAO,CAACE,WAAY;MAE1G,IAAIqB,gBAAgB,EAAE;QACpBF,gBAAgB,GAAG,IAAI;MACzB;MAEAnL,MAAM,CAAClpB,IAAI,CAAC;QACV3hB,MAAM,EAAE20C,OAAO,CAACtjC,KAAK;QACrB8kC,WAAW,EAAED,gBAAgB,IAAIrC,SAAS,GAAGh9B,WAAW,GAAG,CAAC;QAC5D+9B,IAAI,EAAED,OAAO,CAACC,IAAI;QAClBC,WAAW,EAAEF,OAAO,CAACE,WAAW;QAChClvC,IAAI,EAAEnE;MACR,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,IAAI,CAACw0C,gBAAgB,EAAE;MACrB,MAAM7yC,MAAM,GAAGiG,6DAAU,CAACpC,MAAM,EAAEktC,YAAY,CAAC;MAC/CrJ,MAAM,CAAClpB,IAAI,CAAC;QACV3hB,MAAM,EAAEi2C,eAAe;QACvBE,WAAW,EAAEtC,SAAS,GAAGh9B,WAAW,GAAG,CAAC;QACxC+9B,IAAI,EAAE,IAAI;QACVjvC,IAAI,EAAExC;MACR,CAAC,CAAC;IACJ;IAEA0nC,MAAM,CAAC3sB,IAAI,CAAC,CAACk4B,CAAC,EAAEC,CAAC,KAAMA,CAAC,CAACr2C,MAAM,GAAGq2C,CAAC,CAACF,WAAW,IAAKC,CAAC,CAACp2C,MAAM,GAAGo2C,CAAC,CAACD,WAAW,CAAC,CAAC;IAE9E,OAAOtL,MAAM,CAACyL,KAAK,CAAC,CAAC,EAAEnD,gBAAgB,CAAC;EAC1C,CAAC,EAAE,CAACU,SAAS,EAAE10C,OAAO,EAAEs1C,SAAS,EAAEC,WAAW,EAAE79B,WAAW,EAAEq9B,YAAY,EAAEF,qBAAqB,CAAC,CAAC;EAElG,MAAMuC,SAAS,GAAGh6B,IAAI,IAAI3Z,mEAAY,CAAChF,OAAO,EAAE2e,IAAI,CAAC;EAErD,OACE9f,yDAAA,CAAC4d,kDAAK;IACJ5V,MAAM,EAAE5D,OAAO,CAAC8G,KAAK,CAAE;IACvB1B,OAAO,EAAEwtC,sBAAuB;IAChChwB,MAAM;IACNkW,sBAAsB;IACtB9wB,gBAAgB,EAAEzH,uEAAM,CAAC0H,OAAQ;IACjC6a,kBAAkB;IAAAjjB,QAAA,GAElBrE,wDAAA;MAAKqF,SAAS,EAAEN,uEAAM,CAACo1C,wBAAyB;MAAA91C,QAAA,EAC7Cg1C;IAAe,CACb,CAAC,EACNr5C,wDAAA;MAAKqF,SAAS,EAAEN,uEAAM,CAACw4B,kBAAmB;MAAAl5B,QAAA,EACxCrE,wDAAA,CAACke,4DAAY;QAACnH,OAAO,EAAElI,WAAY;QAACxJ,SAAS,EAAEN,uEAAM,CAACy4B,YAAa;QAAC9V,aAAa;MAAA,CAAE;IAAC,CACjF,CAAC,EAEN1nB,wDAAA,CAAC63B,oDAAU;MACTxyB,SAAS,EAAEN,uEAAM,CAAC04B,MAAO;MACzBC,YAAY,EAAEqZ,oBAAqB;MACnCjZ,QAAQ,EAAEyQ,SAAU;MACpBn7B,QAAQ,EAAE+mB;IAAmB,CAC9B,CAAC,EACFn6B,wDAAA;MAAIqF,SAAS,EAAEN,uEAAM,CAACjB,KAAM;MAAAO,QAAA,EAAE9C,OAAO,CAAC,oBAAoB;IAAC,CAAK,CAAC,EACjEvB,wDAAA;MAAKqF,SAAS,EAAEN,uEAAM,CAACgP,WAAY;MAAA1P,QAAA,EAChCmzB,sEAAU,CAACj2B,OAAO,CAAC,mBAAmB,EAAE24C,SAAS,CAAC,EAAE,CAAC,iBAAiB,EAAE,OAAO,CAAC;IAAC,CAC/E,CAAC,EACNl6C,wDAAA,CAAC62C,sDAAS;MAAAxyC,QAAA,EACPg0C,WAAW,IAAIr4C,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAACq1C,QAAS;QAAA/1C,QAAA,EAAE9C,OAAO,CAAC,yBAAyB;MAAC,CAAM;IAAC,CAClF,CAAC,EACX82C,WAAW,IACVr4C,wDAAA;MAAKqF,SAAS,EAAEN,uEAAM,CAACse,GAAI;MAAAhf,QAAA,EACxBg0C,WAAW,CAACtzB,GAAG,CAAEuzB,OAAO,IAAK;QAC5B,MAAM+B,SAAS,GAAG3D,+DAAa,CAAC4B,OAAO,CAAC30C,MAAM,GAAG20C,OAAO,CAACwB,WAAW,CAAC;QACrE,MAAM30C,IAAI,GAAImzC,OAAO,CAACE,WAAW,IAAI,CAACF,OAAO,CAAChvC,IAAI,IAAKgvC,OAAO,CAACC,IAAI,IAAIZ,qBAAsB,GACzFV,cAAc,GAAGqB,OAAO,CAAChvC,IAAI;QACjC,MAAMtG,IAAI,GAAG,cAAc,IAAImC,IAAI,GAAG5D,OAAO,CAAC4D,IAAI,CAAC+iC,QAAQ,CAAC,GACxD/iC,IAAI,IAAIoB,mEAAY,CAAChF,OAAO,EAAE4D,IAAI,CAAC;QACvC,OACEnF,wDAAA,CAAC22C,0DAAS;UACRtxC,SAAS,EAAEN,uEAAM,CAACu1C,OAAQ;UAE1Bn1C,IAAI,EAAEA,IAAK;UACXo1C,SAAS,EAAEF,SAAU;UACrBG,SAAS,EAAC,MAAM;UAChBC,cAAc,EAAE11C,uEAAM,CAAC21C,QAAS;UAChC13C,IAAI,EAAEA;QAAK,GALN,GAAGs1C,OAAO,CAAChvC,IAAI,EAAE9B,EAAE,IAAI,WAAW,IAAI6yC,SAAS,EAMrD,CAAC;MAEN,CAAC;IAAC,CACC,CACN,EACAhC,WAAW,IAAKr4C,wDAAA,CAAC62C,sDAAS;MAACxxC,SAAS,EAAEN,uEAAM,CAAC41C;IAAU,CAAE,CAAE,EAC5D36C,wDAAA,CAAC6iC,qDAAQ;MACPx9B,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAACglC,QAAQ,EAAE,iBAAiB,CAAE;MAC9Dj2B,OAAO,EAAE,CAAC6jC,qBAAsB;MAChCvkC,QAAQ,EAAE2kC,4BAA6B;MACvC1kC,KAAK,EAAE9R,OAAO,CAAC,iCAAiC;IAAE,CACnD,CAAC,EACFvB,wDAAA,CAACoL,mDAAM;MACL7G,OAAO,EAAEk0C,UAAW;MAAAp0C,QAAA,EAEnB/C,IAAI,CAAC,kBAAkB,EAAE;QAAEqC,MAAM,EAAE6W;MAAY,CAAC,EAAE;QACjDlT,SAAS,EAAE,IAAI;QACfszC,kBAAkB,EAAE;UAClB,CAACrE,2DAAsB,GAAGv2C,wDAAA,CAAC6E,2DAAI;YAACQ,SAAS,EAAEN,uEAAM,CAACq5B,UAAW;YAACh4B,IAAI,EAAC;UAAM,CAAE;QAC7E;MACF,CAAC;IAAC,CACI,CAAC,EACTpG,wDAAA;MAAGqF,SAAS,EAAEN,uEAAM,CAAC81C,UAAW;MAAAx2C,QAAA,EAC7B/C,IAAI,CAAC,oBAAoB,EAAE;QAC1B0S,IAAI,EAAEhU,wDAAA,CAAC8d,yDAAQ;UAAC9a,IAAI,EAAE1B,IAAI,CAAC,uBAAuB,CAAE;UAACsiB,GAAG,EAAEtiB,IAAI,CAAC,mBAAmB;QAAE,CAAE;MACxF,CAAC,EAAE;QACDgG,SAAS,EAAE;MACb,CAAC;IAAC,CACD,CAAC;EAAA,CACC,CAAC;AAEZ,CAAC;AAED,iEAAepI,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAM4U,IAAI,GAAG5U,KAAK,IAAIkrC,6DAAU,CAAC7rC,MAAM,EAAEW,KAAK,CAACoF,MAAM,CAAC;EACtD,MAAM5N,OAAO,GAAGwI,KAAK,IAAImrC,oEAAiB,CAAC9rC,MAAM,EAAEW,KAAK,CAACoF,MAAM,EAAEpF,KAAK,CAAC06B,SAAS,CAAC;EACjF,MAAMn3B,WAAW,GAAGlE,MAAM,CAACiJ,KAAK,EAAEmD,OAAO;EACzC,MAAMw3B,SAAS,GAAG5jC,MAAM,CAACqM,SAAS,CAAC8jC,qBAAqB,IAAI9D,mBAAmB;EAC/E,MAAME,cAAc,GAAGvsC,MAAM,CAACyrC,QAAQ,CAAC2E,mBAAmB;EAC1D,MAAM5D,0BAA0B,GAAGj3B,IAAI,EAAEi3B,0BAA0B;EACnE,MAAM9uC,aAAa,GAAGsC,MAAM,CAACtC,aAAc;EAC3C,MAAMytB,WAAW,GAAGP,6DAAU,CAAC5qB,MAAM,EAAEtC,aAAa,CAAE;EAEtD,OAAO;IACL6X,IAAI;IACJpd,OAAO;IACP+L,WAAW;IACX0/B,SAAS;IACT2I,cAAc;IACdC,0BAA0B;IAC1B9uC,aAAa;IACbytB;EACF,CAAC;AACH,CACF,CAAC,CAACn4B,iBAAiB,CAAC,CAAC,E;;;;;;;;;;;;;;AC3YrB;AACA,iEAAe,CAAC,mgCAAmgC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEr9B;AAEJ;AACR;AACS;AAEd;AACgB;AACR;AACY;AAEN;AAChB;AACE;AAEC;AAAA;AAiB9C,MAAMu9C,cAAc,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC;AAC9D,MAAMC,UAAU,GAAG,KAAK;AACxB,MAAMC,UAAU,GAAG,KAAK,GAAG12C,gEAAG;AAC9B,MAAM22C,iBAAiB,GAAG,EAAE;AAC5B,MAAMC,kBAAkB,GAAG,EAAE;AAC7B,MAAMC,WAAW,GAAG,EAAE;AAEtB,MAAMC,eAAe,GAAG,EAAE;AAC1B,MAAMC,cAAc,GAAG,CAAC;AACxB,MAAMC,gBAAgB,GAAG,CAAC;AAE1B,MAAMC,wBAAwB,GAAG,CAAC,GAAGj3C,gEAAG;AACxC,MAAMk3C,eAAe,GAAG,GAAG,GAAGl3C,gEAAG;AACjC,MAAMm3C,eAAe,GAAG,KAAK,GAAGn3C,gEAAG;AACnC,MAAMo3C,uBAAuB,GAAG,CAAC;AACjC,MAAMC,iBAAiB,GAAG,CAAC;AAE3B,IAAIC,iBAAgD;AAEpD,SAASC,YAAYA,CAACj5C,IAAY,EAAEk5C,IAAY,EAAU;EACxD,IAAI,CAACF,iBAAiB,EAAE;IACtBA,iBAAiB,GAAGG,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EACtD;EACA,MAAMC,GAAG,GAAGL,iBAAiB,CAACM,UAAU,CAAC,IAAI,CAAE;EAC/CD,GAAG,CAACH,IAAI,GAAGA,IAAI;EACf,OAAOG,GAAG,CAACE,WAAW,CAACv5C,IAAI,CAAC,CAACw5C,KAAK;AACpC;AAEA,MAAMC,aAAa,GAAG,CACpB,SAAS;AAAE;AACX,SAAS;AAAE;AACX,SAAS;AAAE;AACX,SAAS;AAAE;AACX,SAAS;AAAE;AACX,SAAS;AAAE;AACX,SAAS;AAAE;AACX,SAAS,CAAE;AAAA,CACZ;AAED,SAASC,mBAAmBA,CAAC7nC,QAAgB,EAAU;EACrD,MAAMmoB,KAAK,GAAGpsB,IAAI,CAACC,KAAK,CAACgE,QAAQ,GAAG4nC,aAAa,CAAC/yC,MAAM,CAAC;EACzD,OAAO+yC,aAAa,CAAC7rC,IAAI,CAAC89B,GAAG,CAAC1R,KAAK,EAAEyf,aAAa,CAAC/yC,MAAM,GAAG,CAAC,CAAC,CAAC;AACjE;AAEA,MAAMmuB,UAAU,GAAGA,CAAC;EAClBiG,QAAQ;EACRJ,YAAY;EACZC,QAAQ,EAAEgf,YAAY;EACtB/e,eAAe;EACfC,kBAAkB;EAClBx4B,SAAS;EACT04B,wBAAwB;EACxBG,qBAAqB;EACrBC,sBAAsB;EACtB/qB,QAAQ;EACR4qB,YAAY;EACZC;AACQ,CAAC,KAAK;EACd,MAAM9gB,YAAY,GAAGrE,wDAAM,CAAiB,CAAC;EAC7C,MAAM8jC,uBAAuB,GAAG9jC,wDAAM,CAAiB,CAAC;EACxD,MAAMxX,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMk9C,YAAY,GAAGF,YAAY,IAAI,CAAC;;EAEtC;EACA,MAAMG,cAAc,GAAG39C,yDAAO,CAAC,MAAM;IACnC,IAAI,CAAC0+B,kBAAkB,IAAI,CAACD,eAAe,IAAIA,eAAe,IAAIif,YAAY,EAAE;MAC9E,OAAOA,YAAY;IACrB;IAEA,IAAIE,GAAG,GAAGF,YAAY;IACtB,IAAIG,IAAI,GAAGpf,eAAe;IAE1B,OAAOmf,GAAG,GAAGC,IAAI,EAAE;MACjB,MAAMC,GAAG,GAAGrsC,IAAI,CAACC,KAAK,CAAC,CAACksC,GAAG,GAAGC,IAAI,IAAI,CAAC,CAAC;MACxC,MAAME,UAAU,GAAGC,WAAW,CAACF,GAAG,EAAEnf,QAAQ,CAAC;MAC7C,MAAMsf,YAAY,GAAGC,WAAW,CAACH,UAAU,EAAEtf,eAAe,EAAEqf,GAAG,CAAC;MAClE,MAAMK,kBAAkB,GAAGF,YAAY,GAAGF,UAAU,CAACxzC,MAAM;MAE3D,IAAI4zC,kBAAkB,GAAGzf,kBAAkB,EAAE;QAC3Cmf,IAAI,GAAGC,GAAG;MACZ,CAAC,MAAM;QACLF,GAAG,GAAGE,GAAG,GAAG,CAAC;MACf;IACF;IAEA,OAAOrsC,IAAI,CAACskC,GAAG,CAAC2H,YAAY,EAAEE,GAAG,CAAC;EACpC,CAAC,EAAE,CAACF,YAAY,EAAEjf,eAAe,EAAEC,kBAAkB,EAAEC,QAAQ,CAAC,CAAC;EAEjE,MAAMyf,MAAM,GAAGp+C,yDAAO,CAAC,MAAM;IAC3B,OAAOg+C,WAAW,CAACL,cAAc,EAAEhf,QAAQ,CAAC;EAC9C,CAAC,EAAE,CAACA,QAAQ,EAAEgf,cAAc,CAAC,CAAC;EAE9B,MAAM,CAACjrC,KAAK,EAAE2rC,QAAQ,CAAC,GAAG/1C,0DAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACg2C,cAAc,EAAEC,iBAAiB,CAAC,GAAGj2C,0DAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACk2C,UAAU,EAAEC,aAAa,CAAC,GAAGn2C,0DAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACo2C,UAAU,EAAEC,aAAa,CAAC,GAAGr2C,0DAAQ,CAAC,KAAK,CAAC;EACnD,MAAMs2C,SAAS,GAAGjlC,wDAAM,CAAqB,CAAC;EAC9C,MAAMklC,cAAc,GAAGhD,8DAAW,CAAC2C,UAAU,CAAC;EAE9C,MAAMpD,SAAS,GAAGj5C,IAAI,CAACyC,MAAM,CAACk6C,QAAQ,CAACV,MAAM,EAAE1rC,KAAK,EAAEirC,cAAc,CAAC,CAAC;EAEtE,MAAMoB,iBAAiB,GAAGtgB,eAAe,KAAKl8B,SAAS,GACnD27C,WAAW,CAACE,MAAM,EAAE3f,eAAe,EAAEkf,cAAc,CAAC,GAAG,CAAC;EAE5DlwC,2DAAS,CAAC,MAAM;IACd4wC,QAAQ,CAACH,WAAW,CAACE,MAAM,EAAE7f,YAAY,EAAEof,cAAc,CAAC,CAAC;EAC7D,CAAC,EAAE,CAACpf,YAAY,EAAE6f,MAAM,EAAET,cAAc,CAAC,CAAC;EAE1ClwC,2DAAS,CAAC,MAAM;IACd,IAAI,CAACgwC,uBAAuB,CAACx5B,OAAO,EAAE;IAEtC,MAAM+6B,OAAO,GAAGvB,uBAAuB,CAACx5B,OAAO,CAACg7B,aAAa,CAAC,IAAIr5C,gEAAM,CAACs5C,kBAAkB,EAAE,CAAC;IAC9F,IAAI,CAACF,OAAO,EAAE;IAEd,MAAMG,aAAa,GAAGC,gBAAgB,CAACJ,OAAO,CAAC;IAC/C,MAAMjC,IAAI,GAAG,GAAGoC,aAAa,CAACE,UAAU,IAAIF,aAAa,CAACG,QAAQ,IAAIH,aAAa,CAACI,UAAU,EAAE;IAEhG,MAAMC,SAAS,GAAG1C,YAAY,CAAC1B,SAAS,EAAE2B,IAAI,CAAC;IAC/C,MAAM0C,UAAU,GAAGhD,eAAe,GAAGC,eAAe,GAAG8C,SAAS;IAEhE,MAAME,aAAa,GAAGjC,uBAAuB,CAACx5B,OAAO,CAACg7B,aAAa,CAAC,IAAIr5C,gEAAM,CAACg5B,wBAAwB,EAAE,CAAC;IAC1G,MAAM+gB,gBAAgB,GAAGD,aAAa,EAAEE,WAAW,IAAI,CAAC;IAExD,MAAMC,YAAY,GAAGpuC,IAAI,CAACskC,GAAG,CAAC0J,UAAU,EAAEE,gBAAgB,CAAC;IAC3D,MAAMG,aAAa,GAAGD,YAAY,GAAGrD,wBAAwB;IAE7DiC,aAAa,CAAEsB,YAAY,IAAK;MAC9B,IAAItuC,IAAI,CAACuuC,GAAG,CAACF,aAAa,GAAGC,YAAY,CAAC,GAAGnD,iBAAiB,EAAE;QAC9D,OAAOmD,YAAY;MACrB;MACA,OAAOD,aAAa;IACtB,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC1E,SAAS,EAAExc,wBAAwB,CAAC,CAAC;EAEzC,MAAMqhB,qBAAqB,GAAGx/C,kEAAe,CAAEyc,KAA0B,IAAK;IAC5EqhC,iBAAiB,CAACrhC,KAAK,CAACgjC,WAAW,CAAC7C,KAAK,CAAC;EAC5C,CAAC,CAAC;EAEFvB,oEAAiB,CAAC99B,YAAY,EAAEiiC,qBAAqB,CAAC;EAEtD,MAAMvqC,QAAQ,GAAGhD,KAAK,GAAG0rC,MAAM,CAAC7zC,MAAM;EACtC,MAAM;IACJ41C,SAAS;IAAEC,SAAS;IAAEC,UAAU;IAAEC,aAAa;IAAEC,SAAS,EAAEC;EAC9D,CAAC,GAAGxgD,yDAAO,CAAC,MAAM;IAChB,OAAOygD,iBAAiB,CAACnC,cAAc,EAAEE,UAAU,EAAE9oC,QAAQ,CAAC;EAChE,CAAC,EAAE,CAAC4oC,cAAc,EAAEE,UAAU,EAAE9oC,QAAQ,CAAC,CAAC;EAE1C,MAAMgrC,QAAQ,GAAG1gD,yDAAO,CAAC,MAAM;IAC7B,OAAO2gD,gBAAgB,CAACH,gBAAgB,EAAEF,aAAa,CAAC;EAC1D,CAAC,EAAE,CAACE,gBAAgB,EAAEF,aAAa,CAAC,CAAC;EAErC,MAAMM,YAAY,GAAGngD,kEAAe,CAAEogD,KAA0C,IAAK;IACnF,MAAMC,QAAQ,GAAGvlB,MAAM,CAACslB,KAAK,CAAC98B,aAAa,CAACrR,KAAK,CAAC;IAClD,MAAMquC,YAAY,GAAGtvC,IAAI,CAACskC,GAAG,CAAC+K,QAAQ,EAAE/B,iBAAiB,CAAC;IAC1DV,QAAQ,CAAC0C,YAAY,CAAC;IAEtB,MAAMtlB,WAAW,GAAGqjB,QAAQ,CAACV,MAAM,EAAE2C,YAAY,EAAEpD,cAAc,CAAC;IAClE1pC,QAAQ,CAACwnB,WAAW,CAAC;EACvB,CAAC,CAAC;EAEF,MAAMulB,iBAAiB,GAAGvgD,kEAAe,CAAE+R,CAAuC,IAAK;IACrFosC,SAAS,CAAC36B,OAAO,GAAGzR,CAAC,CAACyuC,OAAO;IAC7BtC,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC,CAAC;EAEF,MAAMuC,iBAAiB,GAAGzgD,kEAAe,CAAE+R,CAAuC,IAAK;IACrF,IAAIosC,SAAS,CAAC36B,OAAO,KAAK1hB,SAAS,EAAE;IACrC,MAAM4+C,QAAQ,GAAG1vC,IAAI,CAACuuC,GAAG,CAACxtC,CAAC,CAACyuC,OAAO,GAAGrC,SAAS,CAAC36B,OAAO,CAAC;IACxD,IAAIk9B,QAAQ,IAAIxE,uBAAuB,EAAE;MACvCgC,aAAa,CAAC,IAAI,CAAC;IACrB;EACF,CAAC,CAAC;EAEF,MAAMyC,eAAe,GAAG3gD,kEAAe,CAAE+R,CAAuC,IAAK;IACnFosC,SAAS,CAAC36B,OAAO,GAAG1hB,SAAS;IAE7B,IAAI,CAACm8C,UAAU,IAAI5f,kBAAkB,IAAI9gB,YAAY,CAACiG,OAAO,EAAE;MAC7D,MAAMo9B,IAAI,GAAGrjC,YAAY,CAACiG,OAAO,CAACG,qBAAqB,CAAC,CAAC;MACzD,MAAMk9B,cAAc,GAAG,KAAK,GAAG/7C,gEAAG;MAElC,MAAMg8C,YAAY,GAAG/uC,CAAC,CAACyuC,OAAO,IAAII,IAAI,CAAClvB,KAAK,GAAGmvB,cAAc,IAAI9uC,CAAC,CAACyuC,OAAO,IAAII,IAAI,CAAClvB,KAAK;MAExF,IAAIovB,YAAY,EAAE;QAChBziB,kBAAkB,CAAC,CAAC;MACtB;IACF;IAEA6f,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC,CAAC;EAEF,MAAM6C,YAAY,GAAGziB,qBAAqB,GAAGwe,mBAAmB,CAAC7nC,QAAQ,CAAC,GAAGnT,SAAS;EAEtF,MAAMk/C,UAAU,GAAGtzC,4DAAU,CAC3B9I,OAAO,CAACm5C,UAAU,CAAC,IAAI,UAAUA,UAAU,IAC7C,CAAC;EAED,MAAMkD,SAAS,GAAGvzC,4DAAU,CAC1B,eAAeuH,QAAQ,EAAE,EACzB,kBAAkByqC,SAAS,IAAI,EAC/B,kBAAkBC,SAAS,IAAI,EAC/BoB,YAAY,IAAI,oBAAoBA,YAAY,EAClD,CAAC;EAED,OACEvgD,yDAAA;IACE8Z,GAAG,EAAEiD,YAAa;IAClB9X,SAAS,EAAEgI,gEAAc,CAACtI,gEAAM,CAACO,IAAI,EAAEu4C,UAAU,IAAI94C,gEAAM,CAAC+7C,QAAQ,EAAEz7C,SAAS,CAAE;IACjF8Q,KAAK,EAAE0qC,SAAU;IAAAx8C,QAAA,GAEjBrE,wDAAA;MAAKqF,SAAS,EAAEN,gEAAM,CAACg8C,oBAAqB;MAAA18C,QAAA,EAC1CjE,yDAAA;QACEiF,SAAS,EAAEgI,gEAAc,CAACtI,gEAAM,CAACi8C,aAAa,EAAEhjB,YAAY,IAAIj5B,gEAAM,CAACk8C,SAAS,CAAE;QAClF18C,OAAO,EAAEy5B,YAAa;QAAA35B,QAAA,GAEtBjE,yDAAA;UACEiF,SAAS,EAAEgI,gEAAc,CACvBtI,gEAAM,CAACsuB,iBAAiB,EACxB6K,qBAAqB,IAAIn5B,gEAAM,CAAC47C,YAAY,EAC5C,CAAC,CAAC3C,cAAc,IAAIA,cAAc,KAAK,CAAC,KAAKj5C,gEAAM,CAACm8C,YACtD,CAAE;UACF/qC,KAAK,EAAEyqC,UAAW;UAAAv8C,QAAA,GAElBrE,wDAAA,CAACkL,yDAAQ;YAACU,MAAM,EAAC,QAAQ;YAACvG,SAAS,EAAEN,gEAAM,CAACo8C;UAAsB,CAAE,CAAC,EACrE/gD,yDAAA;YACE8Z,GAAG,EAAE0iC,uBAAwB;YAC7Bv3C,SAAS,EAAEgI,gEAAc,CACvBtI,gEAAM,CAACq8C,oBAAoB,EAC3BrjB,wBAAwB,IAAIh5B,gEAAM,CAACs8C,eACrC,CAAE;YAAAh9C,QAAA,GAEFjE,yDAAA;cAAKiF,SAAS,EAAEN,gEAAM,CAACs5C,kBAAmB;cAAAh6C,QAAA,GACxCrE,wDAAA,CAAC6E,0DAAI;gBAACuB,IAAI,EAAC,MAAM;gBAACf,SAAS,EAAEN,gEAAM,CAACuuB;cAAkB,CAAE,CAAC,EACzDtzB,wDAAA,CAACy3B,+DAAe;gBAACz0B,IAAI,EAAEu3C;cAAU,CAAE,CAAC;YAAA,CACjC,CAAC,EACNv6C,wDAAA;cAAKqF,SAAS,EAAEN,gEAAM,CAACg5B,wBAAyB;cAAA15B,QAAA,EAC7C05B;YAAwB,CACtB,CAAC;UAAA,CACH,CAAC;QAAA,CACH,CAAC,EACN39B,yDAAA;UACEiF,SAAS,EAAEN,gEAAM,CAACu8C,qBAAsB;UACxC9E,KAAK,EAAEmD,gBAAiB;UACxB4B,MAAM,EAAEhG,WAAY;UACpBiG,OAAO,EAAE,OAAO7B,gBAAgB,IAAIpE,WAAW,EAAG;UAClDkG,IAAI,EAAC,MAAM;UACX,eAAY,MAAM;UAClBtpC,IAAI,EAAC,cAAc;UACnBhC,KAAK,EAAE,oCAAoCqpC,UAAU,WAAY;UAAAn7C,QAAA,GAEhE,CAAC65B,qBAAqB,IACrBl+B,wDAAA;YAAAqE,QAAA,EACEjE,yDAAA;cAAgBoH,EAAE,EAAC,mBAAmB;cAACk6C,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAACC,EAAE,EAAC,GAAG;cAAAx9C,QAAA,GAChErE,wDAAA;gBAAM8hD,MAAM,EAAC,MAAM;gBAAC,cAAW;cAAS,CAAE,CAAC,EAC3C9hD,wDAAA;gBAAM8hD,MAAM,EAAC,MAAM;gBAAC,cAAW;cAAS,CAAE,CAAC;YAAA,CAC7B;UAAC,CACb,CACP,EACD9hD,wDAAA;YACEqF,SAAS,EAAEN,gEAAM,CAACg9C,yBAA0B;YAC5CC,CAAC,EAAEnC,QAAS;YACZ4B,IAAI,EAAEd,YAAY,IAAI;UAA0B,CACjD,CAAC;QAAA,CACC,CAAC;MAAA,CACH;IAAC,CACH,CAAC,EACN3gD,wDAAA;MAAKqF,SAAS,EAAEgI,gEAAc,CAACtI,gEAAM,CAAC8P,QAAQ,EAAEqpB,qBAAqB,IAAIn5B,gEAAM,CAAC47C,YAAY,CAAE;MAAAt8C,QAAA,EAC5FrE,wDAAA,CAACkL,yDAAQ;QAACU,MAAM,EAAC,UAAU;QAACvG,SAAS,EAAEN,gEAAM,CAAC8G;MAAS,CAAE;IAAC,CACvD,CAAC,EACN7L,wDAAA;MACEqF,SAAS,EAAEN,gEAAM,CAAC04B,MAAO;MACzB77B,IAAI,EAAC,OAAO;MACZ8sC,GAAG,EAAE,CAAE;MACPwG,GAAG,EAAEqI,MAAM,CAAC7zC,MAAO;MACnBg0B,YAAY,EAAE2f,WAAW,CAACE,MAAM,EAAE7f,YAAY,EAAEof,cAAc,CAAE;MAChEmF,IAAI,EAAC,KAAK;MACV7uC,QAAQ,EAAE2sC,YAAa;MACvBmC,aAAa,EAAE/B,iBAAkB;MACjCgC,aAAa,EAAE9B,iBAAkB;MACjC+B,WAAW,EAAE7B;IAAgB,CAC9B,CAAC,EACDpiB,sBAAsB,IACrBn+B,wDAAA,CAAC6E,0DAAI;MAACuB,IAAI,EAAC,KAAK;MAACf,SAAS,EAAEN,gEAAM,CAACs9C;IAAgB,CAAE,CACtD;EAAA,CACE,CAAC;AAEV,CAAC;AAED,SAASlF,WAAWA,CAACxf,QAAgB,EAAEG,QAAgB,EAAY;EACjE,MAAM0Q,MAAM,GAAG,EAAE;EAEjB,KAAK,IAAI8T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpH,cAAc,CAACxxC,MAAM,EAAE44C,CAAC,EAAE,EAAE;IAC9C,IAAIpH,cAAc,CAACoH,CAAC,CAAC,IAAI3kB,QAAQ,EAAE;IAEnC,IAAIud,cAAc,CAACoH,CAAC,CAAC,GAAGxkB,QAAQ,EAAE;MAChC0Q,MAAM,CAAClpB,IAAI,CAAC41B,cAAc,CAACoH,CAAC,CAAC,CAAC;IAChC;IAEA,IAAIpH,cAAc,CAACoH,CAAC,CAAC,IAAIxkB,QAAQ,EAAE;MACjC0Q,MAAM,CAAClpB,IAAI,CAACwY,QAAQ,CAAC;MACrB,OAAO0Q,MAAM;IACf;EACF;EAEA,MAAM+T,SAAS,GAAGrH,cAAc,CAACA,cAAc,CAACxxC,MAAM,GAAG,CAAC,CAAC;EAC3D,MAAM84C,WAAW,GAAG5xC,IAAI,CAACiH,IAAI,CAAC,CAAC8lB,QAAQ,GAAG4kB,SAAS,IAAIpH,UAAU,CAAC;EAClE,IAAIsH,SAAS,GAAGF,SAAS,GAAG3xC,IAAI,CAACskC,GAAG,CAAC,CAAC,EAAEsN,WAAW,CAAC,GAAGrH,UAAU;EAEjE,OAAOsH,SAAS,GAAG3kB,QAAQ,EAAE;IAC3B0Q,MAAM,CAAClpB,IAAI,CAACm9B,SAAS,CAAC;IACtBA,SAAS,IAAItH,UAAU;EACzB;EACA3M,MAAM,CAAClpB,IAAI,CAACwY,QAAQ,CAAC;EAErB,OAAO0Q,MAAM;AACf;AAEA,SAAS6O,WAAWA,CAACE,MAAgB,EAAE1rC,KAAa,EAAE8rB,QAAgB,EAAE;EACtE,MAAM+kB,UAAU,GAAGnF,MAAM,CAACoF,SAAS,CAAEC,KAAK,IAAK/wC,KAAK,IAAI+wC,KAAK,CAAC;EAC9D,MAAMC,SAAS,GAAGtF,MAAM,CAACmF,UAAU,GAAG,CAAC,CAAC,IAAI/kB,QAAQ;EACpD,MAAM8kB,SAAS,GAAGlF,MAAM,CAACmF,UAAU,CAAC,IAAInF,MAAM,CAACA,MAAM,CAAC7zC,MAAM,GAAG,CAAC,CAAC;EACjE,IAAI+4C,SAAS,KAAKI,SAAS,EAAE,OAAOH,UAAU;EAC9C,MAAM7tC,QAAQ,GAAG,CAAChD,KAAK,GAAGgxC,SAAS,KAAKJ,SAAS,GAAGI,SAAS,CAAC;EAC9D,OAAOH,UAAU,GAAG7tC,QAAQ;AAC9B;AAEA,SAASopC,QAAQA,CAACV,MAAgB,EAAE1oC,QAAgB,EAAE8oB,QAAgB,EAAE;EACtE,MAAM+kB,UAAU,GAAG9xC,IAAI,CAACC,KAAK,CAACgE,QAAQ,CAAC;EACvC,MAAMguC,SAAS,GAAGtF,MAAM,CAACmF,UAAU,GAAG,CAAC,CAAC,IAAI/kB,QAAQ;EACpD,MAAM8kB,SAAS,GAAGlF,MAAM,CAACmF,UAAU,CAAC,IAAInF,MAAM,CAACA,MAAM,CAAC7zC,MAAM,GAAG,CAAC,CAAC;EACjE,MAAMmI,KAAK,GAAGgxC,SAAS,GAAG,CAACJ,SAAS,GAAGI,SAAS,KAAKhuC,QAAQ,GAAG6tC,UAAU,CAAC;EAC3E,OAAO9xC,IAAI,CAAC4W,KAAK,CAAC3V,KAAK,CAAC;AAC1B;AAEA,SAAS+tC,iBAAiBA,CACxBnC,cAAsB,EACtBE,UAAkB,EAClB9oC,QAAgB,EAChB;EACA,MAAMiuC,cAAc,GAAGnF,UAAU,GAAG,CAAC;EACrC,MAAMoF,mBAAmB,GAAG1H,iBAAiB,GAAG,CAAC;EACjD,MAAM2H,aAAa,GAAGF,cAAc,GAAGC,mBAAmB;EAE1D,MAAMzD,SAAS,GAAGwD,cAAc;EAChC,MAAMvD,SAAS,GAAG9B,cAAc,GAAGqF,cAAc;EAEjD,MAAMG,SAAS,GAAG7H,UAAU,GAAG,CAAC;EAChC,MAAM8H,WAAW,GAAGzF,cAAc,GAAGrC,UAAU;EAC/C,MAAM+H,gBAAgB,GAAGtuC,QAAQ,GAAGquC,WAAW;EAC/C,MAAME,iBAAiB,GAAGF,WAAW,GAAGC,gBAAgB;EAExD,MAAME,UAAU,GAAGF,gBAAgB,GAAGC,iBAAiB;EACvD,MAAME,cAAc,GAAGD,UAAU,GAAGF,gBAAgB,GAAGC,iBAAiB;EACxE,MAAM/tB,SAAS,GAAGguB,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC;EAErC,IAAI7D,UAAU,GAAG,CAAC;EAClB,IAAIC,aAAa,GAAG,CAAC;EACrB,IAAIC,SAAS,GAAGpE,kBAAkB;EAElC,MAAMiI,eAAe,GAAGT,cAAc,GAAGG,SAAS;EAElD,IAAIK,cAAc,GAAGC,eAAe,EAAE;IACpC,IAAID,cAAc,GAAG9H,eAAe,EAAE;MACpC,MAAMgI,CAAC,GAAG,CAACD,eAAe,GAAGD,cAAc,KAAKC,eAAe,GAAG/H,eAAe,CAAC;MAClFgE,UAAU,GAAGnqB,SAAS,GAAGmuB,CAAC,GAAGR,aAAa;IAC5C,CAAC,MAAM,IAAIM,cAAc,GAAG7H,cAAc,EAAE;MAC1C+D,UAAU,GAAGnqB,SAAS,GAAG2tB,aAAa;MACtC,MAAMQ,CAAC,GAAG,CAAChI,eAAe,GAAG8H,cAAc,KAAK9H,eAAe,GAAGC,cAAc,CAAC;MACjF,MAAMgI,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,GAAGD,CAAC,KAAK,CAAC,GAAGA,CAAC,CAAC,IAAI,CAAC,GAAGA,CAAC,CAAC;MAC5C9D,SAAS,GAAGpE,kBAAkB,GAAGmI,IAAI,IAAInI,kBAAkB,GAAGD,iBAAiB,CAAC;MAChFoE,aAAa,GAAGpqB,SAAS,GAAGmuB,CAAC,IAAI9D,SAAS,GAAG,CAAC,CAAC;IACjD,CAAC,MAAM;MACLF,UAAU,GAAGnqB,SAAS,GAAG2tB,aAAa;MACtCtD,SAAS,GAAGrE,iBAAiB;MAC7BoE,aAAa,GAAGpqB,SAAS,IAAIqqB,SAAS,GAAG,CAAC,CAAC;IAC7C;EACF;EAEA,MAAMgE,YAAY,GAAGhE,SAAS,GAAG,CAAC,GAAGiE,UAAU,GAAGjI,gBAAgB;EAClE,MAAMkI,gBAAgB,GAAGhzC,IAAI,CAACskC,GAAG,CAAC,CAACwO,YAAY,EAAE9yC,IAAI,CAAC89B,GAAG,CAACgV,YAAY,EAAEjE,aAAa,CAAC,CAAC;EAEvF,OAAO;IACLH,SAAS;IACTC,SAAS;IACTC,UAAU;IACVC,aAAa,EAAEmE,gBAAgB;IAC/BlE;EACF,CAAC;AACH;AAEA,MAAMiE,UAAU,GAAG,CAAC;AAEpB,SAAS7D,gBAAgBA,CAACJ,SAAiB,EAAEmE,SAAiB,EAAU;EACtE,MAAMC,IAAI,GAAGpE,SAAS,GAAG,CAAC,GAAGmE,SAAS;EACtC,MAAME,CAAC,GAAGJ,UAAU;EACpB,MAAMK,CAAC,GAAGzI,WAAW,GAAGwI,CAAC;EAEzB,OAAO,WAAWrE,SAAS,QAAQoE,IAAI,GAAGC,CAAC,IAAIC,CAAC,MAAMF,IAAI,IAAIvI,WAAW,IAAIuI,IAAI,GAAGC,CAAC,IAAIC,CAAC,IAAI;AAChG;AAEA,iEAAe9kD,sDAAI,CAAC24B,UAAU,CAAC,E;;;;;;;;;;;;;;;;;;;;;;AClb8B;AACJ;AAKa;AACH;AACoB;AAE1C;AAEM;AAAA;AAWnD,MAAM54B,iBAA4C,GAAGA,CAAC;EACpDqM,KAAK;EACLuD,WAAW;EACXq1C;AACF,CAAC,KAAK;EACJ,MAAMC,OAAO,GAAG/kD,mDAAU,CAAC,CAAC;EAE5B,MAAMkC,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMw/B,aAAa,GAAG7U,6DAAW,CAAC,MAAM;IACtC,IAAI,CAAChf,KAAK,EAAE84C,UAAU,EAAE;MACtBD,OAAO,CAACE,sBAAsB,CAAC,CAAC;MAChC;IACF;IAEA,MAAM;MAAE3gD,QAAQ;MAAE4gD;IAAU,CAAC,GAAGh5C,KAAK;IACrC,MAAMi5C,KAAK,GAAG7gD,QAAQ,KAAK,KAAK;IAChC,MAAM8gD,cAAc,GAAGD,KAAK,GAAGL,UAAU,GAAGr1C,WAAW,EAAElL,MAAM;IAE/D,IAAI6gD,cAAc,KAAK9iD,SAAS,EAAE;MAChCyiD,OAAO,CAACE,sBAAsB,CAAC,CAAC;MAChC;IACF;IAEA,IAAIG,cAAc,GAAGF,SAAU,EAAE;MAC/BH,OAAO,CAAC70C,qBAAqB,CAAC;QAC5B5L,QAAQ,EAAE6gD,KAAK,GAAG,KAAK,GAAG,KAAK;QAC/BplC,KAAK,EAAE8kC,4EAAe,CAAC;MACzB,CAAC,CAAC;MACFE,OAAO,CAACE,sBAAsB,CAAC,CAAC;MAChC;IACF;IAEAF,OAAO,CAACM,mBAAmB,CAAC;MAC1BL,UAAU,EAAE94C,KAAK,CAAC84C,UAAU;MAC5BjlC,KAAK,EAAE8kC,4EAAe,CAAC;IACzB,CAAC,CAAC;IACFE,OAAO,CAACE,sBAAsB,CAAC,CAAC;EAClC,CAAC,EAAE,CAAC/4C,KAAK,EAAEuD,WAAW,EAAEq1C,UAAU,EAAEC,OAAO,CAAC,CAAC;EAE7C,MAAM14C,WAAW,GAAG6e,6DAAW,CAAC,MAAM;IACpC65B,OAAO,CAACE,sBAAsB,CAAC,CAAC;EAClC,CAAC,EAAE,CAACF,OAAO,CAAC,CAAC;EAEb,IAAI,CAAC74C,KAAK,EAAE;IACV,OAAO5J,SAAS;EAClB;EAEA,MAAM;IACJgjD,cAAc;IACdJ,SAAS;IACT5gD;EACF,CAAC,GAAG4H,KAAK;EAET,MAAMi5C,KAAK,GAAG7gD,QAAQ,KAAK,KAAK;EAEhC,IAAIihD,kBAA0B;EAC9B,IAAIC,aAAqB;EAEzB,IAAIL,KAAK,EAAE;IACTI,kBAAkB,GAAGjiB,0EAAe,CAACphC,IAAI,EAAEosC,yEAAmB,CAACgX,cAAe,CAAC,CAAC;IAChFE,aAAa,GAAGliB,0EAAe,CAACphC,IAAI,EAAEosC,yEAAmB,CAAC4W,SAAU,CAAC,CAAC;EACxE,CAAC,MAAM;IACLK,kBAAkB,GAAGjyB,4EAAiB,CAACpxB,IAAI,EAAEojD,cAAe,CAAC;IAC7DE,aAAa,GAAGlyB,4EAAiB,CAACpxB,IAAI,EAAEgjD,SAAU,CAAC;EACrD;EAEA,OACEtkD,uDAAA,CAAC23B,yDAAa;IACZvvB,MAAM,EAAE5D,OAAO,CAAC8G,KAAK,CAAE;IACvB1B,OAAO,EAAE6B,WAAY;IACrB3H,KAAK,EAAExC,IAAI,CAAC,cAAc,CAAE;IAC5Bi9B,cAAc,EAAEY,aAAc;IAC9Bd,YAAY,EAAE/8B,IAAI,CAAC,aAAa,CAAE;IAAA+C,QAAA,EAElCrE,uDAAA;MAAAqE,QAAA,EACG/C,IAAI,CAAC,kBAAkB,EAAE;QACxBojD,cAAc,EAAEC,kBAAkB;QAClCL,SAAS,EAAEM;MACb,CAAC,EAAE;QACD3wC,YAAY,EAAE,IAAI;QAClB3M,SAAS,EAAE;MACb,CAAC;IAAC,CACD;EAAC,CACS,CAAC;AAEpB,CAAC;AAED,iEAAepI,sDAAI,CAACyI,mDAAU,CAAYgD,MAAM,IAA2B;EACzE,MAAMkE,WAAW,GAAGlE,MAAM,CAACiJ,KAAK,EAAEmD,OAAO;EACzC,MAAMmtC,UAAU,GAAGv5C,MAAM,CAACk6C,GAAG,EAAE9tC,OAAO,EAAEpT,MAAM;EAE9C,OAAO;IACLkL,WAAW;IACXq1C;EACF,CAAC;AACH,CACA,CAAC,CAACjlD,iBAAiB,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACzH2B;AACH;AAI4B;AACJ;AACX;AACiB;AAE9B;AAEM;AACR;AACQ;AAEE;AAAA;AAQrD,MAAMif,YAAY,GAAGA,CAAC;EAAEnH,OAAO;EAAE1R,SAAS;EAAEqiB;AAAwB,CAAC,KAAK;EACxE,MAAMpmB,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAM;IACJ2P;EACF,CAAC,GAAGlQ,mDAAU,CAAC,CAAC;EAEhB,MAAM4lD,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,OACE5kD,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA,CAACg0B,8DAAQ;QAACpyB,IAAI,EAAC,MAAM;QAACsE,IAAI,EAAC;MAAQ,CAAE,CAAC,EACrC6Q,OAAO,KAAKrV,SAAS,IAAIqV,OAAO,CAACrT,QAAQ,KAAKnE,wDAAmB,GAC9DulD,2EAAiB,CAACxjD,IAAI,EAAEyV,OAAO,CAAC,GAAG,GAAG,EACzC2Q,aAAa,IACZ1nB,wDAAA,CAACi2B,2DAAW;QACV5wB,SAAS,EAAEN,uEAAM,CAACkgD,cAAe;QACjC1gD,OAAO,EAAEA,CAAA,KAAM+K,qBAAqB,CAAC,CAAC,CAAC,CAAE;QAAAjL,QAAA,EAEzCrE,wDAAA,CAAC6E,0DAAI;UACHQ,SAAS,EAAEN,uEAAM,CAACmgD,YAAa;UAC/B9+C,IAAI,EAAC;QAAK,CACX;MAAC,CACS,CACd;IAAA,CACD,CAAC;EAEP,CAAC;EAED,MAAM++C,eAAe,GAAGA,CAAA,KAAM;IAC5B,OACE/kD,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA,CAAC6E,0DAAI;QAACuB,IAAI,EAAC;MAAS,CAAE,CAAC,EACtB2Q,OAAO,KAAKrV,SAAS,GAAGqjD,iFAA2B,CAAChuC,OAAO,CAACpT,MAAM,EAAEoT,OAAO,CAACrT,QAAQ,CAAC,GAAG,GAAG;IAAA,CAC5F,CAAC;EAEP,CAAC;EAED,OACE1D,wDAAA;IAAKqF,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAACqgD,YAAY,EAAE//C,SAAS,CAAE;IAAAhB,QAAA,EAC7DjE,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAACsgD,WAAY;MAAAhhD,QAAA,GACjCrE,wDAAA;QAAMqF,SAAS,EAAEN,uEAAM,CAACugD,WAAY;QAAAjhD,QAAA,EAAE/C,IAAI,CAAC,cAAc;MAAC,CAAO,CAAC,EAClEtB,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAACwgD,aAAc;QAAAlhD,QAAA,EAClC0S,OAAO,EAAErT,QAAQ,KAAKqV,sDAAiB,GAAGosC,eAAe,CAAC,CAAC,GAAGH,iBAAiB,CAAC;MAAC,CAC/E,CAAC;IAAA,CACH;EAAC,CACH,CAAC;AAEV,CAAC;AAED,iEAAe9lD,sDAAI,CAACgf,YAAY,CAAC,E;;;;;;;;;;;;;;ACzEjC;AACA,iEAAe,CAAC,o2EAAo2E,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDhzE;AACA;AAW3C;AAC+C;AACX;AACsC;AACnB;AACtB;AAC0D;AACrC;AACpB;AACF;AAEZ;AACA;AACgB;AACV;AAER;AACE;AACR;AACgB;AAClB;AACgC;AACtB;AACe;AAClB;AACc;AACiB;AACH;AAEjB;AAAA;AAErD,MAAMgoC,aAAa,GAAG,GAAG,GAAGxhD,iEAAG;AAC/B,MAAMyhD,iBAAiB,GAAG,CAAC,KAAK,EAAE,SAAS,EAAE,UAAU,CAAU;AACjE,MAAMC,qBAAuC,GAAG,CAC9C,sBAAsB,EACtB,2BAA2B,EAC3B,2BAA2B,CAC5B;AACD,MAAMC,sBAAsB,GAAG,sBAAsB;AACrD,MAAMC,oBAAoB,GAAG,MAAM;AAgBnC,MAAM/oD,iBAAiB,GAAGA,CAAC;EACzB+N,KAAK;EAAEi7C,iBAAiB;EAAEC,eAAe;EAAEC,aAAa;EAAEC,iBAAiB;EAAE/a,UAAU;EAAEgb,WAAW;EAAEC;AACjF,CAAC,KAAK;EAC3B,MAAM;IACJC,sBAAsB;IAAEC,qBAAqB;IAAEC,sBAAsB;IAAEC,2BAA2B;IAAE53C,WAAW;IAC/G2wB;EACF,CAAC,GAAG3gC,mDAAU,CAAC,CAAC;EAEhB,MAAMsE,QAAQ,GAAG4H,KAAK,EAAE5H,QAAQ,IAAInE,wDAAmB;EACvD,MAAM0nD,YAAY,GAAGvjD,QAAQ,KAAKqV,sDAAiB,GAAGytC,eAAe,GAAGD,iBAAiB;EACzF,MAAM;IAAExvC,OAAO;IAAEmwC;EAAQ,CAAC,GAAGD,YAAY,IAAI,CAAC,CAAC;EAC/C,MAAM;IAAEE;EAAc,CAAC,GAAIzjD,QAAQ,KAAKnE,wDAAmB,IAAIgnD,iBAAiB,IAAK,CAAC,CAAC;EAEvF,MAAMhlD,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAC5B,MAAMyB,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EAEtB,MAAM,CAACynD,cAAc,EAAEC,eAAe,CAAC,GAAG5/C,gDAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAAC6/C,aAAa,EAAEC,OAAO,EAAEC,SAAS,CAAC,GAAGpuC,2DAAO,CAAC,KAAK,CAAC;EAC1D,MAAM,CAACquC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGjgD,gDAAQ,CAAC,CAAC,CAAC;EAC3D,MAAM,CAACkgD,kBAAkB,EAAEC,cAAc,EAAEC,cAAc,CAAC,GAAGzuC,2DAAO,CAAC,CAAC;EAEtE,MAAM0uC,OAAO,GAAGhvC,8CAAM,CAAiB,CAAC;EAExC,MAAM1Q,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,KAAKi7C,iBAAiB,IAAIC,eAAe,CAAC,CAAC;EAEvE,MAAM;IACJuB,kBAAkB;IAAEC,cAAc;IAAEC,UAAU;IAAEC;EAClD,CAAC,GAAG58C,KAAK,IAAI,CAAC,CAAC;EAEf,MAAM68C,eAAe,GAAGJ,kBAAkB,IAAIC,cAAc,IAAIC,UAAU,IAAIC,KAAK;EAEnF,MAAME,wBAAwB,GAAGL,kBAAkB,EAAEM,IAAI,EAAEC,OAAO,EAAEC,WAAW,IAC1ER,kBAAkB,EAAES,gBAAgB,EAAEC,mBAAmB,EAAE9kD,MAAM,IACjEqkD,cAAc,EAAErkD,MAAM,IACtBskD,UAAU,EAAEznD,IAAI,CAACoT,KAAK,IACtBs0C,KAAK,EAAEQ,aAAa;EACzB,MAAMC,WAAW,GAAGP,wBAAwB,GAAGA,wBAAwB,IAAIrxC,OAAO,EAAEpT,MAAM,IAAI,CAAC,CAAC,GAAGjC,SAAS;EAC5G,MAAMknD,eAAe,GAAGzpD,+CAAO,CAAC,MAAM;IACpC,MAAMwL,MAAM,GAAGjD,kDAAS,CAAC,CAAC;IAE1B,IAAIsgD,cAAc,EAAE;MAClB,MAAMa,OAAO,GAAGrS,6DAAU,CAAC7rC,MAAM,EAAEq9C,cAAc,CAACt3C,MAAM,CAAC;MACzD,IAAI,CAACm4C,OAAO,EAAE,OAAOnnD,SAAS;MAC9B,OAAOH,OAAO,CAAC,0BAA0B,EAAEkkD,6DAAY,CAAClkD,OAAO,EAAEsnD,OAAO,CAAC,CAAC;IAC5E;IAEA,IAAId,kBAAkB,EAAE;MACtB,MAAMe,GAAG,GAAGf,kBAAkB,CAACM,IAAI,EAAEU,KAAK,GAAGxzB,6DAAU,CAAC5qB,MAAM,EAAEo9C,kBAAkB,CAACM,IAAI,CAACU,KAAK,CAAC,GAAGrnD,SAAS;MAC1G,IAAI,CAAConD,GAAG,EAAE,OAAOpnD,SAAS;MAC1B,OAAOH,OAAO,CAAC,iBAAiB,EAAEkc,gEAAe,CAACqrC,GAAG,CAAC,CAAC;IACzD;IAEA,IAAIb,UAAU,EAAE;MACd,MAAM9iD,IAAI,GAAGowB,6DAAU,CAAC5qB,MAAM,EAAEs9C,UAAU,CAAC3nD,MAAM,CAAC;MAClD,IAAI,CAAC6E,IAAI,EAAE,OAAOzD,SAAS;MAC3B,OAAOH,OAAO,CAAC,qBAAqB,EAAEgF,mEAAY,CAACjF,IAAI,EAAE6D,IAAI,CAAC,CAAC;IACjE;IAEA,IAAI+iD,KAAK,EAAEc,OAAO,KAAK1C,oBAAoB,EAAE;MAC3C,OAAO/kD,OAAO,CAAC,qBAAqB,CAAC;IACvC;IAEA,IAAI2mD,KAAK,EAAEc,OAAO,KAAKxD,0DAAqB,EAAE;MAC5C,OAAOlkD,IAAI,CAAC,iCAAiC,EAAEI,SAAS,EAAE;QACxDuS,YAAY,EAAE,IAAI;QAClB3M,SAAS,EAAE;MACb,CAAC,CAAC;IACJ;IAEA,OAAO5F,SAAS;EAClB,CAAC,EAAE,CAACsmD,cAAc,EAAED,kBAAkB,EAAEE,UAAU,EAAEC,KAAK,EAAEc,OAAO,EAAE1nD,IAAI,EAAEC,OAAO,CAAC,CAAC;EAEnF,MAAM0nD,eAAe,GAAGzkD,OAAO,CAAC0iD,OAAO,EAAExN,GAAG,EAAEwP,YAAY,CAACx/C,MAAM,IAAI,CAACy+C,eAAe,CAAC;EACtF,MAAMgB,oBAAoB,GAAG,CAAChB,eAAe;EAE7C,MAAMiB,WAAW,GAAGjqD,+CAAO,CAAC,MAAM;IAChC,MAAMkqD,gBAAgB,GAAGnC,OAAO,EAAExN,GAAG,EAAEwP,YAAY,CAACx/C,MAAM,IAAI,CAAC;IAC/D,IAAI2/C,gBAAgB,KAAK,CAAC,EAAE;MAC1B,OAAO,SAAS;IAClB;IACA,IAAIA,gBAAgB,KAAK,CAAC,EAAE;MAC1B,OAAO,UAAU;IACnB;IACA,IAAIA,gBAAgB,KAAK,CAAC,EAAE;MAC1B,OAAO,OAAO;IAChB;IACA,OAAO,OAAO;EAChB,CAAC,EAAE,CAACnC,OAAO,EAAExN,GAAG,EAAEwP,YAAY,CAACx/C,MAAM,CAAC,CAAC;EAEvC,MAAM4/C,eAAoC,GAAGnqD,+CAAO,CAAC,MAAM;IACzD,OAAOinD,qBAAqB,CAACrhC,GAAG,CAAE5hB,GAAG,KAAM;MACzCW,KAAK,EAAExC,IAAI,CAAC6B,GAAG;IACjB,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,CAAC7B,IAAI,CAAC,CAAC;EAEVsL,iDAAS,CAAC,MAAM;IACd,IAAI,CAACxE,MAAM,EAAE;MACXi/C,eAAe,CAAC,IAAI,CAAC;MACrBK,mBAAmB,CAAC,CAAC,CAAC;MACtBG,cAAc,CAAC,CAAC;MAChBL,SAAS,CAAC,CAAC;IACb;EACF,CAAC,EAAE,CAACp/C,MAAM,CAAC,CAAC;EAEZwE,iDAAS,CAAC,MAAM;IACd,IAAIu7C,eAAe,EAAE;MACnBP,cAAc,CAAC,CAAC;MAChB;IACF;IAEAC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACM,eAAe,CAAC,CAAC;EAErB,MAAMoB,OAAO,GAAGpqD,+CAAO,CAAC,MAAM;IAC5B,IAAI,CAACiJ,MAAM,EAAE,OAAO1G,SAAS;IAE7B,MAAMsB,IAAI,GAAGzB,OAAO,CAAC,mCAAmC,CAAC;IACzD,MAAMioD,KAAK,GAAGxmD,IAAI,CAACymD,KAAK,CAAC,QAAQ,CAAC;IAClC,OAAO,CACLD,KAAK,CAAC,CAAC,CAAC,EACRxpD,wDAAA,CAAC8d,yDAAQ;MAAC8F,GAAG,EAAEriB,OAAO,CAAC,cAAc,CAAE;MAACyB,IAAI,EAAEzB,OAAO,CAAC,wCAAwC;IAAE,CAAE,CAAC,EACnGioD,KAAK,CAAC,CAAC,CAAC,CACT;EACH,CAAC,EAAE,CAACphD,MAAM,EAAE7G,OAAO,CAAC,CAAC;EAErB,MAAMmoD,wBAAwB,GAAGA,CAAA,KAAM;IACrC,OACEtpD,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA,CAAC8lD,oEAAe;QACd3/C,KAAK,EAAC,cAAc;QACpBqS,KAAK,EAAC,MAAM;QACZ1U,KAAK,EAAE6kD,WAAW,GAAGpnD,OAAO,CAAC,kBAAkB,EAAE6mD,wBAAwB,CAAC,GAAG7mD,OAAO,CAAC,eAAe,CAAE;QACtGwS,WAAW,EAAEyjB,uEAAU,CACrBoxB,eAAe,IAAIrnD,OAAO,CAAC,mBAAmB,CAAC,EAC/C,CAAC,iBAAiB,EAAE,OAAO,CAC7B,CAAE;QACFohB,UAAU,EAAE,CAACva;MAAO,CACrB,CAAC,EACDq+C,aAAa,IAAI,CAACkB,kBAAkB,IACnC3nD,wDAAA,CAACoL,mDAAM;QACL/F,SAAS,EAAEN,uEAAM,CAAC4kD,UAAW;QAC7BplD,OAAO,EAAEqjD,cAAe;QACxBlvC,KAAK;QAAArU,QAAA,EAEJ9C,OAAO,CAAC,wBAAwB;MAAC,CAC5B,CACT,EACAklD,aAAa,IAAI,CAACkB,kBAAkB,IAAIwB,oBAAoB,IAC3DnpD,wDAAA,CAACoL,mDAAM;QACL6oC,MAAM;QACN1+B,iBAAiB;QACjBlQ,SAAS,EAAEN,uEAAM,CAAC4kD,UAAW;QAC7BjxC,KAAK;QACLnU,OAAO,EAAEqlD,kCAAmC;QAAAvlD,QAAA,EAE3C9C,OAAO,CAAC,mBAAmB;MAAC,CACvB,CACT,EACAomD,kBAAkB,IAAIpB,iBAAiB,EAAEsD,YAAY,IACpD7pD,wDAAA,CAAC+lD,6DAAmB;QAClB4C,WAAW,EAAEA,WAAY;QACzB/sC,OAAO,EAAE2qC,iBAAiB,CAACsD,YAAa;QACxCtlD,OAAO,EAAEulD;MAAe,CACzB,CACF;IAAA,CACD,CAAC;EAEP,CAAC;EAED,MAAMC,sBAAsB,GAAGA,CAAA,KAAM;IACnC,MAAMxvC,SAAS,GAAGwqC,iFAA2B,CAAChuC,OAAO,EAAEpT,MAAM,IAAI,CAAC,EAAEoV,sDAAiB,CAAC;IACtF,OACE3Y,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA,CAAC8lD,oEAAe;QACd3/C,KAAK,EAAC,kBAAkB;QACxBqS,KAAK,EAAC,MAAM;QACZ1U,KAAK,EAAExC,IAAI,CAAC,aAAa,CAAE;QAC3ByS,WAAW,EAAEzS,IAAI,CAAC,qBAAqB,CAAE;QACzCqhB,UAAU,EAAE,CAACva;MAAO,CACrB,CAAC,EACFhI,yDAAA;QAAKiF,SAAS,EAAEN,uEAAM,CAACilD,mBAAoB;QAAA3lD,QAAA,GACzCjE,yDAAA;UAAKiF,SAAS,EAAEN,uEAAM,CAACm/C,UAAW;UAAA7/C,QAAA,GAChCrE,wDAAA,CAAC6E,2DAAI;YAACuB,IAAI,EAAC,SAAS;YAACf,SAAS,EAAEN,uEAAM,CAACklD;UAAe,CAAE,CAAC,EACxD1vC,SAAS;QAAA,CACP,CAAC,EACL/V,OAAO,CAACmnC,UAAU,CAAC,IAClB3rC,wDAAA;UAAMqF,SAAS,EAAEN,uEAAM,CAACmlD,QAAS;UAAA7lD,QAAA,EAC9B,KAAK+S,4EAAsB,CAC1Bi0B,qEAAe,CAACt0B,OAAO,EAAEpT,MAAM,IAAI,CAAC,EAAEgoC,UAAU,EAAE,IAAI,CAAC,EACvD,KAAK,EACLrqC,IAAI,CAAC6F,IACP,CAAC;QAAE,CACC,CACP;MAAA,CACE,CAAC,EACNnH,wDAAA,CAACoL,mDAAM;QACL/F,SAAS,EAAEN,uEAAM,CAAColD,WAAY;QAC9B5lD,OAAO,EAAE6lD,cAAe;QACxB1xC,KAAK;QAAArU,QAAA,EAEJ/C,IAAI,CAAC,wBAAwB;MAAC,CACzB,CAAC,EAERoC,QAAQ,KAAKqV,sDAAiB,IAC7B/Y,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAAC+wC,IAAK;QAAAzxC,QAAA,EACzB/C,IAAI,CAAC,cAAc;MAAC,CAClB,CACN;IAAA,CACD,CAAC;EAEP,CAAC;EAED,SAAS2hB,YAAYA,CAACtR,CAAgC,EAAE;IACtD,MAAM;MAAEwR;IAAU,CAAC,GAAGxR,CAAC,CAACuR,aAAa;IAErCmkC,eAAe,CAAClkC,SAAS,IAAI,GAAG,CAAC;IAEjC,IAAI2kC,OAAO,CAAC1kC,OAAO,EAAE;MACnB,MAAM;QAAEC,GAAG,EAAEgnC;MAAQ,CAAC,GAAGvC,OAAO,CAAC1kC,OAAO,CAACG,qBAAqB,CAAC,CAAC;MAChE,MAAM;QAAEF,GAAG,EAAEK;MAAY,CAAC,GAAG/R,CAAC,CAACuR,aAAa,CAACK,qBAAqB,CAAC,CAAC;MACpE,MAAMjf,QAAQ,GAAG+lD,OAAO,GAAG3mC,WAAW,IAAIwiC,aAAa;MACvD,IAAI5hD,QAAQ,EAAE;QACZijD,OAAO,CAAC,CAAC;MACX,CAAC,MAAM;QACLC,SAAS,CAAC,CAAC;MACb;IACF;EACF;EAEA,MAAM8C,0BAA0B,GAAG1qD,mEAAe,CAAC,MAAM;IACvDknD,qBAAqB,CAAC;MACpBllD,IAAI,EAAEukD,iBAAiB,CAACsB,gBAAgB,CAAC;MACzClD,KAAK,EAAE7gD,QAAQ,KAAKqV,sDAAiBA;IACvC,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMwxC,2BAA2B,GAAG3qD,mEAAe,CAAC,MAAM;IACxDmnD,sBAAsB,CAAC,CAAC;EAC1B,CAAC,CAAC;EAEF,MAAM6C,kCAAkC,GAAGhqD,mEAAe,CAAC,MAAM;IAC/DonD,2BAA2B,CAAC,CAAC,CAAC,CAAC;EACjC,CAAC,CAAC;EAEF,MAAM8C,cAAc,GAAGlqD,mEAAe,CAAEkT,MAA0B,IAAK;IACrE,MAAM03C,yBAAyB,GAAGzC,kBAAkB,EAAE0C,YAAY;IAElE,IAAIC,kBAAsC;IAE1C,QAAQF,yBAAyB,EAAE5oD,IAAI;MACrC,KAAK,SAAS;QAAE;UACd8oD,kBAAkB,GAAGF,yBAAyB,CAAC95C,MAAM;UACrD;QACF;MAEA,KAAK,MAAM;QAAE;UACX,MAAM23C,IAAI,GAAGN,kBAAkB,EAAEM,IAAI;UACrCqC,kBAAkB,GAAGrC,IAAI,EAAEU,KAAK;UAChC;QACF;IACF;IAEA,IAAIf,cAAc,EAAE;MAClB0C,kBAAkB,GAAG1C,cAAc,CAACt3C,MAAM;IAC5C;IAEAtB,WAAW,CAAC;MACVxN,IAAI,EAAE,OAAO;MACbgS,KAAK,EAAEd,MAAM,CAACc,KAAK;MACnBlQ,QAAQ,EAAEoP,MAAM,CAACpP,QAAQ;MACzBC,MAAM,EAAEmP,MAAM,CAACnP,MAAM;MACrB+mD;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAMN,cAAc,GAAGxqD,mEAAe,CAAC,MAAM;IAC3CmgC,OAAO,CAAC;MAAEnc,GAAG,EAAE+iC;IAAY,CAAC,CAAC;EAC/B,CAAC,CAAC;EAEF,OACE3mD,wDAAA,CAACge,kDAAK;IACJ3Y,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAACO,IAAI,EAAE,CAACohD,iBAAiB,IAAI,CAACiB,kBAAkB,IAAI5iD,uEAAM,CAAC4lD,OAAO,CAAE;IACpGviD,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAEi9C,sBAAuB;IAChC+D,WAAW,EAAE,mBAAmBxB,WAAW,EAAG;IAC9C9rB,sBAAsB;IAAAj5B,QAAA,EAEtBjE,yDAAA;MAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAAC8f,IAAI,EAAE,eAAe,CAAE;MAACqB,QAAQ,EAAEjD,YAAa;MAAA5e,QAAA,GAClFX,QAAQ,KAAKqV,sDAAiB,IAAI/Y,wDAAA,CAACke,sDAAY;QAACnH,OAAO,EAAEA,OAAQ;QAAC1R,SAAS,EAAEN,uEAAM,CAACy4B;MAAa,CAAE,CAAC,EACrGx9B,wDAAA;QACEqF,SAAS,EAAEgI,gEAAc,CACvBtI,uEAAM,CAAC2G,MAAM,EAAE07C,cAAc,IAAIriD,uEAAM,CAAC6iB,YAAY,EAAE0/B,aAAa,IAAIviD,uEAAM,CAAC8lD,WAChF,CAAE;QAAAxmD,QAAA,EAEFrE,wDAAA;UAAIqF,SAAS,EAAEN,uEAAM,CAAC+lD,cAAe;UAAAzmD,QAAA,EAClC9C,OAAO,CAAC,eAAe;QAAC,CACvB;MAAC,CACF,CAAC,EACNvB,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAAC03B,OAAQ;QAAAp4B,QAAA,EAC5BX,QAAQ,KAAKqV,sDAAiB,GAAGgxC,sBAAsB,CAAC,CAAC,GAAGL,wBAAwB,CAAC;MAAC,CACpF,CAAC,EACL/B,kBAAkB,IACjB3nD,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAACgmD,GAAI;QAAA1mD,QAAA,EACxBklD;MAAO,CACL,CACN,EACAN,eAAe,IAAIzkD,OAAO,CAAC2iD,aAAa,EAAE30B,IAAI,CAAC9oB,MAAM,CAAC,IACrDtJ,yDAAA;QAAKiF,SAAS,EAAEN,uEAAM,CAAC03B,OAAQ;QAAAp4B,QAAA,GAC7BrE,wDAAA;UAAIqF,SAAS,EAAEN,uEAAM,CAACw3B,YAAa;UAAAl4B,QAAA,EAAE9C,OAAO,CAAC,qBAAqB;QAAC,CAAK,CAAC,EACzEnB,yDAAA;UAAKiF,SAAS,EAAEN,uEAAM,CAACoiD,aAAc;UAAA9iD,QAAA,GAClC8iD,aAAa,EAAE30B,IAAI,CAACzN,GAAG,CAAEimC,YAAY,IACpChrD,wDAAA,CAACgmD,4EAAqB;YAEpBgF,YAAY,EAAEA;UAAa,GADtBA,YAAY,CAACxjD,EAEnB,CACF,CAAC,EACD2/C,aAAa,EAAE8D,UAAU,IACxB7qD,yDAAA,CAACgL,mDAAM;YACL6oC,MAAM;YACN//B,QAAQ,EAAEizC,aAAa,CAAC7xC,SAAU;YAClCpP,IAAI,EAAC,SAAS;YACdqP,iBAAiB;YACjBlQ,SAAS,EAAEN,uEAAM,CAACmmD,QAAS;YAC3B3mD,OAAO,EAAEgmD,2BAA4B;YAAAlmD,QAAA,GAErCrE,wDAAA,CAAC6E,2DAAI;cAACuB,IAAI,EAAC,MAAM;cAACf,SAAS,EAAEN,uEAAM,CAAComD;YAAa,CAAE,CAAC,EACnD5pD,OAAO,CAAC,2BAA2B,CAAC;UAAA,CAC/B,CACT;QAAA,CACE,CAAC;MAAA,CACH,CACN,EACA0nD,eAAe,IACd7oD,yDAAA;QAAKiF,SAAS,EAAEN,uEAAM,CAACkT,SAAU;QAAA5T,QAAA,GAC/BrE,wDAAA;UAAKqF,SAAS,EAAEN,uEAAM,CAACqmD,WAAY;UAAA/mD,QAAA,EACjCrE,wDAAA,CAACie,uDAAU;YACT7X,IAAI,EAAEw/C,qFAAqB,CAAC,gBAAgB,EAAEgB,cAAc,EAAEllD,SAAS,EAAEJ,IAAI,CAAC+pD,KAAK,CAAE;YACrF5kC,SAAS,EAAEghC,gBAAiB;YAC5B6D,WAAW,EAAElF,qBAAqB,CAAC18C,MAAO;YAC1C6hD,mBAAmB;YACnBlmD,SAAS,EAAEN,uEAAM,CAACijB,UAAW;YAAA3jB,QAAA,EAE7BrE,wDAAA,CAAC+d,2DAAc;cACb4G,UAAU,EAAE2lC,0BAA2B;cACvC5lC,KAAK,EAAEwiC,OAAO,GAAGf,iBAAiB,CAACsB,gBAAgB,CAAC,CAAC,EAAEyB,YAAa;cACpEtkC,sBAAsB,EAAE,IAAI7f,uEAAM,CAAC8f,IAAI,EAAG;cAC1CC,YAAY,EAAE,IAAIuhC,sBAAsB,EAAG;cAC3ChhD,SAAS,EAAEN,uEAAM,CAACmkD,YAAa;cAC/B/+B,UAAU;cACVqhC,oBAAoB;cAAAnnD,QAAA,EAEnB6iD,OAAO,GAAGf,iBAAiB,CAACsB,gBAAgB,CAAC,CAAC,EAAEyB,YAAY,CAACnkC,GAAG,CAAE0mC,WAAW,IAC5EzrD,wDAAA,CAACimD,0EAAoB;gBAEnBwF,WAAW,EAAEA,WAAY;gBACzBpmD,SAAS,EAAEghD;cAAuB,GAF7B,GAAGoF,WAAW,CAACjkD,EAAE,IAAIikD,WAAW,CAACC,QAAQ,EAG/C,CACF;YAAC,CACY;UAAC,CACP;QAAC,CACV,CAAC,EACN1rD,wDAAA,CAAC6lD,oDAAO;UACN3rC,GAAG,EAAE4tC,OAAQ;UACbziD,SAAS,EAAEN,uEAAM,CAAC4mD,IAAK;UACvBC,YAAY,EAAE7mD,uEAAM,CAAC8mD,GAAI;UACzBC,SAAS,EAAErE,gBAAiB;UAC5BkE,IAAI,EAAErC,eAAgB;UACtByC,WAAW,EAAErE;QAAoB,CAClC,CAAC;MAAA,CACC,CACN;IAAA,CACE;EAAC,CACD,CAAC;AAEZ,CAAC;AAED,iEAAexoD,4CAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAMo7C,iBAAiB,GAAGp7C,KAAK,EAAE5H,QAAQ,KAAKqV,sDAAiB,GAC3DvU,OAAO,CAACmG,MAAM,CAACk6C,GAAG,EAAEqC,OAAO,EAAExN,GAAG,EAAEwP,YAAY,CAACx/C,MAAM,CAAC,GACtDlF,OAAO,CAACmG,MAAM,CAACiJ,KAAK,EAAEszC,OAAO,EAAExN,GAAG,EAAEwP,YAAY,CAACx/C,MAAM,CAAC;EAE5D,OAAO;IACLg9C,iBAAiB;IACjBH,iBAAiB,EAAE57C,MAAM,CAACiJ,KAAK;IAC/B4yC,eAAe,EAAE77C,MAAM,CAACk6C,GAAG;IAC3B4B,aAAa,EAAE,CAACf,iFAA8B,CAAC/6C,MAAM,CAAC;IACtDghC,UAAU,EAAEhhC,MAAM,CAACqM,SAAS,CAAC20B,UAAU;IACvCgb,WAAW,EAAEh8C,MAAM,CAACqM,SAAS,CAAC2vC,WAAW;IACzCC,cAAc,EAAEjB,sFAAoB,CAACh7C,MAAM,CAAC,CAACi8C;EAC/C,CAAC;AACH,CACF,CAAC,CAACrpD,iBAAiB,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3c+C;AACX;AAOwC;AAG9D;AACuB;AACY;AACb;AACA;AAEZ;AACA;AACgB;AACV;AACE;AAEZ;AACU;AACJ;AACF;AACA;AACR;AACF;AACO;AACgB;AAEL;AAEM;AAAA;AAa3D,MAAMC,gBAAgB,GAAGA,CAAC;EACxB8N,KAAK;EACLw9C,GAAG;EACHvC,iBAAiB;EACjB6F,gBAAgB;EAChBC;AACqB,CAAC,KAAK;EAC3B,MAAM;IAAEC,sBAAsB;IAAEh9C,qBAAqB;IAAEm1C;EAAoB,CAAC,GAAGrlD,mDAAU,CAAC,CAAC;EAC3F,MAAM,CAACkW,SAAS,EAAEi3C,WAAW,EAAEC,aAAa,CAAC,GAAGpzC,0DAAO,CAAC,CAAC;EACzD,MAAMhR,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,EAAEm/C,YAAY,IAAIlE,iBAAiB,CAAC;EAEhE,MAAMkG,SAAS,GAAGzR,+DAAW,CAAC1vC,KAAK,CAAC;EACpC,MAAME,cAAc,GAAGF,KAAK,IAAImhD,SAAS;EAEzC,MAAM;IAAEpE,IAAI;IAAEG;EAAiB,CAAC,GAAGh9C,cAAc,IAAI,CAAC,CAAC;EACvD,MAAM7H,MAAM,GAAG0kD,IAAI,EAAEC,OAAO,EAAEC,WAAW,IAAIC,gBAAgB,EAAEC,mBAAmB,EAAE9kD,MAAM;EAC1F,MAAM+oD,iBAAiB,GAAGloD,OAAO,CAAC6jD,IAAI,EAAEC,OAAO,CAACqE,kBAAkB,CAAC;EACnE,MAAMC,eAAe,GAAG,CAACpE,gBAAgB,EAAEC,mBAAmB;EAE9D,MAAMoE,KAAK,GAAGxE,IAAI,EAAEwE,KAAK;EAEzB,MAAMtrD,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAC5B,MAAMyB,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtBiN,2DAAS,CAAC,MAAM;IACd,IAAI,CAACxE,MAAM,EAAE;MACXokD,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAACpkD,MAAM,CAAC,CAAC;EAEZ,MAAM0kD,eAAe,GAAG3tD,yDAAO,CAAC,MAAM;IACpC,IAAI,CAACqM,cAAc,EAAEi/C,YAAY,EAAE;MACjC,OAAO,EAAE;IACX;IAEA,MAAMsC,OAAO,GAAGtvC,gEAAe,CAACqrC,GAAG,CAAC;IACpC,MAAMkE,SAAS,GAAGzrD,OAAO,CAAC,iCAAiC,EAAEoC,MAAM,CAAC;IAEpE,IAAIyoD,gBAAgB,EAAE;MACpB,MAAMa,aAAa,GAAGb,gBAAgB,CAAC3/C,OAAO,CAACygD,SAAS,CAAED,aAA0C;MACpG,MAAME,YAAY,GAAGF,aAAa,CAAC3rC,KAAK,CAAE8rC,KAAK,IAAK,CAACA,KAAK,CAACC,QAAQ,CAAC;MACpE,MAAMC,YAAY,GAAGL,aAAa,CAAC3rC,KAAK,CAAE8rC,KAAK,IAAK5oD,OAAO,CAAC4oD,KAAK,CAACC,QAAQ,CAAC,CAAC;MAE5E,MAAME,SAAS,GAAGJ,YAAY,GAAG5rD,OAAO,CAAC,uBAAuB,EAAE0rD,aAAa,CAACvjD,MAAM,CAAC,GACnF4jD,YAAY,GAAG/rD,OAAO,CAAC,uBAAuB,EAAE0rD,aAAa,CAACvjD,MAAM,CAAC,GACnEnI,OAAO,CAAC,OAAO,EAAE0rD,aAAa,CAACvjD,MAAM,CAAC;MAE5C,MAAM8jD,YAAY,GAAG/H,6DAAY,CAAClkD,OAAO,EAAE8qD,aAAc,CAAC;MAC1D,OAAO9qD,OAAO,CAAC,2BAA2B,EAAE,CAACgsD,SAAS,EAAEC,YAAY,EAAER,SAAS,CAAC,CAAC;IACnF;IAEA,IAAIxE,gBAAgB,EAAE;MACpB,OAAOlnD,IAAI,CAAC,oBAAoB,EAAE;QAChC4e,IAAI,EAAEsoC,gBAAgB,CAAC1kD,KAAK;QAC5BH;MACF,CAAC,EAAE;QACD2D,SAAS,EAAE,IAAI;QACf2M,YAAY,EAAE,IAAI;QAClBmB,WAAW,EAAEzR;MACf,CAAC,CAAC;IACJ;IAEA,IAAI+oD,iBAAiB,EAAE;MACrB,OAAOprD,IAAI,CAAC,uBAAuB,EAAE;QACnC8E,IAAI,EAAEiiD,IAAI,CAACvkD,KAAK;QAChBH,MAAM;QACNmlD,GAAG,EAAEiE;MACP,CAAC,EAAE;QACD33C,WAAW,EAAEzR;MACf,CAAC,CAAC;IACJ;IAEA,OAAOpC,OAAO,CAAC,qBAAqB,EAAE,CAAC8mD,IAAI,CAAEvkD,KAAK,EAAEipD,OAAO,EAAEC,SAAS,CAAC,CAAC;EAC1E,CAAC,EAAE,CACDxhD,cAAc,EAAEi/C,YAAY,EAAE3B,GAAG,EAAEvnD,OAAO,EAAEoC,MAAM,EAAEyoD,gBAAgB,EAAE5D,gBAAgB,EAAEkE,iBAAiB,EAAErE,IAAI,EAC/GgE,aAAa,EAAE/qD,IAAI,CACpB,CAAC;EAEF,MAAMmsD,cAAc,GAAGtuD,yDAAO,CAAC,MAAM;IACnC,IAAIqpD,gBAAgB,EAAE;MACpB,OAAOlnD,IAAI,CAAC,oBAAoB,EAAE;QAChC0S,IAAI,EAAEhU,wDAAA,CAAC8d,yDAAQ;UAAC8F,GAAG,EAAEtiB,IAAI,CAAC,wBAAwB,CAAE;UAAC0B,IAAI,EAAE1B,IAAI,CAAC,4BAA4B;QAAE,CAAE;MAClG,CAAC,EAAE;QACDgG,SAAS,EAAE;MACb,CAAC,CAAC;IACJ;IAEA,OAAO5F,SAAS;EAClB,CAAC,EAAE,CAAC8mD,gBAAgB,EAAElnD,IAAI,CAAC,CAAC;EAE5B,MAAMosD,gBAAgB,GAAGvuD,yDAAO,CAAC,MAAM;IACrC,IAAI,CAACqpD,gBAAgB,EAAE;MACrB,OAAO9mD,SAAS;IAClB;IAEA,OAAOsqD,wEAAuB,CAACxD,gBAAgB,CAAC;EAClD,CAAC,EAAE,CAACA,gBAAgB,CAAC,CAAC;EAEtB,MAAMmF,aAAa,GAAG/tD,mEAAe,CAAC,MAAM;IAC1C,MAAMmX,OAAO,GAAGwvC,iBAAiB,EAAExvC,OAAO;IAC1C,IAAIpT,MAAM,KAAKjC,SAAS,IAAIqV,OAAO,KAAKrV,SAAS,EAAE;MACjD;IACF;IAEA,IAAIiC,MAAM,GAAGoT,OAAO,CAACpT,MAAM,EAAE;MAC3B2L,qBAAqB,CAAC;QACpBy4C,kBAAkB,EAAEz8C;MACtB,CAAC,CAAC;MACF;IACF;IAEAm5C,mBAAmB,CAAC,CAAC,CAAC,CAAC;IACvB8H,WAAW,CAAC,CAAC;EACf,CAAC,CAAC;EAEF,OACEnsD,yDAAA,CAAC4d,kDAAK;IACJxR,gBAAgB,EAAEzH,uEAAM,CAAC6oD,cAAe;IACxCxlD,MAAM,EAAEA,MAAO;IACfk1B,sBAAsB;IACtBlW,MAAM;IACNxd,OAAO,EAAE0iD,sBAAuB;IAAAjoD,QAAA,GAEhCrE,wDAAA,CAACke,sDAAY;MAACnH,OAAO,EAAEwvC,iBAAiB,EAAExvC,OAAQ;MAAC1R,SAAS,EAAEN,uEAAM,CAACy4B;IAAa,CAAE,CAAC,EACrFp9B,yDAAA;MAAKiF,SAAS,EAAEN,uEAAM,CAAC8oD,aAAc;MAACC,GAAG,EAAExsD,IAAI,CAAC+pD,KAAK,GAAG,KAAK,GAAG,KAAM;MAAAhnD,QAAA,GACnE+nD,gBAAgB,GACfpsD,wDAAA,CAACksD,oEAAc;QAACkB,KAAK,EAAEhB,gBAAgB,CAAC3/C,OAAO,CAACygD,SAAS,CAAED;MAAc,CAAE,CAAC,GAC1ES,gBAAgB,GAClBttD,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACErE,wDAAA,CAAC4E,uDAAM;UAACS,SAAS,EAAEN,uEAAM,CAACgpD,YAAa;UAAC5oD,IAAI,EAAEuoD,gBAAiB;UAACxnD,IAAI,EAAC;QAAO,CAAE,CAAC,EAC/ElG,wDAAA,CAACg0B,+DAAQ;UAACpyB,IAAI,EAAC,MAAM;UAACsE,IAAI,EAAC,UAAU;UAACb,SAAS,EAAEN,uEAAM,CAACipD;QAAW,CAAE,CAAC;MAAA,CACtE,CAAC,GAEHhuD,wDAAA,CAAC22C,0DAAS;QACRxxC,IAAI,EAAE,CAAC0nD,KAAK,GAAG/D,GAAG,GAAGpnD,SAAU;QAC/BusD,cAAc,EAAEpB,KAAM;QACtBqB,UAAU,EAAC,OAAO;QAClB1T,SAAS,EAAC,MAAM;QAChBD,SAAS,EAAE7D,+DAAa,CAAC/yC,MAAO,CAAE;QAClC82C,cAAc,EAAE11C,uEAAM,CAACopD,WAAY;QACnC9oD,SAAS,EAAEN,uEAAM,CAACgpD;MAAa,CAChC,CACF,EACD/tD,wDAAA;QAAKqF,SAAS,EAAEN,uEAAM,CAACqpD,sBAAuB;QAACC,GAAG,EAAElC,kDAAgB;QAACmC,GAAG,EAAC,EAAE;QAACC,SAAS,EAAE;MAAM,CAAE,CAAC;IAAA,CAC7F,CAAC,EACNvuD,wDAAA;MAAIqF,SAAS,EAAEN,uEAAM,CAACif,UAAW;MAAA3f,QAAA,EAC9BqpD,gBAAgB,GAAGnsD,OAAO,CAAC,qBAAqB,CAAC,GAAGA,OAAO,CAAC,2BAA2B;IAAC,CACvF,CAAC,EACJqrD,eAAe,IAAI5sD,wDAAA,CAACisD,yDAAQ;MAAC5mD,SAAS,EAAEN,uEAAM,CAACypD,OAAQ;MAACluD,MAAM,EAAE+nD,IAAI,EAAEU;IAAM,CAAE,CAAC,EAChF/oD,wDAAA;MAAKqF,SAAS,EAAEN,uEAAM,CAACgP,WAAY;MAAA1P,QAAA,EAChCmzB,sEAAU,CAACs1B,eAAe,EAAE,CAAC,iBAAiB,EAAE,OAAO,CAAC;IAAC,CACvD,CAAC,EACN9sD,wDAAA,CAACoL,mDAAM;MAAC/F,SAAS,EAAEN,uEAAM,CAAC0pD,aAAc;MAAClqD,OAAO,EAAEopD,aAAc;MAACr4C,SAAS,EAAEA,SAAU;MAAAjR,QAAA,EACnF/C,IAAI,CAACorD,iBAAiB,GAAG,8BAA8B,GAAG,UAAU,EAAE;QACrE/oD,MAAM,EAAE+J,4EAAiB,CAACpM,IAAI,EAAEqC,MAAM,EAAG;UAAE0Q,MAAM,EAAE;QAAK,CAAC;MAC3D,CAAC,EAAE;QACD/M,SAAS,EAAE;MACb,CAAC;IAAC,CACI,CAAC,EACR9C,OAAO,CAACipD,cAAc,CAAC,IACtBztD,wDAAA;MAAKqF,SAAS,EAAEgI,gEAAc,CAACtI,uEAAM,CAAC81C,UAAU,EAAE91C,uEAAM,CAACugD,WAAW,CAAE;MAAAjhD,QAAA,EACnEopD;IAAc,CACZ,CACN;EAAA,CACI,CAAC;AAEZ,CAAC;AAED,iEAAevuD,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAMw9C,GAAG,GAAGx9C,KAAK,EAAE+8C,IAAI,EAAEU,KAAK,GAAGxzB,6DAAU,CAAC5qB,MAAM,EAAEW,KAAK,CAAC+8C,IAAI,CAACU,KAAK,CAAC,GAAGrnD,SAAS;EAEjF,MAAMgtD,mBAAmB,GAAGpjD,KAAK,EAAEm/C,YAAY,EAAE7oD,IAAI,KAAK,SAAS,GAAG0J,KAAK,CAACm/C,YAAY,GAAG/oD,SAAS;EACpG,MAAMoB,OAAO,GAAG4rD,mBAAmB,GAC/BjY,oEAAiB,CAAC9rC,MAAM,EAAE+jD,mBAAmB,CAACh+C,MAAM,EAAEg+C,mBAAmB,CAAC1oB,SAAS,CAAC,GAAGtkC,SAAS;EACpG,MAAMwe,IAAI,GAAGwuC,mBAAmB,GAAGlY,6DAAU,CAAC7rC,MAAM,EAAE+jD,mBAAmB,CAACh+C,MAAM,CAAC,GAAGhP,SAAS;EAC7F,MAAMitD,WAAW,GAAG7rD,OAAO,EAAE2J,OAAO,CAACygD,SAAS;EAE9C,OAAO;IACLpE,GAAG;IACHvC,iBAAiB,EAAE57C,MAAM,CAACiJ,KAAK;IAC/Bw4C,gBAAgB,EAAEuC,WAAW,GAAG7rD,OAAO,GAAGpB,SAAS;IACnD2qD,aAAa,EAAEsC,WAAW,GAAGzuC,IAAI,GAAGxe;EACtC,CAAC;AACH,CACF,CAAC,CAAClE,gBAAgB,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;ACzOyC;AACD;AAKI;AACN;AACe;AAEP;AAClB;AACgB;AAEpB;AACU;AAAA;AAUtD,MAAMwB,eAAe,GAAGA,CAAC;EAAEsM,KAAK;EAAEhC;AAA4B,CAAC,KAAK;EAClE,MAAM;IAAEslD,oBAAoB;IAAEC;EAA8B,CAAC,GAAGzvD,mDAAU,CAAC,CAAC;EAE5E,MAAM,CAAC0vD,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGtnD,0DAAQ,CAAC,KAAK,CAAC;EAEjE,MAAM+D,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAC9C,MAAM0jD,aAAa,GAAG/jD,mEAAgB,CAAC3B,IAAI,CAAC;EAE5C,MAAM;IAAE2lD,aAAa;IAAEp8C;EAAO,CAAC,GAAGrH,cAAc,IAAI,CAAC,CAAC;EAEtD,MAAMlK,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EAEtB,MAAMyI,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,CAAC;EAE7B,MAAM4jD,sBAAsB,GAAGtvD,kEAAe,CAAC,MAAM;IACnDgvD,oBAAoB,CAAC,CAAC;IACtB,IAAI,CAAC/7C,MAAM,EAAE;IAEbg8C,6BAA6B,CAAE;MAAEh8C,MAAM;MAAEs8C,mBAAmB,EAAEL;IAAkB,CAAC,CAAC;EACpF,CAAC,CAAC;EAEF,OACE1uD,yDAAA,CAACu3B,yDAAa;IACZvvB,MAAM,EAAEA,MAAO;IACfwB,OAAO,EAAEglD,oBAAqB;IAC9B9qD,KAAK,EAAExC,IAAI,CAAC,gBAAgB,CAAE;IAC9B+8B,YAAY,EAAE/8B,IAAI,CAAC,yBAAyB,CAAE;IAC9Ci9B,cAAc,EAAE2wB,sBAAuB;IAAA7qD,QAAA,GAEtC/C,IAAI,CAAC,+BAA+B,EAAE;MACrC6D,IAAI,EAAE6pD,aAAa,IAAIzoD,mEAAY,CAACjF,IAAI,EAAE0tD,aAAa;IACzD,CAAC,EAAE;MACD/6C,YAAY,EAAE,IAAI;MAClB3M,SAAS,EAAE;IACb,CAAC,CAAC,EAEA9C,OAAO,CAACyqD,aAAa,CAAC,IACpBjvD,wDAAA,CAAC6iC,oDAAQ;MACPx9B,SAAS,EAAC,iBAAiB;MAC3BgO,KAAK,EAAE/R,IAAI,CAAC,mCAAmC,EAAE;QAC/CqC,MAAM,EAAE+uB,4EAAiB,CAACpxB,IAAI,EAAE2tD,aAAa;MAC/C,CAAC,EAAE;QACDh7C,YAAY,EAAE,IAAI;QAClB3M,SAAS,EAAE;MACb,CAAC,CAAE;MACHwM,OAAO,EAAEg7C,iBAAkB;MAC3B9kB,OAAO,EAAE+kB;IAAqB,CAC/B,CACF;EAAA,CAEU,CAAC;AAEpB,CAAC;AAED,iEAAe7vD,sDAAI,CAACyI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EACpF,MAAMhC,IAAI,GAAGgC,KAAK,EAAEuH,MAAM,GAAG0iB,6DAAU,CAAC5qB,MAAM,EAAEW,KAAK,CAACuH,MAAM,CAAC,GAAGnR,SAAS;EAEzE,OAAO;IACL4H;EACF,CAAC;AACH,CAAC,CAAC,CAACtK,eAAe,CAAC,CAAC,E;;;;;;;;;;;;;;ACrFpB;AACA,iEAAe,CAAC,msBAAmsB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACI9qB;AACuB;AAOI;AAG1B;AACuB;AACY;AACb;AAEM;AACF;AACV;AAEV;AACI;AACV;AACmB;AAEP;AAEW;AACC;AAAA;AAU9D,MAAMgG,WAAW,GAAG,GAAG;AAEvB,MAAM3H,cAAyC,GAAGA,CAAC;EACjDiO,KAAK;EACLhC;AACF,CAAC,KAAK;EACJ,MAAM;IACJ+lD,mBAAmB;IAAEjgD,WAAW;IAAEkgD;EACpC,CAAC,GAAGlwD,mDAAU,CAAC,CAAC;EAChB,MAAMwgB,SAAS,GAAG9G,wDAAM,CAAiB,CAAC;EAE1C,MAAM1Q,MAAM,GAAG5D,OAAO,CAAC8G,KAAK,EAAElD,MAAM,CAAC;EAErC,MAAMoD,cAAc,GAAGP,mEAAgB,CAACK,KAAK,CAAC;EAE9C,MAAM/J,OAAO,GAAG1B,6DAAU,CAAC,CAAC;EAE5B,MAAM,CAAC0vD,cAAc,EAAEC,iBAAiB,CAAC,GAAG/nD,0DAAQ,CAAiC,CAAC;EACtF,MAAM,CAAC2/C,cAAc,EAAEC,eAAe,CAAC,GAAG5/C,0DAAQ,CAAC,IAAI,CAAC;EAExDmF,2DAAS,CAAC,MAAM;IACd,IAAI,CAACxE,MAAM,EAAE;MACXi/C,eAAe,CAAC,IAAI,CAAC;IACvB;EACF,CAAC,EAAE,CAACj/C,MAAM,CAAC,CAAC;EAEZ,MAAMqnD,YAAY,GAAG7vD,kEAAe,CAAC,MAAM;IACzC,MAAM8vD,MAAM,GAAG9vC,SAAS,CAACwD,OAAO;IAChC,IAAI,CAACssC,MAAM,EAAE;IACb,IAAItnD,MAAM,EAAE;MACV,MAAM;QACJib,GAAG;QAAEsM,IAAI;QAAE6sB,KAAK;QAAE+E;MACpB,CAAC,GAAGmO,MAAM,CAACtR,aAAa,CAAC,gBAAgB,CAAC,CAAE76B,qBAAqB,CAAC,CAAC;MACnE+rC,eAAe,CAAC;QACdjsC,GAAG;QACHsM,IAAI;QACJ6sB,KAAK;QACL+E,MAAM;QACNoO,SAAS,EAAE;MACb,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF/iD,2DAAS,CAAC,MAAM;IACd,IAAIpB,cAAc,EAAEokD,WAAW,EAAE;MAC/BH,YAAY,CAAC,CAAC;IAChB;EACF,CAAC,EAAE,CAACjkD,cAAc,EAAEikD,YAAY,CAAC,CAAC;EAElC,MAAMI,WAAW,GAAGjwD,kEAAe,CAAEkT,MAA0B,IAAK;IAClE,IAAI,CAACtH,cAAc,EAAE;IAErBgkD,iBAAiB,CAAC18C,MAAM,CAAC;IACzB,IAAIxJ,IAAI,EAAE;MACR8F,WAAW,CAAC;QACVxN,IAAI,EAAE,WAAW;QACjBiR,MAAM,EAAEvJ,IAAI,CAAC9B,EAAE;QACfoM,KAAK,EAAEd,MAAM,CAACc,KAAK;QACnBlQ,QAAQ,EAAEoP,MAAM,CAACpP,QAAQ;QACzBC,MAAM,EAAEmP,MAAM,CAACnP;MACjB,CAAC,CAAC;IACJ,CAAC,MAAM;MACLyL,WAAW,CAAC;QACVxN,IAAI,EAAE,OAAO;QACbgS,KAAK,EAAEd,MAAM,CAACc,KAAK;QACnBlQ,QAAQ,EAAEoP,MAAM,CAACpP,QAAQ;QACzBC,MAAM,EAAEmP,MAAM,CAACnP;MACjB,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EAEF,SAASsf,YAAYA,CAACtR,CAAgC,EAAE;IACtD,MAAM;MAAEwR;IAAU,CAAC,GAAGxR,CAAC,CAACuR,aAAa;IAErCmkC,eAAe,CAAClkC,SAAS,IAAI,GAAG,CAAC;EACnC;EAEA,MAAM1X,WAAW,GAAG7L,kEAAe,CAAC,MAAM;IACxCyvD,mBAAmB,CAAC,CAAC;EACvB,CAAC,CAAC;EAEF,SAASS,eAAeA,CAAA,EAAG;IACzB,IAAItkD,cAAc,EAAEokD,WAAW,EAAE;MAC/B,OAAOtmD,IAAI,GAAGkuB,sEAAU,CAACj2B,OAAO,CAAC,gCAAgC,EAC/D6V,4EAAsB,CAACm4C,cAAc,CAAE5rD,MAAM,EAAE4rD,cAAc,CAAE7rD,QAAQ,EAAEnC,OAAO,CAAC4F,IAAI,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,GAC3GqwB,sEAAU,CAACj2B,OAAO,CAAC,mBAAmB,EAAEguD,cAAc,EAAE37C,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC;IAC1F;IAEA,OAAOtK,IAAI,GAAG/H,OAAO,CAAC,gBAAgB,CAAC,GAAGA,OAAO,CAAC,oBAAoB,CAAC;EACzE;EAEA,MAAMwuD,UAAU,GAAG5wD,yDAAO,CAAC,MAAM;IAC/B,MAAM6D,IAAI,GAAGzB,OAAO,CAAC,mCAAmC,CAAC;IACzD,MAAMioD,KAAK,GAAGxmD,IAAI,CAACymD,KAAK,CAAC,QAAQ,CAAC;IAClC,OAAO,CACLD,KAAK,CAAC,CAAC,CAAC,EACRxpD,wDAAA,CAAC8d,yDAAQ;MACP8F,GAAG,EAAEriB,OAAO,CAAC,cAAc,CAAE;MAC7ByB,IAAI,EAAEzB,OAAO,CAAC,wCAAwC;IAAE,CACzD,CAAC,EACFioD,KAAK,CAAC,CAAC,CAAC,CACT;EACH,CAAC,EAAE,CAACjoD,OAAO,CAAC,CAAC;EAEb,OACEvB,wDAAA,CAACge,kDAAK;IACJ3Y,SAAS,EAAEgI,gEAAc,CAACtI,oEAAM,CAACsiB,WAAW,CAAE;IAC9C7a,gBAAgB,EAAEzH,oEAAM,CAAC0H,OAAQ;IACjCmT,SAAS,EAAEA,SAAU;IACrBwH,MAAM;IACNxd,OAAO,EAAE6B,WAAY;IACrBrD,MAAM,EAAEA,MAAO;IACfk1B,sBAAsB;IAAAj5B,QAAA,EAEtBjE,yDAAA;MAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,oEAAM,CAAC8f,IAAI,EAAE,eAAe,CAAE;MAACqB,QAAQ,EAAEjD,YAAa;MAAA5e,QAAA,GACnFrE,wDAAA;QAAKqF,SAAS,EAAEgI,gEAAc,CAACtI,oEAAM,CAAC2G,MAAM,EAAE07C,cAAc,IAAIriD,oEAAM,CAAC6iB,YAAY,CAAE;QAAAvjB,QAAA,EACnFrE,wDAAA;UAAIqF,SAAS,EAAEN,oEAAM,CAAC+lD,cAAe;UAAAzmD,QAAA,EAClCiF,IAAI,GAAG/H,OAAO,CAAC,gBAAgB,CAAC,GAAGA,OAAO,CAAC,oBAAoB;QAAC,CAC/D;MAAC,CACF,CAAC,EACNvB,wDAAA;QAAKqF,SAAS,EAAEN,oEAAM,CAACirD,UAAW;QAAA3rD,QAAA,EAC/BiF,IAAI,GACHlJ,yDAAA,CAAAF,yDAAA;UAAAmE,QAAA,GACErE,wDAAA,CAAC4E,uDAAM;YACLsB,IAAI,EAAElB,WAAY;YAClBG,IAAI,EAAEmE,IAAK;YACXjE,SAAS,EAAEN,oEAAM,CAACuB;UAAO,CAC1B,CAAC,EACFtG,wDAAA;YAAKqF,SAAS,EAAEN,oEAAM,CAACshB,cAAe;YAACgoC,GAAG,EAAElC,kDAAgB;YAACmC,GAAG,EAAC,EAAE;YAACC,SAAS,EAAE;UAAM,CAAE,CAAC;QAAA,CACxF,CAAC,GAEHnuD,yDAAA,CAAAF,yDAAA;UAAAmE,QAAA,GACErE,wDAAA;YAAKqF,SAAS,EAAEN,oEAAM,CAACkrD,IAAK;YAAC5B,GAAG,EAAEe,wDAAS;YAACd,GAAG,EAAC,EAAE;YAACC,SAAS,EAAE;UAAM,CAAE,CAAC,EACvEvuD,wDAAA;YAAKqF,SAAS,EAAEN,oEAAM,CAACshB,cAAe;YAACgoC,GAAG,EAAElC,kDAAgB;YAACmC,GAAG,EAAC,EAAE;YAACC,SAAS,EAAE;UAAM,CAAE,CAAC;QAAA,CACxF;MACH,CACE,CAAC,EACNvuD,wDAAA;QAAIqF,SAAS,EAAEgI,gEAAc,CAACtI,oEAAM,CAACif,UAAU,EAAEjf,oEAAM,CAACkf,MAAM,CAAE;QAAA5f,QAAA,EAC7DyrD,eAAe,CAAC;MAAC,CAChB,CAAC,EACL9vD,wDAAA;QAAGqF,SAAS,EAAEN,oEAAM,CAACgP,WAAY;QAAA1P,QAAA,EAC9BiF,IAAI,GAAGkuB,sEAAU,CAChBj2B,OAAO,CAAC,yBAAyB,EAAEgF,mEAAY,CAAChF,OAAO,EAAE+H,IAAI,CAAC,CAAC,EAAE,CAAC,iBAAiB,CACrF,CAAC,GAAG/H,OAAO,CAAC,6BAA6B;MAAC,CACzC,CAAC,EACJnB,yDAAA;QAAKiF,SAAS,EAAEN,oEAAM,CAAC03B,OAAQ;QAAAp4B,QAAA,GAC7BrE,wDAAA,CAAC+lD,6DAAmB;UAClBnqC,OAAO,EAAEpQ,cAAc,EAAE0kD,gBAAiB;UAC1C3rD,OAAO,EAAEsrD;QAAY,CACtB,CAAC,EACF7vD,wDAAA;UAAKqF,SAAS,EAAEN,oEAAM,CAACorD,aAAc;UAAA9rD,QAAA,EAClC0rD;QAAU,CACR,CAAC;MAAA,CACH,CAAC;IAAA,CACH;EAAC,CACD,CAAC;AAEZ,CAAC;AAED,iEAAe7wD,sDAAI,CAACyI,mDAAU,CAAW,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EACpF,MAAMhC,IAAI,GAAGgC,KAAK,EAAE3B,SAAS,GAAG4rB,6DAAU,CAAC5qB,MAAM,EAAEW,KAAK,CAAC3B,SAAS,CAAC,GAAGjI,SAAS;EAE/E,OAAO;IACL4H;EACF,CAAC;AACH,CAAC,CAAC,CAACjM,cAAc,CAAC,CAAC,E;;;;;;;;;;;;;;;;;;AC7MyD;AAC+B;AAI/C;AAErD,SAASizD,mBAAmBA,CAAC/uD,OAAkB,EAAED,IAAY,EAAEmqD,WAAgC,EAAE;EACtG,IAAIA,WAAW,CAAC8E,YAAY,EAAE;IAC5B,OAAOjvD,IAAI,CACT,wBAAwB,EACxB;MAAE0T,KAAK,EAAEy2C,WAAW,CAAC8E;IAAa,CAAC,EACnC;MACEjpD,SAAS,EAAE,IAAI;MACf8N,WAAW,EAAEq2C,WAAW,CAAC8E;IAC3B,CACF,CAAC;EACH;EAEA,IAAI9E,WAAW,CAAC+E,YAAY,EAAE;IAC5B,OAAOC,gBAAgB,CAAChF,WAAW,CAAC9nD,MAAM,CAAC,GACvCrC,IAAI,CAAC,yBAAyB,CAAC,GAC/BA,IAAI,CAAC,6BAA6B,CAAC;EACzC;EACA,IAAImqD,WAAW,CAACiF,aAAa,EAAE;IAC7B,OAAOpvD,IAAI,CAAC,wBAAwB,CAAC;EACvC;EAEA,IAAImqD,WAAW,CAACkF,qBAAqB,EAAE;IACrC,OAAOrvD,IAAI,CAAC,gCAAgC,CAAC;EAC/C;EAEA,IAAImqD,WAAW,CAACmF,gBAAgB,EAAE;IAChC,OAAOtvD,IAAI,CAAC,oCAAoC,CAAC;EACnD;EAEA,IAAImqD,WAAW,CAACoF,oBAAoB,EAAE;IACpC,OAAOJ,gBAAgB,CAAChF,WAAW,CAAC9nD,MAAM,CAAC,GACvCrC,IAAI,CAAC,+BAA+B,CAAC,GACrCA,IAAI,CAAC,uCAAuC,CAAC;EACnD;EAEA,IAAImqD,WAAW,CAACqF,gBAAgB,EAAE;IAChC,OAAOvvD,OAAO,CAAC,2BAA2B,EAAEqhC,+DAAa,CAAC6oB,WAAW,CAACqF,gBAAgB,CAAC,CAAC;EAC1F;EACA,IAAIrF,WAAW,CAACsF,aAAa,EAAE,OAAOxvD,OAAO,CAAC,0BAA0B,CAAC;EACzE,IAAIkqD,WAAW,CAACwB,aAAa,EAAE,OAAO1rD,OAAO,CAAC,mBAAmB,CAAC;EAClE,IAAIkqD,WAAW,CAACkB,kBAAkB,EAAE,OAAOlB,WAAW,CAAC3nD,KAAK,IAAIvC,OAAO,CAAC,0BAA0B,CAAC;EACnG,IAAIkqD,WAAW,CAACuF,UAAU,EAAE,OAAOzvD,OAAO,CAAC,oBAAoB,CAAC;EAChE,IAAIkqD,WAAW,CAACwF,cAAc,EAAE,OAAO1vD,OAAO,CAAC,4BAA4B,CAAC;EAC5E,IAAIkqD,WAAW,CAACyF,QAAQ,EAAE,OAAO3vD,OAAO,CAAC,eAAe,CAAC;EACzD,IAAIkqD,WAAW,CAAC0F,MAAM,EAAE;IACtB,IAAI1F,WAAW,CAAC9nD,MAAM,CAACD,QAAQ,KAAKqV,sDAAiB,EAAE;MACrD,OAAOzX,IAAI,CAAC,iBAAiB,CAAC;IAChC;IACA,OAAOC,OAAO,CAAC,mBAAmB,CAAC;EACrC;EACA,IAAIkqD,WAAW,CAAC9uC,QAAQ,EAAE;IACxB,OAAO8zC,gBAAgB,CAAChF,WAAW,CAAC9nD,MAAM,CAAC,GAAGpC,OAAO,CAAC,sBAAsB,CAAC,GAAGA,OAAO,CAAC,qBAAqB,CAAC;EAChH;EAEA,MAAM6vD,UAAU,GAAI3F,WAAW,CAACtmD,IAAI,IAAIkrD,6EAAmB,CAAC5E,WAAW,CAAC,IACnE2E,yFAA+B,CAAC3E,WAAW,CAAC,IAAK/pD,SAAS;EAE/D,IAAI0vD,UAAU,EAAE,OAAOA,UAAU,CAACttD,KAAK,IAAIvC,OAAO,CAAC6vD,UAAU,CAAClpB,QAAS,CAAC;EAExE,OAAOujB,WAAW,CAAC3nD,KAAK;AAC1B;AAEO,SAAS2sD,gBAAgBA,CAACY,cAAqC,EAAE;EACtE,IAAIA,cAAc,CAAC3tD,QAAQ,KAAKnE,wDAAmB,EAAE;IACnD,IAAI8xD,cAAc,CAAC1tD,MAAM,EAAE,OAAO0tD,cAAc,CAAC1tD,MAAM,GAAG,CAAC;IAC3D,OAAO0tD,cAAc,CAACztD,KAAK,GAAG,CAAC;EACjC;EACA,OAAOytD,cAAc,CAAC1tD,MAAM,GAAG,CAAC;AAClC,C;;;;;;;;;;;;;;AC9EA;AACA,iEAAe,CAAC,8nBAA8nB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD3lB;AACH;AAOgB;AACN;AACa;AACX;AACA;AAEC;AACG;AACV;AAEV;AACU;AAEG;AAAA;AAMzD,SAAS4tD,kBAAkBA,CAACjxD,MAAc,EAAE;EAC1C,OAAQqK,MAAmB,IACzBoC,6DAAU,CAACpC,MAAM,EAAErK,MAAM,CAC1B;AACH;AAEA,MAAM0lD,qBAAqB,GAAGA,CAAC;EAAEgF;AAAuB,CAAC,KAAK;EAC5D,MAAM;IAAEwG;EAA2B,CAAC,GAAGpyD,mDAAU,CAAC,CAAC;EACnD,MAAM;IACJkB,MAAM;IAAEmxD,OAAO;IAAEC,KAAK;IAAEC,WAAW;IAAE7tD,KAAK;IAAE+oD;EAC9C,CAAC,GAAG7B,YAAY;EAChB,MAAM1pD,IAAI,GAAGzB,6DAAU,CAAC,CAAC;EAEzB,MAAMsF,IAAI,GAAGmsD,mEAAW,CAACC,kBAAkB,CAACjxD,MAAM,CAAC,CAAE;EAErD,MAAMuvD,WAAW,GAAGjwD,kEAAe,CAAC,MAAM;IACxC4xD,0BAA0B,CAAC;MAAExG;IAAa,CAAC,CAAC;EAC9C,CAAC,CAAC;EAEF,IAAI,CAAC7lD,IAAI,EAAE;IACT,OAAOzD,SAAS;EAClB;EAEA,MAAMkwD,UAAU,GAAGF,KAAK,GAAG5gD,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI;EAC5C,MAAM7J,aAAa,GAAGmsC,0EAAkB,CAACqe,KAAK,GAAG,IAAI,EAAEpwD,IAAI,CAAC6F,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC;EAE/E,OACE/G,yDAAA;IAAKiF,SAAS,EAAEN,2EAAM,CAACO,IAAK;IAACf,OAAO,EAAEsrD,WAAY;IAAAxrD,QAAA,GAChDjE,yDAAA;MAAKiF,SAAS,EAAEN,2EAAM,CAACq6B,OAAQ;MAAA/6B,QAAA,GAC7BrE,wDAAA,CAAC4E,uDAAM;QAACsB,IAAI,EAAC,QAAQ;QAACf,IAAI,EAAEA;MAAK,CAAE,CAAC,EACpCnF,wDAAA,CAACg0B,+DAAQ;QAAC3uB,SAAS,EAAEN,2EAAM,CAAC8sD,gBAAiB;QAACjwD,IAAI,EAAC,MAAM;QAACsE,IAAI,EAAC;MAAO,CAAE,CAAC;IAAA,CACtE,CAAC,EACN9F,yDAAA;MAAKiF,SAAS,EAAEN,2EAAM,CAAC+sD,IAAK;MAAAztD,QAAA,GAC1BrE,wDAAA;QAAIqF,SAAS,EAAEN,2EAAM,CAACjB,KAAM;QAAAO,QAAA,EAAEmzB,sEAAU,CAACjxB,mEAAY,CAACjF,IAAI,EAAE6D,IAAI,CAAC,IAAI,EAAE;MAAC,CAAK,CAAC,EAC7ErB,KAAK,IACJ1D,yDAAA;QAAGiF,SAAS,EAAEN,2EAAM,CAACmH,QAAS;QAAA7H,QAAA,GAC3BwoD,KAAK,IAAI7sD,wDAAA,CAAC4E,uDAAM;UAACmtD,QAAQ,EAAElF,KAAM;UAAC3mD,IAAI,EAAC;QAAO,CAAE,CAAC,EACjDsxB,sEAAU,CAAC1zB,KAAK,CAAC;MAAA,CACjB,CACJ,EACD9D,wDAAA;QAAGqF,SAAS,EAAEN,2EAAM,CAACgP,WAAY;QAAA1P,QAAA,EAC9B/C,IAAI,CACHswD,UAAU,GAAG,0BAA0B,GACnCD,WAAW,GAAG,0BAA0B,GAAG,yBAAyB,EACxEzqD,aACF;MAAC,CACA,CAAC;IAAA,CACD,CAAC,EACNlH,wDAAA;MAAKqF,SAAS,EAAEN,2EAAM,CAAC9C,MAAO;MAAAoC,QAAA,EAC1BstD,WAAW,IAAIC,UAAU,GACzB5xD,wDAAA;QAAKqF,SAAS,EAAEN,2EAAM,CAACitD,WAAY;QAAA3tD,QAAA,EAChC/C,IAAI,CAACswD,UAAU,GAAG,gCAAgC,GAAG,kCAAkC;MAAC,CACtF,CAAC,GAENxxD,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACEjE,yDAAA;UAAKiF,SAAS,EAAEN,2EAAM,CAACktD,aAAc;UAAA5tD,QAAA,GACnCrE,wDAAA,CAACg0B,+DAAQ;YAAC3uB,SAAS,EAAEN,2EAAM,CAAC2X,IAAK;YAAC9a,IAAI,EAAC,MAAM;YAACsE,IAAI,EAAC;UAAU,CAAE,CAAC,EAChElG,wDAAA;YAAMqF,SAAS,EAAEN,2EAAM,CAACpB,MAAO;YAAAU,QAAA,EAC5BqyC,+DAAa,CAAC+a,OAAO,CAAC9tD,MAAM;UAAC,CAC1B,CAAC;QAAA,CACJ,CAAC,EACN3D,wDAAA;UAAKqF,SAAS,EAAEN,2EAAM,CAACmtD,YAAa;UAAA7tD,QAAA,EAAE/C,IAAI,CAAC,sCAAsC;QAAC,CAAM,CAAC;MAAA,CACzF;IACH,CACE,CAAC;EAAA,CACH,CAAC;AAEV,CAAC;AAED,iEAAepC,sDAAI,CAAC8mD,qBAAqB,CAAC,E;;;;;;;;;;;;;;AChG1C;AACA,iEAAe,CAAC,ylBAAylB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAriB;AACR;AAOA;AACK;AAG3B;AACuB;AACc;AAE3B;AACgB;AACV;AACE;AAEZ;AACU;AACgB;AACtB;AACR;AACqC;AAEnB;AAAA;AAU1D,MAAMxnC,4BAA4B,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAU;AAEtD,MAAM9gB,sBAAiD,GAAGA,CAAC;EACzD4N,KAAK;EAAEnG;AACT,CAAC,KAAK;EACJ,MAAM;IACJgtD,2BAA2B;IAC3BC,wBAAwB;IACxBC,uBAAuB;IACvBC,eAAe;IACfC,cAAc;IACdnjD;EACF,CAAC,GAAGhQ,mDAAU,CAAC,CAAC;EAChB,MAAMmC,OAAO,GAAG1B,6DAAU,CAAC,CAAC;EAC5B,MAAMyB,IAAI,GAAG3B,0DAAO,CAAC,CAAC;EACtB,MAAM;IAAEqrD;EAAa,CAAC,GAAG1/C,KAAK,IAAI,CAAC,CAAC;EACpC,MAAM0V,kBAAkB,GAAGlI,wDAAM,CAA2B,CAAC;EAE7D,MAAMgN,qBAAqB,GAAGlmB,kEAAe,CAAC,MAAM;IAClDohB,kBAAkB,CAACoC,OAAO,GAAG,CAAC;EAChC,CAAC,CAAC;EAEF,MAAM2C,sBAAsB,GAAGnmB,kEAAe,CAAEomB,OAA2B,IAAK;IAC9EhF,kBAAkB,CAACoC,OAAO,GAAG4C,OAAO;EACtC,CAAC,CAAC;EAEF,MAAMwsC,WAAW,GAAGrzD,yDAAO,CAAC,MAAM;IAChC,IAAI,CAAC6rD,YAAY,EAAE;MACjB,OAAO,QAAQ;IACjB;IAEA,IAAIA,YAAY,CAACyH,YAAY,EAAE;MAC7B,OAAO,WAAW;IACpB;IAEA,MAAMzmD,QAAQ,GAAGg/C,YAAY,CAAC0G,KAAK,GAAG5gD,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI;IACvD,IAAI/E,QAAQ,IAAI,CAACg/C,YAAY,CAAC2G,WAAW,EAAE;MACzC,OAAO,QAAQ;IACjB;IAEA,IAAI3lD,QAAQ,IAAIg/C,YAAY,CAAC2G,WAAW,EAAE;MACxC,OAAO,OAAO;IAChB;IAEA,MAAMe,UAAU,GAAG1H,YAAY,CAAC2H,cAAc,IAAI3H,YAAY,CAAC4H,WAAW;IAC1E,IAAI,CAAC5mD,QAAQ,IAAI0mD,UAAU,EAAE;MAC3B,OAAO,SAAS;IAClB;IAEA,OAAO,IAAI;EACb,CAAC,EAAE,CAAC1H,YAAY,CAAC,CAAC;EAElB,MAAM6H,iBAAiB,GAAGjzD,kEAAe,CAAC,MAAM;IAC9C,IAAI,CAACorD,YAAY,EAAE;MACjB;IACF;IAEA,QAAQwH,WAAW;MACjB,KAAK,WAAW;QAAE;UAChBJ,wBAAwB,CAAC;YAAE5qD,EAAE,EAAEwjD,YAAY,CAACxjD;UAAG,CAAC,CAAC;UACjD;QACF;MACA,KAAK,SAAS;QAAE;UACd,IAAIwjD,YAAY,CAAC2H,cAAc,EAAE;YAC/BL,eAAe,CAAC;cAAEzf,IAAI,EAAEmY,YAAY,CAAC2H;YAAe,CAAC,CAAC;UACxD,CAAC,MAAM,IAAI3H,YAAY,CAAC4H,WAAW,EAAE;YACnCxjD,WAAW,CAAC;cACVxN,IAAI,EAAE,MAAM;cACZC,IAAI,EAAEmpD,YAAY,CAAC4H;YACrB,CAAC,CAAC;UACJ;UACAL,cAAc,CAAC,CAAC;UAChB;QACF;MACA,KAAK,OAAO;QAAE;UACZF,uBAAuB,CAAC;YAAE7qD,EAAE,EAAEwjD,YAAY,CAACxjD,EAAE;YAAEmqD,WAAW,EAAE;UAAM,CAAC,CAAC;UACpE;QACF;MACA,KAAK,QAAQ;QAAE;UACbU,uBAAuB,CAAC;YAAE7qD,EAAE,EAAEwjD,YAAY,CAACxjD,EAAE;YAAEmqD,WAAW,EAAE;UAAK,CAAC,CAAC;UACnE;QACF;IACF;IACAQ,2BAA2B,CAAC,CAAC;EAC/B,CAAC,CAAC;EAEF,MAAMW,aAAa,GAAG3zD,yDAAO,CAAC,MAAM;IAClC,IAAI,CAAC6rD,YAAY,IAAI,CAAC7lD,IAAI,EAAE;MAC1B,OAAOzD,SAAS;IAClB;IAEA,MAAM;MACJ+vD,OAAO;MAAEC,KAAK;MAAEC,WAAW;MAAEc,YAAY;MAAE5F,KAAK;MAAE/oD,KAAK;MAAEivD;IAC3D,CAAC,GAAG/H,YAAY;IAEhB,MAAM0B,iBAAiB,GAAG5/C,oEAAa,CAAC3H,IAAI,CAAC;IAE7C,MAAMuG,MAAM,GACVtL,yDAAA;MAAKiF,SAAS,EAAEN,4EAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC5BjE,yDAAA;QAAKiF,SAAS,EAAEN,4EAAM,CAACiuD,aAAc;QAAA3uD,QAAA,GACnCrE,wDAAA,CAAC4E,uDAAM;UACLO,IAAI,EAAE,CAAC0nD,KAAK,GAAG1nD,IAAI,GAAGzD,SAAU;UAChCqwD,QAAQ,EAAElF,KAAM;UAChB3mD,IAAI,EAAC,OAAO;UACZkgB,WAAW,EAAEN;QAAsB,CACpC,CAAC,EACF9lB,wDAAA,CAACg0B,+DAAQ;UAAC3uB,SAAS,EAAEN,4EAAM,CAAC8sD,gBAAiB;UAACjwD,IAAI,EAAC,MAAM;UAACsE,IAAI,EAAC;QAAU,CAAE,CAAC;MAAA,CACzE,CAAC,EACNlG,wDAAA,CAAC6d,oEAAmB;QAClBxY,SAAS,EAAEgI,gEAAc,CAACtI,4EAAM,CAACkuD,eAAe,CAAE;QAClDz6C,KAAK,EAAC,MAAM;QACZ+N,kBAAkB,EAAER,sBAAuB;QAC3CO,WAAW,EAAE9H;MAA6B,CAC3C,CAAC,EACFxe,wDAAA;QAAIqF,SAAS,EAAEN,4EAAM,CAACjB,KAAM;QAAAO,QAAA,EAAEP,KAAK,IAAIvC,OAAO,CAAC,wBAAwB;MAAC,CAAK,CAAC,EAC9EvB,wDAAA;QAAGqF,SAAS,EAAEN,4EAAM,CAACpB,MAAO;QAAAU,QAAA,EACzB/C,IAAI,CAAC,eAAe,EAAE;UACrBqC,MAAM,EAAE8tD,OAAO,CAAC9tD;QAClB,CAAC,EAAE;UACD2D,SAAS,EAAE,IAAI;UACfszC,kBAAkB,EAAE;YAClB,CAACrE,2DAAsB,GAAGv2C,wDAAA,CAACg0B,+DAAQ;cAAC3uB,SAAS,EAAEN,4EAAM,CAACmuD,UAAW;cAAChtD,IAAI,EAAC,UAAU;cAACtE,IAAI,EAAC;YAAM,CAAE;UACjG;QACF,CAAC;MAAC,CACD,CAAC;IAAA,CACD,CACN;IAED,MAAMixB,SAAoB,GAAG,EAAE;IAE/BA,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAACmrD,iBAAiB,GAAG,sBAAsB,GAAG,0BAA0B,CAAC,EAChF;MAAEh8C,MAAM,EAAEvL,IAAI,CAACqC;IAAG,CAAC,CACpB,CAAC;IAEF,IAAI1D,KAAK,EAAE;MACT+uB,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,6BAA6B,CAAC,EACtCuC,KAAK,CACN,CAAC;IACJ;IAEA,MAAM8tD,UAAU,GAAGF,KAAK,GAAG5gD,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,IAAI;IAC5C8hB,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAACqwD,UAAU,GAAG,+BAA+B,GAChDD,WAAW,GAAG,+BAA+B,GAAG,8BAA8B,CAAC,EACnFnrD,8EAAsB,CAACkrD,KAAK,GAAG,IAAI,EAAEnwD,OAAO,CAAC4F,IAAI,EAAE,IAAI,CAAC,CACzD,CAAC;IAEF,MAAMgsD,SAAS,GAAG7xD,IAAI,CAAC,qBAAqB,EAAE;MAC5C0S,IAAI,EAAEhU,wDAAA,CAAC8d,yDAAQ;QAAC8F,GAAG,EAAEtiB,IAAI,CAAC,yBAAyB,CAAE;QAAC0B,IAAI,EAAE1B,IAAI,CAAC,6BAA6B;MAAE,CAAE;IACpG,CAAC,EAAE;MACDgG,SAAS,EAAE;IACb,CAAC,CAAC;IAEF,MAAM6E,MAAM,GACV/L,yDAAA;MAAMiF,SAAS,EAAEN,4EAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC7BrE,wDAAA;QAAGqF,SAAS,EAAEN,4EAAM,CAACquD,SAAU;QAAA/uD,QAAA,EAAE8uD;MAAS,CAAI,CAAC,EAC9CxB,WAAW,IACV3xD,wDAAA;QAAGqF,SAAS,EAAEN,4EAAM,CAACsuD,MAAO;QAAAhvD,QAAA,EACzB9C,OAAO,CAACwxD,eAAe,GAAG,mCAAmC,GAAG,gCAAgC;MAAC,CACjG,CACJ,EACAN,YAAY,IACXzyD,wDAAA;QAAGqF,SAAS,EAAEN,4EAAM,CAACquD,SAAU;QAAA/uD,QAAA,EAC5B9C,OAAO,CAAC,gCAAgC,EAAEiF,8EAAsB,CAACkrD,KAAK,GAAG,IAAI,EAAEnwD,OAAO,CAAC4F,IAAI,EAAE,IAAI,CAAC;MAAC,CACnG,CACJ,EACA,CAACwqD,WAAW,IAAI,CAACc,YAAY,IAAIb,UAAU,IAC1C5xD,wDAAA;QAAGqF,SAAS,EAAEN,4EAAM,CAACquD,SAAU;QAAA/uD,QAAA,EAC5B9C,OAAO,CAAC,8BAA8B,EAAEiF,8EAAsB,CAACkrD,KAAK,GAAG,IAAI,EAAEnwD,OAAO,CAAC4F,IAAI,EAAE,IAAI,CAAC;MAAC,CACjG,CACJ,EACA,CAACwqD,WAAW,IAAI,CAACc,YAAY,IAAI,CAACb,UAAU,IAC3C5xD,wDAAA;QAAGqF,SAAS,EAAEN,4EAAM,CAACquD,SAAU;QAAA/uD,QAAA,EAC5B9C,OAAO,CAAC,6BAA6B,EAAEiF,8EAAsB,CAACkrD,KAAK,GAAG,IAAI,EAAEnwD,OAAO,CAAC4F,IAAI,EAAE,IAAI,CAAC;MAAC,CAChG,CACJ,EACAqrD,WAAW,KAAK,QAAQ,IACvBxyD,wDAAA,CAACoL,mDAAM;QACLoN,KAAK,EAAEg6C,WAAW,KAAK,QAAQ,GAAG,QAAQ,GAAG,SAAU;QACvDve,MAAM,EAAEue,WAAW,KAAK,QAAS;QACjCjuD,OAAO,EAAEsuD,iBAAkB;QAAAxuD,QAAA,EAE1B9C,OAAO,CACNixD,WAAW,KAAK,QAAQ,GAAG,yBAAyB,GAChDA,WAAW,KAAK,WAAW,GAAG,4BAA4B,GACxDA,WAAW,KAAK,SAAS,GAAG,wBAAwB,GAClDA,WAAW,KAAK,OAAO,GAAG,wBAAwB,GAAG,IAC/D;MAAC,CACK,CACT;IAAA,CACG,CACP;IAED,OAAO;MACL9mD,MAAM;MACNmnB,SAAS;MACT1mB;IACF,CAAC;EACH,CAAC,EAAE,CAACqmD,WAAW,EAAElxD,IAAI,EAAEC,OAAO,EAAE4D,IAAI,EAAE6lD,YAAY,CAAC,CAAC;EAEpD,MAAMsI,aAAa,GAAGtY,+DAAW,CAAC8X,aAAa,CAAC;EAChD,MAAMS,kBAAkB,GAAGD,aAAa,IAAIR,aAAa;EAEzD,OACE9yD,wDAAA,CAAC2yB,+DAAc;IACbvqB,MAAM,EAAE5D,OAAO,CAACwmD,YAAY,CAAE;IAC9B3lD,SAAS,EAAEN,4EAAM,CAACuG,KAAM;IACxBI,MAAM,EAAE6nD,kBAAkB,EAAE7nD,MAAO;IACnCmnB,SAAS,EAAE0gC,kBAAkB,EAAE1gC,SAAU;IACzC1mB,MAAM,EAAEonD,kBAAkB,EAAEpnD,MAAO;IACnCvC,OAAO,EAAEuoD;EAA4B,CACtC,CAAC;AAEN,CAAC;AAED,iEAAejzD,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAMhL,MAAM,GAAGgL,KAAK,EAAE0/C,YAAY,CAAC1qD,MAAM;EACzC,MAAM6E,IAAI,GAAG7E,MAAM,GAAGyM,6DAAU,CAACpC,MAAM,EAAErK,MAAM,CAAC,GAAGoB,SAAS;EAE5D,OAAO;IACLyD;EACF,CAAC;AACH,CACF,CAAC,CAACzH,sBAAsB,CAAC,CAAC,E;;;;;;;;;;;;;;ACzQ1B;AACA,iEAAe,CAAC,udAAud,E;;;;;;;;;;;;;;;;;;;;;;ACDpb;AAIyB;AACf;AAEX;AAEJ;AACU;AAEN;AAAA;AASlD,MAAMk2D,WAAW,GAAG,CAAC;AACrB,MAAMC,mBAAmB,GAAG,CAAC;AAE7B,MAAM3H,cAAc,GAAGA,CAAC;EACtBkB,KAAK;EAAE/nD,SAAS;EAAEyuD,oBAAoB;EAAEvvD;AAChC,CAAC,KAAK;EACd,MAAMyQ,KAAK,GAAGpE,IAAI,CAAC89B,GAAG,CAAC0e,KAAK,CAAC1jD,MAAM,EAAEoqD,oBAAoB,GAAGD,mBAAmB,GAAGD,WAAW,CAAC;EAC9F,MAAM/3C,QAAQ,GAAG,WAAW,IAAIuxC,KAAK,CAAC,CAAC,CAAC;EACxC,OACEhtD,wDAAA;IACEiF,SAAS,EAAEgI,gEAAc,CACvBtI,mEAAM,CAACO,IAAI,EACXP,mEAAM,CAAC,YAAYiQ,KAAK,EAAE,CAAC,EAC3B8+C,oBAAoB,IAAI/uD,mEAAM,CAACq6B,OAAO,EACtC/5B,SACF,CAAE;IACFyoD,GAAG,EAAC,KAAK;IACTvpD,OAAO,EAAEA,OAAQ;IAAAF,QAAA,GAEhB+oD,KAAK,CAACnT,KAAK,CAAC,CAAC,EAAEjlC,KAAK,CAAC,CAAC++C,OAAO,CAAC,CAAC,CAAChvC,GAAG,CAAC,CAAC6G,IAAI,EAAE02B,CAAC,EAAE0R,GAAG,KAAK;MACrD,MAAMC,SAAS,GAAGD,GAAG,CAACtqD,MAAM,GAAG44C,CAAC,GAAG,CAAC;MACpC,OAAO,WAAW,IAAI12B,IAAI,GACxB5rB,uDAAA,CAAC2zD,4DAAY;QACXtuD,SAAS,EAAEN,mEAAM,CAACgtB,KAAM;QACxBtX,SAAS;QACT+hC,KAAK,EAAE5wB,IAAI,CAAC4wB,KAAM;QAClB+E,MAAM,EAAE31B,IAAI,CAAC21B,MAAO;QACpB2S,YAAY,EAAEtoC,IAAI,CAACuoC,SAAS,EAAEC;MAAQ,CACvC,CAAC,GAEFp0D,uDAAA,CAACq0D,gBAAgB;QACfhvD,SAAS,EAAEgI,gEAAc,CAACymD,oBAAoB,IAAIG,SAAS,GAAG,CAAC,IAAIlvD,mEAAM,CAACuvD,SAAS,CAAE;QACrFC,WAAW,EAAE3oC,IAAK;QAClBoR,KAAK,EAAEi3B;MAAU,CAClB,CACF;IACH,CAAC,CAAC,EACDp4C,QAAQ,IACPzb,wDAAA;MAAKiF,SAAS,EAAEN,mEAAM,CAACiQ,KAAM;MAAA3Q,QAAA,GAC3BrE,uDAAA,CAAC6E,0DAAI;QAACuB,IAAI,EAAC;MAAY,CAAE,CAAC,EACzBgnD,KAAK,CAAC1jD,MAAM,GAAG,CAAC,GAAG0jD,KAAK,CAAC1jD,MAAM,GAAG,EAAE;IAAA,CAClC,CACN;EAAA,CACE,CAAC;AAEV,CAAC;AAED,SAAS2qD,gBAAgBA,CAAC;EACxBE,WAAW;EACXv3B,KAAK;EACL33B;AAKF,CAAC,EAAE;EACD,MAAM+nD,KAAK,GAAImH,WAAW,CAACC,KAAK,IAAID,WAAW,CAAC1H,KAAO;EACvD,MAAM4H,SAAS,GAAGjB,6DAAY,CAACpG,KAAK,EAAE,WAAW,CAAC;EAClD,MAAMr7B,KAAK,GAAG0hC,iEAAgB,CAACrG,KAAK,CAAC;EAErC,MAAMsH,SAAS,GAAGhB,2DAAQ,CAACe,SAAS,CAAC;EAErC,OACEr0D,wDAAA;IAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,mEAAM,CAACgtB,KAAK,EAAEiL,KAAK,KAAKt7B,SAAS,IAAI,2BAA2Bs7B,KAAK,EAAE,EAAE33B,SAAS,CAAE;IAAAhB,QAAA,GAChH0tB,KAAK,IAAI/xB,uDAAA;MAAKqF,SAAS,EAAEN,mEAAM,CAAC4vD,MAAO;MAACtG,GAAG,EAAEt8B,KAAM;MAACu8B,GAAG,EAAC;IAAE,CAAE,CAAC,EAC7DoG,SAAS,IAAI10D,uDAAA;MAAKqF,SAAS,EAAEN,mEAAM,CAAC6vD,IAAK;MAACvG,GAAG,EAAEqG,SAAU;MAACpG,GAAG,EAAC;IAAE,CAAE,CAAC;EAAA,CACjE,CAAC;AAEV;AAEA,iEAAepvD,sDAAI,CAACgtD,cAAc,CAAC,E;;;;;;;;;;;;;;AC3FnC;AACA,iEAAe,CAAC,iqBAAiqB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDrnB;AACZ;AAS4B;AAGT;AACH;AACN;AACG;AACc;AACD;AACY;AAC1B;AACmB;AAElB;AACb;AACgB;AACV;AAEwB;AAClC;AACE;AACQ;AACgC;AACxC;AAEU;AAAA;AAOxD,MAAMjnD,iBAAiB,GAAG,EAAE;AAE5B,SAAS6vD,kBAAkBA,CAACx0D,MAAe,EAAE;EAC3C,OAAQqK,MAAmB,IACzBrK,MAAM,GAAGyM,6DAAU,CAACpC,MAAM,EAAErK,MAAM,CAAC,GAAGoB,SACvC;AACH;AAEA,MAAMukD,oBAAoB,GAAGA,CAAC;EAAEwF,WAAW;EAAEpmD;AAAoB,CAAC,KAAK;EACrE,MAAM;IAAE0vD;EAA0B,CAAC,GAAG31D,mDAAU,CAAC,CAAC;EAClD,MAAM;IACJiE,IAAI;IACJM,MAAM;IACNkpD,KAAK;IACL1nD,IAAI,EAAE6vD,eAAe;IACrB/H,aAAa;IACbN;EACF,CAAC,GAAGlB,WAAW;EACf,MAAMnqD,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EACtB,MAAM4B,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAE5B,MAAMS,MAAM,GAAG00D,eAAe,CAACpzD,IAAI,KAAK,MAAM,GAAGozD,eAAe,CAACxtD,EAAE,GAAG9F,SAAS;EAC/E,MAAMyD,IAAI,GAAGmsD,oEAAW,CAACwD,kBAAkB,CAACx0D,MAAM,CAAC,CAAC;EACpD,MAAMqc,QAAQ,GAAG8uC,WAAW,CAAC9uC,QAAQ;EACrC,MAAMs4C,YAAY,GAAGt4C,QAAQ,EAAE/a,IAAI,KAAK,gBAAgB;EACxD,MAAMy0B,WAAW,GAAG1Z,QAAQ,IAAIxD,yEAAkB,CAACwD,QAAQ,CAAC;EAE5D,MAAMwvB,IAAI,GAAGhtC,yDAAO,CAAC,MAAM;IACzB,IAAI2E,KAAK,GAAGwsD,0EAAmB,CAAC/uD,OAAO,EAAED,IAAI,EAAEmqD,WAAW,CAAC;IAC3D,IAAI13C,WAAW;IACf,IAAI9R,MAA0B;IAC9B,IAAIizD,UAA4C;IAEhD,IAAI,CAAC7E,6EAAmB,CAAC5E,WAAW,CAAC,EAAE;MACrC13C,WAAW,GAAG5O,IAAI,IAAIoB,mEAAY,CAAChF,OAAO,EAAE4D,IAAI,CAAC;MACjD+vD,UAAU,GAAG/vD,IAAI,IAAI0vD,yEAAmB;IAC1C,CAAC,MAAM;MACL,MAAMzD,UAAU,GAAGhB,yFAA+B,CAAC3E,WAAW,CAAC;MAC/D3nD,KAAK,GAAGstD,UAAU,CAACttD,KAAK,IAAIvC,OAAO,CAAC6vD,UAAU,CAAClpB,QAAS,CAAC;MACzDn0B,WAAW,GAAGxS,OAAO,CAAC6vD,UAAU,CAAC+D,WAAY,CAAC;MAC9CD,UAAU,GAAG9D,UAAU;IACzB;IAEA,IAAI,CAAC3F,WAAW,CAACsF,aAAa,IAAItF,WAAW,CAACkF,qBAAqB,KAC9DlF,WAAW,CAAC9uC,QAAQ,EAAE/a,IAAI,KAAK,gBAAgB,EAAE;MACpDmS,WAAW,GAAGzS,IAAI,CAAC,YAAY,EAAE;QAAEwC,KAAK,EAAE2nD,WAAW,CAAC9uC,QAAQ,CAAC7Y,KAAK;QAAEC,MAAM,EAAE0nD,WAAW,CAAC9uC,QAAQ,CAAC5Y;MAAO,CAAC,CAAC;IAC9G;IAEA,IAAI0nD,WAAW,CAAC+E,YAAY,IAAI/E,WAAW,CAAC9uC,QAAQ,EAAE/a,IAAI,KAAK,gBAAgB,EAAE;MAC/EmS,WAAW,GAAGzS,IAAI,CAAC,YAAY,EAAE;QAAEwC,KAAK,EAAE2nD,WAAW,CAAC9uC,QAAQ,CAAC7Y,KAAK;QAAEC,MAAM,EAAE0nD,WAAW,CAAC9uC,QAAQ,CAAC5Y;MAAO,CAAC,CAAC;IAC9G;IAEA,IAAI0nD,WAAW,CAACiF,aAAa,EAAE;MAC7B5sD,KAAK,GAAGwsD,0EAAmB,CAAC/uD,OAAO,EAAED,IAAI,EAAEmqD,WAAW,CAAC;MACvD13C,WAAW,GAAGrS,SAAS;IACzB;IAEA,IAAI+pD,WAAW,CAACoB,KAAK,EAAE;MACrBqI,UAAU,GAAGxzD,SAAS;IACxB;IAEA,IAAI+pD,WAAW,CAACC,QAAQ,EAAE;MACxBzpD,MAAM,GAAGV,OAAO,CAAC,eAAe,CAAC;IACnC;IAEA,IAAIkqD,WAAW,CAAC2J,SAAS,EAAE;MACzBnzD,MAAM,GAAGV,OAAO,CAAC,aAAa,CAAC;IACjC;IAEA,IAAIkqD,WAAW,CAAC4J,SAAS,EAAE;MACzBpzD,MAAM,GAAGV,OAAO,CAAC,cAAc,CAAC;IAClC;IAEA,OAAO;MACLuC,KAAK;MACLiQ,WAAW;MACXmhD,UAAU;MACVjzD;IACF,CAAC;EACH,CAAC,EAAE,CAACV,OAAO,EAAED,IAAI,EAAE6D,IAAI,EAAEsmD,WAAW,CAAC,CAAC;EAEtC,MAAM6J,cAAc,GAAGn2D,yDAAO,CAAC,MAAM;IACnC,IAAI81D,YAAY,EAAE;MAChB,MAAM;QAAEzvD;MAAS,CAAC,GAAGf,wEAAiB,CAACkY,QAAQ,CAAE;MACjD,MAAMlX,gBAAgB,GAAG,CAACD,QAAQ,CAAEE,WAAW,EAAEF,QAAQ,CAAEG,SAAS,CAAC;MAErE,OACEvF,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACErE,wDAAA,CAAC8E,gFAAuB;UACtBO,SAAS,EAAEN,0EAAM,CAACwwD,oBAAqB;UACvC9vD,gBAAgB,EAAEA;QAAiB,CACpC,CAAC,EACFzF,wDAAA,CAAC2E,wEAAuB;UACtBU,SAAS,EAAEN,0EAAM,CAACsxB,WAAY;UAC9BvwB,OAAO,EAAEuwB,WAAY;UACrBnwB,IAAI,EAAEjB,iBAAkB;UACxBmT,IAAI,EAAE;QAAM,CACb,CAAC;MAAA,CACF,CAAC;IAEP;IAEA,IAAIie,WAAW,EAAE;MACf,OACEr2B,wDAAA,CAAC2E,wEAAuB;QACtBU,SAAS,EAAEN,0EAAM,CAACsxB,WAAY;QAC9BvwB,OAAO,EAAEuwB,WAAY;QACrBnwB,IAAI,EAAEjB,iBAAkB;QACxBmT,IAAI,EAAE;MAAM,CACb,CAAC;IAEN;IAEA,IAAI60C,aAAa,EAAE;MACjB,OAAOjtD,wDAAA,CAACksD,wDAAc;QAACkB,KAAK,EAAEH,aAAc;QAAC6G,oBAAoB;MAAA,CAAE,CAAC;IACtE;IAEA,OACE1zD,yDAAA,CAAAF,yDAAA;MAAAmE,QAAA,GACErE,wDAAA,CAAC4E,uDAAM;QAACsB,IAAI,EAAC,QAAQ;QAAC6rD,QAAQ,EAAElF,KAAM;QAAC1nD,IAAI,EAAEgnC,IAAI,CAAC+oB;MAAW,CAAE,CAAC,EAC/D1wD,OAAO,CAACmoD,kBAAkB,CAAC,IAC1B3sD,wDAAA,CAACg0B,+DAAQ;QAAC3uB,SAAS,EAAEN,0EAAM,CAAC8sD,gBAAiB;QAACjwD,IAAI,EAAC,MAAM;QAACsE,IAAI,EAAC;MAAO,CAAE,CACzE;IAAA,CACD,CAAC;EAEP,CAAC,EAAE,CAAC+uD,YAAY,EAAEhI,aAAa,EAAEJ,KAAK,EAAE1gB,IAAI,CAAC+oB,UAAU,EAAEvI,kBAAkB,EAAEhwC,QAAQ,EAAE0Z,WAAW,CAAC,CAAC;EAEpG,MAAMw5B,WAAW,GAAGjwD,mEAAe,CAAC,MAAM;IACxCm1D,yBAAyB,CAAC;MAAEtJ;IAAY,CAAC,CAAC;EAC5C,CAAC,CAAC;EAEF,MAAM+J,gBAAgB,GAAG/E,uEAAgB,CAAC9sD,MAAM,CAAC,GAAGoB,0EAAM,CAAC0wD,QAAQ,GAAG1wD,0EAAM,CAAC2wD,QAAQ;EAErF,OACEt1D,yDAAA;IAAKiF,SAAS,EAAEgI,gEAAc,CAACtI,0EAAM,CAACO,IAAI,EAAED,SAAS,CAAE;IAACd,OAAO,EAAEsrD,WAAY;IAAAxrD,QAAA,GAC3ErE,wDAAA;MAAKqF,SAAS,EAAEN,0EAAM,CAACq6B,OAAQ;MAAA/6B,QAAA,EAC5BixD;IAAc,CACZ,CAAC,EACNl1D,yDAAA;MAAKiF,SAAS,EAAEN,0EAAM,CAAC+sD,IAAK;MAAAztD,QAAA,GAC1BrE,wDAAA;QAAIqF,SAAS,EAAEN,0EAAM,CAACjB,KAAM;QAAAO,QAAA,EAAE8nC,IAAI,CAACroC;MAAK,CAAK,CAAC,EAC7CqoC,IAAI,CAACp4B,WAAW,IACf/T,wDAAA;QAAGqF,SAAS,EAAEN,0EAAM,CAACgP,WAAY;QAAA1P,QAAA,EAAEmzB,uEAAU,CAAC2U,IAAI,CAACp4B,WAAW;MAAC,CAAI,CACpE,EACD3T,yDAAA;QAAGiF,SAAS,EAAEN,0EAAM,CAAC1B,IAAK;QAAAgB,QAAA,GACvBmC,8EAAsB,CAACnD,IAAI,GAAG,IAAI,EAAE9B,OAAO,CAAC4F,IAAI,EAAE,IAAI,CAAC,EACvDglC,IAAI,CAAClqC,MAAM,IAAI,OAAOkqC,IAAI,CAAClqC,MAAM,GAAG;MAAA,CACpC,CAAC;IAAA,CACD,CAAC,EACN7B,yDAAA;MAAKiF,SAAS,EAAEN,0EAAM,CAAC6O,KAAM;MAAAvP,QAAA,GAC3BrE,wDAAA;QACEqF,SAAS,EAAEgI,gEAAc,CAACtI,0EAAM,CAACpB,MAAM,EAAE6xD,gBAAgB,CAAE;QAAAnxD,QAAA,EAE1DwvB,sFAA4B,CAACvyB,IAAI,EAAEqC,MAAM;MAAC,CACvC,CAAC,EACNA,MAAM,CAACD,QAAQ,KAAKnE,wDAAmB,IAAIS,wDAAA,CAACg0B,+DAAQ;QAAC3uB,SAAS,EAAEN,0EAAM,CAAC2X,IAAK;QAAC9a,IAAI,EAAC,MAAM;QAACsE,IAAI,EAAC;MAAU,CAAE,CAAC,EAC3GvC,MAAM,CAACD,QAAQ,KAAKqV,sDAAiB,IAAI/Y,wDAAA,CAAC6E,2DAAI;QAACuB,IAAI,EAAC,SAAS;QAACf,SAAS,EAAEmwD;MAAiB,CAAE,CAAC;IAAA,CAC3F,CAAC;EAAA,CACH,CAAC;AAEV,CAAC;AAED,iEAAet2D,sDAAI,CAAC+mD,oBAAoB,CAAC,E;;;;;;;;;;;;;;AC3MzC;AACA,iEAAe,CAAC,w+BAAw+B,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAp7B;AACR;AAON;AAEG;AACG;AAKf;AAMP;AACuB;AACI;AACU;AACF;AACb;AAC0B;AACP;AAE/B;AACgB;AACV;AACE;AAEsB;AAClC;AACE;AACQ;AACgB;AACtB;AAC6B;AAClB;AACb;AAEW;AAAA;AAEzD,MAAMznC,4BAA4B,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAU;AAatD,MAAMu3C,qBAAgD,GAAGA,CAAC;EACxDzqD,KAAK;EACLnG,IAAI;EACJoS,qBAAqB;EACrBy+C,UAAU;EACVC;AACF,CAAC,KAAK;EACJ,MAAM;IAAEr1D,gBAAgB;IAAEs1D,eAAe;IAAEC;EAA2B,CAAC,GAAG/2D,mDAAU,CAAC,CAAC;EAEtF,MAAMkC,IAAI,GAAG3B,2DAAO,CAAC,CAAC;EACtB,MAAM4B,OAAO,GAAG1B,8DAAU,CAAC,CAAC;EAC5B,MAAM;IAAE4rD;EAAY,CAAC,GAAGngD,KAAK,IAAI,CAAC,CAAC;EACnC,MAAM0V,kBAAkB,GAAGlI,wDAAM,CAA2B,CAAC;EAE7D,MAAMs9C,eAAe,GAAGx2D,mEAAe,CAAC,MAAM;IAC5C,MAAMwtD,KAAK,GAAG3B,WAAW,EAAEwB,aAAa;IACxC,IAAI,CAACG,KAAK,EAAE;IAEZ8I,eAAe,CAAC;MACdG,MAAM,EAAEV,qDAAiB,CAACW,gBAAgB;MAC1CC,eAAe,EAAEnJ,KAAK,CAACloC,OAAO,CAAE0G,IAAI,IAAKxK,MAAM,CAACC,MAAM,CAACuK,IAAI,CAAC;IAC9D,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,MAAM9F,qBAAqB,GAAGlmB,mEAAe,CAAC,MAAM;IAClDohB,kBAAkB,CAACoC,OAAO,GAAG,CAAC;EAChC,CAAC,CAAC;EAEF,MAAM2C,sBAAsB,GAAGnmB,mEAAe,CAAEomB,OAA2B,IAAK;IAC9EhF,kBAAkB,CAACoC,OAAO,GAAG4C,OAAO;EACtC,CAAC,CAAC;EAEF,MAAM8sC,aAAa,GAAG3zD,yDAAO,CAAC,MAAM;IAClC,IAAI,CAACssD,WAAW,EAAE;MAChB,OAAO/pD,SAAS;IAClB;IAEA,MAAM;MACJuvD,cAAc;MAAEpE,KAAK;MAAElpD,MAAM;MAAEotD,aAAa;MAAEJ,qBAAqB;MAAEh0C,QAAQ;MAAE6zC,YAAY;MAC3FM;IACF,CAAC,GAAGrF,WAAW;IAEf,MAAMjrD,IAAI,GAAGirD,WAAW,EAAE9uC,QAAQ;IAClC,MAAMs4C,YAAY,GAAGz0D,IAAI,EAAEoB,IAAI,KAAK,gBAAgB;IACpD,MAAMkE,OAAO,GAAG2lD,WAAW,EAAE9uC,QAAQ,GAAGxD,0EAAkB,CAACsyC,WAAW,CAAC9uC,QAAQ,CAAC,GAAGq5C,UAAU;IAE7F,MAAM5wD,cAAc,GAAG6vD,YAAY,GAAGxwD,yEAAiB,CAACjE,IAAI,CAAC,GAAGkB,SAAS;IAEzE,MAAM0vD,UAAU,GAAI3F,WAAW,CAACtmD,IAAI,IAAIkrD,6EAAmB,CAAC5E,WAAW,CAAC,IACnE2E,yFAA+B,CAAC3E,WAAW,CAAC,IAAK/pD,SAAS;IAE/D,MAAMpB,MAAM,GAAGmrD,WAAW,CAACtmD,IAAI,EAAEvD,IAAI,KAAK,MAAM,GAAG6pD,WAAW,CAACtmD,IAAI,CAACqC,EAAE,GAAG9F,SAAS;IAClF,MAAM80D,MAAM,GAAG/K,WAAW,CAACtmD,IAAI,IAAI5D,OAAO,CAACk1D,oBAAoB,CAAChL,WAAW,CAACtmD,IAAI,CAAC,CAAC;IAElF,MAAMrB,KAAK,GAAGwsD,0EAAmB,CAAC/uD,OAAO,EAAED,IAAI,EAAEmqD,WAAW,CAAC;IAE7D,MAAMiL,WAAW,GAAGvxD,IAAI,IAAIsmD,WAAW,CAACzlB,SAAS,IAAI,CAAC+qB,aAAa,IAAI,CAACJ,qBAAqB,GACzFiF,+DAAc,CAACzwD,IAAI,EAAEzD,SAAS,EAAE+pD,WAAW,CAACzlB,SAAS,CAAC,GAAGtkC,SAAS;IACtE,MAAMi1D,mBAAmB,GAAGxxD,IAAI,IAAI8rD,cAAc,GAAG2E,+DAAc,CAACzwD,IAAI,EAAEzD,SAAS,EAAEuvD,cAAc,CAAC,GAAGvvD,SAAS;IAEhH,MAAM0rD,KAAK,GAAG3B,WAAW,CAACwB,aAAa;IAEvC,MAAM2J,WAAW,GAAGxJ,KAAK,EAAE1jD,MAAM,IAAI,CAAC;IACtC,MAAMyjD,YAAY,GAAGC,KAAK,EAAE9rC,KAAK,CAAEu1C,CAAC,IAAK,CAACA,CAAC,CAACrC,KAAK,CAAC;IAClD,MAAMlH,YAAY,GAAGF,KAAK,EAAE9rC,KAAK,CAAEu1C,CAAC,IAAK,CAACA,CAAC,CAAChK,KAAK,CAAC;IAElD,MAAMU,SAAS,GAAGJ,YAAY,GAAG5rD,OAAO,CAAC,uBAAuB,EAAEq1D,WAAW,CAAC,GAC1EtJ,YAAY,GAAG/rD,OAAO,CAAC,uBAAuB,EAAEq1D,WAAW,CAAC,GAC1Dr1D,OAAO,CAAC,OAAO,EAAEq1D,WAAW,CAAC;IAEnC,MAAM7iD,WAAW,GAAG03C,WAAW,CAAC13C,WAAW,KACrC,CAACg9C,aAAa,IAAIJ,qBAAqB,KAAKh0C,QAAQ,EAAE/a,IAAI,KAAK,gBAAgB,GAAG+a,QAAQ,CAAC7Y,KAAK,GAAGpC,SAAS,CAAC,KAC7G0rD,KAAK,GAAGG,SAAS,GAAG7rD,SAAS,CAAC;IAEpC,MAAMo1D,mBAAmB,GAAG,CAAC1J,KAAK,IAAI,CAACtnD,OAAO,IAAI,CAAC2lD,WAAW,CAACiF,aAAa;IAC5E,MAAMwE,UAAU,GAAG,CAACrI,KAAK,GAAK,CAACwD,6EAAmB,CAAC5E,WAAW,CAAC,IAAItmD,IAAI,IAAKisD,UAAU,GAAI1vD,SAAS;IAEnG,MAAMomC,gBAAgB,GAAGmtB,YAAY,IACnCj1D,wDAAA;MAAKqF,SAAS,EAAEgI,gEAAc,CAACtI,2EAAM,CAAC2G,MAAM,EAAE3G,2EAAM,CAAC+V,UAAU,CAAE;MAAAzW,QAAA,EAC/DrE,wDAAA,CAACm0B,+DAAgB;QACf/E,iBAAiB,EAAEhqB,cAAc,CAAEI,QAAU;QAC7C0pB,gBAAgB,EAAE9pB,cAAc,CAAES,OAAS;QAC3CipB,cAAc,EAAE1pB,cAAc,CAAEe,KAAO;QACvCrC,KAAK,EAAEtD,IAAI,CAACsD,KAAM;QAClBoI,QAAQ,EAAE5K,IAAI,CAAC,qBAAqB,EAAE;UAAEyC,MAAM,EAAEvD,IAAI,CAACuD;QAAO,CAAC,CAAE;QAC/DxB,WAAW,EAAEkpD,WAAW,CAAC9nD;MAAO,CACjC;IAAC,CACC,CACN;IAED,MAAM6xD,gBAAgB,GAAG/E,uEAAgB,CAAC9sD,MAAM,CAAC,GAAGoB,2EAAM,CAAC0wD,QAAQ,GAAG1wD,2EAAM,CAAC2wD,QAAQ;IAErF,MAAMv0B,aAAa,GACjB/gC,yDAAA;MAAKiF,SAAS,EAAEN,2EAAM,CAAC2G,MAAO;MAAArH,QAAA,GAC3B+oD,KAAK,IACJptD,wDAAA,CAACksD,wDAAc;QACb7mD,SAAS,EAAEgI,gEAAc,CAACtI,2EAAM,CAACgyD,YAAY,EAAE,2BAA2B,CAAE;QAC5E3J,KAAK,EAAEA,KAAM;QACb7oD,OAAO,EAAE6xD;MAAgB,CAC1B,CACF,EACA,CAAChJ,KAAK,IAAItnD,OAAO,IAChB9F,wDAAA,CAAC2E,wEAAuB;QAEtBmB,OAAO,EAAEA,OAAQ;QACjBsS,IAAI,EAAEb,qBAAsB;QAC5Bc,MAAM;MAAA,GAHDozC,WAAW,CAACjkD,EAIlB,CACF,EACAsvD,mBAAmB,IAClB92D,wDAAA,CAAC4E,uDAAM;QACLS,SAAS,EAAEN,2EAAM,CAACuB,MAAO;QACzBnB,IAAI,EAAE+vD,UAAW;QACjBnD,QAAQ,EAAElF,KAAM;QAChB3mD,IAAI,EAAC,OAAO;QACZkgB,WAAW,EAAEN;MAAsB,CACpC,CACF,EACA,CAAChgB,OAAO,IAAI,CAAC2lD,WAAW,CAACiF,aAAa,IACrC1wD,wDAAA,CAAC6d,oEAAmB;QAClBxY,SAAS,EAAEgI,gEAAc,CAACtI,2EAAM,CAACkuD,eAAe,CAAE;QAClDz6C,KAAK,EAAC,MAAM;QACZ+N,kBAAkB,EAAER,sBAAuB;QAC3CO,WAAW,EAAE9H;MAA6B,CAC3C,CACF,EACAha,OAAO,CAACV,KAAK,CAAC,IAAI9D,wDAAA;QAAIqF,SAAS,EAAEN,2EAAM,CAACjB,KAAM;QAAAO,QAAA,EAAEP;MAAK,CAAK,CAAC,EAC5D9D,wDAAA;QAAGqF,SAAS,EAAEN,2EAAM,CAACgP,WAAY;QAAA1P,QAAA,EAAE0P;MAAW,CAAI,CAAC,EACnD3T,yDAAA;QAAGiF,SAAS,EAAEN,2EAAM,CAACpB,MAAO;QAAAU,QAAA,GAC1BrE,wDAAA;UACEqF,SAAS,EAAEgI,gEAAc,CAACtI,2EAAM,CAACpB,MAAM,EAAE6xD,gBAAgB,CAAE;UAAAnxD,QAAA,EAE1DwvB,sFAA4B,CAACvyB,IAAI,EAAEqC,MAAM;QAAC,CACvC,CAAC,EACNA,MAAM,CAACD,QAAQ,KAAKnE,wDAAmB,IAAIS,wDAAA,CAACg0B,+DAAQ;UAACpyB,IAAI,EAAC,MAAM;UAACsE,IAAI,EAAC;QAAQ,CAAE,CAAC,EACjFvC,MAAM,CAACD,QAAQ,KAAK,KAAK,IAAI1D,wDAAA,CAAC6E,2DAAI;UAACuB,IAAI,EAAC,SAAS;UAACf,SAAS,EAAEmwD;QAAiB,CAAE,CAAC,EACjF/J,WAAW,CAACC,QAAQ,IACnB1rD,wDAAA;UAAGqF,SAAS,EAAEN,2EAAM,CAACiyD,QAAS;UAAA3yD,QAAA,EAAE/C,IAAI,CAAC,UAAU;QAAC,CAAI,CACrD;MAAA,CACA,CAAC,EACHkD,OAAO,CAACinD,WAAW,CAAC8E,YAAY,IAAI9E,WAAW,CAACqF,gBAAgB,IAAImF,qBAAqB,CAAC,IACzFj2D,wDAAA;QAAGqF,SAAS,EAAEN,2EAAM,CAACgP,WAAY;QAAA1P,QAAA,EAC9B/C,IAAI,CACH,mCAAmC,EACnC;UAAEuX,OAAO,EAAE+pB,gEAAa,CAACqzB,qBAAqB,GAAI,EAAE;QAAE,CAAC,EACvD;UACE3uD,SAAS,EAAE,IAAI;UACf2M,YAAY,EAAE;QAChB,CACF;MAAC,CACA,CACJ;IAAA,CACE,CACN;IAED,MAAM4e,SAAoB,GAAG,EAAE;IAE/B,IAAI44B,WAAW,IAAIqF,gBAAgB,IAAI,CAACrF,WAAW,CAAC8E,YAAY,IAAI,CAACC,YAAY,EAAE;MACjF39B,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,sCAAsC,CAAC,EAC/CA,OAAO,CAAC,wCAAwC,CAAC,CAClD,CAAC;IACJ;IAEA,IAAIwvD,aAAa,EAAE;MACjBl+B,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,gBAAgB,CAAC,EACzBA,OAAO,CAAC,uBAAuB,CAAC,CACjC,CAAC;IACJ;IAEA,IAAIovD,qBAAqB,EAAE;MACzB99B,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,gBAAgB,CAAC,EACzBD,IAAI,CAAC,mCAAmC,CAAC,CAC1C,CAAC;IACJ;IAEA,IAAIkvD,YAAY,EAAE;MAChB39B,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,gBAAgB,CAAC,EACzBkvD,uEAAgB,CAAChF,WAAW,CAAC9nD,MAAM,CAAC,GAChCrC,IAAI,CAAC,yBAAyB,CAAC,GAC/BA,IAAI,CAAC,6BAA6B,CAAC,CACxC,CAAC;IACJ;IAEA,IAAI21D,SAAS;IACb,IAAIlG,aAAa,EAAE;MACjBkG,SAAS,GAAG11D,OAAO,CAAC,4BAA4B,CAAC;IACnD,CAAC,MAAM,IAAIkvD,uEAAgB,CAAC9sD,MAAM,CAAC,IAAI8nD,WAAW,CAACyF,QAAQ,EAAE;MAC3D+F,SAAS,GAAG11D,OAAO,CAAC,sBAAsB,CAAC;IAC7C,CAAC,MAAM,IAAIkqD,WAAW,CAACqF,gBAAgB,IAAI,CAACrF,WAAW,CAAC8E,YAAY,IAAI,CAACC,YAAY,EAAE;MACrFyG,SAAS,GAAG11D,OAAO,CAAC,wCAAwC,CAAC;IAC/D,CAAC,MAAM,IAAIjB,MAAM,EAAE;MACjB22D,SAAS,GAAG11D,OAAO,CAAC,uBAAuB,CAAC;IAC9C,CAAC,MAAM;MACL01D,SAAS,GAAG11D,OAAO,CAAC,uBAAuB,CAAC;IAC9C;IAEA,IAAI,CAACkqD,WAAW,CAACiF,aAAa,IAAI,CAACC,qBAAqB,IAAI,CAAClF,WAAW,CAACoF,oBAAoB,EAAE;MAC7Fh+B,SAAS,CAACvN,IAAI,CAAC,CACb2xC,SAAS,EACT32D,MAAM,GAAG;QAAEoQ,MAAM,EAAEpQ;MAAO,CAAC,GAAGk2D,MAAM,IAAI,EAAE,CAC3C,CAAC;IACJ;IAEA,IAAI/K,WAAW,CAACqF,gBAAgB,IAAIrF,WAAW,CAAC8E,YAAY,EAAE;MAC5D19B,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,6BAA6B,CAAC,EACnCoM,6EAAiB,CAACpM,IAAI,EACpBmqD,WAAW,CAAC9nD,MAAM,CAACA,MAAM,IAAI,CAAC,GAAG,GAAG8nD,WAAW,CAACqF,gBAAgB,IAAI,GAAG,CAAC,EACxE;QAAEz8C,MAAM,EAAE,KAAK;QAAEhP,SAAS,EAAEN,2EAAM,CAAC+xB,QAAQ;QAAE/D,kBAAkB,EAAEhuB,2EAAM,CAACmyD;MAAW,CAAC,CAAC,CACxF,CAAC;IACJ;IAEA,IAAIR,WAAW,EAAE;MACf7jC,SAAS,CAACvN,IAAI,CAAC,CAAC/jB,OAAO,CAAC,iCAAiC,CAAC,EAAEvB,wDAAA,CAAC8d,yDAAQ;QAAC8F,GAAG,EAAE8yC,WAAY;QAAC1zD,IAAI,EAAE0zD;MAAY,CAAE,CAAC,CAAC,CAAC;IACjH;IAEA,IAAIC,mBAAmB,IAAIlL,WAAW,CAAC9nD,MAAM,CAACD,QAAQ,KAAKnE,wDAAmB,EAAE;MAC9EszB,SAAS,CAACvN,IAAI,CAAC,CAAC/jB,OAAO,CAAC,aAAa,CAAC,EAAEvB,wDAAA,CAAC8d,yDAAQ;QAAC8F,GAAG,EAAE+yC,mBAAoB;QAAC3zD,IAAI,EAAEzB,OAAO,CAAC,UAAU;MAAE,CAAE,CAAC,CAAC,CAAC;MAC3GsxB,SAAS,CAACvN,IAAI,CAAC,CAAC/jB,OAAO,CAAC,MAAM,CAAC,EAAEA,OAAO,CAAC,OAAO,EAAEkqD,WAAW,CAAC9nD,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;IAC9E;IAEA,IAAI8nD,WAAW,CAACjkD,EAAE,EAAE;MAClBqrB,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,sBAAsB,CAAC,EAE7BnB,yDAAA,CAAAF,yDAAA;QAAAmE,QAAA,GACErE,wDAAA;UACEqF,SAAS,EAAEN,2EAAM,CAACoyD,GAAI;UACtB5yD,OAAO,EAAEA,CAAA,KAAM;YACb/E,oEAAmB,CAACisD,WAAW,CAACjkD,EAAG,CAAC;YACpC5G,gBAAgB,CAAC;cACfkC,OAAO,EAAEvB,OAAO,CAAC,0BAA0B;YAC7C,CAAC,CAAC;UACJ,CAAE;UAAA8C,QAAA,EAEDonD,WAAW,CAACjkD;QAAE,CACZ,CAAC,EACNxH,wDAAA,CAAC6E,2DAAI;UAACQ,SAAS,EAAEN,2EAAM,CAACyjC,QAAS;UAACpiC,IAAI,EAAC;QAAM,CAAE,CAAC;MAAA,CAChD,CAAC,CAEN,CAAC;IACJ;IAEAysB,SAAS,CAACvN,IAAI,CAAC,CACb/jB,OAAO,CAAC,wBAAwB,CAAC,EACjCiF,8EAAsB,CAACilD,WAAW,CAACpoD,IAAI,GAAG,IAAI,EAAE9B,OAAO,CAAC4F,IAAI,EAAE,IAAI,CAAC,CACpE,CAAC;IAEF,IAAIskD,WAAW,CAACoF,oBAAoB,IAAIrwD,IAAI,EAAEoB,IAAI,KAAK,UAAU,IAAIpB,IAAI,CAACsU,iBAAiB,EAAE;MAC3F+d,SAAS,CAACvN,IAAI,CAAC,CACbhkB,IAAI,CAAC,sBAAsB,CAAC,EAC5BA,IAAI,CAAC,2BAA2B,EAAE;QAChC0T,KAAK,EAAExU,IAAI,CAACoU,mBAAmB,IAAI,CAAC;QACpC4sB,KAAK,EAAEhhC,IAAI,CAACsU;MACd,CAAC,EAAE;QACDM,WAAW,EAAE5U,IAAI,CAACoU,mBAAmB,IAAI;MAC3C,CAAC,CAAC,CACH,CAAC;IACJ;IAEA,MAAMqe,UAAU,GAAG1xB,OAAO,CAAC,2BAA2B,CAAC;IACvD,MAAM61D,eAAe,GAAGnkC,UAAU,CAACw2B,KAAK,CAAC,QAAQ,CAAC;IAElD,MAAMt9C,MAAM,GACV/L,yDAAA;MAAMiF,SAAS,EAAEN,2EAAM,CAACoH,MAAO;MAAA9H,QAAA,GAC5B+yD,eAAe,CAAC,CAAC,CAAC,EACnBp3D,wDAAA,CAAC8d,yDAAQ;QAAC8F,GAAG,EAAEriB,OAAO,CAAC,cAAc,CAAE;QAACyB,IAAI,EAAEzB,OAAO,CAAC,wCAAwC;MAAE,CAAE,CAAC,EAClG61D,eAAe,CAAC,CAAC,CAAC;IAAA,CACf,CACP;IAED,OAAO;MACL1rD,MAAM,EAAEupD,YAAY,GAAGntB,gBAAgB,GAAG3G,aAAa;MACvDtO,SAAS;MACT1mB;IACF,CAAC;EACH,CAAC,EAAE,CAACs/C,WAAW,EAAElqD,OAAO,EAAED,IAAI,EAAE6D,IAAI,EAAEoS,qBAAqB,EAAEy+C,UAAU,EACrEC,qBAAqB,EAAElwC,sBAAsB,CAAC,CAAC;EAEjD,MAAMutC,aAAa,GAAGtY,+DAAW,CAAC8X,aAAa,CAAC;EAChD,MAAMS,kBAAkB,GAAGD,aAAa,IAAIR,aAAa;EAEzD,OACE9yD,wDAAA,CAAC2yB,+DAAc;IACbvqB,MAAM,EAAE5D,OAAO,CAACinD,WAAW,CAAE;IAC7BpmD,SAAS,EAAEN,2EAAM,CAACuG,KAAM;IACxBoB,WAAW,EAAE++C,WAAW,EAAE9uC,QAAQ,EAAE/a,IAAI,KAAK,gBAAiB;IAC9D8J,MAAM,EAAE6nD,kBAAkB,EAAE7nD,MAAO;IACnCmnB,SAAS,EAAE0gC,kBAAkB,EAAE1gC,SAAU;IACzC1mB,MAAM,EAAEonD,kBAAkB,EAAEpnD,MAAO;IACnCkrD,UAAU,EAAE91D,OAAO,CAAC,IAAI,CAAE;IAC1BqI,OAAO,EAAEusD;EAA2B,CACrC,CAAC;AAEN,CAAC;AAED,iEAAej3D,sDAAI,CAACyI,mDAAU,CAC5B,CAACgD,MAAM,EAAE;EAAEW;AAAM,CAAC,KAA2B;EAC3C,MAAMhL,MAAM,GAAGgL,KAAK,EAAEmgD,WAAW,EAAEtmD,IAAI,EAAEvD,IAAI,KAAK,MAAM,IAAI0J,KAAK,CAACmgD,WAAW,CAACtmD,IAAI,CAACqC,EAAE;EACrF,MAAMrC,IAAI,GAAG7E,MAAM,GAAGyM,6DAAU,CAACpC,MAAM,EAAErK,MAAM,CAAC,GAAGoB,SAAS;EAC5D,MAAMu0D,qBAAqB,GAAGtrD,MAAM,CAACqM,SAAS,CAACsgD,kCAAkC;EAEjF,MAAMjG,cAAc,GAAG/lD,KAAK,EAAEmgD,WAAW,CAAC9nD,MAAM;EAChD,MAAM4zD,gBAAgB,GAAGjsD,KAAK,EAAEmgD,WAAW,CAAC0F,MAAM,GAC7CE,cAAc,EAAE3tD,QAAQ,KAAKnE,wDAAmB,GAAGs2D,4EAAyB,CAAClrD,MAAM,EAAE0mD,cAAc,EAAE1tD,MAAM,CAAC,GAC3GmyD,0EAAuB,CAACnrD,MAAM,EAAE0mD,cAAc,EAAE1tD,MAAM,CAAC,GAAIjC,SAAS;EAE1E,OAAO;IACLyD,IAAI;IACJoS,qBAAqB,EAAEL,8EAA2B,CAACvM,MAAM,CAAC;IAC1DqrD,UAAU,EAAEuB,gBAAgB;IAC5BtB;EACF,CAAC;AACH,CACF,CAAC,CAACF,qBAAqB,CAAC,CAAC,EAAC;AAE1B,SAASU,oBAAoBA,CAACtxD,IAA6B,EAAE;EAC3D,QAAQA,IAAI,CAACvD,IAAI;IACf,KAAK,UAAU;MACb,OAAO,UAAU;IACnB,KAAK,YAAY;MACf,OAAO,YAAY;IACrB,KAAK,UAAU;MACb,OAAO,UAAU;IACnB,KAAK,YAAY;MACf,OAAO,qBAAqB;IAC9B,KAAK,KAAK;MACR,OAAO,qBAAqB;IAC9B,KAAK,KAAK;MACR,OAAO,iDAAiD;IAC1D;MACE,OAAO,qCAAqC;EAChD;AACF,C","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/gift/GiftMenuItems.tsx","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.tsx","webpack://telegram-t/./src/components/common/helpers/giftOriginalInfo.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.module.scss?fd32","webpack://telegram-t/./src/components/modals/gift/AboutStarGiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModalResaleScreen.tsx","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.module.scss?c5a8","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.tsx","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.module.scss?8276","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.module.scss?c67d","webpack://telegram-t/./src/components/modals/gift/StarGiftPriceDecreaseInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.module.scss?f41d","webpack://telegram-t/./src/components/modals/gift/UniqueGiftManageButtons.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.module.scss?de69","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionAcquiredModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.module.scss?4508","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionBidModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.module.scss?43f4","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionChangeRecipientModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.module.scss?8779","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.module.scss?eeff","webpack://telegram-t/./src/components/modals/gift/auction/GiftAuctionModal.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.module.scss?1055","webpack://telegram-t/./src/components/modals/gift/locked/GiftLockedModal.tsx","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.module.scss?7493","webpack://telegram-t/./src/components/modals/gift/message/GiftDescriptionRemoveModal.tsx","webpack://telegram-t/./src/components/modals/gift/offer/GiftOfferAcceptModal.module.scss?5c52","webpack://telegram-t/./src/components/modals/gift/offer/GiftOfferAcceptModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferConfirmModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.module.scss?3884","webpack://telegram-t/./src/components/modals/gift/value/GiftInfoValueModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/priceConfirm/PriceConfirmModal.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx"],"sourcesContent":["/* eslint-disable @stylistic/max-len */\n\nexport { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftInfoValueModal } from '../components/modals/gift/value/GiftInfoValueModal';\nexport { default as GiftLockedModal } from '../components/modals/gift/locked/GiftLockedModal';\nexport { default as GiftResalePriceComposerModal } from '../components/modals/gift/resale/GiftResalePriceComposerModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftAuctionModal } from '../components/modals/gift/auction/GiftAuctionModal';\nexport { default as GiftAuctionBidModal } from '../components/modals/gift/auction/GiftAuctionBidModal';\nexport { default as GiftAuctionInfoModal } from '../components/modals/gift/auction/GiftAuctionInfoModal';\nexport { default as GiftAuctionAcquiredModal } from '../components/modals/gift/auction/GiftAuctionAcquiredModal';\nexport { default as GiftAuctionChangeRecipientModal } from '../components/modals/gift/auction/GiftAuctionChangeRecipientModal';\nexport { default as StarGiftPriceDecreaseInfoModal } from '../components/modals/gift/StarGiftPriceDecreaseInfoModal';\nexport { default as AboutStarGiftModal } from '../components/modals/gift/AboutStarGiftModal';\nexport { default as GiftStatusInfoModal } from '../components/modals/gift/status/GiftStatusInfoModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/withdraw/GiftWithdrawModal';\nexport { default as GiftTransferModal } from '../components/modals/gift/transfer/GiftTransferModal';\nexport { default as GiftTransferConfirmModal } from '../components/modals/gift/transfer/GiftTransferConfirmModal';\nexport { default as GiftDescriptionRemoveModal } from '../components/modals/gift/message/GiftDescriptionRemoveModal';\nexport { default as GiftOfferAcceptModal } from '../components/modals/gift/offer/GiftOfferAcceptModal';\nexport { default as ChatRefundModal } from '../components/modals/stars/chatRefund/ChatRefundModal';\nexport { default as PriceConfirmModal } from '../components/modals/priceConfirm/PriceConfirmModal';\n","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible, ApiEmojiStatusType, ApiSavedStarGift, ApiStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID, TME_LINK_PREFIX } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport MenuItem from '../../ui/MenuItem';\n\ntype OwnProps = {\n  peerId: string;\n  canManage?: boolean;\n  gift: ApiSavedStarGift | ApiStarGift;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst GiftMenuItems = ({\n  peerId,\n  canManage,\n  gift: typeGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps) => {\n  const {\n    showNotification,\n    openChatWithDraft,\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    toggleSavedGiftPinned,\n    changeGiftVisibility,\n    updateStarGiftPrice,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const starGiftUniqueLink = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return `${TME_LINK_PREFIX}nft/${starGiftUniqueSlug}`;\n  }, [starGiftUniqueSlug]);\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((\n      status,\n    ) => status.type === 'collectible' && status.slug === starGiftUniqueSlug) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currenUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const canTakeOff = isGiftUnique && currenUniqueEmojiStatusSlug === gift.slug;\n  const canWear = userCollectibleStatus && !canTakeOff;\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const hasPinOptions = canManage && savedGift && !savedGift.isUnsaved && isGiftUnique;\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n  });\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    copyTextToClipboard(starGiftUniqueLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleLinkShare = useLastCallback(() => {\n    if (!starGiftUniqueLink) return;\n    openChatWithDraft({ text: { text: starGiftUniqueLink } });\n  });\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnsell = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !userCollectibleStatus) return;\n    openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n  });\n\n  const handleTakeOff = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    }\n  });\n\n  const handleTogglePin = useLastCallback(() => {\n    toggleSavedGiftPinned({ peerId, gift: savedGift! });\n  });\n\n  return (\n    <>\n      {hasPinOptions && (\n        <MenuItem icon={savedGift.isPinned ? 'unpin' : 'pin'} onClick={handleTogglePin}>\n          {lang(savedGift.isPinned ? 'ChatListUnpinFromTop' : 'ChatListPinToTop')}\n        </MenuItem>\n      )}\n      <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n        {lang('CopyLink')}\n      </MenuItem>\n      <MenuItem icon=\"forward\" onClick={handleLinkShare}>\n        {lang('Share')}\n      </MenuItem>\n      {canManage && isGiftUnique && (\n        <MenuItem icon=\"diamond\" onClick={handleTransfer}>\n          {lang('GiftInfoTransfer')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && !giftResalePrice && (\n        <MenuItem icon=\"sell-outline\" onClick={handleSell}>\n          {lang('Sell')}\n        </MenuItem>\n      )}\n      {canManage && isGiftUnique && Boolean(giftResalePrice) && (\n        <MenuItem icon=\"unlist-outline\" onClick={handleUnsell}>\n          {lang('GiftInfoUnlist')}\n        </MenuItem>\n      )}\n      {canManage && savedGift && (\n        <MenuItem icon={savedGift.isUnsaved ? 'eye-outline' : 'eye-crossed-outline'} onClick={handleTriggerVisibility}>\n          {lang(savedGift.isUnsaved ? 'GiftActionShow' : 'GiftActionHide')}\n        </MenuItem>\n      )}\n      {canWear && (\n        <MenuItem icon=\"crown-wear-outline\" onClick={handleWear}>\n          {lang('GiftInfoWear')}\n        </MenuItem>\n      )}\n      {canTakeOff && (\n        <MenuItem icon=\"crown-take-off-outline\" onClick={handleTakeOff}>\n          {lang('GiftInfoTakeOff')}\n        </MenuItem>\n      )}\n    </>\n  );\n};\n\nexport default memo(GiftMenuItems);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftTransferPreview-module__root\",\"giftPreview\":\"GiftTransferPreview-module__giftPreview\",\"backdrop\":\"GiftTransferPreview-module__backdrop\",\"arrow\":\"GiftTransferPreview-module__arrow\"};","import { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternIcon={giftAttributes.pattern?.sticker}\n          ringsCount={1}\n          ovalFactor={1}\n          patternSize={12}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","import type { TeactNode } from '../../../lib/teact/teact';\n\nimport type { ApiPeer, ApiStarGiftAttributeOriginalDetails } from '../../../api/types';\n\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { type LangFn } from '../../../util/localization';\nimport { renderTextWithEntities } from './renderTextWithEntities';\n\nimport Link from '../../ui/Link';\n\ntype GiftOriginalInfoOptions = {\n  originalDetails: ApiStarGiftAttributeOriginalDetails;\n  recipient: ApiPeer;\n  sender?: ApiPeer;\n  onOpenChat: (peerId: string) => void;\n  lang: LangFn;\n};\n\nexport function renderGiftOriginalInfo({\n  originalDetails,\n  recipient,\n  sender,\n  onOpenChat,\n  lang,\n}: GiftOriginalInfoOptions): TeactNode | undefined {\n  const { recipientId, senderId, date, message } = originalDetails;\n\n  const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n  const recipientLink = (\n    <Link onClick={() => onOpenChat(recipientId)} isPrimary>\n      {getPeerTitle(lang, recipient)}\n    </Link>\n  );\n\n  if (!sender || senderId === recipientId) {\n    return message\n      ? lang('GiftInfoPeerOriginalInfoText', {\n        peer: recipientLink,\n        text: renderTextWithEntities(message),\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      })\n      : lang('GiftInfoPeerOriginalInfo', {\n        peer: recipientLink,\n        date: formattedDate,\n      }, {\n        withNodes: true,\n      });\n  }\n\n  const senderLink = (\n    <Link onClick={() => onOpenChat(sender.id)} isPrimary>\n      {getPeerTitle(lang, sender)}\n    </Link>\n  );\n\n  return message\n    ? lang('GiftInfoPeerOriginalInfoTextSender', {\n      peer: recipientLink,\n      sender: senderLink,\n      text: renderTextWithEntities(message),\n      date: formattedDate,\n    }, {\n      withNodes: true,\n    })\n    : lang('GiftInfoPeerOriginalInfoSender', {\n      peer: recipientLink,\n      date: formattedDate,\n      sender: senderLink,\n    }, {\n      withNodes: true,\n    });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsGiftingPickerModal-module__root\",\"transition\":\"StarsGiftingPickerModal-module__transition\",\"main\":\"StarsGiftingPickerModal-module__main\",\"filter\":\"StarsGiftingPickerModal-module__filter\",\"title\":\"StarsGiftingPickerModal-module__title\",\"buttons\":\"StarsGiftingPickerModal-module__buttons\",\"picker\":\"StarsGiftingPickerModal-module__picker\",\"avatars\":\"StarsGiftingPickerModal-module__avatars\",\"center\":\"StarsGiftingPickerModal-module__center\",\"description\":\"StarsGiftingPickerModal-module__description\",\"premiumFeatures\":\"StarsGiftingPickerModal-module__premiumFeatures\",\"options\":\"StarsGiftingPickerModal-module__options\",\"button\":\"StarsGiftingPickerModal-module__button\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"AboutStarGiftModal-module__header\",\"content\":\"AboutStarGiftModal-module__content\",\"videoPreviewWrapper\":\"AboutStarGiftModal-module__videoPreviewWrapper\",\"sparkles\":\"AboutStarGiftModal-module__sparkles\",\"title\":\"AboutStarGiftModal-module__title\",\"subtitle\":\"AboutStarGiftModal-module__subtitle\",\"footer\":\"AboutStarGiftModal-module__footer\",\"understoodIcon\":\"AboutStarGiftModal-module__understoodIcon\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Sparkles from '../../common/Sparkles';\nimport PremiumFeaturePreviewVideo from '../../main/premium/previews/PremiumFeaturePreviewVideo';\nimport Button from '../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../common/TableAboutModal';\n\nimport styles from './AboutStarGiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['aboutStarGiftModal'];\n};\n\nconst AboutStarGiftModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeAboutStarGiftModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeAboutStarGiftModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.videoPreviewWrapper}>\n          <Sparkles preset=\"progress\" className={styles.sparkles} />\n          <PremiumFeaturePreviewVideo\n            videoId={renderingModal?.videoId}\n            videoThumbnail={renderingModal?.videoThumbnail}\n            isActive={isOpen}\n            isDown\n          />\n        </div>\n        <div className={styles.title}>\n          {lang('StarGiftInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('StarGiftInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang, renderingModal, isOpen]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    return [\n      ['diamond', lang('StarGiftInfoUniqueTitle'), lang('StarGiftInfoUniqueSubtitle')],\n      ['auction', lang('StarGiftInfoTradableTitle'), lang('StarGiftInfoTradableSubtitle')],\n      ['crown-wear-outline', lang('StarGiftInfoWearableTitle'), lang('StarGiftInfoWearableSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      contentClassName={styles.content}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop={Boolean(renderingModal?.videoId)}\n      absoluteCloseButtonColor=\"translucent-white\"\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(AboutStarGiftModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftComposer-module__root\",\"header\":\"GiftComposer-module__header\",\"spacer\":\"GiftComposer-module__spacer\",\"title\":\"GiftComposer-module__title\",\"balance-container\":\"GiftComposer-module__balance-container\",\"balanceContainer\":\"GiftComposer-module__balance-container\",\"balance-caption\":\"GiftComposer-module__balance-caption\",\"balanceCaption\":\"GiftComposer-module__balance-caption\",\"star-balance\":\"GiftComposer-module__star-balance\",\"starBalance\":\"GiftComposer-module__star-balance\",\"balance\":\"GiftComposer-module__balance\",\"optionsSection\":\"GiftComposer-module__optionsSection\",\"checkboxTitle\":\"GiftComposer-module__checkboxTitle\",\"actionMessageView\":\"GiftComposer-module__actionMessageView\",\"messageInput\":\"GiftComposer-module__messageInput\",\"limited\":\"GiftComposer-module__limited\",\"footer\":\"GiftComposer-module__footer\",\"switcher\":\"GiftComposer-module__switcher\",\"switcherStarIcon\":\"GiftComposer-module__switcherStarIcon\",\"bottomDescription\":\"GiftComposer-module__bottomDescription\",\"description\":\"GiftComposer-module__description\",\"main-button\":\"GiftComposer-module__main-button\",\"mainButton\":\"GiftComposer-module__main-button\",\"buttonSubtitle\":\"GiftComposer-module__buttonSubtitle\",\"star\":\"GiftComposer-module__star\",\"background\":\"GiftComposer-module__background\",\"customBgImage\":\"GiftComposer-module__customBgImage\",\"customBgColor\":\"GiftComposer-module__customBgColor\",\"withTransition\":\"GiftComposer-module__withTransition\",\"blurred\":\"GiftComposer-module__blurred\",\"withRightColumn\":\"GiftComposer-module__withRightColumn\"};","import type { ChangeEvent } from 'react';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarGiftAuctionState, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCountdown } from '../../../util/dates/dateFormat';\nimport { HOUR } from '../../../util/dates/units';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\nimport TextTimer from '../../ui/TextTimer';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n  giftAuction,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n    openGiftAuctionBidModal, openGiftAuctionInfoModal, openGiftAuctionChangeRecipientModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift && gift.type === 'starGift';\n  const isPremiumGift = 'months' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (isPremiumGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            days: gift.months * 30,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    if (isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName || undefined,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n    return undefined;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars, isPremiumGift]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!giftAuction) return;\n    openGiftAuctionInfoModal({ auctionGiftId: giftAuction.gift.id });\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (giftAuction) {\n      const existingBidPeerId = giftAuction.userState.bidPeerId;\n      if (existingBidPeerId && existingBidPeerId !== peerId) {\n        openGiftAuctionChangeRecipientModal({\n          auctionGiftId: giftAuction.gift.id,\n          oldPeerId: existingBidPeerId,\n          newPeerId: peerId,\n          message: giftMessage || undefined,\n          shouldHideName: shouldHideName || undefined,\n        });\n        return;\n      }\n\n      openGiftAuctionBidModal({\n        auctionGiftId: giftAuction.gift.id,\n        peerId,\n        message: giftMessage || undefined,\n        shouldHideName: shouldHideName || undefined,\n      });\n      return;\n    }\n\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    if (isPremiumGift) {\n      openInvoice({\n        type: 'giftcode',\n        userIds: [peerId],\n        currency: gift.currency,\n        amount: gift.amount,\n        option: gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n    }\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: <Link isPrimary onClick={handleGetMoreStars}>{lang('GetMoreStarsLinkText')}</Link>,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : isPremiumGift ? formatCurrency(lang, gift.amount, gift.currency) : undefined;\n\n    const giftsPerRound = giftAuction?.gift.giftsPerRound;\n    const auctionEndDate = giftAuction?.state.endDate;\n    const auctionTimeLeft = auctionEndDate ? auctionEndDate - getServerTime() : undefined;\n    const shouldUseTextTimer = auctionTimeLeft !== undefined && auctionTimeLeft > 0\n      && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && Boolean(gift.availabilityRemains) && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        {giftAuction && Boolean(giftsPerRound) && (\n          <div className={styles.bottomDescription}>\n            {lang('GiftAuctionDescription', {\n              count: giftsPerRound,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true })}\n          </div>\n        )}\n        <Button\n          className={styles.mainButton}\n          size={auctionTimeLeft ? undefined : 'smaller'}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n          noForcedUpperCase\n        >\n          {giftAuction ? (\n            <div>\n              <div>\n                {lang('GiftAuctionPlaceBid')}\n              </div>\n              {auctionTimeLeft !== undefined && auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={auctionEndDate!} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          ) : lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  if ((!isStarGift && !isPremiumGift) || !localMessage) return;\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : isPremiumGift ? gift.months : undefined}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId, gift }): Complete<StateProps> => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n    const auctionGiftId = 'id' in gift && gift.type === 'starGift' && gift.isAuction ? gift.id : undefined;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n      giftAuction,\n    };\n  },\n)(GiftComposer));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GiftItem-module__container\",\"noClickable\":\"GiftItem-module__noClickable\",\"starGift\":\"GiftItem-module__starGift\",\"monthsDescription\":\"GiftItem-module__monthsDescription\",\"description\":\"GiftItem-module__description\",\"buy\":\"GiftItem-module__buy\",\"transferBadge\":\"GiftItem-module__transferBadge\",\"star\":\"GiftItem-module__star\",\"auction\":\"GiftItem-module__auction\",\"premiumRequired\":\"GiftItem-module__premiumRequired\",\"amount\":\"GiftItem-module__amount\",\"starsPriceBlock\":\"GiftItem-module__starsPriceBlock\",\"starsPriceIcon\":\"GiftItem-module__starsPriceIcon\",\"radialPattern\":\"GiftItem-module__radialPattern\",\"stickerWrapper\":\"GiftItem-module__stickerWrapper\",\"lockIcon\":\"GiftItem-module__lockIcon\"};","import { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} color=\"adaptive\" nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): Complete<StateProps> => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import { memo, useMemo, useRef, useState } from '@teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarGift, ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { selectIsCurrentUserPremium } from '../../../global/selectors';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon, formatTonAsIcon } from '../../../util/localization/format';\n\nimport Icon from '../../common/icons/Icon'; ;\nimport { getGiftAttributes, getStickerFromGift } from '../../common/helpers/gifts';\n\nimport useFlag from '../../../hooks/useFlag.ts';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport StickerView from '../../common/StickerView';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  isResale?: boolean;\n  withTransferBadge?: boolean;\n  hideBadge?: boolean;\n  noClickable?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (gift: ApiStarGift, target: 'original' | 'resell') => void;\n};\n\ntype StateProps = {\n  isCurrentUserPremium?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({\n  gift, isResale, isCurrentUserPremium, withTransferBadge, hideBadge, noClickable, observeIntersection, onClick,\n}: OwnProps & StateProps) {\n  const {\n    openGiftInfoModal, openPremiumModal, showNotification, checkCanSendGift, openGiftAuctionModal,\n  } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const stickerRef = useRef<HTMLDivElement>();\n\n  function getPriceAmount(amounts?: ApiTypeCurrencyAmount[]) {\n    if (!amounts) return { amount: 0, currency: STARS_CURRENCY_CODE };\n\n    if (gift.type === 'starGiftUnique' && gift.resaleTonOnly) {\n      const tonAmount = amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n      if (tonAmount) return tonAmount;\n    }\n\n    const starsAmount = amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n    return starsAmount;\n  }\n\n  const lang = useLang();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  const sticker = getStickerFromGift(gift);\n  const isGiftUnique = gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n  const regularGift = !isGiftUnique ? gift : undefined;\n\n  const priceInfo = !isGiftUnique\n    ? { amount: regularGift?.stars || 0, currency: STARS_CURRENCY_CODE }\n    : getPriceAmount(uniqueGift?.resellPrice);\n  const priceCurrency = priceInfo?.currency || STARS_CURRENCY_CODE;\n  const resellMinStars = regularGift?.resellMinStars;\n  const formattedPrice = !isGiftUnique && isResale && resellMinStars\n    ? lang.number(resellMinStars) + '+' : priceInfo?.amount || 0;\n  const isLimited = !isGiftUnique && Boolean(regularGift?.isLimited);\n  const isSoldOut = !isGiftUnique && Boolean(regularGift?.isSoldOut);\n  const isAuction = !isGiftUnique && !isResale && Boolean(regularGift?.isAuction);\n  const isPremiumRequired = Boolean(gift?.requirePremium);\n  const isUserLimitReached = Boolean(regularGift?.limitedPerUser && !regularGift?.perUserRemains);\n  const perUserTotal = regularGift?.perUserTotal;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isAuction) {\n      openGiftAuctionModal({ gift });\n      return;\n    }\n\n    if (isSoldOut && !isResale) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    if (isUserLimitReached) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftsLimit2',\n          variables: {\n            count: perUserTotal,\n          },\n          options: {\n            pluralValue: perUserTotal!,\n            withMarkdown: true,\n            withNodes: true,\n          },\n        },\n      });\n      return;\n    }\n\n    if (isPremiumRequired && !isCurrentUserPremium) {\n      openPremiumModal({\n        gift,\n      });\n      return;\n    }\n\n    if (isLocked) {\n      checkCanSendGift({\n        gift,\n        onSuccess: () => onClick?.(gift, isResale ? 'resell' : 'original'),\n      });\n      return;\n    }\n\n    onClick?.(gift, isResale ? 'resell' : 'original');\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    const { backdrop, pattern } = getGiftAttributes(gift) || {};\n\n    if (!backdrop || !pattern) {\n      return undefined;\n    }\n\n    const backdropColors = [backdrop.centerColor, backdrop.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={pattern.sticker}\n        ringsCount={1}\n        ovalFactor={1}\n      />\n    );\n  }, [gift]);\n\n  const giftNumber = isGiftUnique ? gift.number : 0;\n  const isLocked = Boolean(gift.type === 'starGift' && gift.lockedUntilDate);\n\n  const giftRibbon = useMemo(() => {\n    if (isGiftUnique) {\n      const { backdrop } = getGiftAttributes(gift) || {};\n      if (!backdrop) {\n        return undefined;\n      }\n      return (\n        <GiftRibbon\n          color={[backdrop.centerColor, backdrop.edgeColor]}\n          text={\n            lang('GiftSavedNumber', { number: giftNumber })\n          }\n        />\n      );\n    }\n    if (isResale) {\n      return <GiftRibbon color=\"green\" text={lang('GiftRibbonResale')} />;\n    }\n    if (isSoldOut) {\n      return <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />;\n    }\n    if (isAuction) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonAuction')} />;\n    }\n    if (isPremiumRequired) {\n      return <GiftRibbon color=\"orange\" text={lang('GiftRibbonPremium')} />;\n    }\n    if (isLimited) {\n      return <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />;\n    }\n    return undefined;\n  }, [isGiftUnique, isResale, gift, isSoldOut,\n    isLimited, lang, giftNumber, isPremiumRequired, isAuction]);\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    const visible = entry.isIntersecting;\n    setIsVisible(visible);\n  });\n\n  const badgeContent = useMemo(() => {\n    if (withTransferBadge) {\n      return lang('GiftTransferTitle');\n    }\n\n    if (isAuction) {\n      return lang('GiftAuctionJoin');\n    }\n\n    if (priceCurrency === TON_CURRENCY_CODE) {\n      return formatTonAsIcon(lang, formattedPrice || 0, {\n        shouldConvertFromNanos: true,\n        className: styles.star,\n      });\n    }\n\n    return formatStarsAsIcon(lang, formattedPrice || 0, {\n      asFont: true,\n      className: styles.star,\n    });\n  }, [withTransferBadge, priceCurrency, formattedPrice, isAuction, lang]);\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        'interactive-gift',\n        styles.container,\n        styles.starGift,\n        'starGiftItem',\n        isPremiumRequired && styles.premiumRequired,\n        isAuction && styles.auction,\n        noClickable && styles.noClickable,\n      )}\n      tabIndex={noClickable ? undefined : 0}\n      role={noClickable ? undefined : 'button'}\n      onClick={noClickable ? undefined : handleGiftClick}\n      onMouseEnter={!IS_TOUCH_ENV && !noClickable ? markHover : undefined}\n      onMouseLeave={!IS_TOUCH_ENV && !noClickable ? unmarkHover : undefined}\n    >\n      {radialPatternBackdrop}\n\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${GIFT_STICKER_SIZE}px; height: ${GIFT_STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            observeIntersectionForPlaying={observeIntersection}\n            observeIntersectionForLoading={observeIntersection}\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={GIFT_STICKER_SIZE}\n            shouldLoop={isHover}\n            shouldPreloadPreview\n          />\n        )}\n\n      </div>\n      {!hideBadge && (\n        <Button\n          className={buildClassName(\n            styles.buy,\n            withTransferBadge && styles.transferBadge,\n          )}\n          nonInteractive\n          size=\"tiny\"\n          color={isGiftUnique ? 'bluredStarsBadge' : 'stars'}\n          withSparkleEffect={isVisible && !withTransferBadge}\n          pill\n          fluid\n        >\n          {badgeContent}\n        </Button>\n      )}\n      {giftRibbon}\n      {isLocked && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): Complete<StateProps> => {\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      isCurrentUserPremium,\n    };\n  })(GiftItemStar),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftModal-module__root\",\"transition\":\"GiftModal-module__transition\",\"content\":\"GiftModal-module__content\",\"resaleScreenRoot\":\"GiftModal-module__resaleScreenRoot\",\"main\":\"GiftModal-module__main\",\"giftSection\":\"GiftModal-module__giftSection\",\"section\":\"GiftModal-module__section\",\"resaleStarGiftsContainer\":\"GiftModal-module__resaleStarGiftsContainer\",\"starGiftsContainer\":\"GiftModal-module__starGiftsContainer\",\"premiumGiftsGallery\":\"GiftModal-module__premiumGiftsGallery\",\"header\":\"GiftModal-module__header\",\"noBorder\":\"GiftModal-module__noBorder\",\"resaleHeader\":\"GiftModal-module__resaleHeader\",\"resaleHeaderContentContainer\":\"GiftModal-module__resaleHeaderContentContainer\",\"headerSlide\":\"GiftModal-module__headerSlide\",\"headerText\":\"GiftModal-module__headerText\",\"hiddenHeader\":\"GiftModal-module__hiddenHeader\",\"resaleHeaderText\":\"GiftModal-module__resaleHeaderText\",\"commonHeaderText\":\"GiftModal-module__commonHeaderText\",\"resaleHeaderDescription\":\"GiftModal-module__resaleHeaderDescription\",\"closeButton\":\"GiftModal-module__closeButton\",\"balance\":\"GiftModal-module__balance\",\"avatars\":\"GiftModal-module__avatars\",\"avatar\":\"GiftModal-module__avatar\",\"logoBackground\":\"GiftModal-module__logoBackground\",\"center\":\"GiftModal-module__center\",\"description\":\"GiftModal-module__description\",\"starGiftsDescription\":\"GiftModal-module__starGiftsDescription\",\"boostIcon\":\"GiftModal-module__boostIcon\",\"optionBottom\":\"GiftModal-module__optionBottom\",\"secondaryInfo\":\"GiftModal-module__secondaryInfo\",\"footer\":\"GiftModal-module__footer\",\"starGiftsTransition\":\"GiftModal-module__starGiftsTransition\",\"notFoundGiftsRoot\":\"GiftModal-module__notFoundGiftsRoot\",\"notFoundGiftsDescription\":\"GiftModal-module__notFoundGiftsDescription\",\"notFoundGiftsLink\":\"GiftModal-module__notFoundGiftsLink\"};","import type { FC } from '@teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '@teact';\nimport type React from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiSavedStarGift,\n  ApiStarGift,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectTabState } from '../../../global/selectors';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../hooks/useFlag';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport InteractiveSparkles from '../../common/InteractiveSparkles';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftComposer from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport GiftModalResaleScreen from './GiftModalResaleScreen';\nimport GiftResaleFilters from './GiftResaleFilters';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  myUniqueGiftsById?: Record<string, ApiSavedStarGift>;\n  myUniqueGiftIds?: string[];\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  disallowedGifts?: ApiDisallowedGifts;\n  resaleGiftsCount?: number;\n  areResaleGiftsLoading?: boolean;\n  selectedResaleGift?: ApiStarGift;\n  tabId: number;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\nconst CATEGORY_LIST_STICKY_TOP = 3.5 * REM;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  myUniqueGiftsById,\n  myUniqueGiftIds,\n  starBalance,\n  peer,\n  currentUserId,\n  disallowedGifts,\n  resaleGiftsCount,\n  areResaleGiftsLoading,\n  selectedResaleGift,\n  tabId,\n}) => {\n  const {\n    closeGiftModal,\n    openGiftInfoModal,\n    resetResaleGifts,\n    loadResaleGifts,\n    openGiftInMarket,\n    closeResaleGiftsMarket,\n    loadMyUniqueGifts,\n    openGiftTransferConfirmModal,\n    setGiftModalSelectedGift,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n  const transitionRef = useRef<HTMLDivElement>();\n  const giftHeaderRef = useRef<HTMLHeadingElement>();\n  const categoryListRef = useRef<HTMLDivElement>();\n\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingPeer = useCurrentOrPrev(peer);\n\n  const user = renderingPeer && isApiPeerUser(renderingPeer) ? renderingPeer : undefined;\n  const chat = renderingPeer && isApiPeerChat(renderingPeer) ? renderingPeer : undefined;\n  const isSelf = Boolean(currentUserId && renderingModal?.forPeerId === currentUserId);\n\n  const selectedGift = renderingModal?.selectedGift;\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n  const [isCategoryListPinned, pinCategoryList, unpinCategoryList] = useFlag(false);\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n  const areUniqueStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUniqueStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== STARS_CURRENCY_CODE);\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n          && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isResaleScreen = Boolean(selectedResaleGift) && !selectedGift;\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isResaleScreen || isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (selectedResaleGift) {\n      const giftId = 'regularGiftId' in selectedResaleGift\n        ? selectedResaleGift.regularGiftId\n        : selectedResaleGift.id;\n      loadResaleGifts({ giftId });\n    }\n  }, [selectedResaleGift]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setGiftModalSelectedGift({ gift: undefined });\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    setIsGiftScreenHeaderForStarGifts(Boolean(selectedGift && 'id' in selectedGift));\n  }, [selectedGift]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n\n      if (categoryListRef.current && scrollerRef.current) {\n        const { top: listTop } = categoryListRef.current.getBoundingClientRect();\n        const { top: scrollerTop } = scrollerRef.current.getBoundingClientRect();\n        const isPinned = listTop - scrollerTop <= CATEGORY_LIST_STICKY_TOP;\n        if (isPinned) {\n          pinCategoryList();\n        } else {\n          unpinCategoryList();\n        }\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = useMemo(() => {\n    if (chat) {\n      return lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (isSelf) {\n      return lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      });\n    }\n\n    if (selectedCategory === 'collectible') {\n      return lang('StarGiftDescriptionCollectibles');\n    }\n\n    return lang('StarGiftDescription', {\n      user: getUserFullName(user)!,\n    }, { withNodes: true, withMarkdown: true });\n  }, [chat, isSelf, selectedCategory, user, lang]);\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption, target?: 'resell' | 'original') => {\n    if (target === 'resell') {\n      if (!('id' in gift)) {\n        return;\n      }\n      if (isResaleScreen) {\n        openGiftInfoModal({ gift, recipientId: renderingModal?.forPeerId });\n        return;\n      }\n      openGiftInMarket({ gift, tabId });\n      return;\n    }\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const handleMyGiftClick = useLastCallback((gift: ApiStarGift) => {\n    if (gift.type === 'starGift' || !myUniqueGiftsById || !peer?.id) return;\n    const savedGift = myUniqueGiftsById[gift.id];\n\n    openGiftTransferConfirmModal({\n      gift: savedGift,\n      recipientId: peer.id,\n    });\n  });\n\n  const handleLoadMore = useLastCallback(() => {\n    if (selectedCategory === 'myUnique') {\n      loadMyUniqueGifts();\n    }\n  });\n\n  function renderStarGifts() {\n    if (selectedCategory === 'myUnique') {\n      return (\n        <InfiniteScroll\n          className={styles.starGiftsContainer}\n          items={myUniqueGiftIds}\n          onLoadMore={handleLoadMore}\n          scrollContainerClosest={`.${styles.main}`}\n          itemSelector=\".starGiftItem\"\n        >\n          {myUniqueGiftsById && myUniqueGiftIds?.map((giftId) => {\n            const savedGift = myUniqueGiftsById[giftId];\n            if (!savedGift) return undefined;\n\n            return (\n              <GiftItemStar\n                key={giftId}\n                gift={savedGift.gift}\n                observeIntersection={observeIntersection}\n                onClick={handleMyGiftClick}\n                withTransferBadge\n              />\n            );\n          })}\n        </InfiniteScroll>\n      );\n    }\n\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, availabilityResale } = gift;\n\n      if (areLimitedStarGiftsDisallowed && isLimited) {\n        return !areUniqueStarGiftsDisallowed ? availabilityResale : false;\n      }\n\n      if (areUnlimitedStarGiftsDisallowed && !isLimited) return false;\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.flatMap((giftId) => {\n          const gift = starGiftsById[giftId];\n          const shouldShowResale = Boolean(gift.availabilityResale) && !areUniqueStarGiftsDisallowed;\n          const shouldDuplicateAsResale = shouldShowResale && !gift.isSoldOut && !areLimitedStarGiftsDisallowed;\n\n          const elements = [\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              isResale={shouldShowResale && !shouldDuplicateAsResale}\n              onClick={handleGiftClick}\n            />,\n          ];\n\n          if (shouldDuplicateAsResale) {\n            elements.push(\n              <GiftItemStar\n                key={`resale_${giftId}`}\n                isResale\n                gift={gift}\n                observeIntersection={observeIntersection}\n                onClick={handleGiftClick}\n              />,\n            );\n          }\n\n          return elements;\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseModal = useLastCallback(() => {\n    setGiftModalSelectedGift({ gift: undefined });\n    resetResaleGifts();\n    closeGiftModal();\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isResaleScreen) {\n      closeResaleGiftsMarket({ tabId });\n      return;\n    }\n    if (isGiftScreen) {\n      setGiftModalSelectedGift({ gift: undefined });\n      return;\n    }\n    handleCloseModal();\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            className={styles.avatar}\n            size={AVATAR_SIZE}\n            peer={renderingPeer}\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <InteractiveSparkles\n            className={styles.logoBackground}\n            color=\"gold\"\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n            onRequestAnimation={handleRequestAnimation}\n          />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              ref={categoryListRef}\n              areUniqueStarGiftsDisallowed={areUniqueStarGiftsDisallowed}\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              isSelf={isSelf}\n              hasMyUnique={Boolean(myUniqueGiftIds?.length)}\n              isPinned={isCategoryListPinned}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen || isResaleScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  function renderHeader() {\n    if (!shouldShowHeader) return undefined;\n    if (isResaleScreen) {\n      const isFirstLoading = areResaleGiftsLoading && !resaleGiftsCount;\n      return (\n        <div className={styles.resaleHeaderContentContainer}>\n          <h2 className={styles.resaleHeaderText}>\n            {selectedResaleGift.title}\n          </h2>\n          {isFirstLoading\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('Loading')}\n              </div>\n            )}\n          {!isFirstLoading && resaleGiftsCount !== undefined\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('HeaderDescriptionResaleGifts', {\n                  count: resaleGiftsCount,\n                }, { withNodes: true, withMarkdown: true, pluralValue: resaleGiftsCount })}\n              </div>\n            )}\n          <GiftResaleFilters dialogRef={dialogRef} />\n        </div>\n      );\n    }\n    return (\n      <h2 className={styles.commonHeaderText}>\n        {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={handleCloseModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"tiny\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} withAddButton />\n      <div className={buildClassName(\n        styles.header,\n        isResaleScreen && styles.resaleHeader,\n        !shouldShowHeader && styles.hiddenHeader,\n        isCategoryListPinned && styles.noBorder)}\n      >\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={!shouldShowHeader ? 0 : isResaleScreen ? 1 : isHeaderForStarGifts ? 2 : 3}\n          slideClassName={styles.headerSlide}\n        >\n          {renderHeader()}\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : isResaleScreen ? 2 : 0}\n      >\n        {!isGiftScreen && !isResaleScreen && renderMainScreen()}\n        {isResaleScreen && selectedResaleGift\n          && (\n            <GiftModalResaleScreen\n              onGiftClick={handleGiftClick}\n            />\n          )}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftComposer\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  const { resaleGifts } = selectTabState(global);\n  const resaleGiftsCount = resaleGifts.count;\n  const areResaleGiftsLoading = resaleGifts.isLoading !== false;\n  const selectedResaleGift = modal?.selectedResaleGift;\n\n  return {\n    boostPerSentGift: global.appConfig.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    myUniqueGiftsById: global.myUniqueGifts?.byId,\n    myUniqueGiftIds: global.myUniqueGifts?.ids,\n    starBalance: stars?.balance,\n    peer,\n    currentUserId,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n    resaleGiftsCount,\n    areResaleGiftsLoading,\n    selectedResaleGift,\n    tabId: selectTabState(global).id,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return 0;\n  if (category === 'myUnique') return 1;\n  return 2;\n}\n","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useMemo,\n  useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { RESALE_GIFTS_LIMIT } from '../../../limits';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport Transition from '../../ui/Transition';\nimport GiftItemStar from './GiftItemStar';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  onGiftClick: (gift: ApiStarGift) => void;\n};\n\ntype StateProps = {\n  gift?: ApiStarGift;\n  resellGifts?: ApiStarGift[];\n  filter: ResaleGiftsFilterOptions;\n  areGiftsAllLoaded?: boolean;\n  areGiftsLoading?: boolean;\n  updateIteration: number;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst GiftModalResaleScreen: FC<OwnProps & StateProps> = ({\n  resellGifts,\n  gift,\n  filter,\n  areGiftsAllLoaded,\n  areGiftsLoading,\n  updateIteration,\n  onGiftClick,\n}) => {\n  const {\n    loadResaleGifts,\n    updateResaleGiftsFilter,\n  } = getActions();\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const resellGiftsIds = useMemo(() => {\n    return resellGifts?.map((g) => g.id);\n  }, [resellGifts]);\n\n  const hasFilter = Boolean(filter?.modelAttributes?.length\n    || filter?.patternAttributes?.length || filter?.backdropAttributes?.length);\n\n  const handleLoadMoreResellGifts = useLastCallback(() => {\n    if (gift) {\n      const giftId = 'regularGiftId' in gift\n        ? gift.regularGiftId\n        : gift.id;\n      loadResaleGifts({ giftId });\n    }\n  });\n\n  const isGiftsEmpty = Boolean(!resellGifts || resellGifts.length === 0);\n\n  const [viewportIds, onLoadMore] = useInfiniteScroll(\n    handleLoadMoreResellGifts,\n    resellGiftsIds,\n    !gift,\n    RESALE_GIFTS_LIMIT,\n  );\n\n  const { observe } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  const handleResetGiftsFilter = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n      backdropAttributes: [],\n      patternAttributes: [],\n    } });\n  });\n\n  function renderNothingFoundGiftsWithFilter() {\n    return (\n      <div className={styles.notFoundGiftsRoot}>\n        <AnimatedIconWithPreview\n          size={160}\n          tgsUrl={LOCAL_TGS_URLS.SearchingDuck}\n          nonInteractive\n          noLoop\n        />\n        <div className={styles.notFoundGiftsDescription}>\n          {lang('ResellGiftsNoFound')}\n        </div>\n        {hasFilter && (\n          <Link\n            className={styles.notFoundGiftsLink}\n            onClick={handleResetGiftsFilter}\n          >\n            {lang('ResellGiftsClearFilters')}\n          </Link>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={scrollerRef} className={buildClassName(styles.resaleScreenRoot, 'custom-scroll')}>\n      <Transition\n        name=\"zoomFade\"\n        activeKey={updateIteration}\n      >\n        {isGiftsEmpty && areGiftsAllLoaded && renderNothingFoundGiftsWithFilter()}\n        <InfiniteScroll\n          className={buildClassName(styles.resaleStarGiftsContainer)}\n          items={viewportIds}\n          onLoadMore={onLoadMore}\n          itemSelector=\".starGiftItem\"\n          noFastList\n          preloadBackwards={RESALE_GIFTS_LIMIT}\n          scrollContainerClosest={`.${styles.resaleScreenRoot}`}\n        >\n          {resellGifts?.map((g) => (\n            <GiftItemStar\n              key={g.id}\n              gift={g}\n              observeIntersection={observe}\n              isResale\n              onClick={onGiftClick}\n            />\n          ))}\n        </InfiniteScroll>\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const {\n    starGifts,\n  } = global;\n\n  const { resaleGifts } = selectTabState(global);\n  const gift = resaleGifts?.giftId ? starGifts?.byId[resaleGifts.giftId] : undefined;\n  const filter = resaleGifts.filter;\n  const areGiftsAllLoaded = resaleGifts.isAllLoaded;\n  const areGiftsLoading = resaleGifts.isLoading;\n  const updateIteration = resaleGifts.updateIteration;\n\n  return {\n    resellGifts: resaleGifts.gifts,\n    gift,\n    filter,\n    areGiftsAllLoaded,\n    areGiftsLoading,\n    updateIteration,\n  };\n})(GiftModalResaleScreen));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftResaleFilters-module__root\",\"buttonsContainer\":\"GiftResaleFilters-module__buttonsContainer\",\"itemIcon\":\"GiftResaleFilters-module__itemIcon\",\"sticker\":\"GiftResaleFilters-module__sticker\",\"backdropAttributeMenuItemText\":\"GiftResaleFilters-module__backdropAttributeMenuItemText\",\"menuItemStickerText\":\"GiftResaleFilters-module__menuItemStickerText\",\"menuItemText\":\"GiftResaleFilters-module__menuItemText\",\"backdrop\":\"GiftResaleFilters-module__backdrop\",\"menuItemIcon\":\"GiftResaleFilters-module__menuItemIcon\",\"item\":\"GiftResaleFilters-module__item\",\"menuContentContainer\":\"GiftResaleFilters-module__menuContentContainer\",\"menu\":\"GiftResaleFilters-module__menu\",\"left\":\"GiftResaleFilters-module__left\",\"right\":\"GiftResaleFilters-module__right\"};","import { type MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeCounter,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  StarGiftAttributeIdModel,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions, ResaleGiftsSortType } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Icon from '../../common/icons/Icon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport SearchInput from '../../ui/SearchInput';\nimport ResaleGiftMenuAttributeSticker from './ResaleGiftMenuAttributeSticker';\n\nimport styles from './GiftResaleFilters.module.scss';\n\ntype OwnProps = {\n  dialogRef: ElementRef<HTMLDivElement>;\n};\ntype StateProps = {\n  filter: ResaleGiftsFilterOptions;\n  attributes?: ApiStarGiftAttribute[];\n  counters?: ApiStarGiftAttributeCounter[];\n};\n\nconst GiftResaleFilters: FC<StateProps & OwnProps> = ({\n  attributes,\n  counters,\n  filter,\n  dialogRef,\n}) => {\n  const lang = useLang();\n  const {\n    updateResaleGiftsFilter,\n  } = getActions();\n\n  const [searchModelQuery, setSearchModelQuery] = useState('');\n  const [searchBackdropQuery, setSearchBackdropQuery] = useState('');\n  const [searchPatternQuery, setSearchPatternQuery] = useState('');\n  const filteredAttributes = useMemo(() => {\n    const map: {\n      model: ApiStarGiftAttributeModel[];\n      pattern: ApiStarGiftAttributePattern[];\n      backdrop: ApiStarGiftAttributeBackdrop[];\n    } = {\n      model: [],\n      pattern: [],\n      backdrop: [],\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute } = counter;\n\n      if (!counter.count) {\n        continue;\n      }\n\n      const found = attributes?.find((attr) => {\n        if (attr.type === 'backdrop' && attribute.type === 'backdrop') {\n          return attr.backdropId === attribute.backdropId;\n        }\n\n        if (attr.type === 'model' && attribute.type === 'model') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        if (attr.type === 'pattern' && attribute.type === 'pattern') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        return false;\n      });\n\n      if (found?.type === 'backdrop') {\n        map.backdrop.push(found);\n      }\n      if (found?.type === 'model') {\n        map.model.push(found);\n      }\n      if (found?.type === 'pattern') {\n        map.pattern.push(found);\n      }\n    }\n\n    return map;\n  }, [attributes, counters]);\n\n  const filteredAndSearchedAttributes = useMemo(() => {\n    const filterBySearch = <T extends { name?: string }>(items: T[], query: string): T[] => {\n      if (!query.trim()) return items;\n\n      return items.filter(\n        (item): item is T => Boolean(item.name?.toLowerCase().includes(query.toLowerCase())),\n      );\n    };\n\n    return {\n      model: filterBySearch(filteredAttributes.model, searchModelQuery),\n      pattern: filterBySearch(filteredAttributes.pattern, searchPatternQuery),\n      backdrop: filterBySearch(filteredAttributes.backdrop, searchBackdropQuery),\n    };\n  }, [filteredAttributes, searchModelQuery, searchBackdropQuery, searchPatternQuery]);\n\n  // Sort Menu\n  const sortMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isSortContextMenuOpen,\n    contextMenuAnchor: sortContextMenuAnchor,\n    handleContextMenu: handleSortContextMenu,\n    handleContextMenuClose: handleSortContextMenuClose,\n    handleContextMenuHide: handleSortContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getSortMenuElement = useLastCallback(() => sortMenuRef.current!);\n\n  // Model Menu\n  const modelMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isModelContextMenuOpen,\n    contextMenuAnchor: modelContextMenuAnchor,\n    handleContextMenu: handleModelContextMenu,\n    handleContextMenuClose: handleModelContextMenuClose,\n    handleContextMenuHide: handleModelContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getModelMenuElement = useLastCallback(\n    () => modelMenuRef.current!,\n  );\n\n  // Backdrop Menu\n  const backdropMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isBackdropContextMenuOpen,\n    contextMenuAnchor: backdropContextMenuAnchor,\n    handleContextMenu: handleBackdropContextMenu,\n    handleContextMenuClose: handleBackdropContextMenuClose,\n    handleContextMenuHide: handleBackdropContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getBackdropMenuElement = useLastCallback(() => backdropMenuRef.current!);\n\n  // Pattern Menu\n  const patternMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isPatternContextMenuOpen,\n    contextMenuAnchor: patternContextMenuAnchor,\n    handleContextMenu: handlePatternContextMenu,\n    handleContextMenuClose: handlePatternContextMenuClose,\n    handleContextMenuHide: handlePatternContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getPatternMenuElement = useLastCallback(() => patternMenuRef.current!);\n\n  const SortMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const sortType = filter.sortType;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {sortType === 'byDate' && lang('ValueGiftSortByDate')}\n          {sortType === 'byNumber' && lang('ValueGiftSortByNumber')}\n          {sortType === 'byPrice' && lang('ValueGiftSortByPrice')}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n\n  const ModelMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.modelAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeModel')}\n          {attributesCount > 0\n            && lang('GiftAttributeModelPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n  const BackdropMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.backdropAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeBackdrop')}\n          {attributesCount > 0\n            && lang('GiftAttributeBackdropPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n  const PatternMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n    = useMemo(() => {\n      const attributesCount = filter?.patternAttributes?.length || 0;\n      return ({ onTrigger, isOpen: isMenuOpen }) => (\n        <div\n          className={styles.item}\n          onClick={onTrigger}\n        >\n          {attributesCount === 0 && lang('GiftAttributeSymbol')}\n          {attributesCount > 0\n            && lang('GiftAttributeSymbolPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n          <Icon\n            name=\"dropdown-arrows\"\n            className={styles.itemIcon}\n          />\n        </div>\n      );\n    }, [lang, filter]);\n\n  const handleSortMenuItemClick = useLastCallback((type: ResaleGiftsSortType) => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      sortType: type,\n    } });\n  });\n\n  const handleSelectedAllModelsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n    } });\n  });\n  const handleSelectedAllPatternsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: [],\n    } });\n  });\n  const handleSelectedAllBackdropsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: [],\n    } });\n  });\n\n  const handleModelMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeModel) => {\n    if (!counters) return;\n    const modelAttributes = filter.modelAttributes || [];\n    const modelAttribute\n      = counters.find((counter): counter is ApiStarGiftAttributeCounter<StarGiftAttributeIdModel> =>\n        counter.attribute.type === 'model' && counter.attribute.documentId === attribute.sticker.id,\n      )?.attribute;\n\n    if (!modelAttribute) return;\n\n    const isActive = modelAttributes.some((item) => item.documentId === modelAttribute.documentId);\n    const updatedAttributes = isActive\n      ? modelAttributes.filter((item) => item.documentId !== modelAttribute.documentId)\n      : [...modelAttributes, modelAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: updatedAttributes,\n    } });\n  });\n\n  const handlePatternMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributePattern) => {\n    if (!counters) return;\n    const patternAttributes = filter.patternAttributes || [];\n    const patternAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdPattern> =>\n        counter.attribute.type === 'pattern' && counter.attribute.documentId === attribute.sticker.id,\n    )?.attribute;\n\n    if (!patternAttribute) return;\n\n    const isActive = patternAttributes.some((item) => item.documentId === patternAttribute.documentId);\n    const updatedAttributes = isActive\n      ? patternAttributes.filter((item) => item.documentId !== patternAttribute.documentId)\n      : [...patternAttributes, patternAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: updatedAttributes,\n    } });\n  });\n\n  const handleBackdropMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeBackdrop) => {\n    if (!counters) return;\n    const backdropAttributes = filter.backdropAttributes || [];\n    const backdropAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdBackdrop> =>\n        counter.attribute.type === 'backdrop' && counter.attribute.backdropId === attribute.backdropId,\n    )?.attribute;\n\n    if (!backdropAttribute) return;\n\n    const isActive = backdropAttributes.some((item) => item.backdropId === backdropAttribute.backdropId);\n    const updatedAttributes = isActive\n      ? backdropAttributes.filter((item) => item.backdropId !== backdropAttribute.backdropId)\n      : [...backdropAttributes, backdropAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: updatedAttributes,\n    } });\n  });\n\n  function renderSortMenuItems() {\n    return (\n      <>\n        <MenuItem icon=\"sort-by-price\" onClick={() => { handleSortMenuItemClick('byPrice'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByPrice')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byPrice' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n        <MenuItem icon=\"sort-by-date\" onClick={() => { handleSortMenuItemClick('byDate'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByDate')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byDate' ? 'check' : 'placeholder'}\n          />\n\n        </MenuItem>\n        <MenuItem icon=\"sort-by-number\"onClick={() => { handleSortMenuItemClick('byNumber'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByNumber')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byNumber' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n      </>\n    );\n  }\n\n  function renderSortMenu() {\n    return (\n      <Menu\n        isOpen={isSortContextMenuOpen}\n        anchor={sortContextMenuAnchor}\n        ref={sortMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getSortMenuElement}\n        autoClose\n        onClose={handleSortContextMenuClose}\n        onCloseAnimationEnd={handleSortContextMenuHide}\n        positionX=\"left\"\n      >\n        {renderSortMenuItems()}\n      </Menu>\n    );\n  }\n\n  const handleSearchModelInputReset = useCallback(() => {\n    setSearchModelQuery('');\n  }, []);\n  const handleSearchBackdropInputReset = useCallback(() => {\n    setSearchBackdropQuery('');\n  }, []);\n  const handleSearchPatternInputReset = useCallback(() => {\n    setSearchPatternQuery('');\n  }, []);\n  const handleSearchInputClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  const modelMenuItemsContainerRef = useRef<HTMLDivElement>();\n  const { observe } = useIntersectionObserver({\n    rootRef: modelMenuItemsContainerRef,\n    isDisabled: !modelContextMenuAnchor,\n  });\n\n  function renderModelMenuItems() {\n    const models = filteredAndSearchedAttributes.model;\n    const selectedAttributes = filter.modelAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n    return (\n      <div className={styles.menuContentContainer} ref={modelMenuItemsContainerRef}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchModelQuery}\n          onChange={setSearchModelQuery}\n          onReset={handleSearchModelInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllModelsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {models.map((model) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === model.sticker.id);\n          return (\n            <MenuItem\n              key={model.name}\n              onClick={() => {\n                handleModelMenuItemClick(model);\n              }}\n            >\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={model.sticker}\n                type=\"model\"\n                observeIntersectionForLoading={observe}\n                observeIntersectionForPlaying={observe}\n              />\n              <div className={styles.menuItemStickerText}>\n                {model.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderModelMenu() {\n    return (\n      <Menu\n        isOpen={isModelContextMenuOpen}\n        anchor={modelContextMenuAnchor}\n        ref={modelMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getModelMenuElement}\n        autoClose\n        onClose={handleModelContextMenuClose}\n        onCloseAnimationEnd={handleModelContextMenuHide}\n      >\n        {renderModelMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderBackdropMenuItems() {\n    const backdrops = filteredAndSearchedAttributes.backdrop;\n    const selectedAttributes = filter.backdropAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchBackdropQuery}\n          onChange={setSearchBackdropQuery}\n          onReset={handleSearchBackdropInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllBackdropsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {backdrops.map((backdrop) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.backdropId === backdrop.backdropId);\n\n          return (\n            <MenuItem\n              key={backdrop.name}\n              onClick={() => {\n                handleBackdropMenuItemClick(backdrop);\n              }}\n            >\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[backdrop.centerColor, backdrop.edgeColor]}\n              />\n              <div className={styles.backdropAttributeMenuItemText}>\n                {backdrop.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderBackdropMenu() {\n    return (\n      <Menu\n        isOpen={isBackdropContextMenuOpen}\n        anchor={backdropContextMenuAnchor}\n        ref={backdropMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getBackdropMenuElement}\n        autoClose\n        onClose={handleBackdropContextMenuClose}\n        onCloseAnimationEnd={handleBackdropContextMenuHide}\n        positionX=\"right\"\n      >\n        {renderBackdropMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderPatternMenuItems() {\n    const patterns = filteredAndSearchedAttributes.pattern;\n    const selectedAttributes = filter.patternAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchPatternQuery}\n          onChange={setSearchPatternQuery}\n          onReset={handleSearchPatternInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllPatternsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {patterns.map((pattern) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === pattern.sticker.id);\n\n          return (\n            <MenuItem\n              key={pattern.name}\n              onClick={() => {\n                handlePatternMenuItemClick(pattern);\n              }}\n            >\n\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={pattern.sticker}\n                type=\"pattern\"\n              />\n\n              <div className={styles.menuItemStickerText}>\n                {pattern.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPatternMenu() {\n    return (\n      <Menu\n        isOpen={isPatternContextMenuOpen}\n        anchor={patternContextMenuAnchor}\n        ref={patternMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getPatternMenuElement}\n        autoClose\n        onClose={handlePatternContextMenuClose}\n        onCloseAnimationEnd={handlePatternContextMenuHide}\n      >\n        {renderPatternMenuItems()}\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      {Boolean(sortContextMenuAnchor) && renderSortMenu()}\n      {Boolean(modelContextMenuAnchor) && renderModelMenu()}\n      {Boolean(backdropContextMenuAnchor) && renderBackdropMenu()}\n      {Boolean(patternContextMenuAnchor) && renderPatternMenu()}\n      <div className={styles.buttonsContainer}>\n        <SortMenuButton\n          onTrigger={handleSortContextMenu}\n          isOpen={isSortContextMenuOpen}\n        />\n        <ModelMenuButton\n          onTrigger={handleModelContextMenu}\n          isOpen={isModelContextMenuOpen}\n        />\n        <BackdropMenuButton\n          onTrigger={handleBackdropContextMenu}\n          isOpen={isBackdropContextMenuOpen}\n        />\n        <PatternMenuButton\n          onTrigger={handlePatternContextMenu}\n          isOpen={isPatternContextMenuOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal((global): Complete<StateProps> => {\n  const { resaleGifts } = selectTabState(global);\n\n  const attributes = resaleGifts.attributes;\n  const counters = resaleGifts.counters;\n  const filter = resaleGifts.filter;\n\n  return {\n    attributes,\n    counters,\n    filter,\n  };\n})(GiftResaleFilters));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ResaleGiftMenuAttributeSticker-module__root\",\"thumb\":\"ResaleGiftMenuAttributeSticker-module__thumb\"};","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport StickerView from '../../common/StickerView';\n\nimport styles from './ResaleGiftMenuAttributeSticker.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  type: 'model' | 'pattern';\n  sticker: ApiSticker;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst ATTRIBUTE_STICKER_SIZE = 1.5 * REM;\n\nconst ResaleGiftMenuAttributeSticker: FC<StateProps & OwnProps> = ({\n  className,\n  type,\n  sticker,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  theme,\n}) => {\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const customColor = useDynamicColorListener(stickerRef, undefined, type !== 'pattern');\n\n  return (\n    <div\n      ref={stickerRef}\n      className={buildClassName(styles.root, className)}\n      style={`width: ${ATTRIBUTE_STICKER_SIZE}px; height: ${ATTRIBUTE_STICKER_SIZE}px`}\n    >\n      <StickerView\n        containerRef={stickerRef}\n        sticker={sticker}\n        size={ATTRIBUTE_STICKER_SIZE}\n        shouldPreloadPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        thumbClassName={styles.thumb}\n        customColor={customColor}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  return {\n    theme: selectTheme(global),\n  };\n})(ResaleGiftMenuAttributeSticker));\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"StarGiftCategoryList-module__list\",\"pinned\":\"StarGiftCategoryList-module__pinned\",\"item-selected\":\"StarGiftCategoryList-module__item-selected\",\"itemSelected\":\"StarGiftCategoryList-module__item-selected\",\"item\":\"StarGiftCategoryList-module__item\",\"selected-item\":\"StarGiftCategoryList-module__selected-item\",\"selectedItem\":\"StarGiftCategoryList-module__selected-item\",\"star\":\"StarGiftCategoryList-module__star\"};","import type { ElementRef } from '../../../lib/teact/teact';\nimport {\n  memo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  areUniqueStarGiftsDisallowed?: boolean;\n  areLimitedStarGiftsDisallowed?: boolean;\n  isSelf?: boolean;\n  hasMyUnique?: boolean;\n  isPinned?: boolean;\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  ref: externalRef,\n  idsByCategory,\n  onCategoryChanged,\n  areUniqueStarGiftsDisallowed,\n  areLimitedStarGiftsDisallowed,\n  isSelf,\n  hasMyUnique,\n  isPinned,\n}: StateProps & OwnProps) => {\n  let ref = useRef<HTMLDivElement>();\n  if (externalRef) {\n    ref = externalRef;\n  }\n\n  const lang = useLang();\n\n  const hasCollectible = Boolean(idsByCategory?.collectible?.length);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(category);\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'myUnique') return lang('GiftCategoryMyGifts');\n    if (category === 'collectible') return lang('GiftCategoryCollectibles');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, isPinned && styles.pinned, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areUniqueStarGiftsDisallowed && !isSelf && hasMyUnique && renderCategoryItem('myUnique')}\n      {(!areUniqueStarGiftsDisallowed || !areLimitedStarGiftsDisallowed)\n        && hasCollectible && renderCategoryItem('collectible')}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"StarGiftPriceDecreaseInfoModal-module__header\",\"headerTitle\":\"StarGiftPriceDecreaseInfoModal-module__headerTitle\",\"headerHint\":\"StarGiftPriceDecreaseInfoModal-module__headerHint\",\"starIconContainer\":\"StarGiftPriceDecreaseInfoModal-module__starIconContainer\",\"progress\":\"StarGiftPriceDecreaseInfoModal-module__progress\",\"table\":\"StarGiftPriceDecreaseInfoModal-module__table\",\"footerText\":\"StarGiftPriceDecreaseInfoModal-module__footerText\",\"footer\":\"StarGiftPriceDecreaseInfoModal-module__footer\",\"understoodIcon\":\"StarGiftPriceDecreaseInfoModal-module__understoodIcon\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { TabState } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport Button from '../../ui/Button';\nimport TableInfoModal, { type TableData } from '../common/TableInfoModal';\n\nimport styles from './StarGiftPriceDecreaseInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starGiftPriceDecreaseInfoModal'];\n};\n\nconst StarGiftPriceDecreaseInfoModal = ({ modal }: OwnProps) => {\n  const { closeStarGiftPriceDecreaseInfoModal } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleClose = useLastCallback(() => {\n    closeStarGiftPriceDecreaseInfoModal();\n  });\n\n  const tableData = useMemo(() => {\n    if (!renderingModal) return undefined;\n    const { prices } = renderingModal;\n    return prices.map((price): TableData[number] => [\n      formatDateTimeToString(price.date * 1000, lang.code, true, undefined, true),\n      formatStarsAsIcon(lang, price.upgradeStars, { containerClassName: styles.starIconContainer }),\n    ]);\n  }, [lang, renderingModal]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <p className={styles.footerText}>{lang('UpgradeCostDrops')}</p>\n        <Button\n          onClick={handleClose}\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  if (!tableData || !renderingModal) return undefined;\n\n  const { currentPrice, minPrice, maxPrice } = renderingModal;\n  const progress = maxPrice !== minPrice ? (currentPrice - minPrice) / (maxPrice - minPrice) : 0;\n\n  const header = (\n    <div className={styles.header}>\n      <PremiumProgress\n        leftText={formatStarsAsText(lang, maxPrice)}\n        rightText={formatStarsAsText(lang, minPrice)}\n        floatingBadgeText={formatStarsAsText(lang, currentPrice)}\n        floatingBadgeIcon=\"star\"\n        progress={progress}\n        isInverted\n        shouldSkipGradient\n        className={styles.progress}\n      />\n      <p className={styles.headerTitle}>{lang('StarGiftUpgradeCostModalTitle')}</p>\n      <p className={styles.headerHint}>{lang('StarGiftUpgradeCostHint')}</p>\n    </div>\n  );\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={handleClose}\n      header={header}\n      tableData={tableData}\n      tableClassName={buildClassName(styles.table, 'custom-scroll')}\n      footer={footer}\n    />\n  );\n};\n\nexport default memo(StarGiftPriceDecreaseInfoModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UniqueGiftHeader-module__root\",\"withManageButtons\":\"UniqueGiftHeader-module__withManageButtons\",\"sticker\":\"UniqueGiftHeader-module__sticker\",\"withBadge\":\"UniqueGiftHeader-module__withBadge\",\"subtitleBadge\":\"UniqueGiftHeader-module__subtitleBadge\",\"badge\":\"UniqueGiftHeader-module__badge\",\"radialPattern\":\"UniqueGiftHeader-module__radialPattern\",\"amount\":\"UniqueGiftHeader-module__amount\",\"transition\":\"UniqueGiftHeader-module__transition\",\"transitionSlide\":\"UniqueGiftHeader-module__transitionSlide\",\"title\":\"UniqueGiftHeader-module__title\",\"subtitle\":\"UniqueGiftHeader-module__subtitle\"};","import type { TeactNode } from '@teact';\nimport { memo, useMemo } from '@teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiPeer,\n  ApiSavedStarGift,\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport { IS_TOUCH_ENV } from '../../../util/browser/windowEnvironment.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions.ts';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\nimport UniqueGiftManageButtons from './UniqueGiftManageButtons';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  badge?: TeactNode;\n  subtitle?: TeactNode;\n  subtitlePeer?: ApiPeer;\n  className?: string;\n  resellPrice?: ApiTypeCurrencyAmount;\n  showManageButtons?: boolean;\n  savedGift?: ApiSavedStarGift;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  badge,\n  subtitle,\n  subtitlePeer,\n  className,\n  resellPrice,\n  showManageButtons,\n  savedGift,\n}: OwnProps) => {\n  const {\n    openChat,\n  } = getActions();\n\n  const { isMobile } = useAppLayout();\n\n  const lang = useLang();\n  const [isGiftHover, markGiftHover, unmarkGiftHover] = useFlag(false);\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        canvasClassName={styles.radialPatternCanvas}\n        backgroundColors={backdropColors}\n        patternIcon={patternAttribute.sticker}\n        yPosition={7.5 * REM}\n        maxRadius={0.26}\n        patternSize={isMobile ? 14 : 16}\n        ovalFactor={1.2}\n      />\n    );\n  }, [backdropAttribute, patternAttribute, isMobile]);\n\n  return (\n    <div className={buildClassName(styles.root,\n      'interactive-gift',\n      showManageButtons && styles.withManageButtons,\n      badge && styles.withBadge,\n      className)}\n    >\n      <Transition\n        className={styles.transition}\n        slideClassName={buildClassName(styles.transitionSlide)}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n          noLoop={!isGiftHover}\n          onMouseEnter={!IS_TOUCH_ENV ? markGiftHover : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? unmarkGiftHover : undefined}\n        />\n      </Transition>\n      {Boolean(badge) && (\n        <div className={styles.badge}>{badge}</div>\n      )}\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {Boolean(subtitle) && (\n        <div\n          className={buildClassName(styles.subtitle, subtitlePeer && styles.subtitleBadge)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n          onClick={() => {\n            if (subtitlePeer) {\n              openChat({ id: subtitlePeer.id });\n            }\n          }}\n        >\n          {subtitle}\n        </div>\n      )}\n      {savedGift && showManageButtons && (\n        <UniqueGiftManageButtons\n          savedGift={savedGift}\n        />\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          {resellPrice.currency === 'XTR' && <StarIcon type=\"gold\" size=\"middle\" />}\n          {resellPrice.currency === 'TON' && <Icon name=\"toncoin\" />}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"manageButtons\":\"UniqueGiftManageButtons-module__manageButtons\",\"manageButton\":\"UniqueGiftManageButtons-module__manageButton\",\"text\":\"UniqueGiftManageButtons-module__text\",\"icon\":\"UniqueGiftManageButtons-module__icon\"};","import { memo, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiEmojiStatusCollectible,\n  ApiEmojiStatusType,\n  ApiSavedStarGift,\n} from '../../../api/types';\n\nimport { DEFAULT_STATUS_ICON_ID } from '../../../config';\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { selectTabState, selectUser } from '../../../global/selectors';\nimport { formatDateAtTime } from '../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../util/serverTime';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Button from '../../ui/Button';\n\nimport styles from './UniqueGiftManageButtons.module.scss';\n\ntype OwnProps = {\n  savedGift?: ApiSavedStarGift;\n};\n\ntype StateProps = {\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n};\n\nconst UniqueGiftManageButtons = ({\n  savedGift,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n}: OwnProps & StateProps) => {\n  const {\n    openGiftTransferModal,\n    openGiftResalePriceComposerModal,\n    openGiftStatusInfoModal,\n    setEmojiStatus,\n    updateStarGiftPrice,\n    showNotification,\n    closeGiftInfoModal,\n  } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const gift = savedGift?.gift;\n  const isGiftUnique = gift?.type === 'starGiftUnique';\n  const giftResalePrice = isGiftUnique ? gift.resellPrice : undefined;\n\n  const global = getGlobal();\n  const modal = selectTabState(global).giftInfoModal;\n  const peerId = modal?.peerId;\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n  const userCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug,\n    ) as ApiEmojiStatusCollectible | undefined;\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const currentUniqueEmojiStatusSlug = currentUserEmojiStatus?.type === 'collectible'\n    ? currentUserEmojiStatus.slug : undefined;\n  const canTakeOff = starGiftUniqueSlug !== undefined && currentUniqueEmojiStatusSlug === starGiftUniqueSlug;\n  const canWear = Boolean(userCollectibleStatus) && !canTakeOff;\n\n  const handleTransfer = useLastCallback(() => {\n    if (!savedGift || savedGift?.gift.type !== 'starGiftUnique') return;\n\n    if (savedGift.canTransferAt && savedGift.canTransferAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanTransferAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canTransferAt * 1000) },\n        },\n      });\n      return;\n    }\n\n    openGiftTransferModal({ gift: savedGift });\n  });\n\n  const handleWear = useLastCallback(() => {\n    if (canTakeOff) {\n      setEmojiStatus({\n        emojiStatus: { type: 'regular', documentId: DEFAULT_STATUS_ICON_ID },\n      });\n    } else if (userCollectibleStatus) {\n      openGiftStatusInfoModal({ emojiStatus: userCollectibleStatus });\n    }\n  });\n\n  const handleSell = useLastCallback(() => {\n    if (!savedGift || !peerId) return;\n    if (savedGift.canResellAt && savedGift.canResellAt > getServerTime()) {\n      showNotification({\n        message: {\n          key: 'NotificationGiftCanResellAt',\n          variables: { date: formatDateAtTime(oldLang, savedGift.canResellAt * 1000) },\n        },\n      });\n      return;\n    }\n    openGiftResalePriceComposerModal({ peerId, gift: savedGift });\n  });\n\n  const handleUnlist = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift) return;\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price: {\n      currency: STARS_CURRENCY_CODE, amount: 0, nanos: 0,\n    } });\n    showNotification({\n      icon: 'unlist-outline',\n      message: {\n        key: 'NotificationGiftIsUnlist',\n        variables: { gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }) },\n      },\n    });\n  });\n\n  return (\n    <div className={styles.manageButtons}>\n      <Button\n        color=\"transparentBlured\"\n        iconName=\"gift-transfer-inline\"\n        iconAlignment=\"top\"\n        iconClassName={styles.icon}\n        onClick={handleTransfer}\n        ariaLabel={lang('GiftInfoTransfer')}\n        noForcedUpperCase\n        fluid\n        className={styles.manageButton}\n      >\n        <span className={styles.text}>\n          {lang('GiftInfoTransfer')}\n        </span>\n      </Button>\n      {(canWear || !canTakeOff) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName={canTakeOff ? 'crown-take-off' : 'crown-wear'}\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={canWear || canTakeOff ? handleWear : undefined}\n          disabled={!canWear && !canTakeOff}\n          ariaLabel={lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang(canTakeOff ? 'GiftInfoTakeOff' : 'GiftInfoWear')}\n          </span>\n        </Button>\n      )}\n      {!giftResalePrice && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"sell\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleSell}\n          ariaLabel={lang('Sell')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('Sell')}\n          </span>\n        </Button>\n      )}\n      {Boolean(giftResalePrice) && (\n        <Button\n          color=\"transparentBlured\"\n          iconName=\"unlist\"\n          iconAlignment=\"top\"\n          iconClassName={styles.icon}\n          onClick={handleUnlist}\n          ariaLabel={lang('GiftInfoUnlist')}\n          noForcedUpperCase\n          fluid\n          className={styles.manageButton}\n        >\n          <span className={styles.text}>\n            {lang('GiftInfoUnlist')}\n          </span>\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { currentUserId } = global;\n    const currentUser = currentUserId ? selectUser(global, currentUserId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n    };\n  },\n)(UniqueGiftManageButtons));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"GiftAuctionAcquiredModal-module__modal\",\"content\":\"GiftAuctionAcquiredModal-module__content\",\"giftsListContainer\":\"GiftAuctionAcquiredModal-module__giftsListContainer\",\"giftsList\":\"GiftAuctionAcquiredModal-module__giftsList\",\"giftHeader\":\"GiftAuctionAcquiredModal-module__giftHeader\",\"bidValue\":\"GiftAuctionAcquiredModal-module__bidValue\",\"badge\":\"GiftAuctionAcquiredModal-module__badge\",\"starIcon\":\"GiftAuctionAcquiredModal-module__starIcon\",\"okButton\":\"GiftAuctionAcquiredModal-module__okButton\"};","import { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionAcquiredGift, ApiSticker } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useScrollNotch from '../../../../hooks/useScrollNotch';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport BadgeButton from '../../../common/BadgeButton';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftAuctionAcquiredModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionAcquiredModal'];\n};\n\ntype StateProps = {\n  acquiredGifts?: ApiStarGiftAuctionAcquiredGift[];\n  giftTitle?: string;\n  giftSticker?: ApiSticker;\n};\n\nconst GiftAuctionAcquiredModal = ({ modal, acquiredGifts, giftTitle, giftSticker }: OwnProps & StateProps) => {\n  const { closeGiftAuctionAcquiredModal } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal?.giftId);\n  const renderingGifts = useCurrentOrPrev(acquiredGifts);\n  const renderingGiftTitle = useCurrentOrPrev(giftTitle);\n  const renderingGiftSticker = useCurrentOrPrev(giftSticker);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionAcquiredModal();\n  });\n\n  const giftItems = useMemo(() => {\n    if (!renderingGifts?.length) return undefined;\n\n    return renderingGifts.map((gift) => {\n      const header = lang('GiftAuctionBoughtGiftHeader', {\n        gift: renderingGiftTitle || lang('StarGift'),\n        giftNumber: gift.giftNumber ? lang.number(gift.giftNumber) : '',\n        round: lang.number(gift.round),\n      });\n\n      const tableData: TableData = [\n        [undefined, (\n          <span className={styles.giftHeader}>\n            {renderingGiftSticker && (\n              <AnimatedIconFromSticker\n                className={styles.giftSticker}\n                sticker={renderingGiftSticker}\n                size={20}\n                play={false}\n              />\n            )}\n            <span>{header}</span>\n          </span>\n        )],\n        [lang('GiftAuctionRecipient'), { chatId: gift.peerId }],\n        [lang('GiftAuctionDate'), formatDateTimeToString(gift.date * 1000, lang.code, true)],\n        [lang('GiftAuctionAcceptedBid'), (\n          <span className={styles.bidValue}>\n            {formatStarsAsIcon(lang, gift.bidAmount, { className: styles.starIcon })}\n            <BadgeButton className={styles.badge}>\n              {lang('GiftAuctionTopPosition', { position: gift.position })}\n            </BadgeButton>\n          </span>\n        )],\n      ];\n\n      return { tableData, key: `${gift.round}-${gift.giftNumber}` };\n    });\n  }, [renderingGifts, renderingGiftTitle, renderingGiftSticker, lang]);\n\n  const giftsCount = renderingGifts?.length || 0;\n\n  useScrollNotch({\n    containerRef,\n    selector: `.${styles.giftsList}`,\n    isBottomNotch: true,\n  }, [giftItems]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      title={lang('GiftAuctionBoughtGiftsTitle', { count: giftsCount }, { pluralValue: giftsCount })}\n      className={styles.modal}\n      contentClassName={styles.content}\n      onClose={handleClose}\n      isCondensedHeader\n      isSlim\n    >\n      <div className={styles.giftsListContainer} ref={containerRef}>\n        <div className={styles.giftsList}>\n          {giftItems?.map((item) => (\n            <TableInfo key={item.key} tableData={item.tableData} />\n          ))}\n        </div>\n      </div>\n      <Button className={styles.okButton} onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionAcquiredModal } = selectTabState(global);\n\n    return {\n      acquiredGifts: giftAuctionAcquiredModal?.acquiredGifts,\n      giftTitle: giftAuctionAcquiredModal?.giftTitle,\n      giftSticker: giftAuctionAcquiredModal?.giftSticker,\n    };\n  },\n)(GiftAuctionAcquiredModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"GiftAuctionBidModal-module__content\",\"headerControlPanel\":\"GiftAuctionBidModal-module__headerControlPanel\",\"slider\":\"GiftAuctionBidModal-module__slider\",\"title\":\"GiftAuctionBidModal-module__title\",\"subtitle\":\"GiftAuctionBidModal-module__subtitle\",\"infoCards\":\"GiftAuctionBidModal-module__infoCards\",\"infoCard\":\"GiftAuctionBidModal-module__infoCard\",\"infoCardValue\":\"GiftAuctionBidModal-module__infoCardValue\",\"infoCardLabel\":\"GiftAuctionBidModal-module__infoCardLabel\",\"separator\":\"GiftAuctionBidModal-module__separator\",\"winningStatus\":\"GiftAuctionBidModal-module__winningStatus\",\"bidderInfoSlide\":\"GiftAuctionBidModal-module__bidderInfoSlide\",\"winningText\":\"GiftAuctionBidModal-module__winningText\",\"winningBadge\":\"GiftAuctionBidModal-module__winningBadge\",\"section\":\"GiftAuctionBidModal-module__section\",\"sectionTitle\":\"GiftAuctionBidModal-module__sectionTitle\",\"sectionTitleTransition\":\"GiftAuctionBidModal-module__sectionTitleTransition\",\"bidderRow\":\"GiftAuctionBidModal-module__bidderRow\",\"bidderPosition\":\"GiftAuctionBidModal-module__bidderPosition\",\"bidderInfo\":\"GiftAuctionBidModal-module__bidderInfo\",\"bidderName\":\"GiftAuctionBidModal-module__bidderName\",\"topBidderRow\":\"GiftAuctionBidModal-module__topBidderRow\",\"topBidderPosition\":\"GiftAuctionBidModal-module__topBidderPosition\",\"bidderAmount\":\"GiftAuctionBidModal-module__bidderAmount\",\"buttonStar\":\"GiftAuctionBidModal-module__buttonStar\",\"giftSticker\":\"GiftAuctionBidModal-module__giftSticker\",\"customBidInput\":\"GiftAuctionBidModal-module__customBidInput\",\"customBidInputIcon\":\"GiftAuctionBidModal-module__customBidInputIcon\"};","import { memo, useEffect, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAuctionState,\n  ApiStarsAmount,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer, selectTabState } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport renderText from '../../../common/helpers/renderText';\n\nimport { useTransitionActiveKey } from '../../../../hooks/animations/useTransitionActiveKey';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\nimport TextTimer from '../../../ui/TextTimer';\nimport Transition from '../../../ui/Transition';\nimport StarSlider from '../../paidReaction/StarSlider';\nimport BalanceBlock from '../../stars/BalanceBlock';\n\nimport styles from './GiftAuctionBidModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionBidModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n  starBalance?: ApiStarsAmount;\n  currentUserPeer?: ApiPeer;\n  topBidderIds?: string[];\n};\n\nconst DEFAULT_BID_AMOUNT = 50;\nconst MAX_BID_AMOUNT_STEP = 50000;\nconst MAX_CUSTOM_BID_AMOUNT = 1000000000;\nconst BID_ROUNDING_STEP = 10000;\nconst MIN_SLIDER_PROGRESS = 0.25;\nconst GIFT_STICKER_SIZE = 24;\nconst DEFAULT_TOP_BIDDERS_COUNT = 3;\n\nconst GiftAuctionBidModal = ({\n  modal,\n  auctionState,\n  starBalance,\n  currentUserPeer,\n  topBidderIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionBidModal, sendStarGiftAuctionBid, loadGiftAuction } = getActions();\n\n  const isOpen = Boolean(modal);\n\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n  const renderingTopBidderIds = useCurrentOrPrev(topBidderIds);\n\n  const renderingTopBidderPeers = useMemo(() => {\n    if (!renderingTopBidderIds) return undefined;\n    const global = getGlobal();\n    return renderingTopBidderIds\n      .map((id) => selectPeer(global, id))\n      .filter(Boolean);\n  }, [renderingTopBidderIds]);\n\n  const [topBidder1, topBidder2, topBidder3] = renderingTopBidderPeers || [];\n\n  const topBidder1Key = useTransitionActiveKey([topBidder1?.id || '0']);\n  const topBidder2Key = useTransitionActiveKey([topBidder2?.id || '0']);\n  const topBidder3Key = useTransitionActiveKey([topBidder3?.id || '0']);\n\n  const giftsPerRound = renderingAuctionState?.gift.giftsPerRound || 0;\n\n  const lang = useLang();\n\n  const activeState = renderingAuctionState?.state.type === 'active'\n    ? renderingAuctionState.state\n    : undefined;\n  const userState = renderingAuctionState?.userState;\n\n  const [selectedBidAmount, setSelectedBidAmount] = useState(DEFAULT_BID_AMOUNT);\n  const [isCustomBidModalOpen, openCustomBidModal, closeCustomBidModal] = useFlag();\n  const [customBidValue, setCustomBidValue] = useState('');\n\n  const baseMinBid = activeState?.minBidAmount || DEFAULT_BID_AMOUNT;\n\n  const currentMinBid = userState?.minBidAmount || baseMinBid;\n\n  const sliderMaxValue = Math.ceil(currentMinBid / BID_ROUNDING_STEP) * BID_ROUNDING_STEP + MAX_BID_AMOUNT_STEP;\n\n  useEffect(() => {\n    setSelectedBidAmount(currentMinBid);\n  }, [currentMinBid]);\n\n  const nextRoundAt = activeState?.nextRoundAt;\n\n  const bidDifference = userState?.bidAmount ? selectedBidAmount - userState.bidAmount : 0;\n  const isAtMaxValue = selectedBidAmount >= sliderMaxValue;\n\n  const sliderSecondaryText = useMemo(() => {\n    if (isAtMaxValue) return lang('GiftAuctionTapToBidMore');\n    if (bidDifference <= 0) return undefined;\n    return (\n      <>\n        +\n        <AnimatedCounter text={lang.number(bidDifference)} />\n      </>\n    );\n  }, [bidDifference, isAtMaxValue, lang]);\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setSelectedBidAmount(value);\n  });\n\n  const handleTimerEnd = useLastCallback(() => {\n    if (!modal?.auctionGiftId || !isOpen) return;\n    loadGiftAuction({ giftId: modal.auctionGiftId });\n  });\n\n  const handleRequestCustomValue = useLastCallback(() => {\n    openCustomBidModal();\n  });\n\n  const handleBadgeClick = useLastCallback(() => {\n    if (isAtMaxValue) {\n      handleRequestCustomValue();\n    }\n  });\n\n  const handleCustomBidChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, '');\n    const numValue = Number(value);\n    if (numValue > MAX_CUSTOM_BID_AMOUNT) return;\n    setCustomBidValue(value);\n  });\n\n  const handleCustomBidSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n\n    const resultValue = Number(customBidValue);\n    if (resultValue < currentMinBid) return;\n\n    setSelectedBidAmount(resultValue);\n    closeCustomBidModal();\n\n    setCustomBidValue('');\n\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: resultValue,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (!renderingAuctionState?.gift.id || !modal) return;\n    const { peerId, message, shouldHideName } = modal;\n    const isUpdateBid = Boolean(userState?.bidAmount);\n\n    sendStarGiftAuctionBid({\n      giftId: renderingAuctionState.gift.id,\n      bidAmount: selectedBidAmount,\n      peerId,\n      message: message ? { text: message } : undefined,\n      shouldHideName,\n      isUpdateBid,\n    });\n  });\n\n  const userPosition = useMemo(() => {\n    if (!selectedBidAmount || !activeState?.bidLevels?.length) return undefined;\n\n    const { bidLevels } = activeState;\n    const userBidDate = userState?.bidDate || Number.MAX_SAFE_INTEGER;\n\n    for (const level of bidLevels) {\n      if (level.amount < selectedBidAmount\n        || (level.amount === selectedBidAmount && level.date >= userBidDate)) {\n        return level.pos;\n      }\n    }\n\n    return bidLevels[bidLevels.length - 1].pos + 1;\n  }, [selectedBidAmount, activeState, userState?.bidDate]);\n\n  function renderInfoCards() {\n    return (\n      <div className={styles.infoCards}>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(currentMinBid)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionMinimumBid')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <TextTimer endsAt={nextRoundAt || 0} shouldShowZeroOnEnd onEnd={handleTimerEnd} />\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionUntilNextRound')}</div>\n        </div>\n        <div className={styles.infoCard}>\n          <div className={styles.infoCardValue}>\n            <AnimatedIconFromSticker\n              noLoop={false}\n              className={styles.giftSticker}\n              sticker={renderingAuctionState?.gift.sticker}\n              size={GIFT_STICKER_SIZE}\n            />\n            {lang.number(activeState?.giftsLeft || 0)}\n          </div>\n          <div className={styles.infoCardLabel}>{lang('GiftAuctionLeft')}</div>\n        </div>\n      </div>\n    );\n  }\n\n  const isWinning = Boolean(userState?.bidAmount && userPosition && userPosition <= giftsPerRound);\n\n  function renderCurrentBidSectionTitle() {\n    const giftTitle = renderingAuctionState?.gift.title || lang('StarGift');\n    const nextGiftNum = userPosition && userPosition <= 100\n      ? (activeState?.lastGiftNum || 0) + userPosition\n      : undefined;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={isWinning ? 0 : 1}\n        className={styles.sectionTitleTransition}\n        slideClassName={styles.bidderInfoSlide}\n      >\n        {isWinning ? (\n          <div className={styles.winningStatus}>\n            <span className={styles.winningText}>{lang('GiftAuctionYoureWinning')}</span>\n            <span className={styles.winningBadge}>\n              {lang('GiftUnique', { title: giftTitle, number: nextGiftNum ? lang.number(nextGiftNum) : undefined })}\n            </span>\n          </div>\n        ) : (\n          <div className={styles.sectionTitle}>{lang('GiftAuctionYourBidWillBe')}</div>\n        )}\n      </Transition>\n    );\n  }\n\n  function renderUserBid() {\n    return (\n      <div className={styles.section}>\n        {renderCurrentBidSectionTitle()}\n        <div className={styles.bidderRow}>\n          <div className={styles.bidderPosition}>\n            {userPosition && userPosition > 100 ? `${userPosition}+` : (userPosition || 1)}\n          </div>\n          <div className={styles.bidderInfo}>\n            {currentUserPeer && <Avatar peer={currentUserPeer} size=\"small\" />}\n            {currentUserPeer && <FullNameTitle peer={currentUserPeer} className={styles.bidderName} />}\n          </div>\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(selectedBidAmount)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTopBidderRow(\n    index: number,\n    emoji: string,\n    peer: ApiPeer | undefined,\n    amount: number | undefined,\n    activeKey: number,\n  ) {\n    return (\n      <div className={styles.topBidderRow} key={index}>\n        <div className={styles.topBidderPosition}>\n          {renderText(emoji, ['emoji'])}\n        </div>\n        <Transition\n          name=\"fade\"\n          activeKey={activeKey}\n          className={styles.bidderInfo}\n          slideClassName={styles.bidderInfoSlide}\n        >\n          {peer && (\n            <>\n              <Avatar peer={peer} size=\"small\" />\n              <FullNameTitle peer={peer} className={styles.bidderName} />\n            </>\n          )}\n        </Transition>\n        {amount !== undefined && (\n          <div className={styles.bidderAmount}>\n            <StarIcon type=\"gold\" size=\"adaptive\" />\n            {lang.number(amount)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderTopWinners() {\n    const topCount = DEFAULT_TOP_BIDDERS_COUNT;\n    const bidLevels = activeState?.bidLevels;\n\n    return (\n      <div className={styles.section}>\n        <div className={styles.sectionTitle}>\n          {lang('GiftAuctionTopWinners', { count: topCount }, { pluralValue: topCount })}\n        </div>\n        {renderTopBidderRow(0, '', topBidder1, bidLevels?.[0]?.amount, topBidder1Key)}\n        {renderTopBidderRow(1, '', topBidder2, bidLevels?.[1]?.amount, topBidder2Key)}\n        {renderTopBidderRow(2, '', topBidder3, bidLevels?.[2]?.amount, topBidder3Key)}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      contentClassName={styles.content}\n      onClose={closeGiftAuctionBidModal}\n      isLowStackPriority\n    >\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={currentMinBid}\n        minValue={baseMinBid}\n        minAllowedValue={currentMinBid}\n        minAllowedProgress={MIN_SLIDER_PROGRESS}\n        maxValue={sliderMaxValue}\n        floatingBadgeDescription={sliderSecondaryText}\n        onChange={handleAmountChange}\n        onBadgeClick={handleBadgeClick}\n        onCustomValueClick={handleRequestCustomValue}\n        shouldUseDynamicColor\n        shouldAllowCustomValue\n      />\n\n      <h3 className={styles.title}>{lang('GiftAuctionPlaceBid')}</h3>\n      {renderInfoCards()}\n\n      {renderUserBid()}\n      {renderTopWinners()}\n\n      <Button noForcedUpperCase onClick={handleSubmit}>\n        {lang(userState?.bidAmount ? 'GiftAuctionAddToBid' : 'GiftAuctionPlaceBidButton', {\n          amount: formatStarsAsIcon(lang,\n            userState?.bidAmount ? selectedBidAmount - userState.bidAmount : selectedBidAmount,\n            { asFont: true, className: styles.buttonStar }),\n        }, { withNodes: true })}\n      </Button>\n      <ConfirmDialog\n        isOpen={isCustomBidModalOpen}\n        title={lang('GiftAuctionCustomBidTitle')}\n        confirmLabel={lang('GiftAuctionCustomBidButton')}\n        isConfirmDisabled={!customBidValue || Number(customBidValue) < currentMinBid}\n        confirmHandler={handleCustomBidSubmit}\n        onClose={closeCustomBidModal}\n      >\n        <p>{lang('GiftAuctionCustomBidDescription', { count: renderingAuctionState?.gift.giftsPerRound })}</p>\n        <div className={styles.customBidInput}>\n          <StarIcon type=\"gold\" size=\"adaptive\" className={styles.customBidInputIcon} />\n          <InputText\n            value={customBidValue}\n            onChange={handleCustomBidChange}\n            placeholder={lang('GiftAuctionCustomBidPlaceholder')}\n            inputMode=\"numeric\"\n            teactExperimentControlled\n          />\n        </div>\n      </ConfirmDialog>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { stars, currentUserId } = global;\n    const { giftAuctionBidModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionBidModal?.auctionGiftId;\n    const giftAuction = auctionGiftId\n      ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined;\n\n    const currentUserPeer = currentUserId ? selectPeer(global, currentUserId) : undefined;\n\n    const topBidderIds = giftAuction?.state.type === 'active'\n      ? giftAuction.state.topBidders\n      : undefined;\n\n    return {\n      auctionState: giftAuction,\n      starBalance: stars?.balance,\n      currentUserPeer,\n      topBidderIds,\n    };\n  },\n)(GiftAuctionBidModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"preview\":\"GiftAuctionChangeRecipientModal-module__preview\",\"arrow\":\"GiftAuctionChangeRecipientModal-module__arrow\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftAuctionChangeRecipientModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionChangeRecipientModal'];\n};\n\ntype StateProps = {\n  oldPeer?: ApiPeer;\n  newPeer?: ApiPeer;\n};\n\nconst AVATAR_SIZE = 4 * REM;\n\nconst GiftAuctionChangeRecipientModal = ({ modal, oldPeer, newPeer }: OwnProps & StateProps) => {\n  const { closeGiftAuctionChangeRecipientModal, openGiftAuctionBidModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingOldPeer = useCurrentOrPrev(oldPeer);\n  const renderingNewPeer = useCurrentOrPrev(newPeer);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.auctionGiftId) return;\n\n    closeGiftAuctionChangeRecipientModal();\n    openGiftAuctionBidModal({\n      auctionGiftId: renderingModal.auctionGiftId,\n      peerId: renderingModal.newPeerId,\n      message: renderingModal.message,\n      shouldHideName: renderingModal.shouldHideName,\n    });\n  });\n\n  if (!renderingOldPeer || !renderingNewPeer) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftAuctionChangeRecipientTitle')}\n      onClose={closeGiftAuctionChangeRecipientModal}\n      confirmLabel={lang('Continue')}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.preview}>\n        <Avatar peer={renderingOldPeer} size={AVATAR_SIZE} />\n        <Icon name=\"next\" className={styles.arrow} />\n        <Avatar peer={renderingNewPeer} size={AVATAR_SIZE} />\n      </div>\n      <p>\n        {lang('GiftAuctionChangeRecipientDescription', {\n          oldPeer: getPeerTitle(lang, renderingOldPeer),\n          newPeer: getPeerTitle(lang, renderingNewPeer),\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const oldPeer = modal?.oldPeerId ? selectPeer(global, modal.oldPeerId) : undefined;\n    const newPeer = modal?.newPeerId ? selectPeer(global, modal.newPeerId) : undefined;\n\n    return {\n      oldPeer,\n      newPeer,\n    };\n  })(GiftAuctionChangeRecipientModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftAuctionInfoModal-module__header\",\"iconWrapper\":\"GiftAuctionInfoModal-module__iconWrapper\",\"icon\":\"GiftAuctionInfoModal-module__icon\",\"title\":\"GiftAuctionInfoModal-module__title\",\"subtitle\":\"GiftAuctionInfoModal-module__subtitle\",\"footer\":\"GiftAuctionInfoModal-module__footer\",\"understoodIcon\":\"GiftAuctionInfoModal-module__understoodIcon\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectTabState } from '../../../../global/selectors';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftAuctionInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionInfoModal'];\n};\n\ntype StateProps = {\n  giftAuction?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionInfoModal = ({\n  modal,\n  giftAuction,\n}: OwnProps & StateProps) => {\n  const { closeGiftAuctionInfoModal } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal && giftAuction);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftAuctionInfoModal();\n  });\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div className={styles.iconWrapper}>\n          <Icon name=\"auction-filled\" className={styles.icon} />\n        </div>\n        <div className={styles.title}>\n          {lang('GiftAuctionInfoTitle')}\n        </div>\n        <div className={styles.subtitle}>\n          {lang('GiftAuctionInfoSubtitle')}\n        </div>\n      </div>\n    );\n  }, [lang]);\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          iconName=\"understood\"\n          iconClassName={styles.understoodIcon}\n          onClick={handleClose}\n        >\n          {lang('ButtonUnderstood')}\n        </Button>\n      </div>\n    );\n  }, [lang, isOpen, handleClose]);\n\n  const listItemData = useMemo(() => {\n    const count = giftAuction?.gift.giftsPerRound || 0;\n    return [\n      ['auction-drop', lang('GiftAuctionInfoTopBiddersTitle', { count }, { pluralValue: count }),\n        lang('GiftAuctionInfoTopBiddersSubtitle', { count }, { pluralValue: count })],\n      ['auction-next-round', lang('GiftAuctionInfoBidCarryoverTitle'),\n        lang('GiftAuctionInfoBidCarryoverSubtitle', { count })],\n      ['stars-refund', lang('GiftAuctionInfoMissedBiddersTitle'),\n        lang('GiftAuctionInfoMissedBiddersSubtitle')],\n    ] satisfies TableAboutData;\n  }, [lang, giftAuction]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionInfoModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionInfoModal?.auctionGiftId;\n    return {\n      giftAuction: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"GiftAuctionModal-module__modal\",\"modalContent\":\"GiftAuctionModal-module__modalContent\",\"header\":\"GiftAuctionModal-module__header\",\"title\":\"GiftAuctionModal-module__title\",\"description\":\"GiftAuctionModal-module__description\",\"finishedBadge\":\"GiftAuctionModal-module__finishedBadge\",\"giftName\":\"GiftAuctionModal-module__giftName\",\"footer\":\"GiftAuctionModal-module__footer\",\"itemsBoughtLink\":\"GiftAuctionModal-module__itemsBoughtLink\",\"itemsBoughtSticker\":\"GiftAuctionModal-module__itemsBoughtSticker\",\"footerButton\":\"GiftAuctionModal-module__footerButton\",\"buttonSubtitle\":\"GiftAuctionModal-module__buttonSubtitle\",\"starIcon\":\"GiftAuctionModal-module__starIcon\",\"learnMoreLink\":\"GiftAuctionModal-module__learnMoreLink\"};","import {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftAuctionState } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TME_LINK_PREFIX } from '../../../../config';\nimport { selectTabState } from '../../../../global/selectors';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatCountdown, formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { HOUR } from '../../../../util/dates/units';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getServerTime } from '../../../../util/serverTime';\nimport {\n  getRandomGiftPreviewAttributes, getStickerFromGift, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport Link from '../../../ui/Link';\nimport MenuItem from '../../../ui/MenuItem';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport GiftItemStar from '../GiftItemStar';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftAuctionModal.module.scss';\n\nconst TEXT_TIMER_THRESHOLD = 48 * HOUR;\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nexport type OwnProps = {\n  modal: TabState['giftAuctionModal'];\n};\n\ntype StateProps = {\n  auctionState?: ApiStarGiftAuctionState;\n};\n\nconst GiftAuctionModal = ({ modal, auctionState }: OwnProps & StateProps) => {\n  const {\n    closeGiftAuctionModal,\n    setGiftModalSelectedGift,\n    openGiftAuctionInfoModal,\n    openGiftAuctionAcquiredModal,\n    openAboutStarGiftModal,\n    showNotification,\n    openChatWithDraft,\n    openUrl,\n    openGiftInMarket,\n  } = getActions();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingAuctionState = useCurrentOrPrev(auctionState);\n\n  const gift = renderingAuctionState?.gift;\n  const state = renderingAuctionState?.state;\n  const userState = renderingAuctionState?.userState;\n  const isFinished = state?.type === 'finished';\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n  const shouldUseUniqueHeader = Boolean(gift && state && previewAttributes);\n\n  const uniqueHeaderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen) {\n      if (renderingModal?.sampleAttributes) {\n        updatePreviewAttributes();\n      } else {\n        setPreviewAttributes(undefined);\n      }\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const handleClose = useLastCallback(() => closeGiftAuctionModal());\n\n  const handleLearnMoreClick = useLastCallback(() => {\n    if (!gift) return;\n    openGiftAuctionInfoModal({ auctionGiftId: gift.id });\n  });\n\n  const handleLearnMoreAboutGiftsClick = useLastCallback(() => {\n    openAboutStarGiftModal({});\n  });\n\n  const handleItemsBoughtClick = useLastCallback(() => {\n    if (!gift) return;\n    const giftSticker = getStickerFromGift(gift);\n    openGiftAuctionAcquiredModal({ giftId: gift.id, giftTitle: gift.title, giftSticker });\n  });\n\n  const handleJoinClick = useLastCallback(() => {\n    if (!gift) return;\n    closeGiftAuctionModal({ shouldKeepAuction: true });\n    setGiftModalSelectedGift({ gift });\n  });\n\n  const auctionLink = useMemo(() => {\n    if (!gift?.auctionSlug) return undefined;\n    return `${TME_LINK_PREFIX}auction/${gift.auctionSlug}`;\n  }, [gift]);\n\n  const handleCopyLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    copyTextToClipboard(auctionLink);\n    showNotification({\n      message: lang('LinkCopied'),\n    });\n  });\n\n  const handleShareLink = useLastCallback(() => {\n    if (!auctionLink) return;\n    openChatWithDraft({ text: { text: auctionLink } });\n  });\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (state?.type === 'finished' && state.fragmentListedUrl) {\n      openUrl({ url: state.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (!gift) return;\n    handleClose();\n    openGiftInMarket({ gift });\n  });\n\n  const uniqueHeader = useMemo(() => {\n    if (!shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift!.title || lang('StarGift');\n    const badge = isFinished ? lang('GiftAuctionEnded') : lang('GiftAuctionInfoTitle');\n    const subtitle = (\n      <Link className={styles.learnMoreLink} isPrimary onClick={handleLearnMoreAboutGiftsClick}>\n        {lang('GiftAuctionLearnMoreAboutGifts')}\n      </Link>\n    );\n\n    return (\n      <div ref={uniqueHeaderRef}>\n        <UniqueGiftHeader\n          modelAttribute={previewAttributes!.model}\n          backdropAttribute={previewAttributes!.backdrop}\n          patternAttribute={previewAttributes!.pattern}\n          title={giftTitle}\n          badge={badge}\n          subtitle={subtitle}\n        />\n      </div>\n    );\n  }, [shouldUseUniqueHeader, gift, isFinished, lang, previewAttributes, handleLearnMoreAboutGiftsClick]);\n\n  const regularHeader = useMemo(() => {\n    if (!gift || !state || shouldUseUniqueHeader) {\n      return undefined;\n    }\n\n    const giftTitle = gift.title || lang('StarGift');\n    const giftsPerRound = gift.giftsPerRound || 0;\n\n    return (\n      <div className={styles.header}>\n        <GiftItemStar gift={gift} hideBadge noClickable />\n        <h1 className={styles.title}>\n          {giftTitle}\n        </h1>\n        {isFinished ? (\n          <span className={styles.finishedBadge}>{lang('GiftAuctionEnded')}</span>\n        ) : (\n          <p className={styles.description}>\n            {lang('GiftAuctionTopBidders', {\n              count: giftsPerRound,\n              gift: <span className={styles.giftName}>{giftTitle}</span>,\n              link: <Link isPrimary onClick={handleLearnMoreClick}>{lang('GiftAuctionLearnMore')}</Link>,\n            }, { pluralValue: giftsPerRound, withNodes: true, withMarkdown: true })}\n          </p>\n        )}\n      </div>\n    );\n  }, [gift, state, shouldUseUniqueHeader, isFinished, lang, handleLearnMoreClick]);\n\n  const header = uniqueHeader || regularHeader;\n\n  const modalData = useMemo(() => {\n    if (!gift || !state || !userState) {\n      return undefined;\n    }\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftAuctionStarted'),\n      formatDateTimeToString(state.startDate * 1000, lang.code, true),\n    ]);\n\n    tableData.push([\n      lang('GiftAuctionEnds'),\n      formatDateTimeToString(state.endDate * 1000, lang.code, true),\n    ]);\n\n    if (gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: lang.number(gift.availabilityTotal),\n        }, { pluralValue: gift.availabilityRemains || 0 }),\n      ]);\n    }\n\n    if (state.type === 'active') {\n      tableData.push([\n        lang('GiftAuctionCurrentRound'),\n        lang('GiftAuctionRoundValue', {\n          current: lang.number(state.currentRound),\n          total: lang.number(state.totalRounds),\n        }),\n      ]);\n    }\n\n    if (isFinished) {\n      tableData.push([\n        lang('GiftAuctionAveragePrice'),\n        formatStarsAsIcon(lang, state.averagePrice, { className: styles.starIcon }),\n      ]);\n    }\n\n    const acquiredCount = userState.acquiredCount;\n    const giftSticker = getStickerFromGift(gift);\n    const auctionTimeLeft = state.endDate - getServerTime();\n    const shouldUseTextTimer = auctionTimeLeft > 0 && auctionTimeLeft < TEXT_TIMER_THRESHOLD;\n\n    const canBuyOnFragment = state.type === 'finished'\n      && Boolean(state.fragmentListedUrl && state.fragmentListedCount);\n    const canBuyOnTelegram = state.type === 'finished' && Boolean(state.listedCount);\n\n    const footer = (\n      <div className={styles.footer}>\n        {acquiredCount > 0 && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleItemsBoughtClick}>\n            {lang('GiftAuctionItemsBought', {\n              count: acquiredCount,\n              gift: giftSticker && (\n                <AnimatedIconFromSticker\n                  className={styles.itemsBoughtSticker}\n                  sticker={giftSticker}\n                  size={20}\n                  play={false}\n                />\n              ),\n            }, { pluralValue: acquiredCount, withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnFragment && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenFragment}>\n            {lang('GiftAuctionForSaleOnFragment', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.fragmentListedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.fragmentListedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        {canBuyOnTelegram && (\n          <Link className={styles.itemsBoughtLink} isPrimary onClick={handleOpenTelegramMarket}>\n            {lang('GiftAuctionForSaleOnTelegram', {\n              count: giftSticker ? (\n                <>\n                  {lang.number(state.listedCount!)}\n                  <AnimatedIconFromSticker\n                    className={styles.itemsBoughtSticker}\n                    sticker={giftSticker}\n                    size={20}\n                    play={false}\n                  />\n                </>\n              ) : lang.number(state.listedCount!),\n            }, { withNodes: true })}\n          </Link>\n        )}\n        <Button\n          noForcedUpperCase\n          className={styles.footerButton}\n          onClick={isFinished ? handleClose : handleJoinClick}\n        >\n          {isFinished ? lang('OK') : (\n            <div>\n              <div>\n                {lang('GiftAuctionJoin')}\n              </div>\n              {auctionTimeLeft > 0 && (\n                <div className={styles.buttonSubtitle}>\n                  {lang('GiftAuctionTimeLeft', {\n                    time: shouldUseTextTimer\n                      ? <TextTimer endsAt={state.endDate} />\n                      : formatCountdown(lang, auctionTimeLeft),\n                  }, { withNodes: true })}\n                </div>\n              )}\n            </div>\n          )}\n        </Button>\n      </div>\n    );\n\n    return {\n      tableData,\n      footer,\n    };\n  }, [gift, state, userState, isFinished, lang, handleJoinClick, handleItemsBoughtClick, handleClose,\n    handleOpenFragment, handleOpenTelegramMarket]);\n\n  const moreMenuItems = useMemo(() => {\n    if (!shouldUseUniqueHeader) return undefined;\n\n    return (\n      <>\n        <MenuItem icon=\"info\" onClick={handleLearnMoreClick}>\n          {lang('GiftAuctionLearnMoreMenuItem')}\n        </MenuItem>\n        <MenuItem icon=\"link-badge\" onClick={handleCopyLink}>\n          {lang('CopyLink')}\n        </MenuItem>\n        <MenuItem icon=\"forward\" onClick={handleShareLink}>\n          {lang('Share')}\n        </MenuItem>\n      </>\n    );\n  }, [shouldUseUniqueHeader, lang, handleLearnMoreClick, handleCopyLink, handleShareLink]);\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      header={header}\n      footer={modalData?.footer}\n      tableData={modalData?.tableData}\n      className={styles.modal}\n      contentClassName={styles.modalContent}\n      closeButtonColor={shouldUseUniqueHeader ? 'translucent-white' : undefined}\n      moreMenuItems={moreMenuItems}\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { giftAuctionModal } = selectTabState(global);\n    const auctionGiftId = giftAuctionModal?.auctionGiftId;\n    return {\n      auctionState: auctionGiftId\n        ? global.giftAuctionByGiftId?.[auctionGiftId] : undefined,\n    };\n  },\n)(GiftAuctionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"GiftInfoModal-module__modal\",\"checkBox\":\"GiftInfoModal-module__checkBox\",\"checkBoxDescription\":\"GiftInfoModal-module__checkBoxDescription\",\"upgradeIcon\":\"GiftInfoModal-module__upgradeIcon\",\"descriptionConfirm\":\"GiftInfoModal-module__descriptionConfirm\",\"titleConfirm\":\"GiftInfoModal-module__titleConfirm\",\"header\":\"GiftInfoModal-module__header\",\"title\":\"GiftInfoModal-module__title\",\"description\":\"GiftInfoModal-module__description\",\"warningDescription\":\"GiftInfoModal-module__warningDescription\",\"modalContent\":\"GiftInfoModal-module__modalContent\",\"moreMenuButton\":\"GiftInfoModal-module__moreMenuButton\",\"closeButton\":\"GiftInfoModal-module__closeButton\",\"giftResalePriceContainer\":\"GiftInfoModal-module__giftResalePriceContainer\",\"starAmountIcon\":\"GiftInfoModal-module__starAmountIcon\",\"giftResalePriceStar\":\"GiftInfoModal-module__giftResalePriceStar\",\"headerButton\":\"GiftInfoModal-module__headerButton\",\"left\":\"GiftInfoModal-module__left\",\"right\":\"GiftInfoModal-module__right\",\"footer\":\"GiftInfoModal-module__footer\",\"footerDescription\":\"GiftInfoModal-module__footerDescription\",\"footerHint\":\"GiftInfoModal-module__footerHint\",\"buyButton\":\"GiftInfoModal-module__buyButton\",\"unknown\":\"GiftInfoModal-module__unknown\",\"giftValue\":\"GiftInfoModal-module__giftValue\",\"uniqueValue\":\"GiftInfoModal-module__uniqueValue\",\"uniqueAttribute\":\"GiftInfoModal-module__uniqueAttribute\",\"attributeName\":\"GiftInfoModal-module__attributeName\",\"uniqueGift\":\"GiftInfoModal-module__uniqueGift\",\"modalHeader\":\"GiftInfoModal-module__modalHeader\",\"modalCloseButton\":\"GiftInfoModal-module__modalCloseButton\",\"ownerAddress\":\"GiftInfoModal-module__ownerAddress\",\"copyIcon\":\"GiftInfoModal-module__copyIcon\",\"messageContainer\":\"GiftInfoModal-module__messageContainer\",\"removeMessageButton\":\"GiftInfoModal-module__removeMessageButton\"};","import { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../../global/helpers/peers';\nimport { getMainUsername } from '../../../../global/helpers/users';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  releasedByPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n  recipientPeer?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  releasedByPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n  recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n    closeGiftModal,\n    openGiftInfoValueModal,\n    updateResaleGiftsFilter,\n    openGiftInMarket,\n    openGiftDescriptionRemoveModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n  const [shouldPayInTon, setShouldPayInTon] = useState<boolean>(false);\n\n  const uniqueGiftHeaderRef = useRef<HTMLDivElement>();\n\n  const handleSymbolClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.pattern) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [],\n        patternAttributes: [{\n          type: 'pattern',\n          documentId: giftAttributes.pattern.sticker.id,\n        }],\n      },\n    });\n  });\n\n  const handleBackdropClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.backdrop) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [],\n        backdropAttributes: [{\n          type: 'backdrop',\n          backdropId: giftAttributes.backdrop.backdropId,\n        }],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const handleModelClick = useLastCallback(() => {\n    if (!gift || !giftAttributes?.model) return;\n\n    openGiftInMarket({ gift });\n    updateResaleGiftsFilter({\n      filter: {\n        sortType: 'byDate',\n        modelAttributes: [{\n          type: 'model',\n          documentId: giftAttributes.model.sticker.id,\n        }],\n        backdropAttributes: [],\n        patternAttributes: [],\n      },\n    });\n  });\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const giftSubtitle = useMemo(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return undefined;\n\n    if (releasedByPeer) {\n      const releasedByUsername = `@${getMainUsername(releasedByPeer)}`;\n      const ownerTitle = releasedByUsername || getPeerTitle(lang, releasedByPeer);\n      const fallbackText = isApiPeerUser(releasedByPeer)\n        ? lang('ActionFallbackUser')\n        : lang('ActionFallbackChannel');\n\n      return lang('GiftInfoCollectibleBy', {\n        number: gift.number, owner: ownerTitle || fallbackText }, {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    return lang('GiftInfoCollectible', { number: gift.number });\n  }, [gift, releasedByPeer, lang]);\n\n  const starGiftUniqueSlug = gift?.type === 'starGiftUnique' ? gift.slug : undefined;\n\n  const selfCollectibleStatus = useMemo(() => {\n    if (!starGiftUniqueSlug) return undefined;\n    return collectibleEmojiStatuses?.find((status) =>\n      status.type === 'collectible' && status.slug === starGiftUniqueSlug);\n  }, [starGiftUniqueSlug, collectibleEmojiStatuses]);\n\n  const isSelfUnique = Boolean(selfCollectibleStatus);\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights\n      : gift?.type === 'starGift'\n        ? renderingTargetPeer?.id === currentUserId\n        : gift?.ownerId === currentUserId || isSelfUnique\n  );\n\n  function getResalePrice(isInTon?: boolean) {\n    if (!isGiftUnique) return undefined;\n    const amounts = gift.resellPrice;\n    if (!amounts) return undefined;\n\n    if (gift?.resaleTonOnly || isInTon) {\n      return amounts.find((amount) => amount.currency === TON_CURRENCY_CODE);\n    }\n\n    return amounts.find((amount) => amount.currency === STARS_CURRENCY_CODE);\n  }\n\n  const resellPrice = getResalePrice();\n  const confirmPrice = getResalePrice(shouldPayInTon);\n  const resellPriceInStars = resellPrice?.currency === TON_CURRENCY_CODE && isGiftUnique\n    ? gift.resellPrice?.find((amount) => amount.currency === STARS_CURRENCY_CODE)\n    : undefined;\n  const canBuyGift = !isSelfUnique && gift?.type === 'starGiftUnique'\n    && gift.ownerId !== currentUserId && Boolean(resellPrice);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleRemoveMessage = useLastCallback(() => {\n    if (!savedGift?.inputGift || !savedGift.dropOriginalDetailsStars || !gift || !giftAttributes) return;\n\n    const { originalDetails } = giftAttributes;\n    if (!originalDetails) return;\n\n    openGiftDescriptionRemoveModal({\n      gift: savedGift,\n      price: savedGift.dropOriginalDetailsStars,\n      details: originalDetails,\n    });\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    const giftOwnerId = renderingTargetPeer?.id;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift, peerId: giftOwnerId });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !getResalePrice()) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    const peer = recipientPeer || currentUser;\n    const price = getResalePrice(shouldPayInTon);\n    if (!peer || !price || gift?.type !== 'starGiftUnique') return;\n    closeConfirmModal();\n    closeGiftModal();\n    buyStarGift({ peerId: peer.id, slug: gift.slug, price });\n  });\n\n  const handleOpenValueModal = useLastCallback(() => {\n    if (!gift || gift.type !== 'starGiftUnique') return;\n\n    openGiftInfoValueModal({\n      gift,\n    });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button className={styles.buyButton} onClick={handleBuyGift}>\n          <div>\n            {lang('ButtonBuyGift', {\n              stars: resellPrice?.currency === TON_CURRENCY_CODE\n                ? formatTonAsIcon(lang, resellPrice.amount, { shouldConvertFromNanos: true })\n                : formatStarsAsIcon(lang, resellPrice?.amount, { asFont: true }),\n            }, { withNodes: true })}\n          </div>\n          {resellPrice?.currency === TON_CURRENCY_CODE && Boolean(resellPriceInStars) && (\n            <div className={styles.footerHint}>\n              {lang('GiftBuyEqualsTo', {\n                stars: formatStarsAsIcon(lang, resellPriceInStars.amount, { asFont: true }),\n              }, { withNodes: true })}\n            </div>\n          )}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.canUpgrade && !savedGift.upgradeMsgId) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftInfoUpgrade')}\n        </Button>\n      );\n    }\n\n    if (savedGift?.prepaidUpgradeHash) {\n      return (\n        <Button\n          isShiny\n          onClick={handleOpenUpgradeModal}\n          iconName=\"arrow-down-circle\"\n          iconClassName={styles.upgradeIcon}\n          iconAlignment=\"end\"\n        >\n          {lang('GiftAnUpgradeButton')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const isWarningDescription = savedGift?.isRefunded || (!savedGift && gift?.type === 'starGift');\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n      if (savedGift.isRefunded) return lang('GiftInfoDescriptionRefunded');\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (canManage && savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n        return lang('GiftInfoDescriptionUpgrade2');\n      }\n      if (savedGift.canUpgrade && canManage) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n\n        <Button\n          className={styles.closeButton}\n          round\n          color=\"translucent-white\"\n          size=\"tiny\"\n          iconName=\"close\"\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        />\n\n        {Boolean(resellPrice?.amount) && (\n          <div className={styles.giftResalePriceContainer}>\n            {resellPrice.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, resellPrice.amount, {\n                className: styles.giftResalePriceStar,\n                shouldConvertFromNanos: true,\n              })\n              : formatStarsAsIcon(lang, resellPrice.amount, {\n                asFont: true,\n                className: styles.giftResalePriceStar,\n              })}\n          </div>\n        )}\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div ref={uniqueGiftHeaderRef} className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={giftSubtitle}\n          subtitlePeer={releasedByPeer}\n          showManageButtons={canManage}\n          savedGift={savedGift}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {Boolean(description) && (\n          <p className={buildClassName(styles.description, isWarningDescription && styles.warningDescription)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const ownerPeer = ownerId ? selectPeer(getGlobal(), ownerId) : undefined;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else if (ownerPeer || ownerName) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleModelClick}\n            >\n              {model.name}\n            </span>\n            <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleBackdropClick}\n            >\n              {backdrop.name}\n            </span>\n            <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            <span\n              className={styles.attributeName}\n              onClick={handleSymbolClick}\n            >\n              {pattern.name}\n            </span>\n            <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (gift.valueAmount && gift.valueCurrency) {\n        const formattedValue = formatCurrencyAsString(gift.valueAmount, gift.valueCurrency, lang.code);\n        tableData.push([\n          lang('GiftInfoValue'),\n          <span className={styles.uniqueValue}>\n            {lang('GiftInfoValueAmount', { amount: formattedValue })}\n            <BadgeButton onClick={handleOpenValueModal}>\n              {lang('GiftInfoValueLinkMore')}\n            </BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (originalDetails) {\n        const { recipientId, senderId } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const text = renderGiftOriginalInfo({\n          originalDetails, recipient, sender, onOpenChat: openChat, lang,\n        });\n\n        tableData.push([\n          undefined,\n          <div className={styles.messageContainer}>\n            <div>\n              {text}\n            </div>\n            {Boolean(savedGift?.dropOriginalDetailsStars) && (\n              <Button\n                round\n                className={styles.removeMessageButton}\n                size=\"smaller\"\n                color=\"translucent\"\n                ariaLabel=\"Delete original details\"\n                onClick={handleRemoveMessage}\n                iconName=\"delete\"\n              />\n            )}\n          </div>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')} />,\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    isGiftUnique, saleDateInfo,\n    canBuyGift, giftOwnerTitle, resellPrice, giftSubtitle,\n    releasedByPeer, handleSymbolClick, handleBackdropClick, handleModelClick,\n  ]);\n\n  const moreMenuItems = typeGift && (\n    <GiftMenuItems\n      peerId={renderingModal!.peerId!}\n      gift={typeGift}\n      canManage={canManage}\n      collectibleEmojiStatuses={collectibleEmojiStatuses}\n      currentUserEmojiStatus={currentUserEmojiStatus}\n    />\n  );\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        contentClassName={styles.modalContent}\n        closeButtonColor={isGiftUnique ? 'translucent-white' : undefined}\n        moreMenuItems={moreMenuItems}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        currencyInBalanceBar={confirmPrice?.currency}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && Boolean(confirmPrice) && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: confirmPrice?.currency === TON_CURRENCY_CODE\n              ? formatTonAsIcon(lang, confirmPrice.amount, { shouldConvertFromNanos: true })\n              : formatStarsAsIcon(lang, confirmPrice.amount, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          {uniqueGift.resaleTonOnly\n            && (\n              <div className={styles.descriptionConfirm}>\n                {lang('ConfirmBuyGiftForTonDescription')}\n              </div>\n            )}\n          <GiftTransferPreview\n            peer={recipientPeer || currentUser}\n            gift={uniqueGift}\n          />\n          <div className={styles.titleConfirm}>\n            {lang('TitleConfirmPayment')}\n          </div>\n          {!recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyForPeerConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: confirmPrice?.currency === TON_CURRENCY_CODE\n                    ? formatTonAsText(lang, confirmPrice.amount, true)\n                    : formatStarsAsText(lang, confirmPrice.amount),\n                  peer: getPeerTitle(lang, recipientPeer),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {!uniqueGift.resaleTonOnly && (\n            <>\n              <Checkbox\n                className={styles.checkBox}\n                label={lang('LabelPayInTON')}\n                checked={shouldPayInTon}\n                onCheck={setShouldPayInTon}\n              />\n\n              <div className={styles.checkBoxDescription}>\n                {lang('DescriptionPayInTON')}\n              </div>\n            </>\n          )}\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const recipientPeer = modal?.recipientId && currentUserId !== modal.recipientId\n      ? selectPeer(global, modal.recipientId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    const gift = isSavedGift ? typeGift.gift : typeGift;\n    const releasedByPeerId = gift?.type === 'starGiftUnique' && gift.releasedByPeerId;\n    const releasedByPeer = releasedByPeerId ? selectPeer(global, releasedByPeerId) : undefined;\n\n    return {\n      fromPeer,\n      targetPeer,\n      releasedByPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n      recipientPeer,\n    };\n  },\n)(GiftInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftLockedModal-module__header\",\"message\":\"GiftLockedModal-module__message\"};","import { memo, useCallback } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatShortDuration } from '../../../../util/dates/dateFormat';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftLockedModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['lockedGiftModal'];\n};\n\nconst GiftLockedModal = ({\n  modal,\n}: OwnProps) => {\n  const { closeLockedGiftModal } = getActions();\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => {\n    closeLockedGiftModal();\n  });\n\n  const getMessageText = useCallback(() => {\n    if (!modal) return '';\n\n    if (modal.untilDate) {\n      const timeRemaining = modal.untilDate ? modal.untilDate - getServerTime() : 0;\n      return lang('GiftLockedMessage', {\n        relativeDate: formatShortDuration(lang, timeRemaining),\n      },\n      {\n        withNodes: true,\n        withMarkdown: true,\n      });\n    }\n\n    if (modal.reason) {\n      return renderTextWithEntities(modal.reason);\n    }\n\n    return lang('TitleGiftLocked');\n  }, [modal, lang]);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      className=\"narrow\"\n      onClose={handleClose}\n      title={lang('TitleGiftLocked')}\n      headerClassName={styles.header}\n    >\n      <p className={styles.message}>\n        {getMessageText()}\n      </p>\n      <Button\n        onClick={handleClose}\n      >\n        {lang('OK')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(GiftLockedModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"confirmText\":\"GiftDescriptionRemoveModal-module__confirmText\",\"giftDescription\":\"GiftDescriptionRemoveModal-module__giftDescription\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { renderGiftOriginalInfo } from '../../../common/helpers/giftOriginalInfo';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nimport styles from './GiftDescriptionRemoveModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftDescriptionRemoveModal'];\n};\n\ntype StateProps = {\n  senderPeer?: ApiPeer;\n  recipientPeer?: ApiPeer;\n};\n\nconst GiftDescriptionRemoveModal = ({\n  modal, senderPeer, recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftDescriptionRemoveModal, removeGiftDescription, openChat,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSenderPeer = useCurrentOrPrev(senderPeer);\n  const renderingRecipientPeer = useCurrentOrPrev(recipientPeer);\n\n  const openChatHandler = useLastCallback((id: string) => {\n    closeGiftDescriptionRemoveModal();\n    openChat({ id });\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.price) return;\n\n    removeGiftDescription({\n      gift: renderingModal.gift.inputGift,\n      price: renderingModal.price,\n    });\n  });\n\n  if (!renderingModal || !renderingRecipientPeer) return undefined;\n\n  const { price, details } = renderingModal;\n\n  const description = renderGiftOriginalInfo({\n    originalDetails: details, recipient: renderingRecipientPeer,\n    sender: renderingSenderPeer, onOpenChat: openChatHandler, lang,\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('RemoveGiftDescriptionTitle')}\n      onClose={closeGiftDescriptionRemoveModal}\n      confirmLabel={lang('RemoveGiftDescriptionButton', {\n        amount: formatStarsAsIcon(lang, price, { asFont: true }),\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <div className={styles.confirmText}>{lang('RemoveGiftDescriptionConfirmText')}</div>\n      {Boolean(description) && (\n        <div className={styles.giftDescription}>\n          {description}\n        </div>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const senderPeer = modal?.details.senderId ? selectPeer(global, modal.details.senderId) : undefined;\n    const recipientPeer = modal?.details.recipientId ? selectPeer(global, modal.details.recipientId) : undefined;\n\n    return {\n      senderPeer,\n      recipientPeer,\n    };\n  })(GiftDescriptionRemoveModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"GiftOfferAcceptModal-module__description\",\"receiveText\":\"GiftOfferAcceptModal-module__receiveText\",\"table\":\"GiftOfferAcceptModal-module__table\",\"attributeValue\":\"GiftOfferAcceptModal-module__attributeValue\",\"warning\":\"GiftOfferAcceptModal-module__warning\",\"hint\":\"GiftOfferAcceptModal-module__hint\",\"success\":\"GiftOfferAcceptModal-module__success\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { TON_CURRENCY_CODE } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n  selectStarsGiftResaleCommission,\n  selectTonGiftResaleCommission,\n} from '../../../../global/selectors';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport {\n  formatCurrencyAmountAsText, formatStarsAsIcon, formatStarsAsText, formatTonAsIcon, formatTonAsText,\n} from '../../../../util/localization/format';\nimport { round } from '../../../../util/math';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport TableInfo, { type TableData } from '../../common/TableInfo';\n\nimport styles from './GiftOfferAcceptModal.module.scss';\n\nconst PRICE_WARNING_THRESHOLD_PERCENT = 10;\n\nexport type OwnProps = {\n  modal: TabState['giftOfferAcceptModal'];\n};\n\ntype StateProps = {\n  recipientPeer?: ApiPeer;\n  starsCommission?: number;\n  tonCommission?: number;\n  starsUsdRate?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftOfferAcceptModal = ({\n  modal, recipientPeer, starsCommission, tonCommission, starsUsdRate, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftOfferAcceptModal, acceptStarGiftOffer,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingBuyerPeer = useCurrentOrPrev(recipientPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal) return;\n\n    acceptStarGiftOffer({ messageId: renderingModal.messageId });\n    closeGiftOfferAcceptModal();\n  });\n\n  const giftAttributes = useMemo(() => {\n    return renderingModal?.gift && getGiftAttributes(renderingModal.gift);\n  }, [renderingModal?.gift]);\n\n  const isPriceInTon = renderingModal?.price.currency === TON_CURRENCY_CODE;\n  const commission = isPriceInTon ? tonCommission : starsCommission;\n  const priceAmount = renderingModal?.price.amount || 0;\n  const receiveAmount = commission\n    ? (round(priceAmount * commission, isPriceInTon ? 2 : 0))\n    : priceAmount;\n\n  const tableData: TableData = useMemo(() => {\n    if (!giftAttributes) return [];\n\n    const { model, backdrop, pattern } = giftAttributes;\n    const data: TableData = [];\n\n    if (model) {\n      data.push([\n        lang('GiftAttributeModel'),\n        <span className={styles.attributeValue}>\n          <span>{model.name}</span>\n          <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    if (backdrop) {\n      data.push([\n        lang('GiftAttributeBackdrop'),\n        <span className={styles.attributeValue}>\n          <span>{backdrop.name}</span>\n          <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    if (pattern) {\n      data.push([\n        lang('GiftAttributeSymbol'),\n        <span className={styles.attributeValue}>\n          <span>{pattern.name}</span>\n          <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n        </span>,\n      ]);\n    }\n\n    const gift = renderingModal?.gift;\n    if (gift?.valueAmount && gift.valueCurrency) {\n      const formattedValue = formatCurrencyAsString(gift.valueAmount, gift.valueCurrency, lang.code);\n      data.push([\n        lang('GiftInfoValue'),\n        lang('GiftInfoValueAmount', { amount: formattedValue }),\n      ]);\n    }\n\n    return data;\n  }, [giftAttributes, lang, renderingModal?.gift]);\n\n  const priceWarning = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift } = renderingModal;\n    const { valueUsdAmount } = gift;\n    if (!valueUsdAmount || valueUsdAmount <= 0 || receiveAmount <= 0) return undefined;\n\n    const avgValueUsd = valueUsdAmount / 100;\n\n    let receiveValueUsd: number;\n    if (isPriceInTon) {\n      if (!tonUsdRate) return undefined;\n      receiveValueUsd = convertTonToUsd(receiveAmount, tonUsdRate, true) / 100;\n    } else {\n      if (!starsUsdRate) return undefined;\n      receiveValueUsd = receiveAmount * starsUsdRate / 100;\n    }\n\n    const isLower = avgValueUsd >= receiveValueUsd;\n    const percent = isLower\n      ? (1 - receiveValueUsd / avgValueUsd) * 100\n      : (receiveValueUsd / avgValueUsd - 1) * 100;\n\n    if (percent <= PRICE_WARNING_THRESHOLD_PERCENT) return undefined;\n\n    return { percent, isLow: isLower };\n  }, [renderingModal, receiveAmount, isPriceInTon, tonUsdRate, starsUsdRate]);\n\n  if (!renderingModal || !renderingBuyerPeer) return undefined;\n\n  const { gift, price } = renderingModal;\n  const giftName = lang('GiftUnique', { title: gift.title, number: gift.number });\n  const buyerName = getPeerTitle(lang, renderingBuyerPeer);\n\n  const formattedPrice = formatCurrencyAmountAsText(lang, price);\n  const formattedReceiveAmountAsText = isPriceInTon\n    ? formatTonAsText(lang, receiveAmount, true)\n    : formatStarsAsText(lang, receiveAmount);\n  const formattedReceiveAmountAsIcon = isPriceInTon\n    ? formatTonAsIcon(lang, receiveAmount, { shouldConvertFromNanos: true })\n    : formatStarsAsIcon(lang, receiveAmount, { asFont: true });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      title={lang('GiftOfferAcceptTitle')}\n      onClose={closeGiftOfferAcceptModal}\n      confirmLabel={lang('GiftOfferAcceptButton', {\n        amount: formattedReceiveAmountAsIcon,\n      }, { withNodes: true })}\n      confirmHandler={handleConfirm}\n    >\n      <GiftTransferPreview\n        peer={renderingBuyerPeer}\n        gift={gift}\n      />\n      <p className={styles.description}>\n        {lang('GiftOfferAcceptText', {\n          gift: giftName,\n          user: buyerName,\n          price: formattedPrice,\n        }, { withNodes: true, withMarkdown: true })}\n      </p>\n      <p className={styles.receiveText}>\n        {lang('GiftOfferAcceptReceive', {\n          amount: formattedReceiveAmountAsText,\n        }, { withNodes: true, withMarkdown: true })}\n      </p>\n      {Boolean(tableData.length) && (\n        <TableInfo tableData={tableData} className={styles.table} />\n      )}\n      {priceWarning && (\n        <p className={priceWarning.isLow ? styles.warning : styles.success}>\n          {lang(priceWarning.isLow ? 'GiftOfferPriceLow' : 'GiftOfferPriceHigh', {\n            percent: formatPercent(priceWarning.percent, 0),\n            gift: gift.title,\n          }, { withNodes: true, withMarkdown: true })}\n        </p>\n      )}\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const recipientPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const starsCommission = selectStarsGiftResaleCommission(global);\n    const tonCommission = selectTonGiftResaleCommission(global);\n\n    const starsUsdSellRateX1000 = global.appConfig?.starsUsdSellRateX1000;\n    const starsUsdRate = starsUsdSellRateX1000 ? starsUsdSellRateX1000 / 1000 : undefined;\n    const tonUsdRate = global.appConfig?.tonUsdRate;\n\n    return {\n      recipientPeer,\n      starsCommission,\n      tonCommission,\n      starsUsdRate,\n      tonUsdRate,\n    };\n  })(GiftOfferAcceptModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftRecipientPicker-module__root\",\"picker\":\"GiftRecipientPicker-module__picker\"};","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","// extracted by mini-css-extract-plugin\nexport default {\"checkBoxDescription\":\"GiftResalePriceComposerModal-module__checkBoxDescription\",\"inputPriceDescription\":\"GiftResalePriceComposerModal-module__inputPriceDescription\",\"checkBox\":\"GiftResalePriceComposerModal-module__checkBox\",\"descriptionPrice\":\"GiftResalePriceComposerModal-module__descriptionPrice\",\"inputPrice\":\"GiftResalePriceComposerModal-module__inputPrice\"};","import {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport {\n  selectStarsGiftResaleCommission,\n  selectTonGiftResaleCommission,\n} from '../../../../global/selectors';\nimport { convertTonFromNanos, convertTonToNanos } from '../../../../util/formatCurrency';\nimport { convertTonToUsd, formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText, formatTonAsIcon,\n  formatTonAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsCommission?: number;\n  starsResaleAmountMin: number;\n  starsResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n  tonCommission?: number;\n  tonResaleAmountMin: number;\n  tonResaleAmountMax?: number;\n  tonUsdRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsCommission,\n  starsResaleAmountMin, starsResaleAmountMax, starsUsdWithdrawRate,\n  tonCommission, tonResaleAmountMin, tonResaleAmountMax, tonUsdRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n  const [isPriceInTon, setIsPriceInTon] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const maxAmount = isPriceInTon ? tonResaleAmountMax : starsResaleAmountMax;\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : maxAmount ? Math.min(number, maxAmount) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice(\n      {\n        gift: savedGift.inputGift,\n        price: {\n          currency: isPriceInTon ? 'TON' : 'XTR',\n          amount: isPriceInTon ? convertTonToNanos(price) : price,\n          nanos: 0,\n        },\n      });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = isPriceInTon ? tonCommission : starsCommission;\n  const minAmount = isPriceInTon ? tonResaleAmountMin : starsResaleAmountMin;\n  const isPriceCorrect = hasPrice && price >= minAmount;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={isPriceInTon ? lang('PriceInTON') : lang('PriceInStars')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={isPriceInTon ? lang('EnterPriceInTon') : lang('EnterPriceInStars')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled={!isPriceInTon}\n        />\n      </div>\n\n      <div className={styles.inputPriceDescription}>\n        <span>\n          {!isPriceCorrect && Boolean(commission) && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: isPriceInTon ? formatTonAsText(lang, minAmount) : formatStarsAsText(lang, minAmount),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && (() => {\n            const priceWithCommission = commission ? Number((price * commission).toFixed()) : price;\n            return lang('DescriptionComposerGiftResalePrice',\n              {\n                stars: isPriceInTon\n                  ? formatTonAsText(lang, priceWithCommission)\n                  : formatStarsAsText(lang, priceWithCommission),\n              },\n              {\n                withMarkdown: true,\n                withNodes: true,\n              });\n          })()}\n        </span>\n\n        {isPriceCorrect && Boolean(isPriceInTon ? tonUsdRate : starsUsdWithdrawRate) && (\n          <span className={styles.descriptionPrice}>\n            {` ${formatCurrencyAsString(\n              isPriceInTon ? convertTonToUsd(price, tonUsdRate!) : price * starsUsdWithdrawRate!,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Checkbox\n        className={styles.checkBox}\n        label={lang('OnlyAcceptTON')}\n        checked={isPriceInTon}\n        onCheck={setIsPriceInTon}\n      />\n\n      <div className={styles.checkBoxDescription}>\n        {lang('OnlyAcceptTONDescription')}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: isPriceInTon ? formatTonAsIcon(lang, price)\n            : formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const starsCommission = selectStarsGiftResaleCommission(global);\n    const starsResaleAmountMin = global.appConfig.starsStargiftResaleAmountMin || 0;\n    const starsResaleAmountMax = global.appConfig.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    const tonCommission = selectTonGiftResaleCommission(global);\n    const tonResaleAmountMin = convertTonFromNanos(global.appConfig.tonStargiftResaleAmountMin || 0);\n    const maxTonFromConfig = global.appConfig.tonStargiftResaleAmountMax;\n    const tonResaleAmountMax = maxTonFromConfig ? convertTonFromNanos(maxTonFromConfig) : undefined;\n\n    const tonUsdRate = global.appConfig.tonUsdRate;\n\n    return {\n      starsCommission,\n      starsResaleAmountMin,\n      starsResaleAmountMax,\n      starsUsdWithdrawRate,\n      tonCommission,\n      tonResaleAmountMin,\n      tonResaleAmountMax,\n      tonUsdRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftStatusInfoModal-module__header\",\"profileBlock\":\"GiftStatusInfoModal-module__profileBlock\",\"radialPattern\":\"GiftStatusInfoModal-module__radialPattern\",\"lockIcon\":\"GiftStatusInfoModal-module__lockIcon\",\"avatar\":\"GiftStatusInfoModal-module__avatar\",\"userTitle\":\"GiftStatusInfoModal-module__userTitle\",\"status\":\"GiftStatusInfoModal-module__status\",\"giftTitle\":\"GiftStatusInfoModal-module__giftTitle\",\"infoDescription\":\"GiftStatusInfoModal-module__infoDescription\",\"footer\":\"GiftStatusInfoModal-module__footer\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useAppLayout from '../../../../hooks/useAppLayout';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst AVATAR_SIZE = 7 * REM;\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const { isMobile } = useAppLayout();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternIcon={patternIcon.customEmoji}\n        yPosition={6.875 * REM}\n        maxRadius={0.31}\n        patternSize={isMobile ? 13 : 15}\n        ovalFactor={1}\n      />\n    );\n  }, [emojiStatus, isOpen, isMobile, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size={AVATAR_SIZE} className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.giftTitle}>\n          {lang('UniqueStatusWearTitle', {\n            gift: mockPeerWithStatus?.emojiStatus?.title,\n          })}\n        </div>\n        <div className={styles.infoDescription}>\n          {lang('UniqueStatusBenefitsDescription')}\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","import { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferConfirmModal'];\n};\n\ntype StateProps = {\n  selectedPeer?: ApiPeer;\n};\n\nconst GiftTransferConfirmModal = ({ modal, selectedPeer }: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferConfirmModal, transferGift, openChat, closeGiftModal, closeGiftTransferModal,\n  } = getActions();\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingSelectedPeer = useCurrentOrPrev(selectedPeer);\n\n  const handleConfirm = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift || !renderingModal.recipientId) return;\n\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingModal.recipientId,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeGiftTransferConfirmModal();\n    openChat({ id: renderingModal.recipientId });\n\n    closeGiftModal();\n    closeGiftTransferModal();\n  });\n\n  if (!renderingModal) return undefined;\n\n  const { gift } = renderingModal;\n  const uniqueGift = gift.gift.type === 'starGiftUnique' ? gift.gift : undefined;\n\n  if (!uniqueGift) return undefined;\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      noDefaultTitle\n      onClose={closeGiftTransferConfirmModal}\n      confirmLabel={gift.transferStars\n        ? lang(\n          'GiftTransferConfirmButton',\n          { amount: formatStarsAsIcon(lang, gift.transferStars, { asFont: true }) },\n          { withNodes: true },\n        ) : lang('GiftTransferConfirmButtonFree')}\n      confirmHandler={handleConfirm}\n    >\n      {renderingSelectedPeer && (\n        <GiftTransferPreview\n          peer={renderingSelectedPeer}\n          gift={uniqueGift}\n        />\n      )}\n      <p>\n        {gift.transferStars\n          ? lang('GiftTransferConfirmDescription', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            amount: formatStarsAsText(lang, gift.transferStars),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftTransferConfirmDescriptionFree', {\n            gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n            peer: getPeerTitle(lang, renderingSelectedPeer!),\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n          })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(\n  withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n    const selectedPeer = modal?.recipientId ? selectPeer(global, modal.recipientId) : undefined;\n\n    return {\n      selectedPeer,\n    };\n  })(GiftTransferConfirmModal),\n);\n","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftTransferModal,\n    openGiftWithdrawModal,\n    openGiftTransferConfirmModal,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const handlePeerSelect = useLastCallback((peerId: string) => {\n    if (!renderingModal?.gift) return;\n\n    openGiftTransferConfirmModal({\n      gift: renderingModal.gift,\n      recipientId: peerId,\n    });\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={handlePeerSelect}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"GiftUpgradeModal-module__footer\",\"footerButton\":\"GiftUpgradeModal-module__footerButton\",\"link\":\"GiftUpgradeModal-module__link\",\"priceDecreaseTimer\":\"GiftUpgradeModal-module__priceDecreaseTimer\"};","import {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiPeer } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport {\n  getRandomGiftPreviewAttributes, type GiftPreviewAttributes,\n  preloadGiftAttributeStickers } from '../../../common/helpers/gifts';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedCounter from '../../../common/AnimatedCounter';\nimport Icon from '../../../common/icons/Icon';\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport Link from '../../../ui/Link';\nimport TextTimer from '../../../ui/TextTimer';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const {\n    closeGiftUpgradeModal,\n    closeGiftInfoModal,\n    upgradeGift,\n    upgradePrepaidGift,\n    openStarGiftPriceDecreaseInfoModal,\n    shiftGiftUpgradeNextPrice,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const isPrepaid = Boolean(renderingModal?.gift?.prepaidUpgradeHash);\n\n  const [previewAttributes, setPreviewAttributes] = useState<GiftPreviewAttributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleTimerEnd = useLastCallback(() => {\n    shiftGiftUpgradeNextPrice();\n  });\n\n  const nextPrice = renderingModal?.nextPrices?.[0];\n  const nextPriceDate = nextPrice?.date;\n  const upgradeStars = renderingModal?.currentUpgradeStars;\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n\n    if (!gift) return;\n\n    if (isPrepaid && gift.prepaidUpgradeHash && renderingRecipient) {\n      if (!upgradeStars) return;\n\n      upgradePrepaidGift({\n        peerId: renderingRecipient.id,\n        hash: gift.prepaidUpgradeHash,\n        stars: upgradeStars,\n      });\n      handleClose();\n      closeGiftInfoModal();\n      return;\n    }\n\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomGiftPreviewAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  const handleOpenPriceInfo = useLastCallback(() => {\n    if (!renderingModal?.prices) return;\n\n    openStarGiftPriceDecreaseInfoModal({\n      prices: renderingModal.prices,\n      currentPrice: upgradeStars || 0,\n      minPrice: renderingModal.minPrice || 0,\n      maxPrice: renderingModal.maxPrice || 0,\n    });\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    preloadGiftAttributeStickers(attributes);\n  }, [renderingModal?.sampleAttributes]);\n\n  const formattedPriceElement = useMemo(() => (upgradeStars ? (\n    <span>\n      <Icon name=\"star\" className=\"star-amount-icon\" />\n      <AnimatedCounter text={lang.number(upgradeStars)} />\n    </span>\n  ) : undefined), [lang, upgradeStars]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const userName = renderingRecipient ? getPeerTitle(lang, renderingRecipient) : lang('ActionFallbackUser');\n\n    const listItemData = (renderingRecipient ? [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftPeerUpgradeUniqueDescription', { user: userName })],\n      ['trade', lang('GiftUpgradeTransferableTitle'),\n        lang('GiftPeerUpgradeTransferableDescription', { user: userName })],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftPeerUpgradeTradeableDescription', { user: userName })],\n    ] : [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ]) satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const hasPriceDecreaseInfo = Boolean(nextPriceDate)\n      && Boolean(renderingModal?.prices?.length)\n      && !gift?.alreadyPaidUpgradeStars;\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            {!isPrepaid && (\n              <Checkbox\n                label={lang('GiftUpgradeKeepDetails')}\n                onCheck={setShouldKeepOriginalDetails}\n                checked={shouldKeepOriginalDetails}\n              />\n            )}\n            <Button className={styles.footerButton} isShiny onClick={handleUpgrade}>\n              <div className={styles.buttonContent}>\n                <div>\n                  {gift.alreadyPaidUpgradeStars\n                    ? lang('GeneralConfirm')\n                    : isPrepaid\n                      ? lang('GiftPayForUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })\n                      : lang('GiftUpgradeButton', { amount: formattedPriceElement }, { withNodes: true })}\n                </div>\n                {hasPriceDecreaseInfo && (\n                  <div className={styles.priceDecreaseTimer}>\n                    {lang('StarGiftPriceDecreaseTimer', {\n                      timer: <TextTimer endsAt={nextPriceDate} onEnd={handleTimerEnd} />,\n                    }, { withNodes: true })}\n                  </div>\n                )}\n              </div>\n            </Button>\n            {hasPriceDecreaseInfo && (\n              <Link\n                className={styles.link}\n                isPrimary\n                onClick={handleOpenPriceInfo}\n              >\n                {lang('StarGiftPriceDecreaseInfoLink')}\n              </Link>\n            )}\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang,\n    renderingRecipient, renderingModal?.gift,\n    shouldKeepOriginalDetails, isPrepaid,\n    renderingModal?.prices?.length,\n    nextPriceDate, formattedPriceElement]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftInfoValueModal-module__header\",\"sticker\":\"GiftInfoValueModal-module__sticker\",\"description\":\"GiftInfoValueModal-module__description\",\"initialPrice\":\"GiftInfoValueModal-module__initialPrice\",\"starIcon\":\"GiftInfoValueModal-module__starIcon\",\"footer\":\"GiftInfoValueModal-module__footer\",\"footerSticker\":\"GiftInfoValueModal-module__footerSticker\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './GiftInfoValueModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoValueModal'];\n};\n\nconst HEADER_STICKER_SIZE = 120;\nconst FOOTER_STICKER_SIZE = 24;\n\nconst GiftInfoValueModal: FC<OwnProps> = ({\n  modal,\n}) => {\n  const { closeGiftInfoValueModal, openUrl, openGiftInMarket } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const handleOpenFragment = useLastCallback(() => {\n    if (modal?.valueInfo.fragmentListedUrl) {\n      openUrl({ url: modal.valueInfo.fragmentListedUrl });\n    }\n  });\n\n  const handleOpenTelegramMarket = useLastCallback(() => {\n    if (modal?.gift) {\n      openGiftInMarket({ gift: modal.gift });\n    }\n  });\n\n  const modalData = useMemo(() => {\n    if (!renderingModal) return undefined;\n\n    const { gift, valueInfo } = renderingModal;\n    const giftAttributes = getGiftAttributes(gift);\n\n    if (!giftAttributes) return undefined;\n\n    const header = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={giftAttributes.model!.sticker}\n          size={HEADER_STICKER_SIZE}\n        />\n        <Button\n          pill\n          size=\"tiny\"\n          fluid\n          nonInteractive\n        >\n          {formatCurrencyAsString(valueInfo.value, valueInfo.currency, lang.code)}\n        </Button>\n        <div className={styles.description}>\n          {lang('GiftValueDescription', { giftName: gift.title }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n        </div>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      lang('GiftValueTitleInitialSale'),\n      formatDateToString(valueInfo.initialSaleDate * 1000, lang.code),\n    ]);\n\n    tableData.push([\n      lang('GiftValueTitleInitialPrice'),\n      <span className={styles.initialPrice}>\n        {formatStarsAsIcon(lang, valueInfo.initialSaleStars, { className: styles.starIcon })}\n        {' (~ '}\n        {formatCurrencyAsString(valueInfo.initialSalePrice, valueInfo.currency, lang.code)}\n        )\n      </span>,\n    ]);\n\n    if (valueInfo.lastSaleDate) {\n      tableData.push([\n        lang('GiftValueTitleLastSale'),\n        formatDateToString(valueInfo.lastSaleDate * 1000, lang.code),\n      ]);\n    }\n\n    if (valueInfo.lastSalePrice) {\n      tableData.push([\n        lang('GiftValueTitleLastPrice'),\n        formatCurrencyAsString(valueInfo.lastSalePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.floorPrice) {\n      tableData.push([\n        lang('GiftValueTitleMinimumPrice'),\n        formatCurrencyAsString(valueInfo.floorPrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    if (valueInfo.averagePrice) {\n      tableData.push([\n        lang('GiftValueTitleAveragePrice'),\n        formatCurrencyAsString(valueInfo.averagePrice, valueInfo.currency, lang.code),\n      ]);\n    }\n\n    const canBuyOnFragment = Boolean(valueInfo.fragmentListedUrl && valueInfo.fragmentListedCount);\n    const canBuyOnTelegram = Boolean(valueInfo.listedCount && valueInfo.listedCount);\n    const hasFooter = canBuyOnFragment || canBuyOnTelegram;\n\n    const footer = hasFooter && (\n      <div className={styles.footer}>\n        {canBuyOnFragment && (\n          <Button\n            isText\n            onClick={handleOpenFragment}\n            noForcedUpperCase\n            size=\"tiny\"\n          >\n            {lang.number(valueInfo.fragmentListedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnFragment')}\n          </Button>\n        )}\n\n        {canBuyOnTelegram && (\n          <Button\n            isText\n            noForcedUpperCase\n            size=\"tiny\"\n            onClick={handleOpenTelegramMarket}\n          >\n            {lang.number(valueInfo.listedCount!)}\n            <AnimatedIconFromSticker\n              className={styles.footerSticker}\n              sticker={giftAttributes.model!.sticker}\n              size={FOOTER_STICKER_SIZE}\n            />\n            {lang('GiftValueForSaleOnTelegram')}\n          </Button>\n        )}\n      </div>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [lang, renderingModal, handleOpenFragment, handleOpenTelegramMarket]);\n\n  if (!modalData) return undefined;\n\n  return (\n    <TableInfoModal\n      isOpen={isOpen}\n      onClose={closeGiftInfoValueModal}\n      header={modalData.header}\n      tableData={modalData.tableData}\n      footer={modalData.footer}\n    />\n  );\n};\n\nexport default memo(GiftInfoValueModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftWithdrawModal-module__header\",\"giftPreview\":\"GiftWithdrawModal-module__giftPreview\",\"backdrop\":\"GiftWithdrawModal-module__backdrop\",\"description\":\"GiftWithdrawModal-module__description\",\"arrow\":\"GiftWithdrawModal-module__arrow\",\"noPassword\":\"GiftWithdrawModal-module__noPassword\"};","import {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      isCondensedHeader\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternIcon={giftAttributes.pattern?.sticker}\n                ringsCount={1}\n                ovalFactor={1}\n                patternSize={12}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          onClearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): Complete<StateProps> => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"PaidReactionModal-module__content\",\"title\":\"PaidReactionModal-module__title\",\"slider\":\"PaidReactionModal-module__slider\",\"description\":\"PaidReactionModal-module__description\",\"itemInfo\":\"PaidReactionModal-module__itemInfo\",\"itemTitle\":\"PaidReactionModal-module__itemTitle\",\"itemSubtitle\":\"PaidReactionModal-module__itemSubtitle\",\"itemIcon\":\"PaidReactionModal-module__itemIcon\",\"sendAsPeerButtonAvatar\":\"PaidReactionModal-module__sendAsPeerButtonAvatar\",\"sendAsPeerMenuButton\":\"PaidReactionModal-module__sendAsPeerMenuButton\",\"buttonDownIcon\":\"PaidReactionModal-module__buttonDownIcon\",\"sendAsPeerMenuBubble\":\"PaidReactionModal-module__sendAsPeerMenuBubble\",\"sendAsPeerMenu\":\"PaidReactionModal-module__sendAsPeerMenu\",\"sendAsPeersMenuContainer\":\"PaidReactionModal-module__sendAsPeersMenuContainer\",\"headerControlPanel\":\"PaidReactionModal-module__headerControlPanel\",\"separator\":\"PaidReactionModal-module__separator\",\"checkBox\":\"PaidReactionModal-module__checkBox\",\"topLabel\":\"PaidReactionModal-module__topLabel\",\"top\":\"PaidReactionModal-module__top\",\"topBadge\":\"PaidReactionModal-module__topBadge\",\"buttonStar\":\"PaidReactionModal-module__buttonStar\",\"topPeer\":\"PaidReactionModal-module__topPeer\",\"disclaimer\":\"PaidReactionModal-module__disclaimer\"};","import type { FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AriaLabelOpenMenu')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />)}\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarSlider-module__root\",\"dragging\":\"StarSlider-module__dragging\",\"progress\":\"StarSlider-module__progress\",\"floatingBadgeWrapper\":\"StarSlider-module__floatingBadgeWrapper\",\"floatingBadgeText\":\"StarSlider-module__floatingBadgeText\",\"floatingBadgeTriangle\":\"StarSlider-module__floatingBadgeTriangle\",\"slider\":\"StarSlider-module__slider\",\"sparkles\":\"StarSlider-module__sparkles\",\"dynamicColor\":\"StarSlider-module__dynamicColor\",\"floatingBadge\":\"StarSlider-module__floatingBadge\",\"clickable\":\"StarSlider-module__clickable\",\"noTransition\":\"StarSlider-module__noTransition\",\"floatingBadgeSparkles\":\"StarSlider-module__floatingBadgeSparkles\",\"floatingBadgeContent\":\"StarSlider-module__floatingBadgeContent\",\"withDescription\":\"StarSlider-module__withDescription\",\"floatingBadgeTitle\":\"StarSlider-module__floatingBadgeTitle\",\"floatingBadgeDescription\":\"StarSlider-module__floatingBadgeDescription\",\"floatingBadgeTrianglePath\":\"StarSlider-module__floatingBadgeTrianglePath\",\"customValueIcon\":\"StarSlider-module__customValueIcon\"};","import type { TeactNode } from '../../../lib/teact/teact';\nimport {\n  memo, useEffect,\n  useMemo, useRef, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevious from '../../../hooks/usePrevious';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  minValue?: number;\n  minAllowedValue?: number;\n  minAllowedProgress?: number;\n  className?: string;\n  floatingBadgeDescription?: TeactNode;\n  shouldUseDynamicColor?: boolean;\n  shouldAllowCustomValue?: boolean;\n  onChange: (value: number) => void;\n  onBadgeClick?: NoneToVoidFunction;\n  onCustomValueClick?: NoneToVoidFunction;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\nconst LARGE_STEP = 10000;\nconst THUMB_SIZE = 1.875 * REM;\nconst CORNER_BEAK_WIDTH = 44;\nconst DEFAULT_BEAK_WIDTH = 52;\nconst BEAK_HEIGHT = 32;\n\nconst BEAK_OFFSET_END = 10;\nconst TIP_OFFSET_END = 0;\nconst BEAK_TIP_PADDING = 1;\n\nconst BADGE_HORIZONTAL_PADDING = 2 * REM;\nconst BADGE_ICON_SIZE = 1.5 * REM;\nconst BADGE_TITLE_GAP = 0.125 * REM;\nconst DRAG_DISTANCE_THRESHOLD = 5;\nconst BADGE_WIDTH_DELTA = 6;\n\nlet textMeasureCanvas: HTMLCanvasElement | undefined;\n\nfunction getTextWidth(text: string, font: string): number {\n  if (!textMeasureCanvas) {\n    textMeasureCanvas = document.createElement('canvas');\n  }\n  const ctx = textMeasureCanvas.getContext('2d')!;\n  ctx.font = font;\n  return ctx.measureText(text).width;\n}\n\nconst SLIDER_COLORS = [\n  '#955CDB', // Purple\n  '#955CDB', // Purple\n  '#46A3EB', // Blue\n  '#40A920', // Green\n  '#E29A09', // Yellow\n  '#ED771E', // Orange\n  '#E14741', // Red\n  '#5B6676', // Silver\n];\n\nfunction getColorForProgress(progress: number): string {\n  const index = Math.floor(progress * SLIDER_COLORS.length);\n  return SLIDER_COLORS[Math.min(index, SLIDER_COLORS.length - 1)];\n}\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  minValue: minValueProp,\n  minAllowedValue,\n  minAllowedProgress,\n  className,\n  floatingBadgeDescription,\n  shouldUseDynamicColor,\n  shouldAllowCustomValue,\n  onChange,\n  onBadgeClick,\n  onCustomValueClick,\n}: OwnProps) => {\n  const containerRef = useRef<HTMLDivElement>();\n  const floatingBadgeContentRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const baseMinValue = minValueProp ?? 1;\n\n  // Uses binary search - O(log n)\n  const actualMinValue = useMemo(() => {\n    if (!minAllowedProgress || !minAllowedValue || minAllowedValue <= baseMinValue) {\n      return baseMinValue;\n    }\n\n    let low = baseMinValue;\n    let high = minAllowedValue;\n\n    while (low < high) {\n      const mid = Math.floor((low + high) / 2);\n      const testPoints = buildPoints(mid, maxValue);\n      const testProgress = getProgress(testPoints, minAllowedValue, mid);\n      const normalizedProgress = testProgress / testPoints.length;\n\n      if (normalizedProgress < minAllowedProgress) {\n        high = mid;\n      } else {\n        low = mid + 1;\n      }\n    }\n\n    return Math.max(baseMinValue, low);\n  }, [baseMinValue, minAllowedValue, minAllowedProgress, maxValue]);\n\n  const points = useMemo(() => {\n    return buildPoints(actualMinValue, maxValue);\n  }, [maxValue, actualMinValue]);\n\n  const [value, setValue] = useState(0);\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [badgeWidth, setBadgeWidth] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const startXRef = useRef<number | undefined>();\n  const prevBadgeWidth = usePrevious(badgeWidth);\n\n  const badgeText = lang.number(getValue(points, value, actualMinValue));\n\n  const minSliderProgress = minAllowedValue !== undefined\n    ? getProgress(points, minAllowedValue, actualMinValue) : 0;\n\n  useEffect(() => {\n    setValue(getProgress(points, defaultValue, actualMinValue));\n  }, [defaultValue, points, actualMinValue]);\n\n  useEffect(() => {\n    if (!floatingBadgeContentRef.current) return;\n\n    const titleEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeTitle}`);\n    if (!titleEl) return;\n\n    const computedStyle = getComputedStyle(titleEl);\n    const font = `${computedStyle.fontWeight} ${computedStyle.fontSize} ${computedStyle.fontFamily}`;\n\n    const textWidth = getTextWidth(badgeText, font);\n    const titleWidth = BADGE_ICON_SIZE + BADGE_TITLE_GAP + textWidth;\n\n    const descriptionEl = floatingBadgeContentRef.current.querySelector(`.${styles.floatingBadgeDescription}`);\n    const descriptionWidth = descriptionEl?.scrollWidth || 0;\n\n    const contentWidth = Math.max(titleWidth, descriptionWidth);\n    const newBadgeWidth = contentWidth + BADGE_HORIZONTAL_PADDING;\n\n    setBadgeWidth((currentWidth) => {\n      if (Math.abs(newBadgeWidth - currentWidth) < BADGE_WIDTH_DELTA) {\n        return currentWidth;\n      }\n      return newBadgeWidth;\n    });\n  }, [badgeText, floatingBadgeDescription]);\n\n  const handleContainerResize = useLastCallback((entry: ResizeObserverEntry) => {\n    setContainerWidth(entry.contentRect.width);\n  });\n\n  useResizeObserver(containerRef, handleContainerResize);\n\n  const progress = value / points.length;\n  const {\n    minBadgeX, maxBadgeX, beakOffset, beakTipOffset, beakWidth: currentBeakWidth,\n  } = useMemo(() => {\n    return calcBadgePosition(containerWidth, badgeWidth, progress);\n  }, [containerWidth, badgeWidth, progress]);\n\n  const beakPath = useMemo(() => {\n    return generateBeakPath(currentBeakWidth, beakTipOffset);\n  }, [currentBeakWidth, beakTipOffset]);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = Number(event.currentTarget.value);\n    const clampedValue = Math.max(rawValue, minSliderProgress);\n    setValue(clampedValue);\n\n    const resultValue = getValue(points, clampedValue, actualMinValue);\n    onChange(resultValue);\n  });\n\n  const handlePointerDown = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = e.clientX;\n    setIsDragging(false);\n  });\n\n  const handlePointerMove = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    if (startXRef.current === undefined) return;\n    const distance = Math.abs(e.clientX - startXRef.current);\n    if (distance >= DRAG_DISTANCE_THRESHOLD) {\n      setIsDragging(true);\n    }\n  });\n\n  const handlePointerUp = useLastCallback((e: React.PointerEvent<HTMLInputElement>) => {\n    startXRef.current = undefined;\n\n    if (!isDragging && onCustomValueClick && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      const clickZoneWidth = 1.875 * REM;\n\n      const isInIconArea = e.clientX >= rect.right - clickZoneWidth && e.clientX <= rect.right;\n\n      if (isInIconArea) {\n        onCustomValueClick();\n      }\n    }\n\n    setIsDragging(false);\n  });\n\n  const dynamicColor = shouldUseDynamicColor ? getColorForProgress(progress) : undefined;\n\n  const badgeStyle = buildStyle(\n    Boolean(badgeWidth) && `width: ${badgeWidth}px`,\n  );\n\n  const rootStyle = buildStyle(\n    `--progress: ${progress}`,\n    `--min-badge-x: ${minBadgeX}px`,\n    `--max-badge-x: ${maxBadgeX}px`,\n    dynamicColor && `--dynamic-color: ${dynamicColor}`,\n  );\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(styles.root, isDragging && styles.dragging, className)}\n      style={rootStyle}\n    >\n      <div className={styles.floatingBadgeWrapper}>\n        <div\n          className={buildClassName(styles.floatingBadge, onBadgeClick && styles.clickable)}\n          onClick={onBadgeClick}\n        >\n          <div\n            className={buildClassName(\n              styles.floatingBadgeText,\n              shouldUseDynamicColor && styles.dynamicColor,\n              (!prevBadgeWidth || prevBadgeWidth === 0) && styles.noTransition,\n            )}\n            style={badgeStyle}\n          >\n            <Sparkles preset=\"button\" className={styles.floatingBadgeSparkles} />\n            <div\n              ref={floatingBadgeContentRef}\n              className={buildClassName(\n                styles.floatingBadgeContent,\n                floatingBadgeDescription && styles.withDescription,\n              )}\n            >\n              <div className={styles.floatingBadgeTitle}>\n                <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n                <AnimatedCounter text={badgeText} />\n              </div>\n              <div className={styles.floatingBadgeDescription}>\n                {floatingBadgeDescription}\n              </div>\n            </div>\n          </div>\n          <svg\n            className={styles.floatingBadgeTriangle}\n            width={currentBeakWidth}\n            height={BEAK_HEIGHT}\n            viewBox={`0 0 ${currentBeakWidth} ${BEAK_HEIGHT}`}\n            fill=\"none\"\n            aria-hidden=\"true\"\n            role=\"presentation\"\n            style={`transform: translate(calc(-50% + ${beakOffset}px), 33%)`}\n          >\n            {!shouldUseDynamicColor && (\n              <defs>\n                <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                  <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                  <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n                </linearGradient>\n              </defs>\n            )}\n            <path\n              className={styles.floatingBadgeTrianglePath}\n              d={beakPath}\n              fill={dynamicColor || 'url(#StarBadgeTriangle)'}\n            />\n          </svg>\n        </div>\n      </div>\n      <div className={buildClassName(styles.progress, shouldUseDynamicColor && styles.dynamicColor)}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue, actualMinValue)}\n        step=\"any\"\n        onChange={handleChange}\n        onPointerDown={handlePointerDown}\n        onPointerMove={handlePointerMove}\n        onPointerUp={handlePointerUp}\n      />\n      {shouldAllowCustomValue && (\n        <Icon name=\"add\" className={styles.customValueIcon} />\n      )}\n    </div>\n  );\n};\n\nfunction buildPoints(minValue: number, maxValue: number): number[] {\n  const result = [];\n\n  for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n    if (DEFAULT_POINTS[i] <= minValue) continue;\n\n    if (DEFAULT_POINTS[i] < maxValue) {\n      result.push(DEFAULT_POINTS[i]);\n    }\n\n    if (DEFAULT_POINTS[i] >= maxValue) {\n      result.push(maxValue);\n      return result;\n    }\n  }\n\n  const lastPoint = DEFAULT_POINTS[DEFAULT_POINTS.length - 1];\n  const stepsNeeded = Math.ceil((minValue - lastPoint) / LARGE_STEP);\n  let nextPoint = lastPoint + Math.max(1, stepsNeeded) * LARGE_STEP;\n\n  while (nextPoint < maxValue) {\n    result.push(nextPoint);\n    nextPoint += LARGE_STEP;\n  }\n  result.push(maxValue);\n\n  return result;\n}\n\nfunction getProgress(points: number[], value: number, minValue: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  if (nextPoint === prevPoint) return pointIndex;\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number, minValue: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || minValue;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nfunction calcBadgePosition(\n  containerWidth: number,\n  badgeWidth: number,\n  progress: number,\n) {\n  const halfBadgeWidth = badgeWidth / 2;\n  const cornerBeakHalfWidth = CORNER_BEAK_WIDTH / 2;\n  const maxBeakOffset = halfBadgeWidth - cornerBeakHalfWidth;\n\n  const minBadgeX = halfBadgeWidth;\n  const maxBadgeX = containerWidth - halfBadgeWidth;\n\n  const thumbHalf = THUMB_SIZE / 2;\n  const trackLength = containerWidth - THUMB_SIZE;\n  const distanceFromLeft = progress * trackLength;\n  const distanceFromRight = trackLength - distanceFromLeft;\n\n  const isLeftSide = distanceFromLeft < distanceFromRight;\n  const distanceToEdge = isLeftSide ? distanceFromLeft : distanceFromRight;\n  const direction = isLeftSide ? -1 : 1;\n\n  let beakOffset = 0;\n  let beakTipOffset = 0;\n  let beakWidth = DEFAULT_BEAK_WIDTH;\n\n  const beakOffsetStart = halfBadgeWidth - thumbHalf;\n\n  if (distanceToEdge < beakOffsetStart) {\n    if (distanceToEdge > BEAK_OFFSET_END) {\n      const t = (beakOffsetStart - distanceToEdge) / (beakOffsetStart - BEAK_OFFSET_END);\n      beakOffset = direction * t * maxBeakOffset;\n    } else if (distanceToEdge > TIP_OFFSET_END) {\n      beakOffset = direction * maxBeakOffset;\n      const t = (BEAK_OFFSET_END - distanceToEdge) / (BEAK_OFFSET_END - TIP_OFFSET_END);\n      const tExp = 1 - (1 - t) * (1 - t) * (1 - t);\n      beakWidth = DEFAULT_BEAK_WIDTH - tExp * (DEFAULT_BEAK_WIDTH - CORNER_BEAK_WIDTH);\n      beakTipOffset = direction * t * (beakWidth / 2);\n    } else {\n      beakOffset = direction * maxBeakOffset;\n      beakWidth = CORNER_BEAK_WIDTH;\n      beakTipOffset = direction * (beakWidth / 2);\n    }\n  }\n\n  const maxTipOffset = beakWidth / 2 - TIP_RADIUS - BEAK_TIP_PADDING;\n  const clampedTipOffset = Math.max(-maxTipOffset, Math.min(maxTipOffset, beakTipOffset));\n\n  return {\n    minBadgeX,\n    maxBadgeX,\n    beakOffset,\n    beakTipOffset: clampedTipOffset,\n    beakWidth,\n  };\n}\n\nconst TIP_RADIUS = 2;\n\nfunction generateBeakPath(beakWidth: number, tipOffset: number): string {\n  const tipX = beakWidth / 2 + tipOffset;\n  const r = TIP_RADIUS;\n  const y = BEAK_HEIGHT - r;\n\n  return `M 0 0 L ${beakWidth} 0 L ${tipX + r} ${y} Q ${tipX} ${BEAK_HEIGHT} ${tipX - r} ${y} Z`;\n}\n\nexport default memo(StarSlider);\n","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useCallback } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\nimport type { TabState } from '../../../global/types';\n\nimport { getCurrentTabId } from '../../../util/establishMultitabRole';\nimport { convertTonFromNanos } from '../../../util/formatCurrency';\nimport { formatStarsAsText, formatTonAsText } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\n\nimport ConfirmDialog from '../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['priceConfirmModal'];\n};\n\ntype StateProps = {\n  starBalance?: ApiStarsAmount;\n  tonBalance?: number;\n};\n\nconst PriceConfirmModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starBalance,\n  tonBalance,\n}) => {\n  const actions = getActions();\n\n  const lang = useLang();\n\n  const handleConfirm = useCallback(() => {\n    if (!modal?.directInfo) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    const { currency, newAmount } = modal;\n    const isTon = currency === 'TON';\n    const currentBalance = isTon ? tonBalance : starBalance?.amount;\n\n    if (currentBalance === undefined) {\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    if (currentBalance < newAmount!) {\n      actions.openStarsBalanceModal({\n        currency: isTon ? 'TON' : 'XTR',\n        tabId: getCurrentTabId(),\n      });\n      actions.closePriceConfirmModal();\n      return;\n    }\n\n    actions.sendStarPaymentForm({\n      directInfo: modal.directInfo,\n      tabId: getCurrentTabId(),\n    });\n    actions.closePriceConfirmModal();\n  }, [modal, starBalance, tonBalance, actions]);\n\n  const handleClose = useCallback(() => {\n    actions.closePriceConfirmModal();\n  }, [actions]);\n\n  if (!modal) {\n    return undefined;\n  }\n\n  const {\n    originalAmount,\n    newAmount,\n    currency,\n  } = modal;\n\n  const isTon = currency === 'TON';\n\n  let originalAmountText: string;\n  let newAmountText: string;\n\n  if (isTon) {\n    originalAmountText = formatTonAsText(lang, convertTonFromNanos(originalAmount!));\n    newAmountText = formatTonAsText(lang, convertTonFromNanos(newAmount!));\n  } else {\n    originalAmountText = formatStarsAsText(lang, originalAmount!);\n    newAmountText = formatStarsAsText(lang, newAmount!);\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={Boolean(modal)}\n      onClose={handleClose}\n      title={lang('PriceChanged')}\n      confirmHandler={handleConfirm}\n      confirmLabel={lang('PayNewPrice')}\n    >\n      <p>\n        {lang('PriceChangedText', {\n          originalAmount: originalAmountText,\n          newAmount: newAmountText,\n        }, {\n          withMarkdown: true,\n          withNodes: true,\n        })}\n      </p>\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): Complete<StateProps> => {\n  const starBalance = global.stars?.balance;\n  const tonBalance = global.ton?.balance?.amount;\n\n  return {\n    starBalance,\n    tonBalance,\n  };\n},\n)(PriceConfirmModal));\n","import { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiTypeCurrencyAmount } from '../../../api/types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../config';\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiTypeCurrencyAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  const renderStarsAmount = () => {\n    return (\n      <>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined && balance.currency === STARS_CURRENCY_CODE\n          ? formatStarsAmount(lang, balance) : ''}\n        {withAddButton && (\n          <BadgeButton\n            className={styles.addStarsButton}\n            onClick={() => openStarsBalanceModal({})}\n          >\n            <Icon\n              className={styles.addStarsIcon}\n              name=\"add\"\n            />\n          </BadgeButton>\n        )}\n      </>\n    );\n  };\n\n  const renderTonAmount = () => {\n    return (\n      <>\n        <Icon name=\"toncoin\" />\n        {balance !== undefined ? convertCurrencyFromBaseUnit(balance.amount, balance.currency) : ''}\n      </>\n    );\n  };\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          {balance?.currency === TON_CURRENCY_CODE ? renderTonAmount() : renderStarsAmount()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsBalanceModal-module__root\",\"minimal\":\"StarsBalanceModal-module__minimal\",\"transition\":\"StarsBalanceModal-module__transition\",\"main\":\"StarsBalanceModal-module__main\",\"container\":\"StarsBalanceModal-module__container\",\"section\":\"StarsBalanceModal-module__section\",\"lastSection\":\"StarsBalanceModal-module__lastSection\",\"sectionTitle\":\"StarsBalanceModal-module__sectionTitle\",\"tos\":\"StarsBalanceModal-module__tos\",\"hint\":\"StarsBalanceModal-module__hint\",\"topUpButton\":\"StarsBalanceModal-module__topUpButton\",\"tonBalanceContainer\":\"StarsBalanceModal-module__tonBalanceContainer\",\"tonBalance\":\"StarsBalanceModal-module__tonBalance\",\"tonIconBalance\":\"StarsBalanceModal-module__tonIconBalance\",\"tonInUsd\":\"StarsBalanceModal-module__tonInUsd\",\"tonIconLogo\":\"StarsBalanceModal-module__tonIconLogo\",\"description\":\"StarsBalanceModal-module__description\",\"header\":\"StarsBalanceModal-module__header\",\"starHeaderText\":\"StarsBalanceModal-module__starHeaderText\",\"botItem\":\"StarsBalanceModal-module__botItem\",\"hiddenHeader\":\"StarsBalanceModal-module__hiddenHeader\",\"noSeparator\":\"StarsBalanceModal-module__noSeparator\",\"closeButton\":\"StarsBalanceModal-module__closeButton\",\"addStarsButton\":\"StarsBalanceModal-module__addStarsButton\",\"addStarsIcon\":\"StarsBalanceModal-module__addStarsIcon\",\"balanceBlock\":\"StarsBalanceModal-module__balanceBlock\",\"balanceInfo\":\"StarsBalanceModal-module__balanceInfo\",\"smallerText\":\"StarsBalanceModal-module__smallerText\",\"balanceBottom\":\"StarsBalanceModal-module__balanceBottom\",\"modalBalance\":\"StarsBalanceModal-module__modalBalance\",\"starButton\":\"StarsBalanceModal-module__starButton\",\"paymentContent\":\"StarsBalanceModal-module__paymentContent\",\"paymentImages\":\"StarsBalanceModal-module__paymentImages\",\"paymentPhoto\":\"StarsBalanceModal-module__paymentPhoto\",\"avatarStar\":\"StarsBalanceModal-module__avatarStar\",\"paymentImageBackground\":\"StarsBalanceModal-module__paymentImageBackground\",\"paymentButton\":\"StarsBalanceModal-module__paymentButton\",\"paymentButtonStar\":\"StarsBalanceModal-module__paymentButtonStar\",\"transactions\":\"StarsBalanceModal-module__transactions\",\"subscriptions\":\"StarsBalanceModal-module__subscriptions\",\"tabs\":\"StarsBalanceModal-module__tabs\",\"disclaimer\":\"StarsBalanceModal-module__disclaimer\",\"amountBadge\":\"StarsBalanceModal-module__amountBadge\",\"loadMore\":\"StarsBalanceModal-module__loadMore\",\"loadMoreIcon\":\"StarsBalanceModal-module__loadMoreIcon\"};","import { memo, useEffect, useMemo, useRef, useState } from '@teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { AnimationLevel } from '../../../types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport {\n  PAID_MESSAGES_PURPOSE,\n  STARS_CURRENCY_CODE,\n  TON_CURRENCY_CODE,\n} from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport { selectSharedSettings } from '../../../global/selectors/sharedState.ts';\nimport buildClassName from '../../../util/buildClassName';\nimport { convertCurrencyFromBaseUnit, convertTonToUsd, formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { resolveTransitionName } from '../../../util/resolveTransitionName.ts';\nimport { REM } from '../../common/helpers/mediaDimensions';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport ParticlesHeader from '../common/ParticlesHeader.tsx';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nconst HEADER_HEIGHT = 3.5 * REM;\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  tonBalanceState?: GlobalState['ton'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n  tonUsdRate?: number;\n  tonTopupUrl: string;\n  animationLevel: AnimationLevel;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, tonBalanceState, canBuyPremium, shouldForceHeight, tonUsdRate, tonTopupUrl, animationLevel,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n    openUrl,\n  } = getActions();\n\n  const currency = modal?.currency || STARS_CURRENCY_CODE;\n  const currentState = currency === TON_CURRENCY_CODE ? tonBalanceState : starsBalanceState;\n  const { balance, history } = currentState || {};\n  const { subscriptions } = (currency === STARS_CURRENCY_CODE && starsBalanceState) || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [areTabsPinned, pinTabs, unpinTabs] = useFlag(false);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const tabsRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal && (starsBalanceState || tonBalanceState));\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const modalHeight = useMemo(() => {\n    const transactionCount = history?.all?.transactions.length || 0;\n    if (transactionCount === 1) {\n      return '35.5rem';\n    }\n    if (transactionCount === 2) {\n      return '39.25rem';\n    }\n    if (transactionCount === 3) {\n      return '43rem';\n    }\n    return '45rem';\n  }, [history?.all?.transactions.length]);\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n      unpinTabs();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  const renderStarsHeaderSection = () => {\n    return (\n      <>\n        <ParticlesHeader\n          model=\"swaying-star\"\n          color=\"gold\"\n          title={starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          description={renderText(\n            starsNeededText || oldLang('TelegramStarsInfo'),\n            ['simple_markdown', 'emoji'],\n          )}\n          isDisabled={!isOpen}\n        />\n        {canBuyPremium && !areBuyOptionsShown && (\n          <Button\n            className={styles.starButton}\n            onClick={showBuyOptions}\n            fluid\n          >\n            {oldLang('Star.List.BuyMoreStars')}\n          </Button>\n        )}\n        {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n          <Button\n            isText\n            noForcedUpperCase\n            className={styles.starButton}\n            fluid\n            onClick={openStarsGiftingPickerModalHandler}\n          >\n            {oldLang('TelegramStarsGift')}\n          </Button>\n        )}\n        {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n          <StarTopupOptionList\n            starsNeeded={starsNeeded}\n            options={starsBalanceState.topupOptions}\n            onClick={handleBuyStars}\n          />\n        )}\n      </>\n    );\n  };\n\n  const renderTonHeaderSection = () => {\n    const tonAmount = convertCurrencyFromBaseUnit(balance?.amount || 0, TON_CURRENCY_CODE);\n    return (\n      <>\n        <ParticlesHeader\n          model=\"speeding-diamond\"\n          color=\"blue\"\n          title={lang('CurrencyTon')}\n          description={lang('DescriptionAboutTon')}\n          isDisabled={!isOpen}\n        />\n        <div className={styles.tonBalanceContainer}>\n          <div className={styles.tonBalance}>\n            <Icon name=\"toncoin\" className={styles.tonIconBalance} />\n            {tonAmount}\n          </div>\n          {Boolean(tonUsdRate) && (\n            <span className={styles.tonInUsd}>\n              {` ${formatCurrencyAsString(\n                convertTonToUsd(balance?.amount || 0, tonUsdRate, true),\n                'USD',\n                lang.code,\n              )}`}\n            </span>\n          )}\n        </div>\n        <Button\n          className={styles.topUpButton}\n          onClick={handleTonTopUp}\n          fluid\n        >\n          {lang('ButtonTopUpViaFragment')}\n        </Button>\n\n        {currency === TON_CURRENCY_CODE && (\n          <div className={styles.hint}>\n            {lang('TonModalHint')}\n          </div>\n        )}\n      </>\n    );\n  };\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n\n    if (tabsRef.current) {\n      const { top: tabsTop } = tabsRef.current.getBoundingClientRect();\n      const { top: scrollerTop } = e.currentTarget.getBoundingClientRect();\n      const isPinned = tabsTop - scrollerTop <= HEADER_HEIGHT;\n      if (isPinned) {\n        pinTabs();\n      } else {\n        unpinTabs();\n      }\n    }\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n      isTon: currency === TON_CURRENCY_CODE,\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    const originPaymentInputInvoice = originStarsPayment?.inputInvoice;\n\n    let spendPurposePeerId: string | undefined;\n\n    switch (originPaymentInputInvoice?.type) {\n      case 'message': {\n        spendPurposePeerId = originPaymentInputInvoice.chatId;\n        break;\n      }\n\n      case 'slug': {\n        const form = originStarsPayment?.form;\n        spendPurposePeerId = form?.botId;\n        break;\n      }\n    }\n\n    if (originReaction) {\n      spendPurposePeerId = originReaction.chatId;\n    }\n\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n      spendPurposePeerId,\n    });\n  });\n\n  const handleTonTopUp = useLastCallback(() => {\n    openUrl({ url: tonTopupUrl });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n      dialogStyle={`--modal-height: ${modalHeight}`}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        {currency !== TON_CURRENCY_CODE && <BalanceBlock balance={balance} className={styles.modalBalance} />}\n        <div\n          className={buildClassName(\n            styles.header, isHeaderHidden && styles.hiddenHeader, areTabsPinned && styles.noSeparator,\n          )}\n        >\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          {currency === TON_CURRENCY_CODE ? renderTonHeaderSection() : renderStarsHeaderSection()}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.lastSection}>\n              <Transition\n                name={resolveTransitionName('slideOptimized', animationLevel, undefined, lang.isRtl)}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              ref={tabsRef}\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const shouldForceHeight = modal?.currency === TON_CURRENCY_CODE\n      ? Boolean(global.ton?.history?.all?.transactions.length)\n      : Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      tonBalanceState: global.ton,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n      tonUsdRate: global.appConfig.tonUsdRate,\n      tonTopupUrl: global.appConfig.tonTopupUrl,\n      animationLevel: selectSharedSettings(global).animationLevel,\n    };\n  },\n)(StarsBalanceModal));\n","import { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => Boolean(media.duration));\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={lang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {Boolean(disclaimerText) && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, toggleNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n\n    toggleNoPaidMessagesException ({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"StarsGiftModal-module__modalDialog\",\"content\":\"StarsGiftModal-module__content\",\"main\":\"StarsGiftModal-module__main\",\"headerInfo\":\"StarsGiftModal-module__headerInfo\",\"logo\":\"StarsGiftModal-module__logo\",\"logoBackground\":\"StarsGiftModal-module__logoBackground\",\"description\":\"StarsGiftModal-module__description\",\"section\":\"StarsGiftModal-module__section\",\"header\":\"StarsGiftModal-module__header\",\"starHeaderText\":\"StarsGiftModal-module__starHeaderText\",\"hiddenHeader\":\"StarsGiftModal-module__hiddenHeader\",\"closeButton\":\"StarsGiftModal-module__closeButton\",\"avatar\":\"StarsGiftModal-module__avatar\",\"center\":\"StarsGiftModal-module__center\",\"secondaryInfo\":\"StarsGiftModal-module__secondaryInfo\"};","import type { FC } from '../../../../lib/teact/teact';\nimport type React from '../../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport SafeLink from '../../../common/SafeLink';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/GoldStar.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): Complete<StateProps> => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsTransaction, ApiTypeCurrencyAmount } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer, shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n  if (transaction.isPostsSearch) {\n    return lang('PostsSearchTransaction');\n  }\n\n  if (transaction.isDropOriginalDetails) {\n    return lang('DropOriginalDetailsTransaction');\n  }\n\n  if (transaction.isPrepaidUpgrade) {\n    return lang('GiftPrepaidUpgradeTransactionTitle');\n  }\n\n  if (transaction.isStarGiftAuctionBid) {\n    return isNegativeAmount(transaction.amount)\n      ? lang('StarGiftAuctionBidTransaction')\n      : lang('StarGiftAuctionBidRefundedTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) {\n    if (transaction.amount.currency === TON_CURRENCY_CODE) {\n      return lang('TonGiftReceived');\n    }\n    return oldLang('StarsGiftReceived');\n  }\n  if (transaction.starGift) {\n    return isNegativeAmount(transaction.amount) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n    && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeAmount(currencyAmount: ApiTypeCurrencyAmount) {\n  if (currencyAmount.currency === STARS_CURRENCY_CODE) {\n    if (currencyAmount.amount) return currencyAmount.amount < 0;\n    return currencyAmount.nanos < 0;\n  }\n  return currencyAmount.amount < 0;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsSubscriptionItem-module__root\",\"info\":\"StarsSubscriptionItem-module__info\",\"status\":\"StarsSubscriptionItem-module__status\",\"statusPricing\":\"StarsSubscriptionItem-module__statusPricing\",\"amount\":\"StarsSubscriptionItem-module__amount\",\"title\":\"StarsSubscriptionItem-module__title\",\"description\":\"StarsSubscriptionItem-module__description\",\"subtitle\":\"StarsSubscriptionItem-module__subtitle\",\"statusPeriod\":\"StarsSubscriptionItem-module__statusPeriod\",\"statusEnded\":\"StarsSubscriptionItem-module__statusEnded\",\"preview\":\"StarsSubscriptionItem-module__preview\",\"subscriptionStar\":\"StarsSubscriptionItem-module__subscriptionStar\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsSubscriptionModal-module__modal\",\"header\":\"StarsSubscriptionModal-module__header\",\"title\":\"StarsSubscriptionModal-module__title\",\"amount\":\"StarsSubscriptionModal-module__amount\",\"footer\":\"StarsSubscriptionModal-module__footer\",\"starsBackground\":\"StarsSubscriptionModal-module__starsBackground\",\"subscriptionStar\":\"StarsSubscriptionModal-module__subscriptionStar\",\"amountStar\":\"StarsSubscriptionModal-module__amountStar\",\"secondary\":\"StarsSubscriptionModal-module__secondary\",\"danger\":\"StarsSubscriptionModal-module__danger\",\"avatarWrapper\":\"StarsSubscriptionModal-module__avatarWrapper\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar\n            peer={!photo ? peer : undefined}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <InteractiveSparkles\n          className={buildClassName(styles.starsBackground)}\n          color=\"gold\"\n          onRequestAnimation={handleRequestAnimation}\n          centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PaidMediaThumb-module__root\",\"preview\":\"PaidMediaThumb-module__preview\",\"count\":\"PaidMediaThumb-module__count\",\"thumb\":\"PaidMediaThumb-module__thumb\",\"noOutline\":\"PaidMediaThumb-module__noOutline\",\"itemCount1\":\"PaidMediaThumb-module__itemCount1\",\"itemCount2\":\"PaidMediaThumb-module__itemCount2\",\"itemCount3\":\"PaidMediaThumb-module__itemCount3\",\"blurry\":\"PaidMediaThumb-module__blurry\",\"full\":\"PaidMediaThumb-module__full\",\"fadeIn\":\"PaidMediaThumb-module__fadeIn\"};","import { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsTransactionItem-module__root\",\"info\":\"StarsTransactionItem-module__info\",\"stars\":\"StarsTransactionItem-module__stars\",\"amount\":\"StarsTransactionItem-module__amount\",\"title\":\"StarsTransactionItem-module__title\",\"description\":\"StarsTransactionItem-module__description\",\"date\":\"StarsTransactionItem-module__date\",\"positive\":\"StarsTransactionItem-module__positive\",\"negative\":\"StarsTransactionItem-module__negative\",\"preview\":\"StarsTransactionItem-module__preview\",\"subscriptionStar\":\"StarsTransactionItem-module__subscriptionStar\",\"uniqueGiftBackground\":\"StarsTransactionItem-module__uniqueGiftBackground\",\"giftSticker\":\"StarsTransactionItem-module__giftSticker\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE, TON_CURRENCY_CODE } from '../../../../config';\nimport { buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    amount,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (!shouldUseCustomPeer(transaction)) {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if ((transaction.isGiftUpgrade || transaction.isDropOriginalDetails)\n      && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isPostsSearch) {\n      title = getTransactionTitle(oldLang, lang, transaction);\n      description = undefined;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, amountColorClass)}\n        >\n          {formatStarsTransactionAmount(lang, amount)}\n        </span>\n        {amount.currency === STARS_CURRENCY_CODE && <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />}\n        {amount.currency === TON_CURRENCY_CODE && <Icon name=\"toncoin\" className={amountColorClass} />}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsTransactionModal-module__modal\",\"positive\":\"StarsTransactionModal-module__positive\",\"negative\":\"StarsTransactionModal-module__negative\",\"header\":\"StarsTransactionModal-module__header\",\"uniqueGift\":\"StarsTransactionModal-module__uniqueGift\",\"amount\":\"StarsTransactionModal-module__amount\",\"title\":\"StarsTransactionModal-module__title\",\"description\":\"StarsTransactionModal-module__description\",\"tid\":\"StarsTransactionModal-module__tid\",\"refunded\":\"StarsTransactionModal-module__refunded\",\"totalStars\":\"StarsTransactionModal-module__totalStars\",\"starIcon\":\"StarsTransactionModal-module__starIcon\",\"footer\":\"StarsTransactionModal-module__footer\",\"starsBackground\":\"StarsTransactionModal-module__starsBackground\",\"copyIcon\":\"StarsTransactionModal-module__copyIcon\",\"mediaPreview\":\"StarsTransactionModal-module__mediaPreview\",\"subtitle\":\"StarsTransactionModal-module__subtitle\",\"starGiftSticker\":\"StarsTransactionModal-module__starGiftSticker\",\"avatar\":\"StarsTransactionModal-module__avatar\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../../config';\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n  shouldUseCustomPeer,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectGiftStickerForTon,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport InteractiveSparkles from '../../../common/InteractiveSparkles';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nconst AVATAR_SPARKLES_CENTER_SHIFT = [0, -50] as const;\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n  const triggerSparklesRef = useRef<(() => void) | undefined>();\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const handleAvatarMouseMove = useLastCallback(() => {\n    triggerSparklesRef.current?.();\n  });\n\n  const handleRequestAnimation = useLastCallback((animate: NoneToVoidFunction) => {\n    triggerSparklesRef.current = animate;\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, amount, isGiftUpgrade, isDropOriginalDetails, starGift, isGiftResale,\n      starRefCommision,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && shouldUseCustomPeer(transaction)\n      && buildStarsTransactionCustomPeer(transaction)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade && !isDropOriginalDetails\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId ? getMessageLink(peer, undefined, giveawayPostId) : undefined;\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || ((isGiftUpgrade || isDropOriginalDetails) && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker && !transaction.isPostsSearch;\n    const avatarPeer = !photo ? ((!shouldUseCustomPeer(transaction) && peer) || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.amount}\n        />\n      </div>\n    );\n\n    const amountColorClass = isNegativeAmount(amount) ? styles.negative : styles.positive;\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar\n            className={styles.avatar}\n            peer={avatarPeer}\n            webPhoto={photo}\n            size=\"giant\"\n            onMouseMove={handleAvatarMouseMove}\n          />\n        )}\n        {!sticker && !transaction.isPostsSearch && (\n          <InteractiveSparkles\n            className={buildClassName(styles.starsBackground)}\n            color=\"gold\"\n            onRequestAnimation={handleRequestAnimation}\n            centerShift={AVATAR_SPARKLES_CENTER_SHIFT}\n          />\n        )}\n        {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, amountColorClass)}\n          >\n            {formatStarsTransactionAmount(lang, amount)}\n          </span>\n          {amount.currency === STARS_CURRENCY_CODE && <StarIcon type=\"gold\" size=\"middle\" />}\n          {amount.currency === 'TON' && <Icon name=\"toncoin\" className={amountColorClass} />}\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {Boolean(transaction.paidMessages && transaction.starRefCommision && paidMessageCommission) && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission! / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isDropOriginalDetails) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        lang('StarGiftReasonDropOriginalDetails'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeAmount(transaction.amount)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeAmount(amount) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    if (!transaction.isPostsSearch && !isDropOriginalDetails && !transaction.isStarGiftAuctionBid) {\n      tableData.push([\n        peerLabel,\n        peerId ? { chatId: peerId } : toName || '',\n      ]);\n    }\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.amount.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink && transaction.amount.currency === STARS_CURRENCY_CODE) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.amount, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    if (transaction.isStarGiftAuctionBid && gift?.type === 'starGift' && gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: gift.availabilityTotal,\n        }, {\n          pluralValue: gift.availabilityRemains || 0,\n        }),\n      ]);\n    }\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker,\n    paidMessageCommission, handleRequestAnimation]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): Complete<StateProps> => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig.starsPaidMessageCommissionPermille;\n\n    const currencyAmount = modal?.transaction.amount;\n    const starsGiftSticker = modal?.transaction.isGift\n      ? (currencyAmount?.currency === STARS_CURRENCY_CODE ? selectGiftStickerForStars(global, currencyAmount?.amount)\n        : selectGiftStickerForTon(global, currencyAmount?.amount)) : undefined;\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftInfoValueModal","GiftLockedModal","GiftResalePriceComposerModal","GiftUpgradeModal","GiftAuctionModal","GiftAuctionBidModal","GiftAuctionInfoModal","GiftAuctionAcquiredModal","GiftAuctionChangeRecipientModal","StarGiftPriceDecreaseInfoModal","AboutStarGiftModal","GiftStatusInfoModal","GiftWithdrawModal","GiftTransferModal","GiftTransferConfirmModal","GiftDescriptionRemoveModal","GiftOfferAcceptModal","ChatRefundModal","PriceConfirmModal","memo","useMemo","getActions","DEFAULT_STATUS_ICON_ID","TME_LINK_PREFIX","STARS_CURRENCY_CODE","copyTextToClipboard","formatDateAtTime","getServerTime","useLang","useLastCallback","useOldLang","MenuItem","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GiftMenuItems","peerId","canManage","gift","typeGift","currentUserEmojiStatus","collectibleEmojiStatuses","showNotification","openChatWithDraft","openGiftTransferModal","openGiftResalePriceComposerModal","openGiftStatusInfoModal","setEmojiStatus","toggleSavedGiftPinned","changeGiftVisibility","updateStarGiftPrice","closeGiftInfoModal","lang","oldLang","isSavedGift","savedGift","undefined","starGiftUniqueSlug","type","slug","starGiftUniqueLink","userCollectibleStatus","find","status","currenUniqueEmojiStatusSlug","isGiftUnique","canTakeOff","canWear","giftResalePrice","resellPrice","hasPinOptions","isUnsaved","handleTriggerVisibility","inputGift","shouldUnsave","handleCopyLink","message","handleLinkShare","text","handleTransfer","canTransferAt","key","variables","date","handleSell","canResellAt","handleUnsell","price","currency","amount","nanos","icon","title","number","handleWear","emojiStatus","handleTakeOff","documentId","handleTogglePin","children","isPinned","onClick","Boolean","getGiftAttributes","REM","AnimatedIconFromSticker","Avatar","Icon","RadialPatternBackground","styles","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","peer","giftAttributes","className","root","giftPreview","backdrop","backgroundColors","centerColor","edgeColor","patternIcon","pattern","sticker","ringsCount","ovalFactor","patternSize","size","model","name","arrow","avatar","getPeerTitle","formatDateTimeToString","renderTextWithEntities","Link","renderGiftOriginalInfo","originalDetails","recipient","sender","onOpenChat","recipientId","senderId","formattedDate","code","recipientLink","isPrimary","withNodes","senderLink","id","useState","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","isDeletedUser","isUserBot","filterPeersByQuery","unique","sortChatIds","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredUserIds","ids","query","filter","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","useCurrentOrPrev","Sparkles","PremiumFeaturePreviewVideo","Button","TableAboutModal","modal","closeAboutStarGiftModal","renderingModal","handleClose","header","videoPreviewWrapper","preset","sparkles","videoId","videoThumbnail","isActive","isDown","subtitle","footer","iconName","iconClassName","understoodIcon","listItemData","contentClassName","content","hasBackdrop","absoluteCloseButtonColor","useEffect","MAIN_THREAD_ID","isApiPeerUser","selectPeer","selectPeerPaidMessagesStars","selectTabState","selectTheme","selectThemeValues","selectUserFullInfo","buildClassName","buildStyle","formatCountdown","HOUR","formatCurrency","formatStarsAsIcon","useCustomBackground","PremiumProgress","ActionMessage","ListItem","Switcher","TextArea","TextTimer","LIMIT_DISPLAY_THRESHOLD","TEXT_TIMER_THRESHOLD","GiftComposer","giftByStars","captionLimit","theme","isBackgroundBlurred","patternColor","backgroundColor","customBackground","isPaymentFormLoading","starBalance","paidMessagesStars","areUniqueStarGiftsDisallowed","shouldDisallowLimitedStarGifts","giftAuction","sendStarGift","sendPremiumGiftByStars","openInvoice","openGiftUpgradeModal","openStarsBalanceModal","openGiftAuctionBidModal","openGiftAuctionInfoModal","openGiftAuctionChangeRecipientModal","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","isStarGift","isPremiumGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","chatId","isOutgoing","Math","floor","Date","now","action","mediaType","days","months","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleLearnMoreClick","auctionGiftId","handleMainButtonClick","existingBidPeerId","userState","bidPeerId","oldPeerId","newPeerId","shouldUpgrade","userId","option","canUseStarsPayment","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","stars","switcherStarIcon","checked","description","link","withMarkdown","disabled","receiver","renderFooter","asFont","giftsPerRound","auctionEndDate","state","endDate","auctionTimeLeft","shouldUseTextTimer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","bottomDescription","pluralValue","mainButton","isLoading","noForcedUpperCase","buttonSubtitle","time","endsAt","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","threadId","appearanceOrder","spacer","isBlurred","userFullInfo","isGiftForSelf","disallowedGifts","shouldDisallowUniqueStarGifts","tabState","isAuction","giftAuctionByGiftId","balance","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","GiftRibbon","GiftItemPremium","canPlayAnimatedEmojis","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","buy","color","pill","fluid","starsPriceBlock","starsPriceIcon","percent","useRef","TON_CURRENCY_CODE","selectIsCurrentUserPremium","IS_TOUCH_ENV","formatTonAsIcon","getStickerFromGift","useFlag","useOnIntersect","StickerView","GiftItemStar","isResale","isCurrentUserPremium","withTransferBadge","hideBadge","noClickable","observeIntersection","openGiftInfoModal","openPremiumModal","checkCanSendGift","openGiftAuctionModal","ref","stickerRef","getPriceAmount","amounts","resaleTonOnly","tonAmount","starsAmount","isVisible","setIsVisible","isHover","markHover","unmarkHover","uniqueGift","regularGift","priceInfo","priceCurrency","resellMinStars","formattedPrice","isLimited","isSoldOut","isPremiumRequired","requirePremium","isUserLimitReached","limitedPerUser","perUserRemains","perUserTotal","options","isLocked","onSuccess","radialPatternBackdrop","backdropColors","radialPattern","giftNumber","lockedUntilDate","giftRibbon","entry","visible","isIntersecting","badgeContent","shouldConvertFromNanos","star","starGift","premiumRequired","auction","onMouseEnter","onMouseLeave","stickerWrapper","observeIntersectionForPlaying","observeIntersectionForLoading","containerRef","shouldLoop","shouldPreloadPreview","transferBadge","withSparkleEffect","lockIcon","getUserFullName","isApiPeerChat","throttle","useIntersectionObserver","InteractiveSparkles","SafeLink","InfiniteScroll","Modal","Transition","BalanceBlock","GiftModalResaleScreen","GiftResaleFilters","StarGiftCategoryList","INTERSECTION_THROTTLE","SCROLL_THROTTLE","AVATAR_SPARKLES_CENTER_SHIFT","CATEGORY_LIST_STICKY_TOP","runThrottledForScroll","cb","starGiftsById","starGiftIdsByCategory","myUniqueGiftsById","myUniqueGiftIds","resaleGiftsCount","areResaleGiftsLoading","selectedResaleGift","tabId","closeGiftModal","resetResaleGifts","loadResaleGifts","openGiftInMarket","closeResaleGiftsMarket","loadMyUniqueGifts","openGiftTransferConfirmModal","setGiftModalSelectedGift","dialogRef","transitionRef","giftHeaderRef","categoryListRef","scrollerRef","renderingPeer","chat","forPeerId","selectedGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","selectedCategory","setSelectedCategory","isCategoryListPinned","pinCategoryList","unpinCategoryList","triggerSparklesRef","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","Object","values","every","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","areLimitedStarGiftsDisallowed","allGifts","gifts","filteredGifts","sort","prevGift","giftsByStars","mapGifts","Map","forEach","starsGift","set","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","isResaleScreen","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","regularGiftId","handleScroll","currentTarget","scrollTop","current","top","headerTop","getBoundingClientRect","transitionTop","listTop","scrollerTop","giftPremiumDescription","url","starGiftDescription","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","handleMyGiftClick","handleLoadMore","renderStarGifts","starGiftsContainer","items","onLoadMore","scrollContainerClosest","main","itemSelector","map","filteredGiftIds","availabilityResale","flatMap","shouldShowResale","shouldDuplicateAsResale","elements","push","renderPremiumGifts","premiumGiftsGallery","get","onCategoryChanged","category","handleCloseModal","handleCloseButtonClick","handleAvatarMouseMove","handleRequestAnimation","animate","renderMainScreen","onScroll","avatars","onMouseMove","logoBackground","centerShift","onRequestAnimation","hasMyUnique","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","renderHeader","isFirstLoading","resaleHeaderContentContainer","resaleHeaderText","resaleHeaderDescription","commonHeaderText","isSlim","modalDialog","isLowStackPriority","closeButton","round","ariaLabel","withAddButton","resaleHeader","hiddenHeader","noBorder","slideClassName","headerSlide","transition","onGiftClick","starGifts","resaleGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","myUniqueGifts","RESALE_GIFTS_LIMIT","LOCAL_TGS_URLS","useInfiniteScroll","AnimatedIconWithPreview","resellGifts","areGiftsAllLoaded","areGiftsLoading","updateIteration","updateResaleGiftsFilter","resellGiftsIds","g","hasFilter","modelAttributes","patternAttributes","backdropAttributes","handleLoadMoreResellGifts","isGiftsEmpty","viewportIds","handleResetGiftsFilter","renderNothingFoundGiftsWithFilter","notFoundGiftsRoot","tgsUrl","SearchingDuck","notFoundGiftsDescription","notFoundGiftsLink","resaleScreenRoot","resaleStarGiftsContainer","noFastList","preloadBackwards","isAllLoaded","useCallback","useContextMenuHandlers","Menu","SearchInput","ResaleGiftMenuAttributeSticker","attributes","counters","searchModelQuery","setSearchModelQuery","searchBackdropQuery","setSearchBackdropQuery","searchPatternQuery","setSearchPatternQuery","filteredAttributes","counter","attribute","found","attr","backdropId","filteredAndSearchedAttributes","filterBySearch","trim","item","toLowerCase","includes","sortMenuRef","isContextMenuOpen","isSortContextMenuOpen","contextMenuAnchor","sortContextMenuAnchor","handleContextMenu","handleSortContextMenu","handleContextMenuClose","handleSortContextMenuClose","handleContextMenuHide","handleSortContextMenuHide","getSortMenuElement","modelMenuRef","isModelContextMenuOpen","modelContextMenuAnchor","handleModelContextMenu","handleModelContextMenuClose","handleModelContextMenuHide","getModelMenuElement","backdropMenuRef","isBackdropContextMenuOpen","backdropContextMenuAnchor","handleBackdropContextMenu","handleBackdropContextMenuClose","handleBackdropContextMenuHide","getBackdropMenuElement","patternMenuRef","isPatternContextMenuOpen","patternContextMenuAnchor","handlePatternContextMenu","handlePatternContextMenuClose","handlePatternContextMenuHide","getPatternMenuElement","SortMenuButton","sortType","onTrigger","isMenuOpen","itemIcon","ModelMenuButton","attributesCount","BackdropMenuButton","PatternMenuButton","handleSortMenuItemClick","handleSelectedAllModelsClick","handleSelectedAllPatternsClick","handleSelectedAllBackdropsClick","handleModelMenuItemClick","modelAttribute","some","updatedAttributes","handlePatternMenuItemClick","patternAttribute","handleBackdropMenuItemClick","backdropAttribute","renderSortMenuItems","menuItemText","menuItemIcon","renderSortMenu","anchor","menu","left","getMenuElement","autoClose","onCloseAnimationEnd","positionX","handleSearchModelInputReset","handleSearchBackdropInputReset","handleSearchPatternInputReset","handleSearchInputClick","stopPropagation","preventDefault","modelMenuItemsContainerRef","renderModelMenuItems","models","selectedAttributes","isSelectedAll","menuContentContainer","search","onReset","placeholder","isSelected","menuItemStickerText","renderModelMenu","renderBackdropMenuItems","backdrops","backdropAttributeMenuItemText","renderBackdropMenu","right","renderPatternMenuItems","patterns","renderPatternMenu","buttonsContainer","useDynamicColorListener","ATTRIBUTE_STICKER_SIZE","customColor","thumbClassName","thumb","useHorizontalScroll","externalRef","hasCollectible","collectible","handleItemClick","renderCategoryName","renderCategoryItem","selectedItem","list","pinned","formatStarsAsText","TableInfoModal","closeStarGiftPriceDecreaseInfoModal","tableData","prices","containerClassName","starIconContainer","footerText","currentPrice","minPrice","maxPrice","floatingBadgeText","floatingBadgeIcon","isInverted","shouldSkipGradient","headerTitle","headerHint","tableClassName","table","formatStarsTransactionAmount","useTransitionActiveKey","useAppLayout","StarIcon","UniqueGiftManageButtons","STICKER_SIZE","UniqueGiftHeader","badge","subtitlePeer","showManageButtons","openChat","isMobile","isGiftHover","markGiftHover","unmarkGiftHover","subtitleColor","textColor","canvasClassName","radialPatternCanvas","yPosition","maxRadius","withManageButtons","withBadge","transitionSlide","direction","subtitleBadge","selectUser","giftInfoModal","currentUniqueEmojiStatusSlug","handleUnlist","manageButtons","iconAlignment","manageButton","currentUser","statuses","useScrollNotch","BadgeButton","TableInfo","acquiredGifts","giftTitle","giftSticker","closeGiftAuctionAcquiredModal","renderingGifts","renderingGiftTitle","renderingGiftSticker","giftItems","giftHeader","bidValue","bidAmount","starIcon","position","giftsCount","selector","giftsList","isBottomNotch","isCondensedHeader","giftsListContainer","okButton","giftAuctionAcquiredModal","renderText","AnimatedCounter","FullNameTitle","ConfirmDialog","InputText","StarSlider","DEFAULT_BID_AMOUNT","MAX_BID_AMOUNT_STEP","MAX_CUSTOM_BID_AMOUNT","BID_ROUNDING_STEP","MIN_SLIDER_PROGRESS","DEFAULT_TOP_BIDDERS_COUNT","auctionState","currentUserPeer","topBidderIds","closeGiftAuctionBidModal","sendStarGiftAuctionBid","loadGiftAuction","renderingAuctionState","renderingTopBidderIds","renderingTopBidderPeers","topBidder1","topBidder2","topBidder3","topBidder1Key","topBidder2Key","topBidder3Key","activeState","selectedBidAmount","setSelectedBidAmount","isCustomBidModalOpen","openCustomBidModal","closeCustomBidModal","customBidValue","setCustomBidValue","baseMinBid","minBidAmount","currentMinBid","sliderMaxValue","nextRoundAt","bidDifference","isAtMaxValue","sliderSecondaryText","handleAmountChange","handleTimerEnd","handleRequestCustomValue","handleBadgeClick","handleCustomBidChange","replace","numValue","Number","handleCustomBidSubmit","resultValue","isUpdateBid","handleSubmit","userPosition","bidLevels","userBidDate","bidDate","MAX_SAFE_INTEGER","level","pos","renderInfoCards","infoCards","infoCard","infoCardValue","infoCardLabel","shouldShowZeroOnEnd","onEnd","giftsLeft","isWinning","renderCurrentBidSectionTitle","nextGiftNum","lastGiftNum","sectionTitleTransition","bidderInfoSlide","winningStatus","winningText","winningBadge","sectionTitle","renderUserBid","section","bidderRow","bidderPosition","bidderInfo","bidderName","bidderAmount","renderTopBidderRow","index","emoji","topBidderRow","topBidderPosition","renderTopWinners","topCount","hasAbsoluteCloseButton","headerControlPanel","modalBalance","slider","defaultValue","minValue","minAllowedValue","minAllowedProgress","maxValue","floatingBadgeDescription","onBadgeClick","onCustomValueClick","shouldUseDynamicColor","shouldAllowCustomValue","buttonStar","confirmLabel","isConfirmDisabled","confirmHandler","customBidInput","customBidInputIcon","inputMode","teactExperimentControlled","giftAuctionBidModal","topBidders","oldPeer","newPeer","closeGiftAuctionChangeRecipientModal","renderingOldPeer","renderingNewPeer","handleConfirm","preview","closeGiftAuctionInfoModal","iconWrapper","giftAuctionInfoModal","getRandomGiftPreviewAttributes","preloadGiftAttributeStickers","useInterval","PREVIEW_UPDATE_INTERVAL","closeGiftAuctionModal","openGiftAuctionAcquiredModal","openAboutStarGiftModal","openUrl","isFinished","previewAttributes","setPreviewAttributes","shouldUseUniqueHeader","uniqueHeaderRef","updatePreviewAttributes","sampleAttributes","handleLearnMoreAboutGiftsClick","handleItemsBoughtClick","handleJoinClick","shouldKeepAuction","auctionLink","auctionSlug","handleShareLink","handleOpenFragment","fragmentListedUrl","handleOpenTelegramMarket","uniqueHeader","learnMoreLink","regularHeader","finishedBadge","giftName","modalData","startDate","total","currentRound","totalRounds","averagePrice","acquiredCount","canBuyOnFragment","fragmentListedCount","canBuyOnTelegram","listedCount","itemsBoughtLink","itemsBoughtSticker","footerButton","moreMenuItems","modalContent","closeButtonColor","giftAuctionModal","getHasAdminRight","getMainUsername","formatTonAsText","CUSTOM_PEER_HIDDEN","formatPercent","Checkbox","fromPeer","targetPeer","releasedByPeer","starGiftMaxConvertPeriod","hasAdminRights","tonExplorerUrl","recipientPeer","convertGiftToStars","openChatWithInfo","focusMessage","buyStarGift","openGiftInfoValueModal","openGiftDescriptionRemoveModal","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","shouldPayInTon","setShouldPayInTon","uniqueGiftHeaderRef","handleSymbolClick","handleBackdropClick","handleModelClick","renderingFromPeer","renderingTargetPeer","isTargetChat","isSender","canConvertDifference","conversionLeft","hasConvertOption","giftSubtitle","releasedByUsername","ownerTitle","fallbackText","owner","selfCollectibleStatus","isSelfUnique","canFocusUpgrade","upgradeMsgId","ownerId","getResalePrice","isInTon","confirmPrice","resellPriceInStars","canBuyGift","giftOwnerTitle","ownerName","handleFocusUpgraded","giftChat","messageId","handleConvertToStars","handleRemoveMessage","dropOriginalDetailsStars","details","handleOpenUpgradeModal","giftOwnerId","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","handleOpenValueModal","renderFooterButton","buyButton","footerHint","isShiny","upgradeIcon","prepaidUpgradeHash","saleDateInfo","firstSaleDate","lastSaleDate","isConverted","canConvert","isVisibleForMe","isWarningDescription","isRefunded","getTitle","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","uniqueGiftHeader","warningDescription","hasFrom","unknown","titleKey","starsValue","giftValue","starAmountIcon","ownerAddress","ownerPeer","copyIcon","withEmojiStatus","uniqueAttribute","attributeName","rarityPercent","issued","issuedCount","totalCount","valueAmount","valueCurrency","formattedValue","uniqueValue","messageContainer","removeMessageButton","tonLink","giftAddress","footerDescription","shouldSkipModal","withBalanceBar","currencyInBalanceBar","noDefaultTitle","descriptionConfirm","titleConfirm","checkBox","onCheck","checkBoxDescription","releasedByPeerId","formatShortDuration","closeLockedGiftModal","getMessageText","untilDate","timeRemaining","relativeDate","reason","headerClassName","senderPeer","closeGiftDescriptionRemoveModal","removeGiftDescription","renderingSenderPeer","renderingRecipientPeer","openChatHandler","confirmText","giftDescription","selectStarsGiftResaleCommission","selectTonGiftResaleCommission","convertTonToUsd","formatCurrencyAmountAsText","PRICE_WARNING_THRESHOLD_PERCENT","starsCommission","tonCommission","starsUsdRate","tonUsdRate","closeGiftOfferAcceptModal","acceptStarGiftOffer","renderingBuyerPeer","isPriceInTon","commission","priceAmount","receiveAmount","data","attributeValue","priceWarning","valueUsdAmount","avgValueUsd","receiveValueUsd","isLower","isLow","buyerName","formattedReceiveAmountAsText","formattedReceiveAmountAsIcon","receiveText","warning","success","starsUsdSellRateX1000","selectCanGift","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectedId","forceShowSelf","convertTonFromNanos","convertTonToNanos","starsResaleAmountMin","starsResaleAmountMax","starsUsdWithdrawRate","tonResaleAmountMin","tonResaleAmountMax","closeGiftResalePriceComposerModal","setPrice","setIsPriceInTon","hasPrice","handleChangePrice","parseFloat","maxAmount","result","isNaN","min","handleSellGift","minAmount","isPriceCorrect","inputPrice","inputPriceDescription","priceWithCommission","toFixed","descriptionPrice","starsStargiftResaleAmountMin","starsStargiftResaleAmountMax","starsUsdWithdrawRateX1000","tonStargiftResaleAmountMin","maxTonFromConfig","tonStargiftResaleAmountMax","useCustomEmoji","closeGiftStatusInfoModal","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","profileBlock","userTitle","noFake","noVerified","infoDescription","selectedPeer","closeGiftTransferConfirmModal","transferGift","closeGiftTransferModal","renderingSelectedPeer","transferStars","ALL_FOLDER_ID","MEMO_EMPTY_ARRAY","useFolderManagerForOrderedIds","usePeerSearch","contactIds","openGiftWithdrawModal","orderedChatIds","sortedLocalIds","foundIds","currentResultsQuery","categories","isCustomPeer","avatarIcon","peerColorId","handleCategoryChange","displayIds","handlePeerSelect","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","closeGiftUpgradeModal","upgradeGift","upgradePrepaidGift","openStarGiftPriceDecreaseInfoModal","shiftGiftUpgradeNextPrice","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","isPrepaid","nextPrice","nextPrices","nextPriceDate","currentUpgradeStars","handleUpgrade","hash","handleOpenPriceInfo","formattedPriceElement","userName","hasPriceDecreaseInfo","buttonContent","priceDecreaseTimer","timer","formatDateToString","HEADER_STICKER_SIZE","FOOTER_STICKER_SIZE","closeGiftInfoValueModal","valueInfo","initialSaleDate","initialPrice","initialSaleStars","initialSalePrice","lastSalePrice","floorPrice","hasFooter","isText","footerSticker","SettingsScreens","getDays","PasswordForm","FRAGMENT_PEER","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","max","password","handleSetUpPassword","screen","TwoFaDisabled","exportHint","noPassword","shouldShowSubmit","error","errorKey","withRegular","onClearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","settings","byKey","twoFaSettings","STARS_ICON_PLACEHOLDER","selectChat","selectChatMessage","formatInteger","PeerBadge","DropdownMenu","Separator","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","defaultPrivacy","sendPaidReactionsAsPeerIds","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","handleShowInTopSendersChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","itemInfo","itemTitle","itemSubtitle","SendAsPeerMenuButton","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","trigger","all","hasCurrentSender","myReactorAmount","isCurrentReactor","localAmount","a","b","slice","chatTitle","sendAsPeersMenuContainer","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","separator","specialReplacement","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","usePrevious","useResizeObserver","DEFAULT_POINTS","LARGE_STEP","THUMB_SIZE","CORNER_BEAK_WIDTH","DEFAULT_BEAK_WIDTH","BEAK_HEIGHT","BEAK_OFFSET_END","TIP_OFFSET_END","BEAK_TIP_PADDING","BADGE_HORIZONTAL_PADDING","BADGE_ICON_SIZE","BADGE_TITLE_GAP","DRAG_DISTANCE_THRESHOLD","BADGE_WIDTH_DELTA","textMeasureCanvas","getTextWidth","font","document","createElement","ctx","getContext","measureText","width","SLIDER_COLORS","getColorForProgress","minValueProp","floatingBadgeContentRef","baseMinValue","actualMinValue","low","high","mid","testPoints","buildPoints","testProgress","getProgress","normalizedProgress","points","setValue","containerWidth","setContainerWidth","badgeWidth","setBadgeWidth","isDragging","setIsDragging","startXRef","prevBadgeWidth","getValue","minSliderProgress","titleEl","querySelector","floatingBadgeTitle","computedStyle","getComputedStyle","fontWeight","fontSize","fontFamily","textWidth","titleWidth","descriptionEl","descriptionWidth","scrollWidth","contentWidth","newBadgeWidth","currentWidth","abs","handleContainerResize","contentRect","minBadgeX","maxBadgeX","beakOffset","beakTipOffset","beakWidth","currentBeakWidth","calcBadgePosition","beakPath","generateBeakPath","handleChange","event","rawValue","clampedValue","handlePointerDown","clientX","handlePointerMove","distance","handlePointerUp","rect","clickZoneWidth","isInIconArea","dynamicColor","badgeStyle","rootStyle","dragging","floatingBadgeWrapper","floatingBadge","clickable","noTransition","floatingBadgeSparkles","floatingBadgeContent","withDescription","floatingBadgeTriangle","height","viewBox","fill","x1","x2","y1","y2","offset","floatingBadgeTrianglePath","d","step","onPointerDown","onPointerMove","onPointerUp","customValueIcon","i","lastPoint","stepsNeeded","nextPoint","pointIndex","findIndex","point","prevPoint","halfBadgeWidth","cornerBeakHalfWidth","maxBeakOffset","thumbHalf","trackLength","distanceFromLeft","distanceFromRight","isLeftSide","distanceToEdge","beakOffsetStart","t","tExp","maxTipOffset","TIP_RADIUS","clampedTipOffset","tipOffset","tipX","r","y","getCurrentTabId","tonBalance","actions","directInfo","closePriceConfirmModal","newAmount","isTon","currentBalance","sendStarPaymentForm","originalAmount","originalAmountText","newAmountText","ton","formatStarsAmount","convertCurrencyFromBaseUnit","renderStarsAmount","addStarsButton","addStarsIcon","renderTonAmount","balanceBlock","balanceInfo","smallerText","balanceBottom","PAID_MESSAGES_PURPOSE","getChatTitle","selectIsPremiumPurchaseBlocked","selectSharedSettings","resolveTransitionName","TabList","ParticlesHeader","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","HEADER_HEIGHT","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","tonBalanceState","canBuyPremium","shouldForceHeight","tonTopupUrl","animationLevel","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","currentState","history","subscriptions","isHeaderHidden","setHeaderHidden","areTabsPinned","pinTabs","unpinTabs","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","tabsRef","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","modalHeight","transactionCount","transactionTabs","tosText","parts","split","renderStarsHeaderSection","starButton","openStarsGiftingPickerModalHandler","topupOptions","handleBuyStars","renderTonHeaderSection","tonBalanceContainer","tonIconBalance","tonInUsd","topUpButton","handleTonTopUp","tabsTop","handleLoadMoreTransactions","handleLoadMoreSubscriptions","originPaymentInputInvoice","inputInvoice","spendPurposePeerId","minimal","dialogStyle","noSeparator","starHeaderText","tos","subscription","nextOffset","loadMore","loadMoreIcon","lastSection","isRtl","renderCount","shouldRestoreHeight","noScrollRestoreOnTop","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","PeerChip","PaidMediaThumb","StarsBackground","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","markLoading","unmarkLoading","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","src","alt","draggable","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeChatRefundModal","toggleNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","StarLogo","closeStarsGiftModal","requestConfetti","selectedOption","setSelectedOption","showConfetti","dialog","withStars","isCompleted","handleClick","renderGiftTitle","bottomText","headerInfo","logo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","shouldUseCustomPeer","getTransactionTitle","paidMessages","isGiftResale","isNegativeAmount","isPostsSearch","isDropOriginalDetails","isPrepaidUpgrade","isStarGiftAuctionBid","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","customPeer","currencyAmount","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","subscriptionStar","info","webPhoto","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","reverse","arr","realIndex","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","video","mediaHash","mediaBlob","blurry","full","CUSTOM_PEER_PREMIUM","selectOptionalPeer","openStarsTransactionModal","transactionPeer","isUniqueGift","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","amountColorClass","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","selectGiftStickerForTon","StarsTransactionModal","topSticker","paidMessageCommission","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","refunded","peerLabel","totalStars","tid","footerTextParts","buttonText","starsPaidMessageCommissionPermille","starsGiftSticker"],"sourceRoot":""}